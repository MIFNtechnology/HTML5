(function(){'use strict';const exports=Object.create(null);function require(p){return p.split(".").reduce(function re(o,i){return o[i];},exports);}

!function(e,t){e.bs=e.bs||{},e.bs.net=e.bs.net||{},e.bs.player=e.bs.player||{},e.bs.player.composer=e.bs.player.composer||{},e.bs.player.core=e.bs.player.core||{},e.bs.player.core.events=e.bs.player.core.events||{},e.bs.player.core.manager=e.bs.player.core.manager||{},e.bs.player.core.model=e.bs.player.core.model||{},e.bs.player.core.plugin=e.bs.player.core.plugin||{},e.bs.player.core.plugin.chromecast=e.bs.player.core.plugin.chromecast||{},e.bs.player.core.vtt=e.bs.player.core.vtt||{},e.bs.util=e.bs.util||{},e.haxe=e.haxe||{},e.haxe.http=e.haxe.http||{},e.haxe.io=e.haxe.io||{},e.haxe.crypto=e.haxe.crypto||{},e.haxe.ds=e.haxe.ds||{},e.haxe.ds._List=e.haxe.ds._List||{},e.haxe.ds._StringMap=e.haxe.ds._StringMap||{},e.haxe.iterators=e.haxe.iterators||{};var s,n=function(){return Ot.__string_rec(this,"")},r=r||{};class a{constructor(e,t){this.r=new RegExp(e,t.split("u").join(""));}match(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m}matched(e){if(null!=this.r.m&&e>=0&&e<this.r.m.length)return this.r.m[e];throw Ze.thrown("EReg::matched")}matchedLeft(){if(null==this.r.m)throw Ze.thrown("No string matched");return l.substr(this.r.s,0,this.r.m.index)}matchedRight(){if(null==this.r.m)throw Ze.thrown("No string matched");let e=this.r.m.index+this.r.m[0].length;return l.substr(this.r.s,e,this.r.s.length-e)}matchedPos(){if(null==this.r.m)throw Ze.thrown("No string matched");return {pos:this.r.m.index,len:this.r.m[0].length}}matchSub(e,t,s){if(null==s&&(s=-1),this.r.global){this.r.lastIndex=t,this.r.m=this.r.exec(s<0?e:l.substr(e,0,t+s));let n=null!=this.r.m;return n&&(this.r.s=e),n}{let n=this.match(s<0?l.substr(e,t,null):l.substr(e,t,s));return n&&(this.r.s=e,this.r.m.index+=t),n}}split(e){return e.replace(this.r,"#__delim__#").split("#__delim__#")}replace(e,t){return e.replace(this.r,t)}map(e,t){let s=0,n="";do{if(s>=e.length)break;if(!this.matchSub(e,s)){n+=u.string(l.substr(e,s,null));break}let r=this.matchedPos();n+=u.string(l.substr(e,s,r.pos-s)),n+=u.string(t(this)),0==r.len?(n+=u.string(l.substr(e,r.pos,1)),s=r.pos+1):s=r.pos+r.len;}while(this.r.global);return !this.r.global&&s>0&&s<e.length&&(n+=u.string(l.substr(e,s,null))),n}static escape(e){return e.replace(a.escapeRe,"\\$&")}}e.haxe.EReg=a,a.__name__="EReg",Object.assign(a.prototype,{__class__:a,r:null});class l{static dateStr(e){let t=e.getMonth()+1,s=e.getDate(),n=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(s<10?"0"+s:""+s)+" "+(n<10?"0"+n:""+n)+":"+(r<10?"0"+r:""+r)+":"+(a<10?"0"+a:""+a)}static strDate(e){switch(e.length){case 8:let t=e.split(":"),s=new Date;return s.setTime(0),s.setUTCHours(t[0]),s.setUTCMinutes(t[1]),s.setUTCSeconds(t[2]),s;case 10:let n=e.split("-");return new Date(n[0],n[1]-1,n[2],0,0,0);case 19:let r=e.split(" "),a=r[0].split("-"),l=r[1].split(":");return new Date(a[0],a[1]-1,a[2],l[0],l[1],l[2]);default:throw Ze.thrown("Invalid date format : "+e)}}static cca(e,t){let s=e.charCodeAt(t);if(s==s)return s}static substr(e,t,s){if(null==s)s=e.length;else if(s<0){if(0!=t)return "";s=e.length+s;}return e.substr(t,s)}static indexOf(e,t,s){let n=e.length;for(s<0&&(s+=n)<0&&(s=0);s<n;){if(e[s]===t)return s;++s;}return -1}static lastIndexOf(e,t,s){let n=e.length;for(s>=n?s=n-1:s<0&&(s+=n);s>=0;){if(e[s]===t)return s;--s;}return -1}static remove(e,t){let s=e.indexOf(t);return -1!=s&&(e.splice(s,1),!0)}static iter(e){return {cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}}static keyValueIter(e){return new bt(e)}static now(){return Date.now()}}e.haxe.HxOverrides=l,l.__name__="HxOverrides";class i{static array(e){let t=[],s=Et(e);for(;s.hasNext();)t.push(s.next());return t}static list(e){let t=new it,s=Et(e);for(;s.hasNext();)t.add(s.next());return t}static map(e,t){let s=[],n=Et(e);for(;n.hasNext();)s.push(t(n.next()));return s}static mapi(e,t){let s=0,n=[],r=Et(e);for(;r.hasNext();)n.push(t(s++,r.next()));return n}static flatten(e){let t=[],s=Et(e);for(;s.hasNext();){let e=Et(s.next());for(;e.hasNext();)t.push(e.next());}return t}static flatMap(e,t){let s=[],n=Et(e);for(;n.hasNext();)s.push(t(n.next()));let r=[],a=Et(s);for(;a.hasNext();){let e=Et(a.next());for(;e.hasNext();)r.push(e.next());}return r}static has(e,t){let s=Et(e);for(;s.hasNext();)if(s.next()==t)return !0;return !1}static exists(e,t){let s=Et(e);for(;s.hasNext();)if(t(s.next()))return !0;return !1}static foreach(e,t){let s=Et(e);for(;s.hasNext();)if(!t(s.next()))return !1;return !0}static iter(e,t){let s=Et(e);for(;s.hasNext();)t(s.next());}static filter(e,t){let s=[],n=Et(e);for(;n.hasNext();){let e=n.next();t(e)&&s.push(e);}return s}static fold(e,t,s){let n=Et(e);for(;n.hasNext();)s=t(n.next(),s);return s}static foldi(e,t,s){let n=0,r=Et(e);for(;r.hasNext();)s=t(r.next(),s,n),++n;return s}static count(e,t){let s=0;if(null==t){let t=Et(e);for(;t.hasNext();)t.next(),++s;}else {let n=Et(e);for(;n.hasNext();)t(n.next())&&++s;}return s}static empty(e){return !Et(e).hasNext()}static indexOf(e,t){let s=0,n=Et(e);for(;n.hasNext();){if(t==n.next())return s;++s;}return -1}static find(e,t){let s=Et(e);for(;s.hasNext();){let e=s.next();if(t(e))return e}return null}static findIndex(e,t){let s=0,n=Et(e);for(;n.hasNext();){if(t(n.next()))return s;++s;}return -1}static concat(e,t){let s=[],n=Et(e);for(;n.hasNext();)s.push(n.next());let r=Et(t);for(;r.hasNext();)s.push(r.next());return s}}e.haxe.Lambda=i,i.__name__="Lambda",Math.__name__="Math";class o{static hasField(e,t){return Object.prototype.hasOwnProperty.call(e,t)}static field(e,t){try{return e[t]}catch(e){return null}}static setField(e,t,s){e[t]=s;}static getProperty(e,t){let s;if(null==e)return null;{let n;return e.__properties__?(s=e.__properties__["get_"+t],n=s):n=!1,n?e[s]():e[t]}}static setProperty(e,t,s){let n,r;e.__properties__?(n=e.__properties__["set_"+t],r=n):r=!1,r?e[n](s):e[t]=s;}static callMethod(e,t,s){return t.apply(e,s)}static fields(e){let t=[];if(null!=e){let n=Object.prototype.hasOwnProperty;for(var s in e)"__id__"!=s&&"hx__closures__"!=s&&n.call(e,s)&&t.push(s);}return t}static isFunction(e){return "function"==typeof e&&!(e.__name__||e.__ename__)}static compare(e,t){return e==t?0:e>t?1:-1}static compareMethods(e,t){return e==t}static isObject(e){if(null==e)return !1;let t=typeof e;return "string"==t||"object"==t&&null==e.__enum__||"function"==t&&null!=(e.__name__||e.__ename__)}static isEnumValue(e){return null!=e&&null!=e.__enum__}static deleteField(e,t){return !!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)}static copy(e){if(null==e)return null;let t={},s=0,n=o.fields(e);for(;s<n.length;){let r=n[s];++s,t[r]=o.field(e,r);}return t}static makeVarArgs(e){return function(){let t=arguments,s=Array.prototype.slice.call(t);return e(s)}}}e.haxe.Reflect=o,o.__name__="Reflect";class u{static string(e){return Ot.__string_rec(e,"")}static parseInt(e){let t=parseInt(e);return isNaN(t)?null:t}static random(e){return e<=0?0:Math.floor(Math.random()*e)}}u.__name__="Std";class c{constructor(){this.b="";}get_length(){return this.b.length}add(e){this.b+=u.string(e);}addChar(e){this.b+=String.fromCodePoint(e);}addSub(e,t,s){this.b+=null==s?l.substr(e,t,null):l.substr(e,t,s);}toString(){return this.b}}e.haxe.StringBuf=c,c.__name__="StringBuf",Object.assign(c.prototype,{__class__:c,b:null,__properties__:{get_length:"get_length"}});class _{}_.__name__="haxe.SysTools";class h{static urlEncode(e){return encodeURIComponent(e)}static urlDecode(e){return decodeURIComponent(e.split("+").join(" "))}static htmlEscape(e,t){let s="",n=0,r=e;for(;n<r.length;){let e=r,a=n++,l=e.charCodeAt(a);l>=55296&&l<=56319&&(l=l-55232<<10|1023&e.charCodeAt(a+1));l>=65536&&++n;let i=l;switch(i){case 34:s+=t?"&quot;":String.fromCodePoint(i);break;case 38:s+="&amp;";break;case 39:s+=t?"&#039;":String.fromCodePoint(i);break;case 60:s+="&lt;";break;case 62:s+="&gt;";break;default:s+=String.fromCodePoint(i);}}return s}static htmlUnescape(e){return e.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join('"').split("&#039;").join("'").split("&amp;").join("&")}static contains(e,t){return e.includes(t)}static startsWith(e,t){return e.startsWith(t)}static endsWith(e,t){return e.endsWith(t)}static isSpace(e,t){let s=l.cca(e,t);return s>8&&s<14||32==s}static ltrim(e){let t=e.length,s=0;for(;s<t&&h.isSpace(e,s);)++s;return s>0?l.substr(e,s,t-s):e}static rtrim(e){let t=e.length,s=0;for(;s<t&&h.isSpace(e,t-s-1);)++s;return s>0?l.substr(e,0,t-s):e}static trim(e){return h.ltrim(h.rtrim(e))}static lpad(e,t,s){if(t.length<=0)return e;let n="";for(s-=e.length;n.length<s;)n+=null==t?"null":""+t;return n+=null==e?"null":""+e,n}static rpad(e,t,s){if(t.length<=0)return e;let n="";for(n=null==e?"null":""+e;n.length<s;)n+=null==t?"null":""+t;return n}static replace(e,t,s){return e.split(t).join(s)}static hex(e,t){let s="";do{s="0123456789ABCDEF".charAt(15&e)+s,e>>>=4;}while(e>0);if(null!=t)for(;s.length<t;)s="0"+s;return s}static fastCodeAt(e,t){return e.charCodeAt(t)}static unsafeCodeAt(e,t){return e.charCodeAt(t)}static iterator(e){return new wt(e)}static keyValueIterator(e){return new vt(e)}static isEof(e){return e!=e}static quoteUnixArg(e){return ""==e?"''":new a("[^a-zA-Z0-9_@%+=:,./-]","").match(e)?"'"+h.replace(e,"'","'\"'\"'")+"'":e}static quoteWinArg(e,t){let s=e;if(!new a('^(/)?[^ \t/\\\\"]+$',"").match(s)){let e="",t=-1!=s.indexOf(" ")||-1!=s.indexOf("\t")||""==s||s.indexOf("/")>0;t&&(e+='"');let n=new c,r=0,a=s.length;for(;r<a;){let t=l.cca(s,r++);if(null==t){let s=t;n.b.length>0&&(e+=u.string(n.b),n=new c),e+=String.fromCodePoint(s);}else switch(t){case 34:let s=n.b;e+=u.string(s),e+=u.string(s),n=new c,e+='\\"';break;case 92:n.b+="\\";break;default:let r=t;n.b.length>0&&(e+=u.string(n.b),n=new c),e+=String.fromCodePoint(r);}}e+=u.string(n.b),t&&(e+=u.string(n.b),e+='"'),s=e;}if(t){let e="",t=0,n=s.length;for(;t<n;){let n=l.cca(s,t++);_.winMetaCharacters.indexOf(n)>=0&&(e+=String.fromCodePoint(94)),e+=String.fromCodePoint(n);}return e}return s}static utf16CodePointAt(e,t){let s=e.charCodeAt(t);return s>=55296&&s<=56319&&(s=s-55232<<10|1023&e.charCodeAt(t+1)),s}}e.haxe.StringTools=h,h.__name__="StringTools";class p{static createInstance(e,t){return new(Function.prototype.bind.apply(e,[null].concat(t)))}static getInstanceFields(e){let t=[];for(;null!=e;){let s=0,n=Object.getOwnPropertyNames(e.prototype);for(;s<n.length;){let e=n[s];switch(++s,e){case"__class__":case"__properties__":case"constructor":break;default:-1==t.indexOf(e)&&t.push(e);}}e=e.__super__;}return t}}p.__name__="Type";class d{static error(e){console.error(e);}}d.__name__="bs.Console";class g{constructor(e){g._hx_skip_constructor||this._hx_constructor(e);}_hx_constructor(e){this.url=e,this.headers=[],this.params=[],this.emptyOnData=St(this,this.onData);}setHeader(e,t){let s=0,n=this.headers.length;for(;s<n;){let n=s++;if(this.headers[n].name==e)return void(this.headers[n]={name:e,value:t})}this.headers.push({name:e,value:t});}addHeader(e,t){this.headers.push({name:e,value:t});}setParameter(e,t){let s=0,n=this.params.length;for(;s<n;){let n=s++;if(this.params[n].name==e)return void(this.params[n]={name:e,value:t})}this.params.push({name:e,value:t});}addParameter(e,t){this.params.push({name:e,value:t});}setPostData(e){this.postData=e,this.postBytes=null;}setPostBytes(e){this.postBytes=e,this.postData=null;}request(e){throw new mt(null,null,{fileName:"haxe/http/HttpBase.hx",lineNumber:186,className:"haxe.http.HttpBase",methodName:"request"})}onData(e){}onBytes(e){}onError(e){}onStatus(e){}hasOnData(){return St(this,this.onData)!=this.emptyOnData}success(e){this.responseBytes=e,this.responseAsString=null,this.hasOnData()&&this.onData(this.get_responseData()),this.onBytes(this.responseBytes);}get_responseData(){return null==this.responseAsString&&null!=this.responseBytes&&(this.responseAsString=this.responseBytes.getString(0,this.responseBytes.length,nt.UTF8)),this.responseAsString}}e.haxe.http.HttpBase=g,g.__name__="haxe.http.HttpBase",Object.assign(g.prototype,{__class__:g,url:null,responseBytes:null,responseAsString:null,postData:null,postBytes:null,headers:null,params:null,emptyOnData:null,__properties__:{get_responseData:"get_responseData"}});class m extends g{constructor(e){g._hx_skip_constructor=!0,super(),g._hx_skip_constructor=!1,this._hx_constructor(e);}_hx_constructor(e){this.async=!0,this.withCredentials=!1,super._hx_constructor(e);}cancel(){null!=this.req&&(this.req.abort(),this.req=null);}request(e){this.responseAsString=null,this.responseBytes=null,this.responseHeaders=null;let s=this.req=It.createXMLHttpRequest(),n=this,r=function(e){if(4!=s.readyState)return;let r;try{r=s.status;}catch(e){r=null;}if(0==r&&It.get_supported()&&null!=t.location){let e=t.location.protocol.toLowerCase();new a("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(e)&&(r=null!=s.response?200:404);}if(null==r&&(r=null),null!=r&&n.onStatus(r),null!=r&&r>=200&&r<400){n.req=null;let e=s.getAllResponseHeaders().split("\r\n"),t=[],r=0,a=e;for(;r<a.length;){let e=a[r];++r,""!=e&&t.push(e);}e=t,n.responseHeaders=new _t;let l=0;for(;l<e.length;){let t=e[l++].split(": "),s=t.shift(),r=1==t.length?t[0]:t.join(": ");r=h.ltrim(h.rtrim(r)),n.responseHeaders.h[s]=r;}n.success(st.ofData(s.response));}else if(null==r||0==r&&null==s.response)n.req=null,n.onError("Failed to connect or resolve host");else if(null==r){n.req=null;let e=null!=s.response?st.ofData(s.response):null;n.responseBytes=e,n.onError("Http Error #"+s.status);}else switch(r){case 12007:n.req=null,n.onError("Unknown host");break;case 12029:n.req=null,n.onError("Failed to connect to host");break;default:n.req=null;let e=null!=s.response?st.ofData(s.response):null;n.responseBytes=e,n.onError("Http Error #"+s.status);}};this.async&&(s.onreadystatechange=r);let l=this.postData,o=this.postBytes,c=null==l?null==o?null:new Blob([o.b.bufferValue]):null==o?l:null;if(null!=c)e=!0;else {let e=0,t=this.params;for(;e<t.length;){let s=t[e];++e,c=null==c?"":(null==c?"null":u.string(c))+"&";let n=s.name,r=(null==c?"null":u.string(c))+encodeURIComponent(n)+"=",a=s.value;c=r+encodeURIComponent(a);}}try{e?s.open("POST",this.url,this.async):null!=c?(s.open("GET",this.url+(this.url.split("?").length<=1?"?":"&")+(null==c?"null":u.string(c)),this.async),c=null):s.open("GET",this.url,this.async),s.responseType="arraybuffer";}catch(l){let e=Ze.caught(l).unwrap();return this.req=null,void this.onError(e.toString())}s.withCredentials=this.withCredentials,!i.exists(this.headers,(function(e){return "Content-Type"==e.name}))&&e&&null==this.postData&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");let _=0,p=this.headers;for(;_<p.length;){let e=p[_];++_,s.setRequestHeader(e.name,e.value);}s.send(c),this.async||r();}static requestUrl(e){let t=new m(e);t.async=!1;let s=null;return t.onData=function(e){s=e;},t.onError=function(e){throw Ze.thrown(e)},t.request(!1),s}}e.haxe.http.HttpJs=m,m.__name__="haxe.http.HttpJs",m.__super__=g,Object.assign(m.prototype,{__class__:m,async:null,withCredentials:null,responseHeaders:null,req:null});class y extends m{constructor(e){super(e);}registerEvents(e){let t=this;e.onreadystatechange=function(){if(4!=e.readyState)return;let s;try{s=e.status;}catch(e){s=null;}if(null==s&&(s=null),null!=s&&t.onStatus(s),null!=s&&s>=200&&s<400)t.onData(e.response);else if(null==s)t.onError("Failed to connect or resolve host");else switch(s){case 0:t.onError("Unable to make request (may be blocked due to cross-domain permissions)");break;case 12007:t.onError("Unknown host");break;case 12029:t.onError("Failed to connect to host");break;default:t.onError("Http Error #"+e.status);}};}customRequest(e,t,s,n){let r=new XMLHttpRequest;this.registerEvents(r);let a="",l=0,i=this.params;for(;l<i.length;){let e=i[l];++l,0!=a.length&&(a=u.string(a)+"&");let t=o.field(e,"name");null==t&&(t=o.field(e,"param"));let s=encodeURIComponent(t),n=e.value,r=encodeURIComponent(n);a=u.string(a)+(s+"=")+r;}try{"GET"==n&&null!=a&&""!=a?(r.open(n,this.url+(this.url.split("?").length<=1?"?":"&")+u.string(a),!0),a=""):r.open(n,this.url,!0);}catch(l){let e=Ze.caught(l).unwrap();return void this.onError(e.toString())}let c=0,_=this.headers;for(;c<_.length;){let e=_[c];++c;let t=o.field(e,"header");null==t&&(t=o.field(e,"name")),r.setRequestHeader(t,e.value);}r.send(a);}}e.bs.net.Http=y,y.__name__="bs.net.Http",y.__super__=m,Object.assign(y.prototype,{__class__:y});class f{constructor(){this.pluginsVideo=[],this.plugins=[],this.data=exports.configuration;}createPlayer(e,t,s){return null==e&&(e="PLAYER"),this.readPlugins(e),this.player=new w,this.player.uid=e,this.player.plugins=this.plugins,this.player.pluginsVideo=this.pluginsVideo,this.player.initialize(this.getParent(t),this.getData(s)),this.player}readPlugins(e){this.resolvePlugins(e,exports.bs.player.plugin);let t=function(e){switch(e.className){case"bs.player.plugin.advertisement.AdvertisementDataProvider":case"bs.player.plugin.dataProvider.BradmaxDataProvider":return 1;case"bs.player.plugin.skin.HtmlSkin":return 0;case"bs.player.plugin.freewheel.FreeWheel":case"bs.player.plugin.video.Video":return 2;default:return 3}};this.plugins.sort((function(e,s){return t(e)-t(s)}));}resolvePlugins(e,t){if(0==o.isObject(t))return;let s=t.__name__;if(null!=s){let n,r=p.createInstance(t,[]),a=t;if(0==o.isObject(a))n=!1;else {let e=Object.prototype.hasOwnProperty.call(a,"__plugfaces__")?o.field(a,"__plugfaces__"):null;n=null!=e&&e.indexOf("IVideoPlayer")>-1;}if(n)return void this.pluginsVideo.push(r);let l,i=t;if(0==o.isObject(i))l=!1;else {let e=Object.prototype.hasOwnProperty.call(i,"__plugfaces__")?o.field(i,"__plugfaces__"):null;l=null!=e&&e.indexOf("IPlugin")>-1;}if(l)return r.className=s,r.uid=r.context=e,void this.plugins.push(r)}else {let s=0,n=o.fields(t);for(;s<n.length;)this.resolvePlugins(e,o.field(t,n[s++]));}}getData(e){return null!=e?e:this.data}getParent(e){return null!=e?e:this.parent}}f.__name__="bs.player.composer.Composer",Object.assign(f.prototype,{__class__:f,data:null,parent:null,plugins:null,pluginsVideo:null,player:null});class b{__keepFieldsFix(){return p.getInstanceFields(b)}static getScreenSize(){let e=window.screen;return {width:0|(e.width>e.height?e.width:e.height),height:0|(e.width>e.width?e.height:e.width)}}static isMobile(){return b.mobile}static isSmartTV(){return b.smartTV}static isWebView(){return null!=window.bradmaxSetFullscreen}static getUserAgent(){return window.navigator.userAgent}static getBrowserName(){return b.browserName}static isBrowserOnline(){return window.navigator.onLine}static isMediaSourceExtensionSupported(){let e=window;return Object.prototype.hasOwnProperty.call(e,"MediaSource")}static baseUrl(){let e=t.location;return b.baseUrlCacheLastFullUrl!=e.href&&(b.baseUrlCacheLastFullUrl=e.href,b.baseUrlCacheLastBaseUrl=b.baseUrlCacheLastFullUrl.split(e.hash).join("")),b.baseUrlCacheLastBaseUrl}static log(e){null==b.traceLog&&(b.traceLog="<h5>trace:</h5>"),b.traceLog+="<p>"+e+"</p>",b.printLog(),null==b.traceTrg&&window.addEventListener("load",b.printLog);}static printLog(){null==b.traceTrg&&(b.traceTrg=window.document.getElementById("trace")),null!=b.traceTrg&&(b.traceTrg.innerHTML=b.traceLog);}static highlightHtmlNode(e){let t,s=window.document.body;if(Object.prototype.hasOwnProperty.call(s,"createTextRange"))t=s.createTextRange(),t.moveToElementText(e),t.select();else {let s=window.getSelection();t=window.document.createRange(),t.selectNodeContents(e),s.removeAllRanges(),s.addRange(t);}}static copyToClipboard(e){let t=window.document.createElement("input");t.style.fontSize="12pt",t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute","rtl"==window.document.documentElement.getAttribute("dir")?t.style.right="-9999px":t.style.left="-9999px";let s,n=window.pageYOffset;null==n&&(n=window.document.documentElement.scrollTop),t.addEventListener("focus",(function(e){window.scrollTo(0,n);})),t.style.top=n+"px",t.setAttribute("readonly",""),t.value=e,window.document.body.appendChild(t),t.focus(),t.setSelectionRange(0,t.value.length);try{s=window.document.execCommand("copy");}catch(e){s=!1;}return t.blur(),window.document.body.removeChild(t),s}static findThisJsScriptAbsolutePath(e){let t=null;if(t=window.document.currentScript,null!=t)return t.src;let s=window.document.getElementsByTagName("script");return t=b.findScriptBySrc(s,e),null==t&&e.endsWith("_")&&(t=b.findScriptBySrc(s,l.substr(e,0,-1))),null!=t?t.src:null}static findScriptBySrc(e,t){let s=null,n=0;for(;n<e.length;){let r=e[n];if(++n,s=r.getAttribute("src"),null!=s&&(s=s.split("/").pop(),s=s.split(".min.js").join(""),s=s.split(".js.min").join(""),s=s.split(".js").join(""),s==t))return r}return null}static disableHtmlSelection(){b.disableHtmlSelectionFunction=function(e){return e.preventDefault(),!1},window.document.addEventListener("selectstart",b.disableHtmlSelectionFunction);}static enableHtmlSelection(){null!=b.disableHtmlSelectionFunction&&(window.document.removeEventListener("selectstart",b.disableHtmlSelectionFunction),b.disableHtmlSelectionFunction=null);}static canRequestVideoFrameCallback(){return "requestVideoFrameCallback"in HTMLVideoElement.prototype}static isWebGLAvailable(){if(b.isWebView())return !1;try{let e=window,t=Object.prototype.hasOwnProperty.call(e,"WebGLRenderingContext"),s=window.document.createElement("canvas");if(!t)return t;let n=null!=s.getContext("webgl")||null!=s.getContext("experimental-webgl");return !!t&&n}catch(e){return !1}}static isWebGL2Available(){if(b.isWebView())return !1;try{let e=window,t=Object.prototype.hasOwnProperty.call(e,"WebGL2RenderingContext"),s=window.document.createElement("canvas");if(!t)return t;let n=null!=s.getContext("webgl2");return !!t&&n}catch(e){return !1}}static getOrientation(){if(null!=window.screen.orientation)return window.screen.orientation.angle;let e=window.orientation;return "number"==typeof e&&(0|e)===e?window.orientation:0}static isDeviceOrientationSupported(){let e=window;return Object.prototype.hasOwnProperty.call(e,"DeviceOrientationEvent")}static connectDeviceOrientation(e,t){b.isDeviceOrientationSupported()&&(null!=DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(t){"granted"==t&&window.addEventListener("deviceorientation",e,!1);})).catch(d.error):window.addEventListener("deviceorientation",e,!1));}static disconnectDeviceOrientation(e){b.isDeviceOrientationSupported()&&window.removeEventListener("deviceorientation",e);}static isVrSupported(){let e=t.navigator;if(null==e)return Promise.resolve(!1);let s=e.xr;return null==s?Promise.resolve(!1):s.isSessionSupported("immersive-vr")}static requestVrSession(){let e=t.navigator;if(null==e)return Promise.resolve(null);let s=e.xr;return null==s?Promise.resolve(null):s.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]})}}e.bs.util.BrowserTools=b,b.__name__="bs.util.BrowserTools",Object.assign(b.prototype,{__class__:b});class x{constructor(){this.runDetectScripts();}runDetectScripts(){x.expose.player.list=St(this,this.listPlayers),x.expose.player.create=St(this,this.createPlayerInElement),x.expose.player.destroy=St(this,this.destroyPlayer),x.expose.player.getById=St(this,this.getPlayerById),x.expose.player.getVersion=St(this,this.getVersion),x.expose.player.collectClickForLaterAutoplay=x.collectClickForLaterAutoplay,this.detectScript(),this.detectScriptAttributes();}getVersion(){return "v2.14.364"}getPlayerById(e){return x.players.h[e]}destroyPlayer(e){if(null==e)return;let t=e.uid,s=x.players;Object.prototype.hasOwnProperty.call(s.h,t)&&delete s.h[t],e.destroy(!0);let n=window.document.getElementById("player_con_"+e.uid.split("_")[1]);null!=n&&Ot.__cast(n.parentNode,HTMLDivElement).removeAttribute("data-bradmax-player-pid");let r=window.document.getElementById(e.uid);null!=r&&r.parentNode.removeChild(r),null!=n&&null!=n.remove&&n.remove();}checkIfPlayerExistInElement(e){return !!e.hasAttribute("data-bradmax-player-pid")}getPlayerByElement(e){return e.hasAttribute("data-bradmax-player-pid")?x.players.h["player_"+e.getAttribute("data-bradmax-player-pid")]:null}createPlayerInElement(e,t,s){return this.checkIfPlayerExistInElement(e)?this.getPlayerByElement(e):"string"==typeof t&&null==(t=Ge.decode(t))?(console.error("PLAYER VARIABLE DATA INVALID"),null):this.createPlayer(e,t,null,"inside",s)}createPlayer(e,t,s,n,r){if(null==n&&(n="before"),null==s){let e,t=24,n=Je.UID_CHARS.length,r="",a=0;for(;a<t;){let t;switch(e="xxxx-xxxx-xxxx-xxxx-xxxx".charAt(a++),e){case"-":case"_":t=e;break;default:t=Je.UID_CHARS.charAt(u.random(n));}r+=t;}s=r;}let a="player_"+s;this.setPID(e,s);let l=window.document.createElement("div");switch(l.setAttribute("id","player_con_"+s),l.style.display="block",l.style.position="relative",l.style.width="100%",l.style.height="100%",l.style.background="#000000",l.style.overflow="hidden",n){case"before":e.parentElement.insertBefore(l,e);break;case"inside":e.appendChild(l);}let i=window.document.createElement("div");return i.setAttribute("id",a),i.setAttribute("class","bsplayer"),i.style.display="block",i.style.position="relative",i.style.width="100%",i.style.height="100%",i.style.background="#000000",i.style.overflow="hidden",l.appendChild(i),this.appendPlayer(this.useHTML5(i,t,a,r))}appendPlayer(e){if(x.players.h[e.uid]=e,window.hasOwnProperty("_ba_createPlayer")){let t=window._ba_createPlayer;if("function"==typeof t)try{t(e);}catch(e){}}return e}listPlayers(){let e=[],t=x.players.h,s=Object.keys(t),n=s.length,r=0;for(;r<n;)e.push(t[s[r++]]);return e}detectScriptAttributes(){let e=window.document.getElementsByTagName("script"),t=[],s=0;for(;s<e.length;)t.push(e[s++]);let n=function(e){let t=null!=e.innerText?h.trim(e.innerText):null;return !(null==t||!t.startsWith("{"))&&t.endsWith("}")},r=0;for(;r<t.length;){let e=t[r];if(++r,((a=e).hasAttribute("data-bs-variables")||n(a))&&a.hasAttribute("data-bs-parent-id")&&!a.hasAttribute("data-bradmax-player-pid")){let t={},r=null,a=e.getAttribute("data-bs-parent-id");try{if(r=window.document.getElementById(a),e.hasAttribute("data-bs-variables")&&(t=Ge.decode(e.getAttribute("data-bs-variables"))),(null==t||0==o.fields(t).length)&&null!=e.innerText&&n(e))try{t=JSON.parse(e.innerText);}catch(s){let e=Ze.caught(s).unwrap();return console.error("INNER TEXT VARIABLE INVALID DATA"),void console.error(e)}if(null==t)return void console.error("INLINE VARIABLE DATA INVALID")}catch(s){let e=Ze.caught(s).unwrap();return console.error("VARIABLE DATA INVALID"),void console.error(e)}if(null==r)return void console.error("ELEMENT ID NOT FOUND: "+a);this.createPlayer(r,t,null,"inside");}}var a;}detectScript(){let e=window.document.getElementsByTagName("script"),t=0;for(;t<e.length;){let s=e[t];if(++t,this.isEmptyPlayerScript(s)){let e={};try{e=JSON.parse(s.textContent);}catch(t){return void console.error("JSON DATA INVALID")}this.createPlayer(s,e);}}}isEmptyPlayerScript(e){return !(!e.hasAttribute("data-bigsoda-player")||e.hasAttribute("data-bradmax-player-pid"))}useHTML5(e,t,s,n){let r=o.field(o.field(x.expose,"player"),"composers"),a=o.fields(r);return p.createInstance(o.field(r,null==n?a[0]:n),[]).createPlayer(s,e,t)}setPID(e,t){return e.hasAttribute("data-bradmax-player-pid")||e.setAttribute("data-bradmax-player-pid",t),e.getAttribute("data-bradmax-player-pid")}__keepFieldsFix(){return p.getInstanceFields(x)}static main(){null==x.expose.player.embeder&&(x.expose.player.embeder={},null==o.field(x.expose.player.embeder,"modular_v2.14.364")&&(x.expose.player.embeder["modular_v2.14.364"]=new x));}static collectClickForLaterAutoplay(){if(x.lastCallForCollectClickForLaterAutoplay=new Date,x.htmlVideoElementsForLaterAutoplay.length>=2)return;let e=window.document.createElement("video");e.controls=!1,e.setAttribute("src",exports.mp4),e.setAttribute(x.VIDEO_TAG_FOR_AUTOPLAY_INITIALSED,"1"),b.isiOS&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""));let t=e.play();null!=t?(x.pendingVideoElementsForLaterAutoplay+=1,t.then((function(){e.pause(),x.htmlVideoElementsForLaterAutoplay.push(e),x.pendingVideoElementsForLaterAutoplay-=1;let t=0,s=x.listenersWaitinfForVideoElementForAutoplay;for(;t<s.length;)s[t++]();x.listenersWaitinfForVideoElementForAutoplay=[];}))):(e.pause(),x.htmlVideoElementsForLaterAutoplay.push(e));}static getLastCallForCollectClickForLaterAutoplay(){return x.lastCallForCollectClickForLaterAutoplay}static getHtmlVideoReadyForAutoplay(){return 0==x.htmlVideoElementsForLaterAutoplay.length?null:x.htmlVideoElementsForLaterAutoplay.pop()}static hasPendingVideoElementsForLaterAutoplay(){return x.pendingVideoElementsForLaterAutoplay>0}static hasHtmlVideoReadyForAutoplay(){return x.htmlVideoElementsForLaterAutoplay.length>0}static addListenerForVideoElementForAutoplay(e){x.listenersWaitinfForVideoElementForAutoplay.push(e);}}e.bs.player.composer.Embeder=x,x.__name__="bs.player.composer.Embeder",Object.assign(x.prototype,{__class__:x});class w{constructor(){this.modules={},this.pluginsVideo=[],this.plugins=[],this.eventHub=T.getInstance();}destroy(e){if(null==e&&(e=!1),!e)return void window.bradmax.player.destroy(this);try{V.destroyMonitor(this.uid);}catch(t){let e=Ze.caught(t).unwrap();console.error({msg:"Exception catched during destroying monitor.",exception:e});}let t=0,s=this.plugins;for(;t<s.length;){let e=s[t];++t;try{e.destroy();}catch(t){let s=Ze.caught(t).unwrap();console.error({msg:"Exception catched during destroying plugin.",plugin:e,exception:s});}}for(;this.plugins.length>0;)this.plugins.pop();}activatePlugins(){let e=0,t=this.plugins;for(;e<t.length;){let s=t[e];++e,s.context=s.uid=this.uid,s.set_player(this),this.eventHub.registerPlugin(s),s.set_parentDisplay(this.parent),s.set_variables(this.data),this.modules[s.getPluginName()]=s,"JavascriptApi"==s.getPluginName()&&(this.api=s);}let s=0,n=this.plugins;for(;s<n.length;)n[s++].create();let r=0,a=this.plugins;for(;r<a.length;)a[r++].activate();let l=0,i=this.plugins;for(;l<i.length;)i[l++].postActivate();}initialize(e,t){this.parent=e,this.data=Xe.merge(exports.variables,t),V.getMonitor(this.uid),this.activatePlugins();}__keepFieldsFix(){return p.getInstanceFields(w)}}e.bs.player.core.Player=w,w.__name__="bs.player.core.Player",Object.assign(w.prototype,{__class__:w,uid:null,configuration:null,plugins:null,pluginsVideo:null,modules:null,api:null,parentDisplay:null,parent:null,data:null,eventHub:null});class v{constructor(e){this.className="bs.player.core.events.BaseEvent",this.type=e;}dispatch(e){T.getInstance().dispatch(e,O.__name__,this.type,this);}__keepFieldsFix(){return p.getInstanceFields(v)}}e.bs.player.core.events.BaseEvent=v,v.__name__="bs.player.core.events.BaseEvent",Object.assign(v.prototype,{__class__:v,className:null,type:null,data:null});class O extends v{constructor(e){super(e),this.className=O.__name__;}dispatch(e){T.getInstance().dispatch(e,O.__name__,this.type,this);}static addOnce(e,t,s){T.getInstance().addOnce(e,O.__name__,t,s);}static add(e,t,s){T.getInstance().add(e,O.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,O.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,O.__name__,t);}static enable(e,t){T.getInstance().enable(e,O.__name__,t);}}e.bs.player.core.events.AdEvent=O,O.__name__="bs.player.core.events.AdEvent",O.__super__=v,Object.assign(O.prototype,{__class__:O});class I extends v{constructor(e){super(e),this.className=I.__name__;}dispatch(e){T.getInstance().dispatch(e,I.__name__,this.type,this);}static addOnce(e,t,s){T.getInstance().addOnce(e,I.__name__,t,s);}static add(e,t,s){T.getInstance().add(e,I.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,I.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,I.__name__,t);}static enable(e,t){T.getInstance().enable(e,I.__name__,t);}}e.bs.player.core.events.ChromecastEvent=I,I.__name__="bs.player.core.events.ChromecastEvent",I.__super__=v,Object.assign(I.prototype,{__class__:I});class E extends v{constructor(e){super(e),this.className=E.__name__;}dispatch(e){T.getInstance().dispatch(e,E.__name__,this.type,this);}static add(e,t,s){T.getInstance().add(e,E.__name__,t,s);}static addOnce(e,t,s){T.getInstance().addOnce(e,E.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,E.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,E.__name__,t);}static enable(e,t){T.getInstance().enable(e,E.__name__,t);}static filter(e){}}e.bs.player.core.events.ControlEvent=E,E.__name__="bs.player.core.events.ControlEvent",E.__super__=v,Object.assign(E.prototype,{__class__:E});class S extends v{constructor(e){super(e),this.className=S.__name__;}dispatch(e){T.getInstance().dispatch(e,S.__name__,this.type,this);}static addOnce(e,t,s){T.getInstance().addOnce(e,S.__name__,t,s);}static add(e,t,s){T.getInstance().add(e,S.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,S.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,S.__name__,t);}static enable(e,t){T.getInstance().enable(e,S.__name__,t);}static filter(e){}}e.bs.player.core.events.DataProviderEvent=S,S.__name__="bs.player.core.events.DataProviderEvent",S.__super__=v,Object.assign(S.prototype,{__class__:S});class C extends v{constructor(e){super(e),this.className=C.__name__;}dispatch(e){T.getInstance().dispatch(e,C.__name__,this.type,this);}static addOnce(e,t,s){T.getInstance().addOnce(e,C.__name__,t,s);}static add(e,t,s){T.getInstance().add(e,C.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,C.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,C.__name__,t);}static enable(e,t){T.getInstance().enable(e,C.__name__,t);}}e.bs.player.core.events.DisplayEvent=C,C.__name__="bs.player.core.events.DisplayEvent",C.__super__=v,Object.assign(C.prototype,{__class__:C});class P extends v{constructor(e){super(e),this.className=P.__name__;}dispatch(e){T.getInstance().dispatch(e,P.__name__,this.type,this);}static addOnce(e,t,s){T.getInstance().addOnce(e,P.__name__,t,s);}static add(e,t,s){T.getInstance().add(e,P.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,P.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,P.__name__,t);}static enable(e,t){T.getInstance().enable(e,P.__name__,t);}}e.bs.player.core.events.EditEvent=P,P.__name__="bs.player.core.events.EditEvent",P.__super__=v,Object.assign(P.prototype,{__class__:P});class L extends v{constructor(e){super(e),this.className=L.__name__;}dispatch(e){T.getInstance().dispatch(e,L.__name__,this.type,this);}static add(e,t,s){T.getInstance().add(e,L.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,L.__name__,t);}static enable(e,t){T.getInstance().enable(e,L.__name__,t);}static filter(e){}}e.bs.player.core.events.ErrorEvent=L,L.__name__="bs.player.core.events.ErrorEvent",L.__super__=v,Object.assign(L.prototype,{__class__:L,message:null});class A{constructor(){}setPlatformEvent(e){this.platformEvent=e;}stopPropagation(){null!=this.platformEvent.stopPropagation?(this.platformEvent.stopPropagation(),this.platformEvent.preventDefault()):this.platformEvent.cancelBubble=!0;}__keepFieldsFix(){return p.getInstanceFields(A)}static get_FULLSCREEN_CHANGE(){return A.fullscreenEventName}}e.bs.player.core.events.NativeEvent=A,A.__name__="bs.player.core.events.NativeEvent",A.__properties__={get_FULLSCREEN_CHANGE:"get_FULLSCREEN_CHANGE"},Object.assign(A.prototype,{__class__:A,currentTarget:null,target:null,type:null,mouseX:null,mouseY:null,wheelDelta:null,platformEvent:null});class k extends v{constructor(e){super(e),this.className=k.__name__;}}e.bs.player.core.events.PlayerCommandEvent=k,k.__name__="bs.player.core.events.PlayerCommandEvent",k.__super__=v,Object.assign(k.prototype,{__class__:k});class N extends v{constructor(e){super(e),this.className=N.__name__;}dispatch(e){T.getInstance().dispatch(e,N.__name__,this.type,this);}static add(e,t,s){T.getInstance().add(e,N.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,N.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,N.__name__,t);}static enable(e,t){T.getInstance().enable(e,N.__name__,t);}static filter(e){}}e.bs.player.core.events.ResizeEvent=N,N.__name__="bs.player.core.events.ResizeEvent",N.__super__=v,Object.assign(N.prototype,{__class__:N});class F extends v{constructor(e){super(e),this.className=F.__name__;}dispatch(e){T.getInstance().dispatch(e,F.__name__,this.type,this);}static add(e,t,s){T.getInstance().add(e,F.__name__,t,s);}static addOnce(e,t,s){T.getInstance().addOnce(e,F.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,F.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,F.__name__,t);}static enable(e,t){T.getInstance().enable(e,F.__name__,t);}static filter(e){}}e.bs.player.core.events.SphericalVideoEvent=F,F.__name__="bs.player.core.events.SphericalVideoEvent",F.__super__=v,Object.assign(F.prototype,{__class__:F});class D extends v{constructor(e){super(e),this.className=D.__name__;}dispatch(e){T.getInstance().dispatch(e,D.__name__,this.type,this);}static add(e,t,s){T.getInstance().add(e,D.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,D.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,D.__name__,t);}static enable(e,t){T.getInstance().enable(e,D.__name__,t);}static filter(e){}}e.bs.player.core.events.SubtitleEvent=D,D.__name__="bs.player.core.events.SubtitleEvent",D.__super__=v,Object.assign(D.prototype,{__class__:D});class j extends v{constructor(e){super(e),this.className=j.__name__;}dispatch(e){T.getInstance().dispatch(e,j.__name__,this.type,this);}static addOnce(e,t,s){T.getInstance().addOnce(e,j.__name__,t,s);}static add(e,t,s){T.getInstance().add(e,j.__name__,t,s);}static remove(e,t,s){T.getInstance().remove(e,j.__name__,t,s);}static disable(e,t){T.getInstance().disable(e,j.__name__,t);}static enable(e,t){T.getInstance().enable(e,j.__name__,t);}}e.bs.player.core.events.VideoEvent=j,j.__name__="bs.player.core.events.VideoEvent",j.__super__=v,Object.assign(j.prototype,{__class__:j});class T{constructor(){null==T.instance&&(this.plugins=[]);}registerPlugin(e){this.plugins.push(e),e.set_eventHub(this);}dispatch(e,t,s,n){let r=e+" | "+t+" | "+s;if(!this.isEnabled(r))return;let a=!1,l=0,i=this.plugins;for(;l<i.length;){let t=i[l];++l,t.context==e&&0==t.eventFilter(n)&&(a=!0);}if(!a){if(Object.prototype.hasOwnProperty.call(T.listenersMap.h,r)){let e=0,t=T.listenersMap.h[r];for(;e<t.length;)t[e++](n);}if(Object.prototype.hasOwnProperty.call(T.onceListenersMap.h,r)){let a=0,l=T.onceListenersMap.h[r];for(;a<l.length;)l[a++](n);let i=0,o=T.onceListenersMap.h[r];for(;i<o.length;)this.remove(e,t,s,o[i++]);}}}addOnce(e,t,s,n){let r,a=e+" | "+t+" | "+s;if(Object.prototype.hasOwnProperty.call(T.onceListenersMap.h,a))r=T.onceListenersMap.h[a];else {let e=[];T.onceListenersMap.h[a]=e,r=T.onceListenersMap.h[a];}let l=0;for(;l<r.length;)if(r[l++]==n)return !1;return r.push(n),!0}add(e,t,s,n){let r,a=e+" | "+t+" | "+s;if(Object.prototype.hasOwnProperty.call(T.listenersMap.h,a))r=T.listenersMap.h[a];else {let e=[];T.listenersMap.h[a]=e,r=T.listenersMap.h[a];}let l=0;for(;l<r.length;)if(r[l++]==n)return;r.push(n);}remove(e,t,s,n){let r=e+" | "+t+" | "+s;this.removeListenerFromMap(r,n,T.listenersMap),this.removeListenerFromMap(r,n,T.onceListenersMap);}isEnabled(e){let t=T.disabledListenersMap.h[e];return null==t||0==t}disable(e,t,s){let n=e+" | "+t+" | "+s,r=T.disabledListenersMap.h[n];T.disabledListenersMap.h[n]=null==r?1:r+1;}enable(e,t,s){let n=e+" | "+t+" | "+s,r=T.disabledListenersMap.h[n];if(null!=r&&r>0)if(--r,r<=0){let e=T.disabledListenersMap;Object.prototype.hasOwnProperty.call(e.h,n)&&delete e.h[n];}else T.disabledListenersMap.h[n]=r;}removeListenerFromMap(e,t,s){let n=[];if(Object.prototype.hasOwnProperty.call(s.h,e)&&(n=s.h[e]),n.length>0){let r=0;for(;r<n.length;)if(n[r++]==t){let r=n.slice();return l.remove(r,t),void(s.h[e]=r)}}}__keepFieldsFix(){return p.getInstanceFields(T)}static getInstance(){return T.instance}}e.bs.player.core.manager.EventHub=T,T.__name__="bs.player.core.manager.EventHub",Object.assign(T.prototype,{__class__:T,plugins:null});class U{constructor(e,t,s,n,r){this.langCodeLong=t,this.langCodeShort=e,this.englishName=s,this.nativeName=n,this.relatedLangCodes=r;}__keepFieldsFix(){return p.getInstanceFields(U)}}e.bs.player.core.manager.LangInfo=U,U.__name__="bs.player.core.manager.LangInfo",Object.assign(U.prototype,{__class__:U,langCodeShort:null,langCodeLong:null,englishName:null,nativeName:null,relatedLangCodes:null});class B{constructor(){if(null!=B.instance)return;let e=[];e.push(new U("no","nor",this.toUtf8("Norwegian"),this.toUtf8("Norsk"),["nb","nn"])),e.push(new U("nb","nob",this.toUtf8("Norwegian%20Bokm%C3%A5l"),this.toUtf8("Norsk"),["no","nn"])),e.push(new U("nn","nno",this.toUtf8("Norwegian%20Nynorsk"),this.toUtf8("Norsk%20nynorsk"),["no","nb"])),e.push(new U("da","dan",this.toUtf8("Danish"),this.toUtf8("dansk"),["dk"])),e.push(new U("sv","swe",this.toUtf8("Swedish"),this.toUtf8("svenska"),["se"])),e.push(new U("be","bel",this.toUtf8("Belarusian"),this.toUtf8("%D0%91%D0%B5%D0%BB%D0%B0%D1%80%D1%83%D1%81%D0%BA%D0%B0%D1%8F"))),e.push(new U("bs","bos",this.toUtf8("Bosnian"),this.toUtf8("bosanski%20jezik"))),e.push(new U("bg","bul",this.toUtf8("Bulgarian"),this.toUtf8("%D0%B1%D1%8A%D0%BB%D0%B3%D0%B0%D1%80%D1%81%D0%BA%D0%B8%20%D0%B5%D0%B7%D0%B8%D0%BA"))),e.push(new U("ca","cat",this.toUtf8("Catalan"),this.toUtf8("Catal%C3%A0"))),e.push(new U("hr","hrv",this.toUtf8("Croatian"),this.toUtf8("hrvatski"))),e.push(new U("cz","ces",this.toUtf8("Czech"),this.toUtf8("%C4%8Cesky"))),e.push(new U("nl","nld",this.toUtf8("Dutch"),this.toUtf8("Nederlands"),["dut"])),e.push(new U("en","eng",this.toUtf8("English"),this.toUtf8("English"))),e.push(new U("eo","epo",this.toUtf8("Esperanto"),this.toUtf8("Esperanto"))),e.push(new U("et","est",this.toUtf8("Estonian"),this.toUtf8("eesti"))),e.push(new U("es","spa",this.toUtf8("Spanish"),this.toUtf8("Espa%C3%B1ol"))),e.push(new U("fo","fao",this.toUtf8("Faroese"),this.toUtf8("f%C3%B8royskt"))),e.push(new U("fi","fin",this.toUtf8("Finnish"),this.toUtf8("suomi"))),e.push(new U("fr","fra",this.toUtf8("French"),this.toUtf8("fran%C3%A7ais"),["fre"])),e.push(new U("gl","glg",this.toUtf8("Galician"),this.toUtf8("Galego"))),e.push(new U("de","deu",this.toUtf8("German"),this.toUtf8("Deutsch"),["ger"])),e.push(new U("el","ell",this.toUtf8("Greek"),this.toUtf8("%CE%95%CE%BB%CE%BB%CE%B7%CE%BD%CE%B9%CE%BA%CE%AC"),["gre"])),e.push(new U("hu","hun",this.toUtf8("Hungarian"),this.toUtf8("Magyar"))),e.push(new U("ia","ina",this.toUtf8("Interlingua"),this.toUtf8("Interlingua"))),e.push(new U("it","ita",this.toUtf8("Italian"),this.toUtf8("Italiano"))),e.push(new U("ga","gle",this.toUtf8("Irish"),this.toUtf8("Gaeilge"))),e.push(new U("lb","ltz",this.toUtf8("Luxembourgish"),this.toUtf8("L%C3%ABtzebuergesch"))),e.push(new U("lt","lit",this.toUtf8("Lithuanian"),this.toUtf8("lietuvi%C5%B3"))),e.push(new U("lv","lav",this.toUtf8("Latvian"),this.toUtf8("latvi%C5%B3"))),e.push(new U("pl","pol",this.toUtf8("Polish"),this.toUtf8("polski"))),e.push(new U("pt","por",this.toUtf8("Portuguese"),this.toUtf8("Portugu%C3%AAs"))),e.push(new U("rm","roh",this.toUtf8("Romansh"),this.toUtf8("rumantsch%20grischun"))),e.push(new U("ro","ron",this.toUtf8("Romanian"),this.toUtf8("rom%C3%A2n%C4%83"),["rum"])),e.push(new U("ru","rus",this.toUtf8("Russian"),this.toUtf8("%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%20%D1%8F%D0%B7%D1%8B%D0%BA"))),e.push(new U("sk","slk",this.toUtf8("Slovak"),this.toUtf8("Sloven%C4%8Dina"),["slo"])),e.push(new U("sr","srp",this.toUtf8("Serbian"),this.toUtf8("%D0%A1%D1%80%D0%BF%D1%81%D0%BA%D0%B8"))),e.push(new U("sl","slv",this.toUtf8("Slovene"),this.toUtf8("Sloven%C5%A1%C4%8Dina"))),e.push(new U("tr","tur",this.toUtf8("Turkish"),this.toUtf8("T%C3%BCrk%C3%A7e"))),e.push(new U("uk","ukr",this.toUtf8("Ukrainian"),this.toUtf8("%D1%83%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0"))),e.push(new U("zk","chi",this.toUtf8("Chinese"),this.toUtf8("%E4%B8%AD%E6%96%87"),["zho","zh"])),e.push(new U("ms","may",this.toUtf8("Malay"),this.toUtf8("Bahasa Melayu"),["msa"])),e.push(new U("ar","ara",this.toUtf8("Arabic"),this.toUtf8("%D8%A7%D9%8E%D9%84%D9%92%D8%B9%D9%8E%D8%B1%D9%8E%D8%A8%D9%90%D9%8A%D9%8E%D9%91%D8%A9%D9%8F"),["arb"])),e.push(new U("cdo_","cdo",this.toUtf8("Min Dong Chinese"),this.toUtf8("Min Dong Chinese"))),e.push(new U("cjy_","cjy",this.toUtf8("Jinyu Chinese"),this.toUtf8("Jinyu Chinese"))),e.push(new U("cmn_","cmn",this.toUtf8("Mandarin Chinese"),this.toUtf8("Mandarin Chinese"))),e.push(new U("cpx_","cpx",this.toUtf8("Pu-Xian Chinese"),this.toUtf8("Pu-Xian Chinese"))),e.push(new U("czh_","czh",this.toUtf8("Huizhou Chinese"),this.toUtf8("Huizhou Chinese"))),e.push(new U("czo_","czo",this.toUtf8("Min Zhong Chinese"),this.toUtf8("Min Zhong Chinese"))),e.push(new U("gan_","gan",this.toUtf8("Gan Chinese"),this.toUtf8("Gan Chinese"))),e.push(new U("hak_","hak",this.toUtf8("Hakka Chinese"),this.toUtf8("Hakka Chinese"))),e.push(new U("hsn_","hsn",this.toUtf8("Xiang Chinese"),this.toUtf8("Xiang Chinese"))),e.push(new U("lzh_","lzh",this.toUtf8("Literary Chinese"),this.toUtf8("Literary Chinese"))),e.push(new U("mnp_","mnp",this.toUtf8("Min Bei Chinese"),this.toUtf8("Min Bei Chinese"))),e.push(new U("nan_","nan",this.toUtf8("Min Nan Chinese"),this.toUtf8("Min Nan Chinese"))),e.push(new U("wuu_","wuu",this.toUtf8("Wu Chinese"),this.toUtf8("Wu Chinese"))),e.push(new U("yue_","yue",this.toUtf8("Yue Chinese"),this.toUtf8("Yue Chinese"))),e.push(new U("cnp_","cnp",this.toUtf8("Northern Ping Chinese"),this.toUtf8("Northern Ping Chinese"))),e.push(new U("csp_","csp",this.toUtf8("Southern Ping Chinese"),this.toUtf8("Southern Ping Chinese"))),e.push(new U("mul_","mul",this.toUtf8("Multiple languages"),this.toUtf8("Multiple languages"))),e.push(new U("mis_","mis",this.toUtf8("No code for language"),this.toUtf8("No code for language"))),e.push(new U("und_","und",this.toUtf8("Undefined"),this.toUtf8("Undefined"))),this.setLangInfoList(e);}toUtf8(e){let t=null;return t=decodeURIComponent(e),t}setLangInfoList(e){this.langInfoList=e,this.langInfoByLangShortCode=new _t,this.langInfoByLangLongCode=new _t,this.langInfoByRelatedCode=new _t;let t=0,s=this.langInfoList;for(;t<s.length;){let e=s[t];++t,this.langInfoByLangShortCode.h[e.langCodeShort]=e,this.langInfoByLangLongCode.h[e.langCodeLong]=e;}let n=0,r=this.langInfoList;for(;n<r.length;){let e=r[n];if(++n,null!=e.relatedLangCodes){let t=0,s=e.relatedLangCodes;for(;t<s.length;)this.langInfoByRelatedCode.h[s[t++]]=e;}}}getLangInfoList(){return this.langInfoList}__keepFieldsFix(){return p.getInstanceFields(B)}static getInstance(){return B.instance}static getLanguageNativeNameByCode(e){try{e=e.toLowerCase();let t=B.getInstance();return Object.prototype.hasOwnProperty.call(t.langInfoByLangShortCode.h,e)?t.langInfoByLangShortCode.h[e].nativeName:Object.prototype.hasOwnProperty.call(t.langInfoByLangLongCode.h,e)?t.langInfoByLangLongCode.h[e].nativeName:Object.prototype.hasOwnProperty.call(t.langInfoByRelatedCode.h,e)?t.langInfoByRelatedCode.h[e].nativeName:null}catch(e){return Qe.trace(Ze.caught(e).unwrap(),{fileName:"player/src/bs/player/core/manager/I18NHelper.hx",lineNumber:164,className:"bs.player.core.manager.I18NHelper",methodName:"getLanguageNativeNameByCode"}),null}}static getLanguageInfoByCode(e){try{e=e.toLowerCase();let t=B.getInstance();return Object.prototype.hasOwnProperty.call(t.langInfoByLangShortCode.h,e)?t.langInfoByLangShortCode.h[e]:Object.prototype.hasOwnProperty.call(t.langInfoByLangLongCode.h,e)?t.langInfoByLangLongCode.h[e]:Object.prototype.hasOwnProperty.call(t.langInfoByRelatedCode.h,e)?t.langInfoByRelatedCode.h[e]:null}catch(e){return Qe.trace(Ze.caught(e).unwrap(),{fileName:"player/src/bs/player/core/manager/I18NHelper.hx",lineNumber:185,className:"bs.player.core.manager.I18NHelper",methodName:"getLanguageInfoByCode"}),null}}static findBestFittingLangCodeForSelected(e,t){e=e.toLowerCase();let s=B.getLanguageInfoByCode(e);if(null==s)return -1!=t.indexOf(e)?e:null;let n=[],r=0;for(;r<t.length;)n.push(B.getLanguageInfoByCode(t[r++]));let a=[];if(a.push(s),null!=s.relatedLangCodes){let e=0,t=s.relatedLangCodes;for(;e<t.length;){let s=B.getLanguageInfoByCode(t[e++]);null!=s&&a.push(s);}}let l=0;for(;l<a.length;){let e=a[l++],s=0,r=n.length;for(;s<r;){let r=s++,a=n[r];if(null!=a&&e.langCodeShort==a.langCodeShort)return t[r]}}return null}static normalizeLanguageNameFormat(e){return null==e?null:l.substr(e,0,1).toUpperCase()+l.substr(e,1,e.length)}static preselectSubtitlesSet(e,t){if(null==e||null==t||0==t.length||"off"==e)return;let s=[],n=0;for(;n<t.length;)s.push(t[n++].languageCode);let r=B.findBestFittingLangCodeForSelected(e,s),a=0;for(;a<t.length;){let e=t[a];++a,r==e.languageCode&&(e.preselected=!0);}}}e.bs.player.core.manager.I18NHelper=B,B.__name__="bs.player.core.manager.I18NHelper",Object.assign(B.prototype,{__class__:B,langInfoList:null,langInfoByLangShortCode:null,langInfoByLangLongCode:null,langInfoByRelatedCode:null});class M{constructor(e){this.context=e,this.state="init";}init(){j.add(this.context,"bufferingStart",St(this,this.onVideoBuffering)),j.add(this.context,"complete",St(this,this.onVideoComplete)),j.add(this.context,"mediaError",St(this,this.onVideoError)),j.add(this.context,"playing",St(this,this.onVideoPlaying)),j.add(this.context,"paused",St(this,this.onVideoPaused)),j.add(this.context,"seekingStart",St(this,this.onVideoSeeking)),j.add(this.context,"seekingEnd",St(this,this.onVideoSeekingEnd)),O.add(this.context,"adPlaying",St(this,this.onVideoPlaying)),O.add(this.context,"adPaused",St(this,this.onVideoPaused)),O.add(this.context,"seekingStart",St(this,this.onVideoSeeking)),O.add(this.context,"seekingEnd",St(this,this.onVideoSeekingEnd)),S.add(this.context,"mediaMetadataData",St(this,this.onMetadataData)),S.add(this.context,"mediaAfterPlaybackStartMetadata",St(this,this.onAfterPlaybackStartMetadataData));}destroy(){j.remove(this.context,"bufferingStart",St(this,this.onVideoBuffering)),j.remove(this.context,"complete",St(this,this.onVideoComplete)),j.remove(this.context,"mediaError",St(this,this.onVideoError)),j.remove(this.context,"playing",St(this,this.onVideoPlaying)),j.remove(this.context,"paused",St(this,this.onVideoPaused)),j.remove(this.context,"seekingStart",St(this,this.onVideoSeeking)),j.remove(this.context,"seekingEnd",St(this,this.onVideoSeekingEnd)),S.remove(this.context,"mediaMetadataData",St(this,this.onMetadataData)),S.remove(this.context,"mediaAfterPlaybackStartMetadata",St(this,this.onAfterPlaybackStartMetadataData));}onVideoPlaying(e){this.state="playing";}onVideoComplete(e){this.state="complete";}onVideoPaused(e){this.state="paused";}onVideoBuffering(e){this.state="buffering";}onVideoError(e){this.state="error";}onVideoSeeking(e){this.state="seeking";}onVideoSeekingEnd(e){this.state="playing",null!=e&&null!=e.data&&null!=e.data.media&&(e.data.media.mediaPlaybackInfo.isPlaying||(this.state="paused"));}onMetadataData(e){this.state="init",this.currentMedia=null!=e?e.data:null;}onAfterPlaybackStartMetadataData(e){this.currentMedia=null!=e?e.data:null;}__keepFieldsFix(){return p.getInstanceFields(M)}}e.bs.player.core.manager.PlaybackStateMonitor=M,M.__name__="bs.player.core.manager.PlaybackStateMonitor",Object.assign(M.prototype,{__class__:M,context:null,state:null,currentMedia:null});class V{__keepFieldsFix(){return p.getInstanceFields(V)}static getMonitor(e){if(!Object.prototype.hasOwnProperty.call(V.monitors.h,e)){let t=new M(e);V.monitors.h[e]=t,t.init();}return V.monitors.h[e]}static destroyMonitor(e){if(Object.prototype.hasOwnProperty.call(V.monitors.h,e)){V.monitors.h[e].destroy();let t=V.monitors;Object.prototype.hasOwnProperty.call(t.h,e)&&delete t.h[e];}}}e.bs.player.core.manager.PlaybackStateRegister=V,V.__name__="bs.player.core.manager.PlaybackStateRegister",Object.assign(V.prototype,{__class__:V});class R{}R.__name__="bs.player.core.model.OptionalLiveStreamInfo",R.__isInterface__=!0;class H{constructor(){H._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.customParams=new _t;}__keepFieldsFix(){return p.getInstanceFields(H)}}e.bs.player.core.model.ModelObject=H,H.__name__="bs.player.core.model.ModelObject",Object.assign(H.prototype,{__class__:H,id:null,customParams:null});class q extends H{constructor(){super();}}e.bs.player.core.model.LiveChannelInfo=q,q.__name__="bs.player.core.model.LiveChannelInfo",q.__super__=H,Object.assign(q.prototype,{__class__:q,name:null});class W extends H{constructor(){super(),this.mediaDetails=new se,this.mediaUserSettings=new ne,this.mediaSettings=new re,this.mediaPlaybackInfo=new ae,this.progress=new we,this.drmCustomLicenseServerHandler=null,this.failedPlaybackPlayers=new _t,this.spherical=!1,this.contentMeta=new _t;}hasFallbackSources(){return null!=this.source&&this.source.length>1||null!=this.sourceFallbacks&&this.sourceFallbacks.length>0&&this.sourceFallbacks[0].length>0}useFallbackSources(){this.hasFallbackSources()&&(null!=this.source&&this.source.length>1?this.source=this.source.slice(1):(this.source=this.sourceFallbacks[0],this.sourceFallbacks=this.sourceFallbacks.slice(1)));}}e.bs.player.core.model.Media=W,W.__name__="bs.player.core.model.Media",W.__super__=H,Object.assign(W.prototype,{__class__:W,title:null,duration:null,source:null,sourceFallbacks:null,subtitlesSets:null,audioSets:null,splashImages:null,posterImages:null,mediaDetails:null,mediaUserSettings:null,mediaSettings:null,mediaPlaybackInfo:null,mediaLandingPage:null,mediaPlaylist:null,drmCustomLicenseServerHandler:null,progress:null,failedPlaybackPlayers:null,spherical:null,contentMeta:null});class z extends W{constructor(){super();}}e.bs.player.core.model.Live=z,z.__name__="bs.player.core.model.Live",z.__interfaces__=[R],z.__super__=W,Object.assign(z.prototype,{__class__:z,dvrWindowLength:null,dvrWindowLiveEdge:null,lowLatencyMode:null,channelInfo:null,episodeInfo:null,seasonInfo:null,seriesInfo:null,liveProgramInfo:null});class G extends W{constructor(){super();}}e.bs.player.core.model.Catchup=G,G.__name__="bs.player.core.model.Catchup",G.__interfaces__=[R],G.__super__=W,Object.assign(G.prototype,{__class__:G,channelInfo:null,episodeInfo:null,seasonInfo:null,seriesInfo:null,liveProgramInfo:null});class X extends z{constructor(){super();}}e.bs.player.core.model.LiveStream=X,X.__name__="bs.player.core.model.LiveStream",X.__super__=z,Object.assign(X.prototype,{__class__:X,streamEnd:null,streamEndThankYouImageUrl:null,streamWaitingForTransmissionImageUrl:null});class Y extends z{constructor(){super();}findProgramForDate(e){if(null==this.programs)return null;null==e&&(e=new Date);let t=e.getTime(),s=0,n=this.programs;for(;s<n.length;){let e=n[s];if(++s,e.eventStart.getTime()<=t&&t<e.eventEnd.getTime())return e}return null}}e.bs.player.core.model.LiveChannel=Y,Y.__name__="bs.player.core.model.LiveChannel",Y.__super__=z,Object.assign(Y.prototype,{__class__:Y,name:null,logoImages:null,programs:null});class J extends z{constructor(){super();}}e.bs.player.core.model.LiveProgramStream=J,J.__name__="bs.player.core.model.LiveProgramStream",J.__super__=z,Object.assign(J.prototype,{__class__:J});class K extends H{constructor(){super();}}e.bs.player.core.model.LiveProgram=K,K.__name__="bs.player.core.model.LiveProgram",K.__super__=H,Object.assign(K.prototype,{__class__:K,title:null,descriptionLong:null,descriptionShort:null,eventStart:null,eventEnd:null});class Z extends H{constructor(){super(),this.authParams=new _t;}}e.bs.player.core.model.User=Z,Z.__name__="bs.player.core.model.User",Z.__super__=H,Object.assign(Z.prototype,{__class__:Z,name:null,language:null,domain:null,authParams:null});class ${constructor(){this.currentPos=-1,this.items=[];}hasNext(){return this.currentPos+1<this.items.length}next(){return this.currentPos<this.items.length&&this.currentPos++,0<=this.currentPos&&this.currentPos<this.items.length?this.items[this.currentPos]:null}reset(){this.currentPos=-1;}shift(){this.reset(),this.items.shift();}get_length(){return null!=this.items?this.items.length:0}__keepFieldsFix(){return p.getInstanceFields($)}static clone(e){if(null==e)return null;let t=new $,s=e.items,n=new Array(s.length),r=0,a=s.length;for(;r<a;){let e=r++;n[e]=s[e];}return t.items=n,t.currentPos=e.currentPos+0|0,t}}e.bs.player.core.model.MediaPlaylist=$,$.__name__="bs.player.core.model.MediaPlaylist",Object.assign($.prototype,{__class__:$,items:null,currentPos:null,length:null,__properties__:{get_length:"get_length"}});class Q extends H{constructor(){super();}}e.bs.player.core.model.MediaSource=Q,Q.__name__="bs.player.core.model.MediaSource",Q.__super__=H,Object.assign(Q.prototype,{__class__:Q,url:null,contentType:null,width:null,height:null,bitrate:null,drm:null,spherical:null});class ee extends H{constructor(){super();}}e.bs.player.core.model.Drm=ee,ee.__name__="bs.player.core.model.Drm",ee.__super__=H,Object.assign(ee.prototype,{__class__:ee,provider:null,selectedDrmSystem:null,playready:null,widevine:null,fairplay:null});class te extends H{constructor(){super();}}e.bs.player.core.model.DrmData=te,te.__name__="bs.player.core.model.DrmData",te.__super__=H,Object.assign(te.prototype,{__class__:te,laUrl:null,customData:null,certUrl:null,audioRobustness:null,videoRobustness:null});class se{constructor(){}__keepFieldsFix(){return p.getInstanceFields(se)}}e.bs.player.core.model.MediaDetails=se,se.__name__="bs.player.core.model.MediaDetails",Object.assign(se.prototype,{__class__:se,tags:null,genres:null,descriptionLong:null,descriptionShort:null,year:null,mediaCast:null,directors:null,customParams:null});class ne{constructor(){}__keepFieldsFix(){return p.getInstanceFields(ne)}}e.bs.player.core.model.MediaUserSettings=ne,ne.__name__="bs.player.core.model.MediaUserSettings",Object.assign(ne.prototype,{__class__:ne,wasWatched:null,isFavorite:null,resumePostion:null,hasWatchingFinished:null});class re{constructor(){this.hasConcurrencyControl=!1,this.customParams=new _t;}__keepFieldsFix(){return p.getInstanceFields(re)}}e.bs.player.core.model.MediaSettings=re,re.__name__="bs.player.core.model.MediaSettings",Object.assign(re.prototype,{__class__:re,hasConcurrencyControl:null,customParams:null});class ae{constructor(){this.currentTime=null,this.currentTotalBitrateKpbs=null,this.playbackRate=null,this.isPlaying=!1,this.customParams=new _t;}__keepFieldsFix(){return p.getInstanceFields(ae)}}e.bs.player.core.model.MediaPlaybackInfo=ae,ae.__name__="bs.player.core.model.MediaPlaybackInfo",Object.assign(ae.prototype,{__class__:ae,currentTime:null,currentTotalBitrateKpbs:null,playbackRate:null,isPlaying:null,customParams:null});class le extends H{constructor(){super();}}e.bs.player.core.model.Playlist=le,le.__name__="bs.player.core.model.Playlist",le.__super__=H,Object.assign(le.prototype,{__class__:le,mediaList:null});class ie extends H{constructor(){super();}}e.bs.player.core.model.SubtitlesSet=ie,ie.__name__="bs.player.core.model.SubtitlesSet",ie.__super__=H,Object.assign(ie.prototype,{__class__:ie,languageCode:null,name:null,subtitleEntries:null,url:null,preselected:null});class oe{constructor(){this.showTime=0,this.hideTime=0,this.customParams=new _t,this.texts=[];}__keepFieldsFix(){return p.getInstanceFields(oe)}}e.bs.player.core.model.SubtitleEntry=oe,oe.__name__="bs.player.core.model.SubtitleEntry",Object.assign(oe.prototype,{__class__:oe,showTime:null,hideTime:null,texts:null,customParams:null});class ue{constructor(){}__keepFieldsFix(){return p.getInstanceFields(ue)}}e.bs.player.core.model.SubtitleEntryText=ue,ue.__name__="bs.player.core.model.SubtitleEntryText",Object.assign(ue.prototype,{__class__:ue,styles:null,text:null});class ce extends H{constructor(){H._hx_skip_constructor=!0,super(),H._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.isDefault=!1,super._hx_constructor();}}e.bs.player.core.model.AudioSet=ce,ce.__name__="bs.player.core.model.AudioSet",ce.__super__=H,Object.assign(ce.prototype,{__class__:ce,languageCode:null,name:null,isDefault:null,preselected:null});class _e extends H{constructor(){super();}}e.bs.player.core.model.Image=_e,_e.__name__="bs.player.core.model.Image",_e.__super__=H,Object.assign(_e.prototype,{__class__:_e,url:null,width:null,height:null});class he extends H{constructor(){super();}}e.bs.player.core.model.Genre=he,he.__name__="bs.player.core.model.Genre",he.__super__=H,Object.assign(he.prototype,{__class__:he,name:null});class pe{constructor(){this.currentOrderNumber=1,this.totalNumber=1,this.durationPlayed=0,this.customParams=new _t,this.showTimeProgress=!0,this.showAdPositionInBreak=!0;}__keepFieldsFix(){return p.getInstanceFields(pe)}}e.bs.player.core.model.AdMedia=pe,pe.__name__="bs.player.core.model.AdMedia",Object.assign(pe.prototype,{__class__:pe,media:null,mediaClickTargetUrl:null,currentOrderNumber:null,totalNumber:null,durationPlayed:null,durationTotal:null,adId:null,customParams:null,showTimeProgress:null,showAdPositionInBreak:null,adStartTime:null});class de{constructor(e,t,s,n){this.offset=e,this.duration=t,this.position=s,this.adsCount=n;}__keepFieldsFix(){return p.getInstanceFields(de)}}e.bs.player.core.model.AdInStreamBreakInfo=de,de.__name__="bs.player.core.model.AdInStreamBreakInfo",Object.assign(de.prototype,{__class__:de,offset:null,duration:null,position:null,adsCount:null});class ge{constructor(e,t){this.label=e,this.data=t;}__keepFieldsFix(){return p.getInstanceFields(ge)}}e.bs.player.core.model.VideoQualityEventData=ge,ge.__name__="bs.player.core.model.VideoQualityEventData",Object.assign(ge.prototype,{__class__:ge,label:null,data:null,bitrateKbps:null,width:null,height:null});class me{constructor(e,t,s,n){null==n&&(n="top"),null==s&&(s="left"),this.x=e,this.width=t,this.xPos=s,this.yPos=n;}__keepFieldsFix(){return p.getInstanceFields(me)}}e.bs.player.core.model.BrandImageLoadedEventData=me,me.__name__="bs.player.core.model.BrandImageLoadedEventData",Object.assign(me.prototype,{__class__:me,x:null,width:null,yPos:null,xPos:null});class fe{__keepFieldsFix(){return p.getInstanceFields(fe)}}e.bs.player.core.model.MediaProgressSegment=fe,fe.__name__="bs.player.core.model.MediaProgressSegment",Object.assign(fe.prototype,{__class__:fe,duration:null,label:null});class be{__keepFieldsFix(){return p.getInstanceFields(be)}}e.bs.player.core.model.MediaProgressMarker=be,be.__name__="bs.player.core.model.MediaProgressMarker",Object.assign(be.prototype,{__class__:be,time:null,label:null});class xe{__keepFieldsFix(){return p.getInstanceFields(xe)}}e.bs.player.core.model.MediaProgressThumbnails=xe,xe.__name__="bs.player.core.model.MediaProgressThumbnails",Object.assign(xe.prototype,{__class__:xe,url:null,imageBaseUrl:null});class we{constructor(){this.segments=null,this.segmentsUrl=null,this.markers=null,this.markersUrl=null,this.thumbnails=null;}__keepFieldsFix(){return p.getInstanceFields(we)}}e.bs.player.core.model.MediaProgress=we,we.__name__="bs.player.core.model.MediaProgress",Object.assign(we.prototype,{__class__:we,segmentsUrl:null,segments:null,markersUrl:null,markers:null,thumbnails:null});class ve{constructor(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t;}__keepFieldsFix(){return p.getInstanceFields(ve)}}e.bs.player.core.model.Point=ve,ve.__name__="bs.player.core.model.Point",Object.assign(ve.prototype,{__class__:ve,x:null,y:null});class Oe extends W{constructor(){super();}}e.bs.player.core.model.Episode=Oe,Oe.__name__="bs.player.core.model.Episode",Oe.__super__=W,Object.assign(Oe.prototype,{__class__:Oe,episodeNumber:null,season:null});class Ie extends H{constructor(){super();}}e.bs.player.core.model.EpisodeInfo=Ie,Ie.__name__="bs.player.core.model.EpisodeInfo",Ie.__super__=H,Object.assign(Ie.prototype,{__class__:Ie,episodeNumber:null,title:null});class Ee extends H{constructor(){super();}}e.bs.player.core.model.Season=Ee,Ee.__name__="bs.player.core.model.Season",Ee.__super__=H,Object.assign(Ee.prototype,{__class__:Ee,title:null,descriptionShort:null,descriptionLong:null,images:null,seasonNumber:null,serie:null,episodes:null});class Se extends H{constructor(){super();}}e.bs.player.core.model.Serie=Se,Se.__name__="bs.player.core.model.Serie",Se.__super__=H,Object.assign(Se.prototype,{__class__:Se,title:null,descriptionShort:null,descriptionLong:null,images:null,seasons:null});class Ce{__keepFieldsFix(){return p.getInstanceFields(Ce)}}e.bs.player.core.model.SocialShareData=Ce,Ce.__name__="bs.player.core.model.SocialShareData",Object.assign(Ce.prototype,{__class__:Ce,url:null,title:null});class Pe{constructor(){this.pluginName="";let e=Ot.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,t)?o.field(s,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}Pe.__name__="bs.player.core.plugin.PluginBase",Object.assign(Pe.prototype,{__class__:Pe,uid:null,context:null,className:null,pluginConfig:null,variables:null,eventHub:null,parentDisplay:null,display:null,player:null,pluginName:null,__properties__:{set_player:"set_player",get_player:"get_player",get_display:"get_display",set_parentDisplay:"set_parentDisplay",get_parentDisplay:"get_parentDisplay",set_eventHub:"set_eventHub",get_eventHub:"get_eventHub",set_variables:"set_variables",get_variables:"get_variables"}});class Le{__keepFieldsFix(){return p.getInstanceFields(Le)}static readPluginConfig(e){let t,s=Ot.getClass(e);if(0==o.isObject(s))t=!1;else {let e=Object.prototype.hasOwnProperty.call(s,"__plugfaces__")?o.field(s,"__plugfaces__"):null;t=null!=e&&e.indexOf("IVideoPlayer")>-1;}if(0==t)return Object.create(null);let n=s.__name__.split(".").pop(),r=exports.configuration;return null!=r&&Object.prototype.hasOwnProperty.call(r,n)?o.field(r,n):Object.create(null)}}e.bs.player.core.plugin.VideoPlayerUtil=Le,Le.__name__="bs.player.core.plugin.VideoPlayerUtil",Object.assign(Le.prototype,{__class__:Le});class Ae{constructor(e,t,s){this.remotePlayerController=null,this.remotePlayer=null,this.context=null,this.applicationId=null,this.context=e,this.onApiLoadListener=t,this.applicationId=s,null==this.applicationId&&(this.applicationId="53001214"),this.isConnected=!1,null==Ae.instances&&(Ae.instances=[]),Ae.instances.push(this),Ae.libLoaded||(Ae.libLoaded=!0,this.checkScriptLoad(),this.loadScript()),E.add(e,"chromecast",St(this,this.onChromecast)),Ae._isAvailable&&(this.onCastApiInitialization(),null!=t&&et.delay(t,0));}get_isAvailable(){return Ae._isAvailable}onChromecast(e){this.getChromeCast().requestSession(),this.createSession();}connect(){if(!this.isConnected){this.isConnected=!0;let e=new I("connected");e.data={session:this.castSession,sender:this},e.dispatch(this.context),new j("videoCastingStart").dispatch(this.context);}}disconnect(){if(this.isConnected){this.isConnected=!1,this.castSession=null;let e=new I("disconnected");e.data={},e.dispatch(this.context),new j("videoCastingEnd").dispatch(this.context),this.getCast().framework.CastContext.getInstance().endCurrentSession(!0);}}createSession(){null==this.castSession&&this.monitorSessionCreation();}monitorSessionCreation(){null==this.castSession&&(this.castSession=this.getCast().framework.CastContext.getInstance().getCurrentSession()),null!=this.castSession?(this.connect(),this.monitorSessionTimer=new et(1e3),this.monitorSessionTimer.run=St(this,this.monitorSession)):this.monitorSessionCreationTimer=et.delay(St(this,this.monitorSessionCreation),500);}monitorSession(){null!=this.castSession&&"SESSION_ENDED"!=this.castSession.getSessionState()||(null!=this.monitorSessionTimer&&this.monitorSessionTimer.stop(),this.disconnect());}newRemotePlayerController(e){return new window.cast.framework.RemotePlayerController(e)}newRemotePlayer(){return new window.cast.framework.RemotePlayer}newLoadRequest(e){return new window.chrome.cast.media.LoadRequest(e)}newMediaInfo(e,t){return new window.chrome.cast.media.MediaInfo(e,t)}newGenericMediaMetadata(){return new window.chrome.cast.media.GenericMediaMetadata}newImage(e){return new window.chrome.cast.Image(e)}castMediaImage(e){let t,s,n=this.newImage(e.url);if(null!=e.width){let s=e.width;t=!isNaN(s);}else t=!1;if(t&&(n.width=e.width),null!=e.height){let t=e.height;s=!isNaN(t);}else s=!1;return s&&(n.height=e.height),n}onCastApiInitialization(){null!=this.getCast().framework?this.getCast().framework.CastContext.getInstance().setOptions({receiverApplicationId:this.applicationId,autoJoinPolicy:this.getChromeCast().AutoJoinPolicy.ORIGIN_SCOPED}):console.warn("Cannot start Chromecast. Try restart browser and Chromecast device.");}getChromeCast(){return window.chrome.cast}getChrome(){return window.chrome}getCast(){return window.cast}checkScriptLoad(){window.__onGCastApiAvailable=Ae.initializeCastApi;}loadScript(){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",e.appendChild(t);}destroy(){if(this.disconnect(),null!=Ae.instances){let e=Ae.instances.indexOf(this);e>=0&&Ae.instances.splice(e,1);}}__keepFieldsFix(){return p.getInstanceFields(Ae)}static initializeCastApi(e){if(Ae._isAvailable=e,e){let e=Ae.instances[0];null==e||null==e.getCast()||null==e.getChromeCast()?Ae._isAvailable=!1:e.onCastApiInitialization();}let t=0,s=Ae.instances;for(;t<s.length;){let e=s[t];++t,null!=e.onApiLoadListener&&e.onApiLoadListener();}}}e.bs.player.core.plugin.chromecast.ChromecastSender=Ae,Ae.__name__="bs.player.core.plugin.chromecast.ChromecastSender",Object.assign(Ae.prototype,{__class__:Ae,applicationId:null,context:null,remotePlayer:null,remotePlayerController:null,castSession:null,onApiLoadListener:null,monitorSessionTimer:null,monitorSessionCreationTimer:null,isConnected:null,isAvailable:null,__properties__:{get_isAvailable:"get_isAvailable"}});class ke{constructor(e,t,s,n,r,a,l,i){null==a&&(a=!1),this.progressPercent=e,this.progressLeft=t,this.progressRight=s,this.progress=n,this.width=r,this.isLast=a,this.label=l,this.duration=i;}__keepFieldsFix(){return p.getInstanceFields(ke)}}e.bs.player.core.vtt.ProgressSegmentData=ke,ke.__name__="bs.player.core.vtt.ProgressSegmentData",Object.assign(ke.prototype,{__class__:ke,progressPercent:null,progressLeft:null,progressRight:null,progress:null,width:null,label:null,duration:null,isLast:null});class Ne{constructor(e,t,s){this.left=e,this.progress=t,this.label=s;}__keepFieldsFix(){return p.getInstanceFields(Ne)}}e.bs.player.core.vtt.ProgressMarkerData=Ne,Ne.__name__="bs.player.core.vtt.ProgressMarkerData",Object.assign(Ne.prototype,{__class__:Ne,left:null,progress:null,label:null});class Fe{constructor(){this.showTime=0,this.hideTime=0;}__keepFieldsFix(){return p.getInstanceFields(Fe)}}e.bs.player.core.vtt.ProgressThumbnailEntry=Fe,Fe.__name__="bs.player.core.vtt.ProgressThumbnailEntry",Object.assign(Fe.prototype,{__class__:Fe,id:null,showTime:null,hideTime:null,source:null});class De{constructor(){}__keepFieldsFix(){return p.getInstanceFields(De)}}e.bs.player.core.vtt.ProgressThumbnailSize=De,De.__name__="bs.player.core.vtt.ProgressThumbnailSize",Object.assign(De.prototype,{__class__:De,w:null,h:null});class je extends De{constructor(){super();}}e.bs.player.core.vtt.ProgressThumbnailItem=je,je.__name__="bs.player.core.vtt.ProgressThumbnailItem",je.__super__=De,Object.assign(je.prototype,{__class__:je,imageId:null,url:null,x:null,y:null});class Te extends je{constructor(){super();}}e.bs.player.core.vtt.ProgressThumbnailSource=Te,Te.__name__="bs.player.core.vtt.ProgressThumbnailSource",Te.__super__=je,Object.assign(Te.prototype,{__class__:Te,id:null});class Ue extends je{constructor(e,t,s,n){super(),this.imageId=e,this.url=t,this.x=NaN,this.y=NaN,this.w=s,this.h=n,this.renderWidth=s,this.renderHeight=n;}}e.bs.player.core.vtt.ProgressThumbnailImage=Ue,Ue.__name__="bs.player.core.vtt.ProgressThumbnailImage",Ue.__super__=je,Object.assign(Ue.prototype,{__class__:Ue,renderWidth:null,renderHeight:null});class Be{constructor(){this.showTime=0;}__keepFieldsFix(){return p.getInstanceFields(Be)}}e.bs.player.core.vtt.VttMarkersParserEntry=Be,Be.__name__="bs.player.core.vtt.VttMarkersParserEntry",Object.assign(Be.prototype,{__class__:Be,id:null,showTime:null,text:null});class Me{constructor(){Me._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.lineNumber=0,this.TIMESTAMP_SEPARATOR=" --\x3e ",this.WHITESPACE_REGEX=new a("[ \t\r\n]+","g"),this.END_LINE_REGEX=new a("(\r\n)|(\n)","g");}readLine(){let e=this.lines[this.lineNumber];return this.lineNumber++,null!=e&&0==this.lineNumber?h.replace(e,"\ufeff",""):e}isFileEnd(){return this.lineNumber>=this.lines.length}isEmptyStr(e){return null==e||""==e}skipEmptyLines(){let e=this.readLine();for(;this.isEmptyStr(e)&&!this.isFileEnd();)e=this.readLine();this.isFileEnd()||this.lineNumber--;}parseTimestamp(e){let t=e.split("."),s=t[0].split(":"),n=t[1],r=s.pop(),a=s.pop(),l=s.pop(),i=0;return i=0+3600*(null==l?0:u.parseInt(l)),i+=60*(null==a?0:u.parseInt(a)),i+=null==r?0:u.parseInt(r),i+=(null==n?0:u.parseInt(n))/1e3,i}parseHeader(e){if(-1==(e=h.trim(e)).indexOf("WEBVTT"))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". WEBVTT text expected in first line."));return e}__keepFieldsFix(){return p.getInstanceFields(Me)}}e.bs.player.core.vtt.VttParser=Me,Me.__name__="bs.player.core.vtt.VttParser",Object.assign(Me.prototype,{__class__:Me,END_LINE_REGEX:null,WHITESPACE_REGEX:null,TIMESTAMP_SEPARATOR:null,lineNumber:null,lines:null});class Ve extends Me{constructor(){super(),this.lineNumber=0,this.lines=null;}parse(e){this.lines=this.END_LINE_REGEX.split(e),this.lineNumber=0,this.skipEmptyLines(),this.parseHeader(this.readLine()),this.skipEmptyLines();let t=[];for(;!this.isFileEnd();)t.push(this.parseEntry()),this.skipEmptyLines();return t}parseEntry(){let e=new Be,t=this.readLine();if(this.isEmptyStr(t))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse entry."));t=t.replace(this.WHITESPACE_REGEX.r," "),-1==t.indexOf(this.TIMESTAMP_SEPARATOR)&&(e.id=t,t=this.readLine());let s=t.split(this.TIMESTAMP_SEPARATOR);if(2!=s.length)throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse time for entry."));return e.showTime=this.parseTimestamp(s[0]),t=this.readLine(),e.text=this.parseText(t),e}parseText(e){if(this.isEmptyStr(e))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse source for entry."));return e}}e.bs.player.core.vtt.VttMarkersParser=Ve,Ve.__name__="bs.player.core.vtt.VttMarkersParser",Ve.__super__=Me,Object.assign(Ve.prototype,{__class__:Ve});class Re{constructor(e){this.message=e;}}Re.__name__="bs.player.core.vtt.VttParserError",Object.assign(Re.prototype,{__class__:Re,message:null});class He{constructor(){this.showTime=0,this.duration=0;}__keepFieldsFix(){return p.getInstanceFields(He)}}e.bs.player.core.vtt.VttSegmentsParserEntry=He,He.__name__="bs.player.core.vtt.VttSegmentsParserEntry",Object.assign(He.prototype,{__class__:He,id:null,showTime:null,hideTime:null,duration:null,text:null});class qe extends Me{constructor(){super(),this.lineNumber=0,this.lines=null;}parse(e){this.lines=this.END_LINE_REGEX.split(e),this.lineNumber=0,this.skipEmptyLines(),this.parseHeader(this.readLine()),this.skipEmptyLines();let t=[];for(;!this.isFileEnd();)t.push(this.parseEntry()),this.skipEmptyLines();return t}parseEntry(){let e=new He,t=this.readLine();if(this.isEmptyStr(t))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse entry."));t=t.replace(this.WHITESPACE_REGEX.r," "),-1==t.indexOf(this.TIMESTAMP_SEPARATOR)&&(e.id=t,t=this.readLine());let s=t.split(this.TIMESTAMP_SEPARATOR);if(2!=s.length)throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse time for entry."));e.showTime=this.parseTimestamp(s[0]);let n=this.parseTimestamp(s[1]);return e.hideTime=n,e.duration=n-e.showTime,t=this.readLine(),e.text=this.parseText(t),e}parseText(e){if(this.isEmptyStr(e))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse source for entry."));return e}}e.bs.player.core.vtt.VttSegmentsParser=qe,qe.__name__="bs.player.core.vtt.VttSegmentsParser",qe.__super__=Me,Object.assign(qe.prototype,{__class__:qe});class We{constructor(){this.entries=[],this.images=[];}__keepFieldsFix(){return p.getInstanceFields(We)}}e.bs.player.core.vtt.VttThumbnailsParserOutput=We,We.__name__="bs.player.core.vtt.VttThumbnailsParserOutput",Object.assign(We.prototype,{__class__:We,entries:null,images:null});class ze extends Me{constructor(e){Me._hx_skip_constructor=!0,super(),Me._hx_skip_constructor=!1,this._hx_constructor(e);}_hx_constructor(e){this.baseUrl="",this.sourceCounter=0,super._hx_constructor(),this.baseUrl=e,this.sourceCounter=0,this.lineNumber=0,this.lines=null;}parse(e){this.sourceCounter=0,this.lines=this.END_LINE_REGEX.split(e),this.lineNumber=0,this.skipEmptyLines(),this.parseHeader(this.readLine()),this.skipEmptyLines();let t=new We;for(;!this.isFileEnd();)t.entries.push(this.parseEntry()),this.skipEmptyLines();let s=[],n=[],r=0,a=0,l=t.entries;for(;a<l.length;){let e=l[a];++a,s.indexOf(e.source.url)<0&&(s.push(e.source.url),n.push(new Ue(++r,e.source.url,e.source.w,e.source.h))),e.source.imageId=r;}return t.images=n,t}parseEntry(){let e=new Fe,t=this.readLine();if(this.isEmptyStr(t))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse entry."));t=t.replace(this.WHITESPACE_REGEX.r," "),-1==t.indexOf(this.TIMESTAMP_SEPARATOR)&&(e.id=t,t=this.readLine());let s=t.split(this.TIMESTAMP_SEPARATOR);if(2!=s.length)throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse time for entry. (2)"));return e.showTime=this.parseTimestamp(s[0]),e.hideTime=this.parseTimestamp(s[1]),t=this.readLine(),e.source=this.parseSource(t),e}parseSource(e){if(this.isEmptyStr(e))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse source for entry (1)"));let t=new a("#","i").split(e),s=new Te;if(s.id=this.sourceCounter++,s.url=this.baseUrl+"/"+t[0],t.length<2||null==t[1])return s;let n=new a("=","i").split(t[1]);if(n.length<2||null==n[0]||null==n[1])return s;let r=n[0],l=n[1].split(",");if(l.length<1)return s;let i=r.indexOf("x");s.x=i<0||l.length<i||null==l[i]?0:u.parseInt(l[i]);let o=r.indexOf("y");s.y=o<0||l.length<o||null==l[o]?0:u.parseInt(l[o]);let c=r.indexOf("w");s.w=c<0||l.length<c||null==l[c]?0:u.parseInt(l[c]);let _=r.indexOf("h");return s.h=_<0||l.length<_||null==l[_]?0:u.parseInt(l[_]),s}}e.bs.player.core.vtt.VttThumbnailsParser=ze,ze.__name__="bs.player.core.vtt.VttThumbnailsParser",ze.__super__=Me,Object.assign(ze.prototype,{__class__:ze,sourceCounter:null,baseUrl:null});class Ge{static decode(e){let t=null;if(null==e)return t;let s=decodeURIComponent(e.split("+").join(" "));try{t=JSON.parse(s);}catch(e){try{let e=rt.decode(s).toString();try{t=JSON.parse(e);}catch(e){}}catch(e){}}return t}}Ge.__name__="bs.util.ConfigParser";class Xe{constructor(){}__keepFieldsFix(){return p.getInstanceFields(Xe)}static merge(e,t){return Xe._merge(Xe.copy(e),Xe.copy(t))}static _merge(e,t){if(null==t)return e;if(null!=t&&("string"==typeof t||"number"==typeof t&&(0|t)===t||"number"==typeof t||"boolean"==typeof t))return t;if(t instanceof Array){if(null==e)return e;let s=t,n=0;for(;n<s.length;)e.push(s[n++]);return e}let s=o.fields(t),n=0;for(;n<s.length;){let r=s[n];++n;let a=o.field(t,r);if(null==a){e[r]=null;continue}null==a||"string"!=typeof a&&("number"!=typeof a||(0|a)!==a)&&"number"!=typeof a&&"boolean"!=typeof a?a instanceof Array?(Object.prototype.hasOwnProperty.call(e,r)||(e[r]=[]),Xe._merge(o.field(e,r),a)):(Object.prototype.hasOwnProperty.call(e,r)||(e[r]={}),Xe._merge(o.field(e,r),a)):e[r]=a;}return e}static set(e,t,s){e[t]=s;}static get(e,t){return o.field(e,t)}static has(e,t){return Object.prototype.hasOwnProperty.call(e,t)}static fields(e){return o.fields(e)}static copy(e){if(null==e)return null;if(null!=e&&("string"==typeof e||"number"==typeof e&&(0|e)===e||"number"==typeof e||"boolean"==typeof e))return e;if(e instanceof Array){let t=[],s=e,n=0,r=s.length;for(;n<r;)t.push(Xe.copy(s[n++]));return t}let t={},s=o.fields(e),n=0;for(;n<s.length;){let r=s[n];++n,t[r]=Xe.copy(o.field(e,r));}return t}static isArray(e){return e instanceof Array}static isPrimitive(e){return null==e?null:"string"==typeof e||"number"==typeof e&&(0|e)===e||"number"==typeof e||"boolean"==typeof e}}e.bs.util.ObjectTools=Xe,Xe.__name__="bs.util.ObjectTools",Object.assign(Xe.prototype,{__class__:Xe});class Ye{__keepFieldsFix(){return p.getInstanceFields(Ye)}static getTextWidth(e,t){let s=0;return null==Ye.canvasCtx&&(Ye.canvasCtx=Ot.__cast(window.document.createElement("canvas"),HTMLCanvasElement).getContext("2d")),Ye.canvasCtx.font=t,s=Ye.canvasCtx.measureText(e).width,s}static formatTime(e,t){if(null==t&&(t=!1),isNaN(e))return "";if(e<0)return "live";let s=e%60|0,n=e/60%60|0,r=e/3600%24|0;return (1==t&&r<10?"0"+r:r+"")+":"+(n<10?"0"+n:n+"")+":"+(s<10?"0"+s:s+"")}static formatTimeMinutes(e){if(e<0)return "live";let t=e%60|0,s=e/60|0;return (s<10?"0"+s:s+"")+":"+(t<10?"0"+t:t+"")}static formatDateTime(e,t){if(null==t&&(t=0),null==e)return "";if(isNaN(e.getTime()))return "";let s=new Date(e.getFullYear(),e.getMonth(),e.getDay(),e.getHours(),e.getMinutes(),e.getSeconds()+t),n=s.getSeconds(),r=s.getMinutes();return s.getHours()+":"+(r<10?"0"+r:r+"")+":"+(n<10?"0"+n:n+"")}static initTranslations(){Ye.translations=new _t;let e=exports.i18n,t=0,s=o.fields(e);for(;t<s.length;){let n=s[t];++t,Ye.translations.h[n]=new _t;let r=o.field(e,n),a=Ye.translations.h[n],l=0,i=o.fields(r);for(;l<i.length;){let e=i[l];++l;let t=Ye.decodeUtf8(o.field(r,e));a.h[e]=t;}}}static decodeUtf8(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}static translate(e,t,s){null==t&&(t=Ye.locale),null==Ye.translations&&Ye.initTranslations();try{return Object.prototype.hasOwnProperty.call(Ye.translations.h,t)||(t="en"),Ye.translations.h[t].h[e]}catch(e){return null}}static capilizeFirstLetter(e){return null==e?null:l.substr(e,0,1).toUpperCase()+l.substr(e,1,e.length)}}e.bs.util.TextTools=Ye,Ye.__name__="bs.util.TextTools",Object.assign(Ye.prototype,{__class__:Ye});class Je{__keepFieldsFix(){return p.getInstanceFields(Je)}static random(e){null==e&&(e="xxxx-xxxx-xxxx-xxxx-xxxx");let t,s=e.length,n=Je.UID_CHARS.length,r="",a=0;for(;a<s;){let s;switch(t=e.charAt(a++),t){case"-":case"_":s=t;break;default:s=Je.UID_CHARS.charAt(u.random(n));}r+=s;}return r}static uuidv4(){let e=0,t="",s=null,n=0;for(;n<36;)e=u.random(16),s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".charAt(n++),t+="x"==s?h.hex(e):"y"==s?h.hex(3&e|8):s;return t}}e.bs.util.UUID=Je,Je.__name__="bs.util.UUID",Object.assign(Je.prototype,{__class__:Je});class Ke{}Ke.__name__="haxe.IMap",Ke.__isInterface__=!0,Object.assign(Ke.prototype,{__class__:Ke,get:null,keys:null});class Ze extends Error{constructor(e,t,s){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=s?s:this;}unwrap(){return this.__nativeException}toString(){return this.get_message()}get_message(){return this.message}get_native(){return this.__nativeException}static caught(e){return e instanceof Ze?e:e instanceof Error?new Ze(e.message,null,e):new tt(e,null,e)}static thrown(e){if(e instanceof Ze)return e.get_native();if(e instanceof Error)return e;return new tt(e)}}Ze.__name__="haxe.Exception",Ze.__super__=Error,Object.assign(Ze.prototype,{__class__:Ze,__skipStack:null,__nativeException:null,__previousException:null,__properties__:{get_native:"get_native",get_message:"get_message"}});class $e{constructor(e,t){this.high=e,this.low=t;}}$e.__name__="haxe._Int64.___Int64",Object.assign($e.prototype,{__class__:$e,high:null,low:null});class Qe{static formatOutput(e,t){let s=u.string(e);if(null==t)return s;let n=t.fileName+":"+t.lineNumber;if(null!=t.customParams){let e=0,n=t.customParams;for(;e<n.length;)s+=", "+u.string(n[e++]);}return n+": "+s}static trace(e,t){let s=Qe.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(s);}}Qe.__name__="haxe.Log";class et{constructor(e){let t=this;this.id=setInterval((function(){t.run();}),e);}stop(){null!=this.id&&(clearInterval(this.id),this.id=null);}run(){}static delay(e,t){let s=new et(t);return s.run=function(){s.stop(),e();},s}static measure(e,t){let s=l.now()/1e3,n=e();return Qe.trace(l.now()/1e3-s+"s",t),n}static stamp(){return l.now()/1e3}}e.haxe.Timer=et,et.__name__="haxe.Timer",Object.assign(et.prototype,{__class__:et,id:null});class tt extends Ze{constructor(e,t,s){super(String(e),t,s),this.value=e;}unwrap(){return this.value}}tt.__name__="haxe.ValueException",tt.__super__=Ze,Object.assign(tt.prototype,{__class__:tt,value:null});class st{constructor(e){this.length=e.byteLength,this.b=new Uint8Array(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b;}get(e){return this.b[e]}set(e,t){this.b[e]=t;}blit(e,t,s,n){if(e<0||s<0||n<0||e+n>this.length||s+n>t.length)throw Ze.thrown(yt.OutsideBounds);0==s&&n==t.b.byteLength?this.b.set(t.b,e):this.b.set(t.b.subarray(s,s+n),e);}fill(e,t,s){let n=0;for(;n<t;)++n,this.b[e++]=s;}sub(e,t){if(e<0||t<0||e+t>this.length)throw Ze.thrown(yt.OutsideBounds);return new st(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+t))}compare(e){let t=this.b,s=e.b,n=0,r=this.length<e.length?this.length:e.length;for(;n<r;){let e=n++;if(t[e]!=s[e])return t[e]-s[e]}return this.length-e.length}initData(){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));}getDouble(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat64(e,!0)}getFloat(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(e,!0)}setDouble(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat64(e,t,!0);}setFloat(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(e,t,!0);}getUInt16(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)}setUInt16(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setUint16(e,t,!0);}getInt32(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)}setInt32(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,t,!0);}getInt64(e){return new $e(this.getInt32(e+4),this.getInt32(e))}setInt64(e,t){this.setInt32(e,t.low),this.setInt32(e+4,t.high);}getString(e,t,s){if(e<0||t<0||e+t>this.length)throw Ze.thrown(yt.OutsideBounds);null==s&&(s=nt.UTF8);let n="",r=this.b,a=e,l=e+t;switch(s._hx_index){case 0:for(;a<l;){let e=r[a++];if(e<128){if(0==e)break;n+=String.fromCodePoint(e);}else if(e<224){let t=(63&e)<<6|127&r[a++];n+=String.fromCodePoint(t);}else if(e<240){let t=(31&e)<<12|(127&r[a++])<<6|127&r[a++];n+=String.fromCodePoint(t);}else {let t=(15&e)<<18|(127&r[a++])<<12|(127&r[a++])<<6|127&r[a++];n+=String.fromCodePoint(t);}}break;case 1:for(;a<l;){let e=r[a++]|r[a++]<<8;n+=String.fromCodePoint(e);}}return n}readString(e,t){return this.getString(e,t)}toString(){return this.getString(0,this.length)}toHex(){let e="",t=[],s="0123456789abcdef",n=0;for(;n<16;)t.push(l.cca(s,n++));let r=0,a=this.length;for(;r<a;){let s=this.b[r++];e+=String.fromCodePoint(t[s>>4]),e+=String.fromCodePoint(t[15&s]);}return e}getData(){return this.b.bufferValue}static alloc(e){return new st(new ArrayBuffer(e))}static ofString(e,t){if(t==nt.RawNative){let t=new Uint8Array(e.length<<1),s=0,n=e.length;for(;s<n;){let n=s++,r=e.charCodeAt(n);t[n<<1]=255&r,t[n<<1|1]=r>>8;}return new st(t.buffer)}let s=[],n=0;for(;n<e.length;){let t=e.charCodeAt(n++);55296<=t&&t<=56319&&(t=t-55232<<10|1023&e.charCodeAt(n++)),t<=127?s.push(t):t<=2047?(s.push(192|t>>6),s.push(128|63&t)):t<=65535?(s.push(224|t>>12),s.push(128|t>>6&63),s.push(128|63&t)):(s.push(240|t>>18),s.push(128|t>>12&63),s.push(128|t>>6&63),s.push(128|63&t));}return new st(new Uint8Array(s).buffer)}static ofData(e){let t=e.hxBytes;return null!=t?t:new st(e)}static ofHex(e){if(0!=(1&e.length))throw Ze.thrown("Not a hex string (odd number of digits)");let t=[],s=0,n=e.length>>1;for(;s<n;){let n=e.charCodeAt(2*s),r=e.charCodeAt(2*s+1);n=(15&n)+9*((64&n)>>6),r=(15&r)+9*((64&r)>>6),t.push(255&(n<<4|r)),++s;}return new st(new Uint8Array(t).buffer)}static fastGet(e,t){return e.bytes[t]}}e.haxe.io.Bytes=st,st.__name__="haxe.io.Bytes",Object.assign(st.prototype,{__class__:st,length:null,b:null,data:null});var nt=r["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:n},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:n}};nt.__constructs__=[nt.UTF8,nt.RawNative];class rt{static encode(e,t){null==t&&(t=!0);let s=new at(rt.BYTES).encodeBytes(e).toString();if(t)switch(e.length%3){case 1:s+="==";break;case 2:s+="=";}return s}static decode(e,t){if(null==t&&(t=!0),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new at(rt.BYTES).decodeBytes(st.ofString(e))}static urlEncode(e,t){null==t&&(t=!1);let s=new at(rt.URL_BYTES).encodeBytes(e).toString();if(t)switch(e.length%3){case 1:s+="==";break;case 2:s+="=";}return s}static urlDecode(e,t){if(null==t&&(t=!1),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new at(rt.URL_BYTES).decodeBytes(st.ofString(e))}}e.haxe.crypto.Base64=rt,rt.__name__="haxe.crypto.Base64";class at{constructor(e){let t=e.length,s=1;for(;t>1<<s;)++s;if(s>8||t!=1<<s)throw Ze.thrown("BaseCode : base length must be a power of two.");this.base=e,this.nbits=s;}encodeBytes(e){let t=this.nbits,s=this.base,n=8*e.length/t|0,r=new st(new ArrayBuffer(n+(8*e.length%t==0?0:1))),a=0,l=0,i=(1<<t)-1,o=0,u=0;for(;u<n;){for(;l<t;)l+=8,a<<=8,a|=e.b[o++];l-=t,r.b[u++]=s.b[a>>l&i];}return l>0&&(r.b[u++]=s.b[a<<t-l&i]),r}initTable(){let e=[],t=0;for(;t<256;)e[t++]=-1;let s=0,n=this.base.length;for(;s<n;){let t=s++;e[this.base.b[t]]=t;}this.tbl=e;}decodeBytes(e){let t=this.nbits;null==this.tbl&&this.initTable();let s=this.tbl,n=e.length*t>>3,r=new st(new ArrayBuffer(n)),a=0,l=0,i=0,o=0;for(;o<n;){for(;l<8;){l+=t,a<<=t;let n=s[e.b[i++]];if(-1==n)throw Ze.thrown("BaseCode : invalid encoded char");a|=n;}l-=8,r.b[o++]=a>>l&255;}return r}encodeString(e){return this.encodeBytes(st.ofString(e)).toString()}decodeString(e){return this.decodeBytes(st.ofString(e)).toString()}static encode(e,t){return new at(st.ofString(t)).encodeString(e)}static decode(e,t){return new at(st.ofString(t)).decodeString(e)}}e.haxe.crypto.BaseCode=at,at.__name__="haxe.crypto.BaseCode",Object.assign(at.prototype,{__class__:at,base:null,nbits:null,tbl:null});class lt{constructor(){this.h={};}set(e,t){this.h[e]=t;}get(e){return this.h[e]}exists(e){return this.h.hasOwnProperty(e)}remove(e){return !!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)}keys(){let e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(+t);return new ft(e)}iterator(){return {ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){let e=this.it.next();return this.ref[e]}}}keyValueIterator(){return new xt(this)}copy(){let e=new lt,t=this.keys();for(;t.hasNext();){let s=t.next();e.h[s]=this.h[s];}return e}toString(){let e="";e="[";let t=this.keys();for(;t.hasNext();){let s=t.next();e+=null==s?"null":""+s,e+=" => ",e+=u.string(u.string(this.h[s])),t.hasNext()&&(e+=", ");}return e+="]",e}clear(){this.h={};}}e.haxe.ds.IntMap=lt,lt.__name__="haxe.ds.IntMap",lt.__interfaces__=[Ke],Object.assign(lt.prototype,{__class__:lt,h:null});class it{constructor(){this.length=0;}add(e){let t=new ot(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++;}push(e){let t=new ot(e,this.h);this.h=t,null==this.q&&(this.q=t),this.length++;}first(){return null==this.h?null:this.h.item}last(){return null==this.q?null:this.q.item}pop(){if(null==this.h)return null;let e=this.h.item;return this.h=this.h.next,null==this.h&&(this.q=null),this.length--,e}isEmpty(){return null==this.h}clear(){this.h=null,this.q=null,this.length=0;}remove(e){let t=null,s=this.h;for(;null!=s;){if(s.item==e)return null==t?this.h=s.next:t.next=s.next,this.q==s&&(this.q=t),this.length--,!0;t=s,s=s.next;}return !1}iterator(){return new ut(this.h)}keyValueIterator(){return new ct(this.h)}toString(){let e="",t=!0,s=this.h;for(e="{";null!=s;)t?t=!1:e+=", ",e+=u.string(u.string(s.item)),s=s.next;return e+="}",e}join(e){let t="",s=!0,n=this.h;for(;null!=n;)s?s=!1:t+=null==e?"null":""+e,t+=u.string(n.item),n=n.next;return t}filter(e){let t=new it,s=this.h;for(;null!=s;){let n=s.item;s=s.next,e(n)&&t.add(n);}return t}map(e){let t=new it,s=this.h;for(;null!=s;){let n=s.item;s=s.next,t.add(e(n));}return t}}e.haxe.ds.List=it,it.__name__="haxe.ds.List",Object.assign(it.prototype,{__class__:it,h:null,q:null,length:null});class ot{constructor(e,t){this.item=e,this.next=t;}}e.haxe.ds._List.ListNode=ot,ot.__name__="haxe.ds._List.ListNode",Object.assign(ot.prototype,{__class__:ot,item:null,next:null});class ut{constructor(e){this.head=e;}hasNext(){return null!=this.head}next(){let e=this.head.item;return this.head=this.head.next,e}}e.haxe.ds._List.ListIterator=ut,ut.__name__="haxe.ds._List.ListIterator",Object.assign(ut.prototype,{__class__:ut,head:null});class ct{constructor(e){this.head=e,this.idx=0;}hasNext(){return null!=this.head}next(){let e=this.head.item;return this.head=this.head.next,{value:e,key:this.idx++}}}e.haxe.ds._List.ListKeyValueIterator=ct,ct.__name__="haxe.ds._List.ListKeyValueIterator",Object.assign(ct.prototype,{__class__:ct,idx:null,head:null});class _t{constructor(){this.h=Object.create(null);}exists(e){return Object.prototype.hasOwnProperty.call(this.h,e)}get(e){return this.h[e]}set(e,t){this.h[e]=t;}remove(e){return !!Object.prototype.hasOwnProperty.call(this.h,e)&&(delete this.h[e],!0)}keys(){return new ht(this.h)}iterator(){return new pt(this.h)}keyValueIterator(){return new dt(this.h)}copy(){return _t.createCopy(this.h)}clear(){this.h=Object.create(null);}toString(){return _t.stringify(this.h)}static createCopy(e){let t=new _t;for(var s in e)t.h[s]=e[s];return t}static stringify(e){let t="[",s=!0;for(var n in e)s?s=!1:t+=",",t+=n+" => "+u.string(e[n]);return t+"]"}}e.haxe.ds.StringMap=_t,_t.__name__="haxe.ds.StringMap",_t.__interfaces__=[Ke],Object.assign(_t.prototype,{__class__:_t,h:null});class ht{constructor(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0;}hasNext(){return this.current<this.length}next(){return this.keys[this.current++]}}e.haxe.ds._StringMap.StringMapKeyIterator=ht,ht.__name__="haxe.ds._StringMap.StringMapKeyIterator",Object.assign(ht.prototype,{__class__:ht,h:null,keys:null,length:null,current:null});class pt{constructor(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0;}hasNext(){return this.current<this.length}next(){return this.h[this.keys[this.current++]]}}e.haxe.ds._StringMap.StringMapValueIterator=pt,pt.__name__="haxe.ds._StringMap.StringMapValueIterator",Object.assign(pt.prototype,{__class__:pt,h:null,keys:null,length:null,current:null});class dt{constructor(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0;}hasNext(){return this.current<this.length}next(){let e=this.keys[this.current++];return {key:e,value:this.h[e]}}}e.haxe.ds._StringMap.StringMapKeyValueIterator=dt,dt.__name__="haxe.ds._StringMap.StringMapKeyValueIterator",Object.assign(dt.prototype,{__class__:dt,h:null,keys:null,length:null,current:null});class gt extends Ze{constructor(e,t,s){super(e,t),this.posInfos=null==s?{fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}:s;}toString(){return super.toString()+" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber}}gt.__name__="haxe.exceptions.PosException",gt.__super__=Ze,Object.assign(gt.prototype,{__class__:gt,posInfos:null});class mt extends gt{constructor(e,t,s){null==e&&(e="Not implemented"),super(e,t,s);}}mt.__name__="haxe.exceptions.NotImplementedException",mt.__super__=gt,Object.assign(mt.prototype,{__class__:mt});var yt=r["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:n},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:n},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:n},Custom:(s=function(e){return {_hx_index:3,e,__enum__:"haxe.io.Error",toString:n}},s._hx_name="Custom",s.__params__=["e"],s)};yt.__constructs__=[yt.Blocked,yt.Overflow,yt.OutsideBounds,yt.Custom];class ft{constructor(e){this.current=0,this.array=e;}hasNext(){return this.current<this.array.length}next(){return this.array[this.current++]}}e.haxe.iterators.ArrayIterator=ft,ft.__name__="haxe.iterators.ArrayIterator",Object.assign(ft.prototype,{__class__:ft,array:null,current:null});class bt{constructor(e){this.array=e;}}bt.__name__="haxe.iterators.ArrayKeyValueIterator",Object.assign(bt.prototype,{__class__:bt,array:null});class xt{constructor(e){this.map=e,this.keys=e.keys();}hasNext(){return this.keys.hasNext()}next(){let e=this.keys.next();return {value:this.map.get(e),key:e}}}xt.__name__="haxe.iterators.MapKeyValueIterator",Object.assign(xt.prototype,{__class__:xt,map:null,keys:null});class wt{constructor(e){this.s=e;}}wt.__name__="haxe.iterators.StringIterator",Object.assign(wt.prototype,{__class__:wt,s:null});class vt{constructor(e){this.s=e;}}vt.__name__="haxe.iterators.StringKeyValueIterator",Object.assign(vt.prototype,{__class__:vt,s:null});class Ot{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let s=Ot.__nativeClassName(e);return null!=s?Ot.__resolveNativeClass(s):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let s=typeof e;switch("function"==s&&(e.__name__||e.__ename__)&&(s="object"),s){case"function":return "<function>";case"object":if(e.__enum__){let s=r[e.__enum__].__constructs__[e._hx_index],n=s._hx_name;return s.__params__?(t+="\t",n+"("+function(n){let r=[];{let n=0,a=s.__params__;for(;n<a.length;){let s=a[n];n+=1,r.push(Ot.__string_rec(e[s],t));}}return r}().join(",")+")"):n}if(e instanceof Array){let s="[";t+="\t";let n=0,r=e.length;for(;n<r;){let r=n++;s+=(r>0?",":"")+Ot.__string_rec(e[r],t);}return s+="]",s}let s;try{s=e.toString;}catch(e){return "???"}if(null!=s&&s!=Object.toString&&"function"==typeof s){let t=e.toString();if("[object Object]"!=t)return t}let n="{\n";t+="\t";let a=null!=e.hasOwnProperty,l=null;for(l in e)a&&!e.hasOwnProperty(l)||"prototype"!=l&&"__class__"!=l&&"__super__"!=l&&"__interfaces__"!=l&&"__properties__"!=l&&(2!=n.length&&(n+=", \n"),n+=t+l+" : "+Ot.__string_rec(e[l],t));return n+="\n"+(t=t.substring(1))+"}",n;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let s=e.__interfaces__;if(null!=s&&(null==e.__super__||e.__super__.__interfaces__!=s)){let e=0,n=s.length;for(;e<n;){let n=s[e++];if(n==t||Ot.__interfLoop(n,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case At:return "boolean"==typeof e;case Pt:return null!=e;case Lt:return "number"==typeof e;case Ct:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(Ot.__downcastCheck(e,t))return !0}else if("object"==typeof t&&Ot.__isNativeObj(t)&&e instanceof t)return !0;return t==kt&&null!=e.__name__||(t==Nt&&null!=e.__ename__||null!=e.__enum__&&r[e.__enum__]==t)}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&Ot.__interfLoop(Ot.getClass(e),t)}static __cast(e,t){if(null==e||Ot.__instanceof(e,t))return e;throw Ze.thrown("Cannot cast "+u.string(e)+" to "+u.string(t))}static __nativeClassName(e){let t=Ot.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=Ot.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}Ot.__name__="js.Boot";class It{static get_supported(){return "undefined"!=typeof window&&void 0!==window.location&&"string"==typeof window.location.protocol}static createXMLHttpRequest(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw Ze.thrown("Unable to create XMLHttpRequest object.")}}function Et(e){return e instanceof Array?new ft(e):e.iterator()}function St(e,s){return null==s?null:(null==s.__id__&&(s.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[s.__id__],null==n&&(n=s.bind(e),e.hx__closures__[s.__id__]=n),n);var n;}It.__name__="js.Browser",It.__properties__={get_supported:"get_supported"},t.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(l.now=performance.now.bind(performance)),null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var Ct={},Pt={},Lt=Number,At=Boolean,kt={},Nt={};{let e,t=window.navigator.appVersion,s=window.navigator.userAgent,n=window.navigator.appName,r=parseFloat(navigator.appVersion)+"";b.majorVersion=parseFloat(t);let l=s.indexOf("OPR/");if(-1!=l)n="Opera",r=s.substring(l+4);else if(l=s.indexOf("Opera"),-1!=l)n="Opera",r=s.substring(l+6),l=s.indexOf("Version"),-1!=l&&(r=s.substring(l+8));else if(l=s.indexOf("Edge"),-1!=l){let e;n="Edge",r=s.substring(l+5),window.MediaKeys?(l=s.indexOf("Chrome"),e=-1!=l):e=!1,e?(n="EdgeChromium",r=s.substring(l+7)):"reversed"in document.createElement("ol")&&(n="EdgeChromium",r="80");}else if(l=s.indexOf("Edg/"),-1!=l)n="EdgeChromium",r=s.substring(l+4);else if(l=s.indexOf("MSIE"),-1!=l)n="Microsoft Internet Explorer",r=s.substring(l+5);else {let t;-1!=s.indexOf("Trident/")?(l=s.indexOf("rv:"),t=-1!=l):t=!1,t?(n="Microsoft Internet Explorer",r=s.substring(l+3)):(l=s.indexOf("Chrome"),-1!=l?(n="Chrome",r=s.substring(l+7)):(l=s.indexOf("Safari"),-1!=l?(n="Safari",r=s.substring(l+7),l=s.indexOf("Version"),-1!=l&&(r=s.substring(l+8))):(l=s.indexOf("Firefox"),-1!=l?(n="Firefox",r=s.substring(l+8)):(e=s.lastIndexOf(" ")+1,l=s.lastIndexOf("/"),e<l&&(n=s.substring(e,l),r=s.substring(l+1),n.toLowerCase()==n.toUpperCase()&&(n=window.navigator.appName))))));}let i=r.indexOf(";");if(-1!=i&&(r=r.substring(0,i)),i=r.indexOf(" "),-1!=i)r=r.substring(0,i);else if("Netscape"==n){let e=new a("Trident.*rv:([0-9]{1,}[\\.0-9]{0,})","");e.match(s);try{e.matched(0),r=e.matched(1),n="Microsoft Internet Explorer";}catch(e){}}b.majorVersion=u.parseInt(""+r);let o=b.majorVersion;isNaN(o)&&(r=""+parseFloat(t),b.majorVersion=u.parseInt(t)),b.browserName=n;let c=window.navigator.userAgent;c=c.toLowerCase(),b.isAndroid=c.indexOf("android")>-1,b.isBlackBerry=c.indexOf("blackberry")>-1,b.isiPhone=c.indexOf("iphone")>-1,b.isiPad=c.indexOf("ipad")>-1,b.isiPod=c.indexOf("ipod")>-1,b.isOperaMini=c.indexOf("opera mini")>-1,b.isIeMobile=c.indexOf("iemobile")>-1,b.isWindowsPhone=c.indexOf("windows phone")>-1,b.isEdge="Edge"==b.browserName;let _=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&-1!=(navigator.platform+"").indexOf("MacIntel");if(b.isiOS=b.isiPhone||b.isiPad||b.isiPod||_,b.mobile=b.isAndroid||b.isBlackBerry||b.isiOS||b.isOperaMini||b.isIeMobile,c.indexOf("smart-tv")>-1||c.indexOf("smarttv")>-1){b.smartTV=!0;let e=c.indexOf("samsungbrowser")>-1,t=c.indexOf("tizen")>-1;b.isSamsungSmartTVTizen=t&&!e;}else b.smartTV=!1,b.isSamsungSmartTVTizen=!1;}{x.expose=o.field(window,"bradmax"),null==x.expose&&(window.bradmax=Object.create(null),x.expose=o.field(window,"bradmax"));let e=["bigsoda"],t=0;for(;t<e.length;){let s=e[t];++t,window[s]=x.expose;}0==Object.prototype.hasOwnProperty.call(x.expose,"player")&&(x.expose.player=Object.create(null));let s=o.field(x.expose,"player");0==Object.prototype.hasOwnProperty.call(s,"plugin")&&(s.plugin=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"create")&&(s.create=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"destroy")&&(s.destroy=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"list")&&(s.list=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"getById")&&(s.getById=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"embeders")&&(s.embeders=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"composers")&&(s.composers=Object.create(null));Object.prototype.hasOwnProperty.call(s,"embeder");let n="modular_v2.14.364";x.sourcePath=b.findThisJsScriptAbsolutePath(n);let r=o.field(s,"embeders");null==o.field(r,n)&&(r[n]=x);let a=o.field(s,"composers");null==o.field(a,n)&&(a[n]=f);}{let e=window.document;A.fullscreenEventName="fullscreenchange","Safari"==b.browserName&&null!=e.webkitIsFullScreen?A.fullscreenEventName="webkitfullscreenchange":"Firefox"==b.browserName&&null!=e.mozFullScreen&&b.majorVersion<64?A.fullscreenEventName="mozfullscreenchange":null!=e.msFullscreenEnabled&&(A.fullscreenEventName="MSFullscreenChange");}Ot.__toStr={}.toString,a.escapeRe=new RegExp("[.*+?^${}()|[\\]\\\\]","g"),_.winMetaCharacters=[32,40,41,37,33,94,34,60,62,38,124,10,13,44,59],h.winMetaCharacters=_.winMetaCharacters,h.MIN_SURROGATE_CODE_POINT=65536,g._hx_skip_constructor=!1,x.NAMESPACE="bradmax",x.ATTRIBUTE_PID="data-bradmax-player-pid",x.VIDEO_TAG_FOR_AUTOPLAY_INITIALSED="data-ready-for-autoplay",x.PLAYER_ATTRIBUTE_PARENT_ID="data-bs-parent-id",x.PLAYER_ATTRIBUTE_VARIABLES="data-bs-variables",x.HTML_VIDEO_MAX_ELEMENTS_FOR_LATER_AUTOPLAY=2,x.players=new _t,x.wrappers=[],x.htmlVideoElementsForLaterAutoplay=[],x.pendingVideoElementsForLaterAutoplay=0,x.listenersWaitinfForVideoElementForAutoplay=[],T.instance=new T,T.listenersMap=new _t,T.onceListenersMap=new _t,T.disabledListenersMap=new _t,B.instance=new B,V.monitors=new _t,H._hx_skip_constructor=!1,Ae.DEFAULT_BRADMAX_SKIN_APP_ID="53001214",Ae.libLoaded=!1,Ae._isAvailable=!1,Me._hx_skip_constructor=!1,Ye.locale="en",Je.UID_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",rt.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt.BYTES=st.ofString(rt.CHARS),rt.URL_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",rt.URL_BYTES=st.ofString(rt.URL_CHARS);}(exports,window);
!function(t,e){t.bs=t.bs||{},t.bs.player=t.bs.player||{},t.bs.player.plugin=t.bs.player.plugin||{},t.bs.player.plugin.skin=t.bs.player.plugin.skin||{};var s,i=function(){return zt.__string_rec(this,"")},a=a||{},l=require("haxe.EReg"),n=require("haxe.EReg"),r=require("haxe.HxOverrides");Math.__name__="Math";var o=require("haxe.Reflect");class h{static string(t){return zt.__string_rec(t,"")}static parseInt(t){let e=parseInt(t);return isNaN(e)?null:e}static random(t){return t<=0?0:Math.floor(Math.random()*t)}}h.__name__="Std";var u=require("haxe.StringTools"),c=require("bs.net.Http"),d=require("bs.player.core.events.AdEvent"),p=require("bs.player.core.events.ControlEvent"),m=require("bs.player.core.events.DataProviderEvent"),f=require("bs.player.core.events.DisplayEvent"),g=require("bs.util.BrowserTools"),_=require("bs.player.core.events.NativeEvent"),b=require("bs.player.core.events.ResizeEvent"),v=require("bs.player.core.events.SphericalVideoEvent"),y=require("bs.player.core.events.VideoEvent");class k{}k.__name__="bs.player.core.interfaces.IBradmaxThumbnailsService",k.__isInterface__=!0,Object.assign(k.prototype,{__class__:k});var x=require("bs.player.core.manager.PlaybackStateRegister"),w=require("bs.player.core.model.Live"),E=require("bs.player.core.model.LiveStream"),S=require("bs.player.core.model.MediaPlaylist"),P=require("bs.player.core.model.Image"),O=require("bs.player.core.model.Point"),C=require("bs.player.core.model.Episode");class T{constructor(){T._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let t=zt.getClass(this);this.pluginName=t.__name__.split(".").pop();let e=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,e)?o.field(s,e):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(t){return !0}registerPlugin(t){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(t){return this.player=t}get_variables(){return this.variables}set_variables(t){return this.variables=t}get_eventHub(){return this.eventHub}set_eventHub(t){return this.eventHub=t}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(t){return this.parentDisplay=t}get_display(){return this.display}}T.__name__="bs.player.core.plugin.PluginBase",Object.assign(T.prototype,{__class__:T});var M=require("bs.player.core.vtt.VttMarkersParserEntry"),I=require("bs.player.core.vtt.VttMarkersParser"),L=require("bs.player.core.vtt.VttSegmentsParserEntry"),A=require("bs.player.core.vtt.VttSegmentsParser"),D=require("bs.player.core.vtt.VttThumbnailsParser");class F extends T{constructor(){T._hx_skip_constructor=!0,super(),T._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.fontsLoaded=!1,this.sourcesLoaded=!1,this.ready=!1,this.layoutAvailable=!1,this.activated=!1,this._css={adPlaying:"iab-playing",vpaidPlaying:"vpaid-playing"};let t={current:{time:0,text:Tt.formatTime(0)},duration:{time:0,text:Tt.formatTime(0)},status:{inited:!1,playing:!1,paused:!1,buffering:!1,seeking:!1,complete:!1,live:!1,dvr:!1},playPause:null,seekEnd:null},e=isNaN(1)||!isFinite(1)?"0%":Math.max(0,Math.min(100,100))+"%",s={time:0,text:Tt.formatTime(0),width:"0",seekable:!0,has:{thumb:!1,segments:!1,segment:!1,markers:!1,marker:!1,texts:!1},popup:{active:!1,time:0,text:Tt.formatTime(0),position:"0",width:"0",bounds:{offset:"0px",ctrl:null},ctrl:null},ctrl:null},i={width:NaN,height:NaN,css:"",is:{xxs:!0,xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1},not:{xxs:!1,xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},a=g.isMobile(),l=g.isSmartTV(),n={browserName:g.browserName.toLowerCase(),desktop:0==a&&0==l,mobile:a,ios:g.isiOS,tv:l,tizen:g.isSamsungSmartTVTizen,webview:g.isWebView(),css:null};this.state={name:"",prefix:"",title:null,video:t,volume:{mute:!1,value:1,prc:e,text:"100",active:!1,ctrl:null,toggle:null},progress:s,playlist:{hasNext:!1,currentPos:-1,items:null,playItem:null},brand:null,splash:{show:{start:!1,state:!1,end:!1},start:{type:"image"},state:{type:"standard"},end:{type:"standard",playNext:null}},share:null,spinner:null,menu:{count:0,audio:{hasItems:!1,activate:null},casting:null,fullscreen:null,pictureInPicture:null,quality:{hasItems:!1,activate:null,value:null},subtitles:{hasItems:!1,activate:null},vr:null,playbackRate:{hasItems:!1,items:null,activate:null}},contextmenu:{show:!1,ctrl:null},ad:null,hide:"show",size:i,device:n,message:null,icon:{type:"css",airplay:{id:"bmp-ico-airplay"},alert:{id:"bmp-ico-alert"},subtitles:{id:"bmp-ico-subtitles"},pip:{id:"bmp-ico-pip"},chromecast:{id:"bmp-ico-chromecast"},copy:{id:"bmp-ico-copy"},playNext:{id:"bmp-ico-play-next"},maximize:{id:"bmp-ico-maximize"},minimize:{id:"bmp-ico-minimize"},menu:{id:"bmp-ico-menu"},audio:{id:"bmp-ico-audio"},pause:{id:"bmp-ico-pause"},play:{id:"bmp-ico-play"},replay:{id:"bmp-ico-replay"},quality:{id:"bmp-ico-quality"},share:{id:"bmp-ico-share",type:"css",code:{id:"bmp-ico-code",group:"share"},mail:{id:"bmp-ico-mail",group:"share"},facebook:{id:"bmp-ico-facebook",group:"share"},twitter:{id:"bmp-ico-twitter",group:"share"},linkedin:{id:"bmp-ico-linkedin",group:"share"}},volume:{id:"bmp-ico-volume"},volume1:{id:"bmp-ico-volume-1"},volume2:{id:"bmp-ico-volume-2"},volumeX:{id:"bmp-ico-volume-x"},close:{id:"bmp-ico-close"},left:{id:"bmp-ico-left"},right:{id:"bmp-ico-right"},up:{id:"bmp-ico-up"},down:{id:"bmp-ico-down"},center:{id:"bmp-ico-center"},vr:{id:"bmp-ico-vr"},gyroscope:{id:"bmp-ico-gyroscope"},zoom:{plus:{id:"bmp-ico-zoom-plus"},minus:{id:"bmp-ico-zoom-minus"},reset:{id:"bmp-ico-zoom-reset"}},playbackRate:{id:"bmp-ico-playback-rate"}},camera:null,timeCss:Pt.formatCss,img:{srcset:Et.stateToAttribute,sizes:Et.stateToSizesAttribute}},this.litOptions={},this.lit=new j,super._hx_constructor();}formatEncapsulation(t){return "[data-"+this.get_prefix()+"-name="+t+"]"}create(){super.create();let t=Ct.copy(this.pluginConfig),e=this;this.readResources(t,(function(s){if(e.parseResources(t,s),e.state.name=e.get_name(),e.state.prefix=e.get_prefix(),e.litOptions.host=e,e.attachFonts(),e.attachCssVars(),e.fetchSources(),null!=e.icon){let t=e.icon,s=null!=e.get_icons()&&null!=e.get_icons().svg,i=null!=e.get_shareIcons()&&null!=e.get_shareIcons().svg;t.updateTypesState(s?"svg":"css",i?"svg":"css");}})),this.start();}destroy(){this.ready=!1,this.sourcesLoaded=!1,this.fontsLoaded=!1,this.activated=!1,this.layoutAvailable=!1,null!=this.size&&this.size.destroy(),null!=this.device&&this.device.destroy(),null!=this.ad&&this.ad.destroy(),null!=this.video&&this.video.destroy(),null!=this.splash&&this.splash.destroy(),null!=this.progress&&this.progress.destroy(),null!=this.volume&&this.volume.destroy(),null!=this.brand&&this.brand.destroy(),null!=this.title&&this.title.destroy(),null!=this.playlist&&this.playlist.destroy(),null!=this.menu&&this.menu.destroy(),null!=this.share&&this.share.destroy(),null!=this.message&&this.message.destroy(),null!=this.hide&&this.hide.destroy(),null!=this.icon&&this.icon.destroy(),null!=this.camera&&this.camera.destroy(),null!=this.contextmenu&&this.contextmenu.destroy(),null!=this.spinner&&this.spinner.destroy();}activate(){this.activated=!0;}deactivate(){this.activated=!1;}getLayout(t){return null==t&&(t=!1),t?this.get_parsedLayout():this.get_layout()}redrawLayout(t){this.set_layout(t),this.set_parsedLayout(t),this.layoutAvailable=null!=this.get_parsedLayout()&&this.get_parsedLayout().length>0,this.render();}init(){this.state.name=this.get_name(),this.state.prefix=this.get_prefix(),this.litOptions.host=this;}readResources(t,e){let s=this.get_variables(),i=null;Object.prototype.hasOwnProperty.call(s,"skin")&&(i=o.field(s,"skin"));let a=i,l=null;null!=a&&Object.prototype.hasOwnProperty.call(a,"theme")&&(l=o.field(a,"theme")),null!=t&&Object.prototype.hasOwnProperty.call(t,"theme")&&(l=o.field(t,"theme"));let n=this;if(null!=l&&"string"==typeof l){let t=0==l.indexOf("http");if(0==t&&0==["gorilla","disco","zebra","mole","techno","jazz","snake"].includes(l)){let t={plugin:this.pluginName,error:'Invalid theme name: "'+l+'"'};return void console.error(t)}let s=new c(t?this.versionUrl(l):this.versionUrl("https://bradm.ax/player/VERSION/theme/THEME.json".split("THEME").join(l)));s.onError=qt(this,this.reportError);let i=function(t){let s=null;try{s=JSON.parse(t);}catch(t){let e=Lt.caught(t),s={plugin:n.pluginName,error:e};console.error(s);}e(Ct.merge(s,a));};s.onData=i,s.request(!1);}else e(a);}parseResources(t,e){null!=e&&null!=t&&(Object.prototype.hasOwnProperty.call(e,"icon")&&Object.prototype.hasOwnProperty.call(t,"icon")&&(Object.prototype.hasOwnProperty.call(e.icon,"svg")&&Object.prototype.hasOwnProperty.call(t.icon,"font")&&o.deleteField(t.icon,"font"),Object.prototype.hasOwnProperty.call(e.icon,"font")&&Object.prototype.hasOwnProperty.call(t.icon,"svg")&&o.deleteField(t.icon,"svg")),Object.prototype.hasOwnProperty.call(e,"share")&&Object.prototype.hasOwnProperty.call(t,"share")&&(Object.prototype.hasOwnProperty.call(e.share,"svg")&&Object.prototype.hasOwnProperty.call(t.share,"font")&&o.deleteField(t.share,"font"),Object.prototype.hasOwnProperty.call(e.share,"font")&&Object.prototype.hasOwnProperty.call(t.share,"svg")&&o.deleteField(t.share,"svg")));let s=Ct.merge(t,e),i=Object.prototype.hasOwnProperty.call(s,"prefix")?o.field(s,"prefix"):null;if(null!=i&&"string"==typeof i){let t=u.trim(i);if(""!=t){let e=t;e=(""+t).toLowerCase().split(" ").join(""),e=new l("[^a-zA-Z0-9_-]","g").split(e).join(""),e=new l("^[0-9]*","g").split(e).join(""),this.set_prefix(e);}}let a=Object.prototype.hasOwnProperty.call(s,"css")?o.field(s,"css"):null;if(null!=a){if(null!=a.adPlaying&&"string"==typeof a.adPlaying){let t=u.trim(a.adPlaying);if(""!=t){let e=t;e=(""+t).toLowerCase().split(" ").join(""),e=new l("[^a-zA-Z0-9_-]","g").split(e).join(""),e=new l("^[0-9]*","g").split(e).join(""),this.get_css().adPlaying=e;}}if(null!=a.vpaidPlaying&&"string"==typeof a.vpaidPlaying){let t=u.trim(a.vpaidPlaying);if(""!=t){let e=t;e=(""+t).toLowerCase().split(" ").join(""),e=new l("[^a-zA-Z0-9_-]","g").split(e).join(""),e=new l("^[0-9]*","g").split(e).join(""),this.get_css().vpaidPlaying=e;}}}let n=Object.prototype.hasOwnProperty.call(s,"name")?o.field(s,"name"):null;if(null!=n&&"string"==typeof n){let t=u.trim(n);if(""!=t){let e=t;e=(""+t).toLowerCase().split(" ").join(""),e=new l("[^a-zA-Z0-9_-]","g").split(e).join(""),e=new l("^[0-9]*","g").split(e).join(""),this.set_name(e);}}let r=Object.prototype.hasOwnProperty.call(s,"color")?o.field(s,"color"):null;null!=r&&"string"==typeof r&&this.set_color(u.trim(r));let h=Object.prototype.hasOwnProperty.call(s,"font")?o.field(s,"font"):null;null!=h&&this.set_font(h);let c=Object.prototype.hasOwnProperty.call(s,"icon")?o.field(s,"icon"):null;null!=c&&this.set_icons(c);let d=Object.prototype.hasOwnProperty.call(s,"share")?o.field(s,"share"):null;if(null!=d&&this.set_shareIcons(d),this.set_styles([]),null!=s&&Object.prototype.hasOwnProperty.call(s,"styles")){let t=o.field(s,"styles");if("string"==typeof t)this.get_styles().push(t);else if(t instanceof Array){let e=t,s=0;for(;s<e.length;){let t=e[s++];this.get_styles().push(t);}}}let p=Object.prototype.hasOwnProperty.call(s,"layout")?o.field(s,"layout"):"";null!=p&&"string"==typeof p&&this.set_layout(u.trim(p));let m=Object.prototype.hasOwnProperty.call(s,"spinner")?o.field(s,"spinner"):null;if(null!=m){let t=Object.prototype.hasOwnProperty.call(m,"html")?o.field(m,"html"):null;if("string"==typeof t){let e=Ot.decodeBase64(t);null!=e&&this.set_spinnerTemplate(this.lit.template(e,"html")({}));}let e=Object.prototype.hasOwnProperty.call(m,"svg")?o.field(m,"svg"):null;if("string"==typeof e){let t=Ot.decodeBase64(e);null!=t&&this.set_spinnerTemplate(this.lit.template(t,"svg")({}));}}this.skinCssSelector="[id="+this.uid+"_skin][data-"+this.get_prefix()+"-name="+this.get_name()+"]",this.skinIcoPrefix=this.uid+"_skin_ico_";}updateResources(){this.attachFonts(),this.attachCssVars(),this.fetchSources();}start(){this.skinElement=window.document.createElement("div"),this.skinElement.id=this.uid+"_skin",this.skinElement.style.display="none",this.get_parentDisplay().appendChild(this.skinElement);let t=this;this.size=new ot(this.context,this.get_variables(),(function(e,s){t.sizeVarChange(e,(function(){t.stateChange({size:e},s);}));}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.skinElement),this.device=new X(this.context,this.get_variables(),(function(e,s){t.stateChange({device:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.skinElement),this.ad=new N(this.context,this.get_variables(),(function(e,s){t.stateChange({ad:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_css(),this.skinElement),this.video=new ft(this.context,this.get_variables(),(function(e,s){t.stateChange({video:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.splash=new ut(this.context,this.get_variables(),(function(e,s){t.stateChange({splash:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.progress=new at(this.context,this.get_variables(),(function(e,s){t.stateChange({progress:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.skinElement,this.get_player().modules.BradmaxThumbnailsService),this.volume=new gt(this.context,this.get_variables(),(function(e,s){t.stateChange({volume:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.skinElement),this.brand=new B(this.context,this.get_variables(),(function(e,s){t.stateChange({brand:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.title=new mt(this.context,this.get_variables(),(function(e,s){t.stateChange({title:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.playlist=new it(this.context,this.get_variables(),(function(e,s){t.stateChange({playlist:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.menu=new J(this.context,this.get_variables(),(function(e,s){t.stateChange({menu:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_parentDisplay()),this.share=new nt(this.context,this.get_variables(),(function(e,s){t.stateChange({share:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.message=new tt(this.context,this.get_variables(),(function(e,s){t.stateChange({message:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.icon=new Z(this.context,this.get_variables(),(function(e,s){t.stateChange({icon:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.hide=new Y(this.context,this.get_variables(),(function(e,s){t.stateChange({hide:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.get_parentDisplay()),this.camera=new q(this.context,this.get_variables(),(function(e,s){t.stateChange({camera:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.skinElement),this.contextmenu=new H(this.context,this.get_variables(),(function(e,s){t.stateChange({contextmenu:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.skinElement,this.get_playerVersion());this.contextmenu.renderTemplate=function(e){return t.lit.template(t.lit.parseLayout(e))};if(this.contextmenu.renderHtml=function(e,s){return t.lit.render(s,e,t.litOptions)},null!=this.get_spinnerTemplate()){this.spinner=new ht(this.context,this.get_variables(),(function(e,s){t.stateChange({spinner:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}));let e=function(e){try{return t.lit.render(t.get_spinnerTemplate(),e,t.litOptions)}catch(e){let s=Lt.caught(e),i={plugin:t.pluginName,error:s};return console.error(i),null}};this.spinner.renderHtml=e;}if(null!=this.icon){let t=this.icon,e=null!=this.get_icons()&&null!=this.get_icons().svg,s=null!=this.get_shareIcons()&&null!=this.get_shareIcons().svg;t.updateTypesState(e?"svg":"css",s?"svg":"css");}}updateIconTypes(){if(null!=this.icon){let t=this.icon,e=null!=this.get_icons()&&null!=this.get_icons().svg,s=null!=this.get_shareIcons()&&null!=this.get_shareIcons().svg;t.updateTypesState(e?"svg":"css",s?"svg":"css");}}isNotEmpty(t){return null!=t&&"string"==typeof t&&u.trim(t).length>0}versionUrl(t){let e=u.trim(t);return (""+decodeURIComponent(e.split("+").join(" "))).split("VERSION").join(this.get_playerVersion())}attachFonts(){let t=[];if(null!=this.get_font()&&t.push(this.get_font()),null!=this.get_icons()&&null!=this.get_icons().font&&t.push(this.get_icons().font),null!=this.get_shareIcons()&&null!=this.get_shareIcons().font&&t.push(this.get_shareIcons().font),0==t.length)return;let e="",s=0;for(;s<t.length;){let i,a=t[s];if(++s,1==a.fetch&&null!=a.id){let t=a.src;i=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else i=!1;i&&(e+='<link id="'+a.id+'" href="'+this.versionUrl(a.src)+'" rel="stylesheet" crossorigin @load="${ctx._LOADED_}" >');}if(""==e)return void(this.fontsLoaded=!0);let i=window.document.createElement("head"),a=0,l=this;this.lit.render(this.lit.template(e)({_LOADED_:function(){a-=1,l.fontsLoaded=0==a,l.fontsLoaded&&l.runInited();}}),i,this.litOptions),a=bt.injectAssets(window.document.head,this.get_prefix(),i),this.fontsLoaded=0==a;}attachCssVars(){let t=[],e=this,s=function(s,i,a){let l=[];if(null!=a.family&&a.family instanceof Array&&l.push("--"+e.get_prefix()+"-"+s+"-family: "+a.family.join(", ")+";"),null!=a.size&&l.push("--"+e.get_prefix()+"-"+s+"-size: "+a.size+";"),null!=a.code){let t=0,i=o.fields(a.code);for(;t<i.length;){let n=i[t];++t,l.push("--"+e.get_prefix()+"-"+s+"-code-"+n+': "\\'+h.string(o.field(a.code,n))+'";');}}let n=[];if(null!=a.variation){let t=0,e=o.fields(a.variation);for(;t<e.length;){let s=e[t];++t,n.push('"'+s+'" '+h.string(o.field(a.variation,s)));}}let r=n.length>0?"font-variation-settings: "+n.join(", ")+";":"";t.push(i+"{"+r+l.join("")+"}");},i=function(s,i,a){let l=[];null!=a.size&&l.push("--"+e.get_prefix()+"-"+s+"-size: "+a.size+";"),l.length>0&&t.push(i+"{"+l.join("")+"}");};if(null!=this.get_font()&&s("font",""+this.skinCssSelector,this.get_font()),null!=this.get_icons()&&(null!=this.get_icons().font&&s("icon",this.skinCssSelector+" ."+this.get_prefix()+"-ico",this.get_icons().font),null!=this.get_icons().svg&&i("icon",this.skinCssSelector+" ."+this.get_prefix()+"-ico",this.get_icons().svg)),null!=this.get_shareIcons()&&(null!=this.get_shareIcons().font&&s("icon-share",this.skinCssSelector+" ."+this.get_prefix()+"-share-ico",this.get_shareIcons().font),null!=this.get_shareIcons().svg&&i("icon-share",this.skinCssSelector+" ."+this.get_prefix()+"-share-ico",this.get_shareIcons().svg)),0!=t.length){if(null==this.fontVarsElement){let t=this.uid+"_skin_font";this.fontVarsElement=window.document.querySelector(t),null==this.fontVarsElement&&(this.fontVarsElement=window.document.createElement("style"),this.fontVarsElement.id=t,null!=this.skinElement?this.get_parentDisplay().insertBefore(this.fontVarsElement,this.skinElement):this.get_parentDisplay().appendChild(this.fontVarsElement));}this.fontVarsElement.innerText="",this.fontVarsElement.insertAdjacentHTML("beforeend",t.join("\n"));}}fetchSources(){let t,e,s=Object.create(null),i=this,a=function(){let t=s,e=Object.keys(t),a=e.length,l=0;for(;l<a;)if(0==t[e[l++]].loaded)return;i.sourcesLoaded=!0,i.sourcesLoaded&&i.runInited();},l=function(t){Object.prototype.hasOwnProperty.call(s,t)&&(s[t].loaded=!0),a();},n=this.get_layout();if(null!=n&&"string"==typeof n&&u.trim(n).length>0)if(this.get_layout().endsWith(".html")){let t="layout",e=new c(this.versionUrl(this.get_layout()));e.onError=qt(this,this.reportError),e.onData=function(e){i.redrawLayout(e),l(t);},s[t]={loaded:!1,req:e};}else {let t=Ot.decodeBase64(this.get_layout());null!=t&&(this.redrawLayout(t),a());}else {let t={plugin:this.pluginName,error:"missing layout url"};console.error(t);}if(null!=this.get_icons()&&null!=this.get_icons().svg){let e=this.get_icons().svg.iconset;t=null!=e&&"string"==typeof e&&u.trim(e).length>0;}else t=!1;if(t){let t=this.get_icons().svg.id,e=this.get_icons().svg.iconset;if(e.endsWith(".svg")){if(!Object.prototype.hasOwnProperty.call(s,""+t)){let a=new c(this.versionUrl(e));a.onError=qt(this,this.reportError),a.onData=function(e){i.renderSvgset(i.uid+"_"+t+"_skin_iconset",e),l(t);},s[""+t]={loaded:!1,req:a};}}else {let s=Ot.decodeBase64(e);null!=s&&(this.renderSvgset(this.uid+"_"+t+"_skin_iconset",s),a());}}if(null!=this.get_shareIcons()&&null!=this.get_shareIcons().svg){let t=this.get_shareIcons().svg.iconset;e=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else e=!1;if(e){let t=this.get_shareIcons().svg.id,e=this.get_shareIcons().svg.iconset;if(e.endsWith(".svg")){if(!Object.prototype.hasOwnProperty.call(s,""+t)){let a=new c(this.versionUrl(e));a.onError=qt(this,this.reportError),a.onData=function(e){i.renderSvgset(i.uid+"_"+t+"_skin_iconset",e),l(t);},s[""+t]={loaded:!1,req:a};}}else {let s=Ot.decodeBase64(e);null!=s&&(this.renderSvgset(this.uid+"_"+t+"_skin_iconset",s),a());}}let r,o,h,d="style",p=this.get_styles(),m=0;for(;m<p.length;){let t=p[m],e=m++;if(null!=t&&"string"==typeof t&&u.trim(t).length>0){let a=function(t){let s=window.document.head,a=i.get_prefix(),n=i.get_name(),r="[data-"+i.get_prefix()+"-name="+n+"]";bt.appendStyle(s,a,null!=r&&t.includes(":host")?t.split(":host").join(r):t),l(d+"["+e+"]");};if(t.endsWith(".css")){let i=new c(this.versionUrl(t));i.onError=qt(this,this.reportError),i.onData=a,s[d+"["+e+"]"]={loaded:!1,req:i};}else {let e=Ot.decodeBase64(t);null!=e&&a(e);}}}if(null!=this.get_font()&&0==this.get_font().fetch){let t=this.get_font().src;r=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else r=!1;if(r){let t=Ot.decodeBase64(this.get_font().src);null!=t&&(bt.appendStyle(window.document.head,this.get_prefix()+"-font",t),a());}if(null!=this.get_icons()&&null!=this.get_icons().font&&0==this.get_icons().font.fetch){let t=this.get_icons().font.src;o=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else o=!1;if(o){let t=Ot.decodeBase64(this.get_icons().font.src);null!=t&&(bt.appendStyle(window.document.head,this.get_prefix()+"-icons-font",t),a());}if(null!=this.get_shareIcons()&&null!=this.get_shareIcons().font&&0==this.get_shareIcons().font.fetch){let t=this.get_shareIcons().font.src;h=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else h=!1;if(h){let t=Ot.decodeBase64(this.get_shareIcons().font.src);null!=t&&(bt.appendStyle(window.document.head,this.get_prefix()+"-shere-font",t),a());}let f=s,g=Object.keys(f),_=g.length,b=0;for(;b<_;)f[g[b++]].req.request(!1);}renderSvgset(t,e){let s=window.document.createElement("div");this.lit.render(this.lit.template(e,"svg")({}),s,this.litOptions);let i,a=s.querySelectorAll("symbol"),l=0;for(;l<a.length;)i=a[l++],i.id=""+this.skinIcoPrefix+i.id;let n=window.document.querySelector(t);null!=n&&null!=n.parentNode&&n.parentNode.removeChild(n),n=s.querySelector("svg"),n.id=t,n.style.display="none",null!=this.skinElement?this.get_parentDisplay().insertBefore(n,this.skinElement):this.get_parentDisplay().appendChild(n);}reportError(t){let e={plugin:this.pluginName,error:t};console.error(e);}runInited(){null!=this.initedTimer&&this.initedTimer.stop(),this.initedTimer=At.delay(qt(this,this.inited),200);}inited(){0!=this.sourcesLoaded&&0!=this.fontsLoaded&&(this.ready=this.sourcesLoaded&&this.fontsLoaded,0!=this.ready&&null!=this.skinElement&&(this.skinElement.classList.add(this.get_prefix()+"-ready"),this.skinElement.style.display="block",this.skinElement.classList.add(this.get_prefix()),1!=this.state.device.tizen?this.skinElement.classList.add(this.get_prefix()+"-can-blur"):this.skinElement.classList.add(this.get_prefix()+"-cant-blur"),this.skinElement.setAttribute("data-"+this.get_prefix()+"-name",this.get_name())));}sizeVarChange(t,e){let s=this.skinCssSelector+" { --"+this.get_prefix()+"-width: "+t.width+"px; --"+this.get_prefix()+"-height: "+t.height+"px; }";if(null==this.sizeVarsElement){let t=this.uid+"_skin_size";this.sizeVarsElement=window.document.querySelector(t),null==this.sizeVarsElement&&(this.sizeVarsElement=window.document.createElement("style"),this.sizeVarsElement.id=t,null!=this.skinElement?this.get_parentDisplay().insertBefore(this.sizeVarsElement,this.skinElement):this.get_parentDisplay().appendChild(this.sizeVarsElement));}this.sizeVarsElement.innerText="",this.sizeVarsElement.insertAdjacentHTML("beforeend",s),null!=e&&o.isFunction(e)&&e();}stateChange(t,e){if(null!=t){let e=0,s=o.fields(t);for(;e<s.length;){let i=s[e];++e,this.state[i]=o.field(t,i);}}this.render(e);}render(t){0!=this.activated&&0!=this.layoutAvailable&&(this.lit.render(this.skinTemplate(this.state),this.skinElement,this.litOptions),null!=t&&o.isFunction(t)&&t(this.skinElement));}get_prefix(){return this._prefix}set_prefix(t){return this._prefix=t,this.state.prefix=t,this.skinCssSelector="[id="+this.uid+"_skin][data-"+t+"-name="+this.get_name()+"]",null!=this.hide&&this.hide.set_prefix(t),null!=this.contextmenu&&this.contextmenu.set_prefix(t),null!=this.size&&this.size.set_prefix(t),null!=this.device&&this.device.set_prefix(t),this._prefix}get_css(){return this._css}set_css(t){return this._css=t,this._css}get_name(){return this._name}set_name(t){return this._name=t,this.state.name=t,this.skinCssSelector="[id="+this.uid+"_skin][data-"+this.get_prefix()+"-name="+t+"]",this._name}get_playerVersion(){return "v2.14.364"}get_color(){return this._color}set_color(t){if(this._color=t,null==this.colorVarsElement){let t=this.uid+"_skin_colors";this.colorVarsElement=window.document.querySelector(t),null==this.colorVarsElement&&(this.colorVarsElement=window.document.createElement("style"),this.colorVarsElement.id=t,null!=this.skinElement?this.get_parentDisplay().insertBefore(this.colorVarsElement,this.skinElement):this.get_parentDisplay().appendChild(this.colorVarsElement));}this.colorVarsElement.innerText="";let e="string"==typeof t&&""!=t?this.skinCssSelector+" { --"+this.get_prefix()+"-main-color: "+t+"; }":"";return ""!=e&&this.colorVarsElement.insertAdjacentHTML("beforeend",e),this._color}get_font(){return this._font}set_font(t){return this._font=t,this._font}get_icons(){return this._icons}set_icons(t){return this._icons=t,this._icons}get_shareIcons(){return this._shareIcons}set_shareIcons(t){return this._shareIcons=t,this._shareIcons}get_styles(){return this._styles}set_styles(t){return this._styles=t,this._styles}get_layout(){return this._layout}set_layout(t){return this._layout=t,this._layout}get_parsedLayout(){return this._parsedLayout}set_parsedLayout(t){return this._parsedLayout=this.lit.parseLayout(t),this.skinTemplate=this.lit.template(this._parsedLayout),this._parsedLayout}get_spinnerTemplate(){return this._spinnerTemplate}set_spinnerTemplate(t){return this._spinnerTemplate=t,this._spinnerTemplate}}t.bs.player.plugin.skin.HtmlSkin=F,F.__name__="bs.player.plugin.skin.HtmlSkin",F.__super__=T,Object.assign(F.prototype,{__class__:F});class j{constructor(){this.api=j.native();}render(t,e,s){return this.api.render(t,e,s)}template(t,e){return this.api.template(t,e)}parseLayout(t){return St.cleanup(t),t=this.litIf(t),t=this.litFor(t)}litFor(t){if(t.indexOf("<for")<0)return t;let e=[],s=[],i=t.length,a=0;for(;a<=i;){let l=t.indexOf("<for",a);if(-1<l){e.push(t.substring(a,l)),a=l+4,l=a;let n=1;for(;0<n&&a<i;){let e=t.charAt(a),s=t.charAt(a+1),i=t.charAt(a+2),l=t.charAt(a+3),r=t.charAt(a+4);n+="<"==e&&"f"==s&&"o"==i&&"r"==l&&" "==r?1:"<"==e&&"/"==s&&"f"==i&&"o"==l&&"r"==r&&">"==t.charAt(a+5)?-1:0,++a;}s.push(this.formatLitFor(t.substring(l-4,a-1))),a+=5;}else e.push(t.substring(a)),a=i+1;}return St.merge(e,s)}formatLitFor(t){let e=new l("(<for[^>][\\s\\S]*?items=\\W\\$\\{{1})([\\s\\S]+?)(\\}[\\s\\S]*?>)","");if(t=St.escapeCustomAttributes(t,[e]),0==e.match(t))return t;let s=St.readCustomAttribute(e.matched(2));return "${"+s+" && "+s+".length > 0 ? "+s+".map((item, index) => html`"+this.litFor(St.removeCustomTag(t,e))+"`) : nothing}"}litIf(t){if(t.indexOf("<if")<0)return t;let e=[],s=[],i=t.length,a=0;for(;a<=i;){let l=t.indexOf("<if",a);if(-1<l){e.push(t.substring(a,l)),a=l+3,l=a;let n=1;for(;0<n&&a<i;){let e=t.charAt(a),s=t.charAt(a+1),i=t.charAt(a+2),l=t.charAt(a+3);n+="<"==e&&"i"==s&&"f"==i&&" "==l?1:"<"==e&&"/"==s&&"i"==i&&"f"==l&&">"==t.charAt(a+4)?-1:0,++a;}s.push(this._formatLitIf(t.substring(l-3,a-1))),a+=4;}else e.push(t.substring(a)),a=i+1;}return St.merge(e,s)}_formatLitIf(t){let e=new l("(<if[^>][\\s\\S]*?cond=\\W\\$\\{{1})([\\s\\S]+?)(\\}[\\s\\S]*?>)","");return t=St.escapeCustomAttributes(t,[e]),0==e.match(t)?t:"${"+St.readCustomAttribute(e.matched(2))+" ? html`"+this.litIf(St.removeCustomTag(t,e))+"` : nothing}"}static native(){return exports.lit}}j.__name__="bs.player.plugin.skin.lib.LitHtml",Object.assign(j.prototype,{__class__:j});class V{constructor(t,e,s,i){V._hx_skip_constructor||this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.state=null,this.context=null,this.context=t,this.reportError=i,this.refreshCallback=s;}reportError(t){}refreshCallback(t,e){}destroy(){}}V.__name__="bs.player.plugin.skin.model.core.BaseModel",Object.assign(V.prototype,{__class__:V});class N extends V{constructor(t,e,s,i,a,l){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,l);}_hx_constructor(t,e,s,i,a,l){this.adWasClicked=!1,this.adOnClickUrlShowTime=null,this.isVpaid=!1,this.isMuted=!1,this.isPaused=!1,this.total=0,this.current=0,this.progress=0,this.linkUrl=null,this.duration=null,this.time=null,this.skinElement=null,this.keepSkin=!1,super._hx_constructor(t,e,s,i),this.css=a,this.skinElement=l,this.parseVars(e),this.state=null,1!=this.keepSkin&&(d.add(t,"adEnableControls",qt(this,this.onHide)),d.add(t,"adDisableControls",qt(this,this.onShow)),d.add(t,"adBarShow",qt(this,this.onAdBarShow)),d.add(t,"adBarHide",qt(this,this.onAdBarHide)),d.add(t,"adInStreamClipPlaying",qt(this,this.onAdInStreamStart)),m.add(t,"adMetadataData",qt(this,this.onAdStart)),p.addOnce(t,"skinMute",qt(this,this.onFirstMute)),p.addOnce(t,"skinUnmute",qt(this,this.onFirstUnmute)));}destroy(){super.destroy(),d.remove(this.context,"adEnableControls",qt(this,this.onHide)),d.remove(this.context,"adDisableControls",qt(this,this.onShow)),d.remove(this.context,"adBarShow",qt(this,this.onAdBarShow)),d.remove(this.context,"adBarHide",qt(this,this.onAdBarHide)),d.remove(this.context,"adInStreamClipPlaying",qt(this,this.onAdInStreamStart)),m.remove(this.context,"adMetadataData",qt(this,this.onAdStart));}parseVars(t){Object.prototype.hasOwnProperty.call(t,"keepSkinOnAd")&&(this.keepSkin=1==o.field(t,"keepSkinOnAd"));}resetState(t){this.linkUrl=null,this.time=null,this.duration=null,this.progress=0,this.current=0,this.total=0,this.isPaused=!1,this.isVpaid=!1,this.adOnClickUrlShowTime=null,this.adWasClicked=!1,this.state=null,t&&this.refreshCallback(this.state);}createState(t){if(this.isVpaid)return void this.resetState(t);let e=this,s=Tt.translate("advertisement_bar_title"),i=this.progress;this.state={label:s,time:this.time,duration:this.duration,progress:{value:this.progress,prc:isNaN(i)||!isFinite(i)?"0%":Math.max(0,Math.min(100,100*i))+"%"},status:{paused:this.isPaused,muted:this.isMuted,vpaid:this.isVpaid},link:{url:null!=this.linkUrl?this.linkUrl:null,target:"_blank"},skip:null,counter:this.current==this.total&&this.current<=1?null:{current:this.current,total:this.total,text:this.current+"/"+this.total},mute:function(t){e.muteClick(t);},click:function(t){e.adClick(t);}},t&&this.refreshCallback(this.state);}onAdInStreamStart(t){this.parseAdMedia(t.data);}onAdStart(t){this.parseAdMedia(t.data);}parseAdMedia(t){if(this.resetState(!1),null!=t){if(null!=t.durationTotal&&null!=t.durationPlayed){let e=t.durationTotal-t.durationPlayed;this.time={time:e,text:Tt.formatTime(e)};}if(null!=t.durationTotal){let e=t.durationTotal;this.duration={time:e,text:Tt.formatTime(e)};}null!=this.time?(this.current=t.currentOrderNumber,this.total=t.totalNumber,this.linkUrl=t.mediaClickTargetUrl,this.createState(!0),this.adOnClickUrlShowTime=new Date):this.resetState(!0);}else this.resetState(!0);}onHide(t){this.adWasClicked=!1,this.skinElement.classList.contains(this.css.adPlaying)&&this.skinElement.classList.remove(this.css.adPlaying),this.skinElement.classList.contains(this.css.vpaidPlaying)&&this.skinElement.classList.remove(this.css.vpaidPlaying),d.remove(this.context,"adGroupCurrentTimeChange",qt(this,this.afterShowOnTimeChange)),d.remove(this.context,"adSkipButtonShow",qt(this,this.afterShowOnShowCloseBtn)),d.remove(this.context,"adAdHide",qt(this,this.afterShowOnShowCloseBtn)),d.remove(this.context,"adPlaying",qt(this,this.afterShowOnAdPlayResume)),d.remove(this.context,"adPaused",qt(this,this.afterShowOnAdPause)),this.resetState(!0);}onShow(t){this.adWasClicked=!1,this.skinElement.classList.contains(this.css.adPlaying)||this.skinElement.classList.add(this.css.adPlaying),this.isVpaid&&!this.skinElement.classList.contains(this.css.vpaidPlaying)&&this.skinElement.classList.add(this.css.vpaidPlaying),this.adOnClickUrlShowTime=new Date,d.add(this.context,"adGroupCurrentTimeChange",qt(this,this.afterShowOnTimeChange)),d.add(this.context,"adSkipButtonShow",qt(this,this.afterShowOnShowCloseBtn)),d.add(this.context,"adAdHide",qt(this,this.afterShowOnShowCloseBtn)),d.add(this.context,"adPlaying",qt(this,this.afterShowOnAdPlayResume)),d.add(this.context,"adPaused",qt(this,this.afterShowOnAdPause));}afterShowOnTimeChange(t){if(null==this.state)return;let e,s;if(null!=t.data&&null!=t.data.duration&&null!=t.data.currentTime){let e=t.data.duration;s=isNaN(e);}else s=!0;if(s)e=!0;else {let s=t.data.currentTime;e=isNaN(s);}if(e)return;let i=t.data.duration-t.data.currentTime;this.state.time={time:i,text:Tt.formatTime(i)};let a=t.data.duration;this.duration={time:a,text:Tt.formatTime(a)},this.progress=t.data.currentTime/t.data.duration;let l=this.progress,n=this.progress,r=isNaN(n)||!isFinite(n);this.state.progress={value:l,prc:r?"0%":Math.max(0,Math.min(100,100*n))+"%"},this.refreshCallback(this.state);}afterShowOnShowCloseBtn(t){if(null==this.state)return;let e=this,s=Tt.translate("advertisement_skip_label");this.state.skip={label:s,click:function(t){e.closeClick(t);}},this.refreshCallback(this.state);}afterShowOnAdPlayResume(t){this.isPaused=!1,null!=this.state&&(this.state.status.paused=this.isPaused,this.refreshCallback(this.state));}afterShowOnAdPause(t){this.isPaused=!0,null!=this.state&&(this.state.status.paused=this.isPaused,this.refreshCallback(this.state));}onAdBarShow(t){this.isVpaid=!1,this.skinElement.classList.contains(this.css.vpaidPlaying)&&this.skinElement.classList.remove(this.css.vpaidPlaying),this.createState(!0);}onAdBarHide(t){this.isVpaid=!0,this.skinElement.classList.contains(this.css.vpaidPlaying)||this.skinElement.classList.add(this.css.vpaidPlaying),this.resetState(!0);}onFirstMute(t){this.isMuted=!0,null!=this.state&&(this.state.status.muted=this.isMuted,this.refreshCallback(this.state)),p.remove(this.context,"skinUnmute",qt(this,this.onFirstUnmute)),p.remove(this.context,"skinMute",qt(this,this.onFirstMute));}onFirstUnmute(t){this.isMuted=!1,null!=this.state&&(this.state.status.muted=this.isMuted,this.refreshCallback(this.state)),p.remove(this.context,"skinUnmute",qt(this,this.onFirstUnmute)),p.remove(this.context,"skinMute",qt(this,this.onFirstMute));}muteClick(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),p.remove(this.context,"skinUnmute",qt(this,this.onFirstUnmute)),p.remove(this.context,"skinMute",qt(this,this.onFirstMute)),new p(this.isMuted?"skinUnmute":"skinMute").dispatch(this.context),this.isMuted=!this.isMuted,null!=this.state&&(this.state.status.muted=this.isMuted,this.refreshCallback(this.state));}closeClick(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),new d("adSkipClick").dispatch(this.context);}adClick(t){let e=0;if(null!=this.adOnClickUrlShowTime&&(e=(new Date).getTime()-this.adOnClickUrlShowTime.getTime()),e<=500)return;this.isPaused&&!this.adWasClicked?null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()):this.adWasClicked?(null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),this.linkUrl=null,this.refreshCallback(this.state)):this.adWasClicked=!0;let s=new d("adAdClick");s.data={url:this.linkUrl},s.dispatch(this.context);}}N.__name__="bs.player.plugin.skin.model.ads.AdModel",N.__super__=V,Object.assign(N.prototype,{__class__:N});class R extends V{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.audioSets=[],super._hx_constructor(t,e,s,i);let a=null;Object.prototype.hasOwnProperty.call(e,"audio")&&(a=o.field(e,"audio"));let l=!1,n=null;if(n=Ut.getSessionStorage(),l=null!=n,l){let t,e=null,s=!1,i=null;if(i=Ut.getSessionStorage(),s=null!=i,s){try{let t,s=null,i=!1,a=null;if(a=Ut.getSessionStorage(),i=null!=a,i){let e=null;e=Ut.getSessionStorage(),s=e.getItem("_brplayer_aud_lang"),null==s||(s=u.trim(s)),t=s;}else t=s;null!=t&&""!=t&&(e=t);}catch(t){}t=e;}else t=e;null!=t&&(a=t);}this.languageCode=a,this.state={hasItems:!1,activate:null},this.state.activate=qt(this,this.activate),m.add(t,"audioData",qt(this,this.onAudioData)),m.add(t,"mediaMetadataData",qt(this,this.cleanupState)),this.refreshCallback(this.state);}destroy(){super.destroy(),m.remove(this.context,"audioData",qt(this,this.onAudioData)),m.remove(this.context,"mediaMetadataData",qt(this,this.cleanupState));}onAudioData(t){if(this.audioSets=t.data,null!=this.audioSets){this.state.items=[];let t=null,e=!1,s=0,i=this.audioSets.length;for(;s<i;){let i=s++;t=this.audioSets[i],e=0==e&&this.languageCode==t.languageCode,this.state.items.push({active:e,label:Tt.capilizeFirstLetter(null==t.name?t.languageCode:t.name),data:t.languageCode}),1==e&&this.dispatch(i);}}else this.state.items=null;this.state.hasItems=null!=this.state.items&&this.state.items.length>0,this.refreshCallback(this.state);}cleanupState(t){this.audioSets=[],o.deleteField(this.state,"items"),this.refreshCallback(this.state);}dispatch(t){let e=this.audioSets[t],s=new p("selectAudio");s.data=e,s.dispatch(this.context);let i=s.data.languageCode,a=!1,l=null;if(l=Ut.getSessionStorage(),a=null!=l,a)try{if(null==i){let t=null;t=Ut.getSessionStorage(),t.removeItem("_brplayer_aud_lang");}else {let t=null;t=Ut.getSessionStorage(),t.setItem("_brplayer_aud_lang",h.string(i));}}catch(t){}}activate(t){if(!Object.prototype.hasOwnProperty.call(this.state,"items"))return;null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=h.parseInt(zt.__cast(t.target,HTMLElement).getAttribute("data-item-index"));if(isNaN(e))return;let s=0,i=this.state.items.length;for(;s<i;){let t=s++;this.state.items[t].active=t==e;}this.dispatch(e),this.refreshCallback(this.state);}}R.__name__="bs.player.plugin.skin.model.audio.AudioModel",R.__super__=V,Object.assign(R.prototype,{__class__:R});class B extends V{constructor(t,e,s,i){super(t,e,s,i),this.parseVars(e);}destroy(){super.destroy();}parseVars(t){let e=null;Object.prototype.hasOwnProperty.call(t,"logoFile")&&(e=o.field(t,"logoFile"));let s,i,a=e;if(null==a||""==a)return;if(Object.prototype.hasOwnProperty.call(t,"logoAutohide"))switch(o.field(t,"logoAutohide")){case 0:case"false":case!1:s=!1;break;default:s=!0;}else s=!0;if(Object.prototype.hasOwnProperty.call(t,"logoVisibleDuringAdPlayback"))switch(o.field(t,"logoVisibleDuringAdPlayback")){case 1:case"true":case!0:i=!0;break;default:i=!1;}else i=!1;let l=null;Object.prototype.hasOwnProperty.call(t,"logoText")&&(l=o.field(t,"logoText"));let n=l,r=null;Object.prototype.hasOwnProperty.call(t,"logoLink")&&(r=o.field(t,"logoLink"));let h,u=r;if(Object.prototype.hasOwnProperty.call(t,"logoLinkTarget"))switch(o.field(t,"logoLinkTarget")){case"_blank":default:h="_blank";break;case"_parent":h="_parent";break;case"_self":h="_self";break;case"_top":h="_top";}else h=null;let c,d,p={url:u,target:h};if(Object.prototype.hasOwnProperty.call(t,"logoXPosition"))switch(o.field(t,"logoXPosition")){case"left":default:c="left";break;case"right":c="right";}else c="left";if(Object.prototype.hasOwnProperty.call(t,"logoYPosition"))if("bottom"===o.field(t,"logoYPosition"))d="bottom";else d="top";else d="top";let m={hide:s,adsVisibility:i,logo:a,text:n,link:p,position:{x:c,y:d,top:!0,left:!0,right:!1,bottom:!1}};m.position.top="top"==m.position.y,m.position.right="right"==m.position.x,m.position.left="left"==m.position.x,m.position.bottom="bottom"==m.position.y,this.state=m,this.refreshCallback(this.state);}}B.__name__="bs.player.plugin.skin.model.brand.BrandModel",B.__super__=V,Object.assign(B.prototype,{__class__:B});class z extends V{constructor(t,e,s,i){V._hx_skip_constructor?super():(V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i));}_hx_constructor(t,e,s,i){let a;if(this.isDvrWallTimeMode=!1,this.isDvr=!1,this.isLiveStream=!1,this.isMediaSpherical=!1,this.duration=0,this.mediaDuration=0,super._hx_constructor(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"isDvrWallTimeMode"))switch(o.field(e,"isDvrWallTimeMode")){case 1:case"true":case!0:a=!0;break;default:a=!1;}else a=!1;this.isDvrWallTimeMode=a,this.monitor=x.getMonitor(t),m.add(t,"mediaMetadataData",qt(this,this.onMetadataData)),m.add(t,"mediaAfterPlaybackStartMetadata",qt(this,this.onAfterPlaybackStartMetadataData));}destroy(){super.destroy(),x.destroyMonitor(this.context),m.remove(this.context,"mediaMetadataData",qt(this,this.onMetadataData)),m.remove(this.context,"mediaAfterPlaybackStartMetadata",qt(this,this.onAfterPlaybackStartMetadataData));}updateState(t){}onMetadataData(t){let e,s=this.monitor.currentMedia,i=s.duration;if(isNaN(i))e=!1;else {let t=s.duration;e=isFinite(t);}e&&this.mediaDuration!=s.duration&&(this.mediaDuration=this.duration=s.duration),s instanceof C?(this.isDvr=!1,this.isLiveStream=!1):s instanceof w?(this.isDvr=!0,this.isLiveStream=s instanceof E):(this.isDvr=!1,this.isLiveStream=!1),this.isMediaSpherical=s.spherical,this.updateState();}onAfterPlaybackStartMetadataData(t){t.data instanceof w&&!this.isDvr&&(this.isDvr=!0),t.data instanceof w||!this.isDvr||(this.isDvr=!1),this.isMediaSpherical=t.data.spherical,this.updateState();}}z.__name__="bs.player.plugin.skin.model.core.MediaBaseModel",z.__super__=V,Object.assign(z.prototype,{__class__:z});class U extends z{constructor(t,e,s,i){V._hx_skip_constructor?super():(V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i));}_hx_constructor(t,e,s,i){this.currentTime=0,this.isLive=!1,this.hasPlaybackStarted=!1,this.isComplete=!1,this.isSeeking=!1,this.isBuffering=!1,this.isPaused=!1,this.isPlaying=!1,this.isInited=!1,super._hx_constructor(t,e,s,i),this.variables=e,y.add(t,"videoMediaElementInit",qt(this,this.onVideoMediaElementInit)),y.add(t,"ready",qt(this,this.onReady)),y.add(t,"playing",qt(this,this.onPlaying)),y.add(t,"paused",qt(this,this.onPaused)),y.add(t,"stopped",qt(this,this.onStopped)),y.add(t,"durationChange",qt(this,this.onDurationChange)),y.add(t,"currentTimeChange",qt(this,this.onCurrentTimeChange)),y.add(t,"complete",qt(this,this.onComplete)),y.add(t,"bufferingStart",qt(this,this.onBufferingStart)),y.add(t,"bufferingEnd",qt(this,this.onBufferingEnd)),y.add(t,"seekingStart",qt(this,this.onSeekingStart)),y.add(t,"seekingEnd",qt(this,this.onSeekingEnd));}destroy(){super.destroy(),y.remove(this.context,"videoMediaElementInit",qt(this,this.onVideoMediaElementInit)),y.remove(this.context,"ready",qt(this,this.onReady)),y.remove(this.context,"playing",qt(this,this.onPlaying)),y.remove(this.context,"paused",qt(this,this.onPaused)),y.remove(this.context,"stopped",qt(this,this.onStopped)),y.remove(this.context,"durationChange",qt(this,this.onDurationChange)),y.remove(this.context,"currentTimeChange",qt(this,this.onCurrentTimeChange)),y.remove(this.context,"complete",qt(this,this.onComplete)),y.remove(this.context,"bufferingStart",qt(this,this.onBufferingStart)),y.remove(this.context,"bufferingEnd",qt(this,this.onBufferingEnd)),y.remove(this.context,"seekingStart",qt(this,this.onSeekingStart)),y.remove(this.context,"seekingEnd",qt(this,this.onSeekingEnd));}updateState(t){super.updateState(t),this.isComplete="complete"==this.monitor.state,this.isPlaying=this.isComplete||this.isDvr||null==t?"playing"==this.monitor.state:t,this.isPaused=!this.isPlaying&&!this.isComplete&&"paused"==this.monitor.state,this.isBuffering=!this.isPlaying&&!this.isComplete&&"buffering"==this.monitor.state,this.isSeeking=!this.isPlaying&&!this.isComplete&&"seeking"==this.monitor.state,this.isDvr?(this.isLive=!0,this.isSeekingPossible()&&(this.isLive=this.currentTime/this.duration>=.99)):this.isLive=!1;}isSeekingPossible(){let t=this.variables,e=Object.prototype.hasOwnProperty.call(t,"dvrMinLenForSeekbar")?parseFloat(o.field(t,"dvrMinLenForSeekbar")):null;return null==e&&(e=300),!(this.duration<=0||this.isDvr&&this.duration<e)}onVideoMediaElementInit(t){this.isInited=!0,this.updateState();}onReady(t){this.updateState();}onDurationChange(t){this.updateDurationOnEvent(t);}onCurrentTimeChange(t){this.updateCurrentTimeFromEvent(t),this.updateDurationOnEvent(t,!1),this.updateState(!0);}updateCurrentTimeFromEvent(t){null!=t&&null!=t.data&&t.data.currentTime>=0&&(this.currentTime=t.data.currentTime),null!=t&&null!=t.data&&null!=t.data.media&&null!=t.data.media.mediaPlaybackInfo&&t.data.media.mediaPlaybackInfo.currentTime>0&&(this.currentTime=t.data.media.mediaPlaybackInfo.currentTime),this.currentTime>0&&(this.hasPlaybackStarted=!0);}onPlaying(t){this.updateDurationOnEvent(t);}onPaused(t){this.updateState();}onStopped(t){this.updateState();}onComplete(t){this.updateState();}onBufferingStart(t){this.updateState();}onBufferingEnd(t){this.updateDurationOnEvent(t);}onSeekingStart(t){this.updateCurrentTimeFromEvent(t),this.updateState();}onSeekingEnd(t){this.updateState();}updateDurationOnEvent(t,e){let s=Object.prototype.hasOwnProperty.call(t.data,"duration")?t.data.duration:NaN;!isNaN(s)&&isFinite(s)&&this.duration!=s&&(this.duration=s,this.updateState());}}U.__name__="bs.player.plugin.skin.model.core.PlaybackBaseModel",U.__super__=z,Object.assign(U.prototype,{__class__:U});class q extends U{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){this.isDeviceControlActive=!1,this.isDeviceControlSupported=!1,this.isRendererInitialized=!1,this.wasUserMovingPointer=!1,this.isUserInteracting=!1,this.sphericalElement=null,this.skinElement=null,super._hx_constructor(t,e,s,i),this.skinElement=a,this.state=null,v.add(t,"rendererInitialized",qt(this,this.onRendererInitialized)),v.add(t,"deviceControlSupport",qt(this,this.onDeviceControlSupport)),this.refreshCallback(this.state);}destroy(){super.destroy(),v.remove(this.context,"rendererInitialized",qt(this,this.onRendererInitialized)),v.remove(this.context,"deviceControlSupport",qt(this,this.onDeviceControlSupport));}updateState(t){super.updateState(t);let e=this;this.state=this.isMediaSpherical&&this.isRendererInitialized?{move:{active:!this.isDeviceControlActive,up:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new v("move");s.data="U",s.dispatch(e.context);},down:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new v("move");s.data="D",s.dispatch(e.context);},left:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new v("move");s.data="L",s.dispatch(e.context);},right:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new v("move");s.data="R",s.dispatch(e.context);},center:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new v("move");s.data="C",s.dispatch(e.context);}},zoom:{active:!this.isDeviceControlActive,plus:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new v("zoom");s.data="P",s.dispatch(e.context);},minus:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new v("zoom");s.data="M",s.dispatch(e.context);},reset:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new v("zoom");s.data="R",s.dispatch(e.context);}},device:{supported:this.isDeviceControlSupported,active:this.isDeviceControlActive,click:qt(this,this.clickDeviceControl)},ctrl:qt(this,this.ctrl)}:null,this.refreshCallback(this.state);}ctrl(t){null!=t&&0!=this.isMediaSpherical?(this.sphericalElement=t,this.cachedTouchAction=this.sphericalElement.style.touchAction,this.sphericalElement.style.touchAction="none",g.isMobile()?(this.sphericalElement.addEventListener("touchstart",qt(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("touchmove",qt(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("touchend",qt(this,this.handleSphericalEvent),yt.get_passiveOptions())):(this.sphericalElement.addEventListener("mousedown",qt(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("mousemove",qt(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("mouseup",qt(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("wheel",qt(this,this.handleSphericalEvent))),this.sphericalElement.addEventListener("click",qt(this,this.handleSphericalEvent))):null!=this.sphericalElement&&(null!=this.cachedTouchAction&&(this.sphericalElement.style.touchAction=this.cachedTouchAction),this.cachedTouchAction=null,g.isMobile()?(this.sphericalElement.removeEventListener("touchstart",qt(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("touchmove",qt(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("touchend",qt(this,this.handleSphericalEvent))):(this.sphericalElement.removeEventListener("mousedown",qt(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("mousemove",qt(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("mouseup",qt(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("wheel",qt(this,this.handleSphericalEvent))),this.sphericalElement.removeEventListener("click",qt(this,this.handleSphericalEvent)),this.sphericalElement=null);}handleSphericalEvent(t){if(null!=t&&0!=this.isMediaSpherical)switch(t.type){case"blur":case"mouseleave":case"mouseup":case"touchend":if(!this.isUserInteracting)return;g.enableHtmlSelection();let e=this.skinElement,s=qt(this,this.handleSphericalEvent);g.enableHtmlSelection(),window.document.removeEventListener("mouseup",s),window.document.removeEventListener("mousemove",s),window.document.removeEventListener("mouseleave",s),window.document.removeEventListener("blur",s),e.removeEventListener("mouseup",s),e.removeEventListener("mousemove",s),e.removeEventListener("blur",s),g.isMobile()&&(window.document.removeEventListener("touchend",s),e.removeEventListener("touchend",s)),new v("up").dispatch(this.context),this.isUserInteracting=!1;break;case"click":this.wasUserMovingPointer&&null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),this.wasUserMovingPointer=!1;break;case"mousedown":case"touchstart":if(this.isUserInteracting)return;g.disableHtmlSelection();let i=this.skinElement,a=qt(this,this.handleSphericalEvent);g.disableHtmlSelection(),window.document.addEventListener("mouseup",a,yt.get_passiveOptions()),window.document.addEventListener("mousemove",a,yt.get_passiveOptions()),window.document.addEventListener("mouseleave",a,yt.get_passiveOptions()),window.document.addEventListener("blur",a,yt.get_passiveOptions()),i.addEventListener("mouseup",a,yt.get_passiveOptions()),i.addEventListener("mousemove",a,yt.get_passiveOptions()),i.addEventListener("blur",a,yt.get_passiveOptions()),g.isMobile()&&(window.document.addEventListener("touchend",a,yt.get_passiveOptions()),i.addEventListener("touchend",a,yt.get_passiveOptions()));let l=new v("down"),n=0;t instanceof MouseEvent&&(n=zt.__cast(t,MouseEvent).clientX);let r=window;if(Object.prototype.hasOwnProperty.call(r,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){n=e.touches.item(0).clientX;}}let o=0;t instanceof MouseEvent&&(o=zt.__cast(t,MouseEvent).clientY);let h=window;if(Object.prototype.hasOwnProperty.call(h,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){o=e.touches.item(0).clientY;}}l.data=new O(n,o),l.dispatch(this.context),this.wasUserMovingPointer=!1,this.isUserInteracting=!0;break;case"mousemove":case"touchmove":if(!this.isUserInteracting)return;let u=new v("drag"),c=0;t instanceof MouseEvent&&(c=zt.__cast(t,MouseEvent).clientX);let d=window;if(Object.prototype.hasOwnProperty.call(d,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){c=e.touches.item(0).clientX;}}let p=0;t instanceof MouseEvent&&(p=zt.__cast(t,MouseEvent).clientY);let m=window;if(Object.prototype.hasOwnProperty.call(m,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){p=e.touches.item(0).clientY;}}u.data=new O(c,p),u.dispatch(this.context),this.wasUserMovingPointer=!0;break;case"wheel":if(t instanceof WheelEvent){this.isInited&&(this.isPlaying||this.isPaused)&&null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=new v("zoom");e.data=t.deltaY,e.dispatch(this.context);}break;default:return}}clickDeviceControl(t){if(!this.isMediaSpherical||null==this.state)return;this.isDeviceControlActive=!this.isDeviceControlActive;let e=this.isDeviceControlActive;null!=this.state&&(null!=this.state.device&&(this.state.device.active=e),null!=this.state.move&&(this.state.move.active=this.state.zoom.active=!e)),this.refreshCallback(this.state);let s=new v("deviceControlActive");s.data=e,s.dispatch(this.context);}onRendererInitialized(t){this.isRendererInitialized!=t.data&&(this.isRendererInitialized=t.data);}onDeviceControlSupport(t){if(this.isDeviceControlSupported==t.data)return;this.isDeviceControlSupported=t.data,this.isDeviceControlActive=this.isDeviceControlSupported,null!=this.state&&null!=this.state.device&&(this.state.device.supported=this.isDeviceControlSupported);let e=this.isDeviceControlActive;null!=this.state&&(null!=this.state.device&&(this.state.device.active=e),null!=this.state.move&&(this.state.move.active=this.state.zoom.active=!e)),this.refreshCallback(this.state);let s=new v("deviceControlActive");s.data=e,s.dispatch(this.context);}}q.__name__="bs.player.plugin.skin.model.camera.CameraModel",q.__super__=U,Object.assign(q.prototype,{__class__:q});class W extends V{constructor(t,e,s,i){let a;if(super(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"videoCastEnabled"))switch(o.field(e,"videoCastEnabled")){case 0:case"false":case!1:a=!1;break;default:a=!0;}else a=!0;this.enabled=a,this.state=null,this.enabled&&(p.add(t,"airplayAvailable",qt(this,this.onAirPlayAvailable)),p.add(t,"chromecastAvailable",qt(this,this.onChromecastAvailable)),y.add(t,"videoCastingStart",qt(this,this.onCastingStart)),y.add(t,"videoCastingEnd",qt(this,this.onCastingEnd))),this.refreshCallback(this.state);}destroy(){super.destroy(),this.enabled&&(p.remove(this.context,"airplayAvailable",qt(this,this.onAirPlayAvailable)),p.remove(this.context,"chromecastAvailable",qt(this,this.onChromecastAvailable)),y.remove(this.context,"videoCastingStart",qt(this,this.onCastingStart)),y.remove(this.context,"videoCastingEnd",qt(this,this.onCastingEnd)));}dispatchAirPlay(){new p("airplay").dispatch(this.context);}onAirPlayAvailable(t){this.airPlayAvailable=null!=t&&1==t.data,0!=this.enabled&&(0!=this.airPlayAvailable?(null==this.state&&(this.state={}),this.state.airplay={active:!1,click:qt(this,this.dispatchAirPlay)},this.refreshCallback(this.state)):null!=this.state&&Object.prototype.hasOwnProperty.call(this.state,"airplay")&&(o.deleteField(this.state,"airplay"),this.refreshCallback(this.state)));}dispatchChromecast(){new p("chromecast").dispatch(this.context);}onChromecastAvailable(t){this.chromecastPlayAvailable=null!=t&&1==t.data,0!=this.enabled&&(0!=this.chromecastPlayAvailable?(null==this.state&&(this.state={}),this.state.chromecast={active:!1,click:qt(this,this.dispatchChromecast)},this.refreshCallback(this.state)):null!=this.state&&Object.prototype.hasOwnProperty.call(this.state,"chromecast")&&(o.deleteField(this.state,"chromecast"),this.refreshCallback(this.state)));}onCastingStart(t){0!=this.enabled&&(null!=this.state.airplay&&(this.state.airplay.active=!0),null!=this.state.chromecast&&(this.state.chromecast.active=!0),this.refreshCallback(this.state));}onCastingEnd(t){0!=this.enabled&&(null!=this.state.airplay&&(this.state.airplay.active=!1),null!=this.state.chromecast&&(this.state.chromecast.active=!1),this.refreshCallback(this.state));}}W.__name__="bs.player.plugin.skin.model.casting.CastModel",W.__super__=V,Object.assign(W.prototype,{__class__:W});class H extends V{constructor(t,e,s,i,a,l,n){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,l,n);}_hx_constructor(t,e,s,i,a,l,n){this.contextmenuElement=null,this.skinElement=null,this.pos=new O(0,0),super._hx_constructor(t,e,s,i),this.skinElement=l;let r=this;this.templateCtx={prefix:a,version:n,clickViewPlayerInformation:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),r.hide(),null!=r.info&&r.info.open();}},this.info=new K(t,e,a,n);this.info.renderTemplate=function(t){return r.renderTemplate(t)};let h;if(this.info.renderHtml=function(t,e){r.renderHtml(t,e);},b.add(t,"resize",qt(this,this.onResize)),Object.prototype.hasOwnProperty.call(e,"contextMenuDisabled"))switch(o.field(e,"contextMenuDisabled")){case 1:case"true":case!0:h=!0;break;default:h=!1;}else h=!1;1!=h&&(this.state={show:!1,ctrl:null},this.state.ctrl=qt(this,this.ctrl),this.skinElement.addEventListener("contextmenu",qt(this,this.onContextMenu)),this.refreshCallback(this.state),p.add(t,"playerInfoShow",qt(this,this.onPlayerInfoShow)),p.add(t,"playerInfoHide",qt(this,this.onPlayerInfoHide)));}set_prefix(t){return null!=this.templateCtx&&(this.templateCtx.prefix=t),null!=this.info&&this.info.set_prefix(t),t}renderTemplate(t){return null}renderHtml(t,e){}destroy(){super.destroy(),null!=this.skinElement&&this.skinElement.removeEventListener("contextmenu",qt(this,this.onContextMenu)),this.disconnectGlobalListeners(),b.remove(this.context,"resize",qt(this,this.onResize)),p.remove(this.context,"playerInfoShow",qt(this,this.onPlayerInfoShow)),p.remove(this.context,"playerInfoHide",qt(this,this.onPlayerInfoHide)),null!=this.info&&this.info.destroy();}ctrl(t){if(null==t)return this.disconnectGlobalListeners(),void(this.contextmenuElement=null);this.contextmenuElement=t,window.requestAnimationFrame(qt(this,this.updatePosition)),null==this.template&&(this.template=this.renderTemplate('<ul class="${ctx.prefix}-contextmenu-items">\n\t\x3c!-- items --\x3e\n\t<if cond="${!!ctx.items && ctx.items.length > 0}">\n\t\t<for items="${ctx.items}">\n\t\t\t<li class="${ctx.prefix}-contextmenu-item">\n\t\t\t\t\x3c!-- button --\x3e\n\t\t\t\t<if cond="${!!item.click}">\n\t\t\t\t\t<button @click="${item.click}" type="button" class="${ctx.prefix}-contextmenu-button">\n\t\t\t\t\t\t<if cond="${!!item.html}">${asHtml(item.html)}</if>\n\t\t\t\t\t</button>\n\t\t\t\t</if>\n\t\t\t\t\x3c!-- link --\x3e\n\t\t\t\t<if cond="${!!item.link}">\n\t\t\t\t\t<a href="${item.link}" target="_blank" class="${ctx.prefix}-contextmenu-link">\n\t\t\t\t\t\t<if cond="${!!item.html}">${asHtml(item.html)}</if>\n\t\t\t\t\t</a>\n\t\t\t\t</if>\n\t\t\t\t\x3c!-- else --\x3e\n\t\t\t\t<if cond="${!item.click && !item.link}">\n\t\t\t\t\t<if cond="${!!item.html}">${asHtml(item.html)}</if>\n\t\t\t\t</if>\n\t\t\t</li>\n\t\t</for>\n\t</if>\n\t\x3c!-- info --\x3e\n\t<li class="${ctx.prefix}-contextmenu-item">\n\t\t<button @click="${ctx.clickViewPlayerInformation}" type="button" class="${ctx.prefix}-contextmenu-button">\n\t\t\t<span class="${ctx.prefix}-txt-shdw">View player information</span>\n\t\t</button>\n\t</li>\n\t\x3c!-- powered by --\x3e\n\t<li class="${ctx.prefix}-contextmenu-item">\n\t\t<a href="https://bradmax.com" target="_blank" class="${ctx.prefix}-contextmenu-link">\n\t\t\t<small style="flex-direction:column;">\n\t\t\t\t<small class="${ctx.prefix}-txt-shdw" style="font-size: 9px;line-height: 10px;">powered by</small>\n\t\t\t\t<span style="align-items: center;">\n\t\t\t\t\t<svg width="22px" height="14px" viewBox="0 0 24 24">\n\t\t\t\t\t\t<path d="M5,1l0,21.721l15.739,-10.948l-15.648,-10.773l-0.091,0Z" style="fill:#fad600;fill-rule:nonzero;" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t<span style="flex-direction:column;">\n\t\t\t\t\t\t<strong class="${ctx.prefix}-txt-shdw" style="font-size: 12px;line-height: 14px;">Bradmax Media Player</strong>\n\t\t\t\t\t\t<small class="${ctx.prefix}-txt-shdw" style="font-size: 9px;line-height: 9px;">${ctx.version}</small>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</small>\n\t\t</a>\n\t</li>\n</ul>\n')),this.renderHtml(this.contextmenuElement,this.template(this.templateCtx)),this.connectGlobalListeners();}onResize(t){this.updatePosition(),null!=this.info&&this.info.resize(t);}onPlayerInfoShow(t){null!=this.info&&this.info.open();}onPlayerInfoHide(t){null!=this.info&&this.info.close();}onContextMenu(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),this.storePosition(t),this.show();}storePosition(t){this.pos.x=t.pageX,this.pos.y=t.pageY;}updatePosition(){if(null==this.contextmenuElement)return;let t=this.contextmenuElement.offsetWidth+4,e=this.contextmenuElement.offsetHeight+4,s=null;s=this.skinElement.getBoundingClientRect();let i=s,a=window.document.documentElement.scrollLeft,l=window.document.documentElement.scrollTop,n=this.pos.x-(i.x+a),r=this.pos.y-(i.y+l);i.width-n<t?this.contextmenuElement.style.left=i.width-t+"px":this.contextmenuElement.style.left=n+"px",i.height-r<e?this.contextmenuElement.style.top=i.height-e+"px":this.contextmenuElement.style.top=r+"px";}show(){1!=this.state.show?(this.state.show=!0,this.refreshCallback(this.state)):this.updatePosition();}hide(){0!=this.state.show&&(this.state.show=!1,this.refreshCallback(this.state));}connectGlobalListeners(){window.document.addEventListener("click",qt(this,this.onDocumentClick)),window.addEventListener("keyup",qt(this,this.onWindowKeyUp));}disconnectGlobalListeners(){window.document.removeEventListener("click",qt(this,this.onDocumentClick)),window.removeEventListener("keyup",qt(this,this.onWindowKeyUp));}onDocumentClick(t){this.hide();}onWindowKeyUp(t){27==t.keyCode&&this.hide();}}H.__name__="bs.player.plugin.skin.model.contextmenu.ContextMenuModel",H.__super__=V,Object.assign(H.prototype,{__class__:H});class ${constructor(t,e){$._hx_skip_constructor||this._hx_constructor(t,e);}_hx_constructor(t,e){this.barWidth=null,this.canvas=null,this.canvas2d=null,this.index=0,this.colors=null,this.datum=null,this.width=300,this.height=11,this.colors=t,null!=e&&(this.datum=e),this.barWidth=Math.round(this.width/150);}destroy(){this.index=0,this.canvas2d=null,this.canvas=null;}ctrl(t){if(null==t)return void this.destroy();this.canvas2d=t.getContext("2d");let e=Math.round(150*this.barWidth);if(t.width=e,t.style.width=e+"px",null==this.canvas2d)return;let s=1<window.devicePixelRatio?2:1;t.height=this.height*s,t.style.height=this.height+"px",this.canvas2d.scale(1,s);}render(t){if(null==this.canvas2d)return;let e=0,s=0,i=0,a=0,l=this.datum.length,n=0;for(;n<l;){let l=(n+=2)-2;if(l==this.datum.length-1)break;if(!("number"==typeof this.datum[l+1]==0||"number"==typeof t==0||parseFloat(""+h.string(this.datum[l+1]))<parseFloat(""+h.string(t)))){if(e=parseFloat(""+h.string(t)),s=parseFloat(""+h.string(this.datum[l])),i=parseFloat(""+h.string(this.datum[l+1])),a=Math.min(1,(e-s)/(i-s)),isNaN(a))break;this.canvas2d.fillStyle=""+this.colors[l],this.canvas2d.fillRect(this.index*this.barWidth,0,this.barWidth,this.height),this.canvas2d.fillStyle=""+this.colors[l+1],this.canvas2d.fillRect(this.index*this.barWidth,this.height*(1-a),this.barWidth,this.height),this.index=(this.index+1)%150;break}}this.canvas2d.clearRect(this.index*this.barWidth,0,this.barWidth,this.height);}}$.__name__="bs.player.plugin.skin.model.contextmenu.info.PlayerInfoChart",Object.assign($.prototype,{__class__:$});class G extends ${constructor(t){$._hx_skip_constructor=!0,super(),$._hx_skip_constructor=!1,this._hx_constructor(t);}_hx_constructor(t){this.offset=0,this.duration=0,super._hx_constructor(t);}ctrl(t){super.ctrl(t),null!=this.canvas2d&&(this.canvas2d.fillStyle=""+this.colors[0],this.canvas2d.strokeStyle=""+this.colors[1]);}render(t){if(null==this.canvas2d)return;let e,s,i;t.duration!=this.duration&&(this.offset=this.width/t.duration,this.duration=t.duration),this.canvas2d.clearRect(0,0,this.width,this.height);let a=0,l=t.buffered.length;for(;a<l;){let l=a++;e=t.buffered.start(l)*this.offset,s=t.buffered.end(l)*this.offset,i=s-e,this.canvas2d.fillRect(e,0,i,this.height),this.canvas2d.rect(e,0,i,this.height),this.canvas2d.stroke();}}}G.__name__="bs.player.plugin.skin.model.contextmenu.info.PlayerInfoBufferChart",G.__super__=$,Object.assign(G.prototype,{__class__:G});class K{constructor(t,e,s,i){this.lastDecodedByteCount=0,this.lastDecodedFrames=0,this.lastDecodedFrameTime=0,this.framesPerSecond=0,this.networkActivityBytes=0,this.playerHeight=0,this.playerWidth=0,this.videoElement=null,this.hasNetworkActivitySamples=!1,this.networkActivitySamples=new Bt,this.bandwidthSteps=[0,18750,37500,81250,128e3,256e3,512e3,1024e3,2048e3,4096e3,8192e3,16384e3,32768e3,65536e3,131072e3],this.bandwidthColors=["#000000","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#2ca02c","#3288bd","#1f77b4","#124588","#9467bd","#8c564b","#ffffff"].slice(0),this.timeOrigin=window.performance.timeOrigin,this.templateCtx={prefix:null,size:{h:0,w:0},version:null,panels:[{title:"Video",id:"video",list:[{defaultValue:0,id:"creationTime",label:"creation time",value:null},{defaultValue:"not available",id:"videoSize",unit:"px",label:"video size",value:null},{defaultValue:"not available",id:"videoFrames",label:"frames",value:null},{chart:null,defaultValue:null,id:"framesPerSecond",unit:"fps",label:"frames per seconds",value:null},{chart:null,defaultValue:null,id:"currentTotalBitrateKpbs",unit:"Kpbs",label:"current total bitrate",value:null},{chart:null,defaultValue:null,id:"networkActivityBytes",unit:"KB",label:"network activity",value:null},{chart:null,defaultValue:0,id:"bufferLength",unit:"s",label:"buffer length",value:null},{chart:null,defaultValue:0,id:"buffer",label:"buffer:",value:null}]},{title:"Media",id:"media",list:[{defaultValue:null,id:"id",label:"id",value:null},{defaultValue:"not available",id:"title",label:"title",value:null},{defaultValue:"not available",id:"duration",unit:"s",label:"duration",value:null},{defaultValue:!1,id:"hasConcurrencyControl",label:"concurrency control",value:null},{defaultValue:!1,id:"isDvr",label:"dvr",value:null},{defaultValue:!1,id:"isLiveStream",label:"live",value:null},{defaultValue:!1,id:"spherical",label:"spherical",value:null},{defaultValue:null,id:"source",label:"source count",value:null},{defaultValue:null,id:"sourceFallbacks",label:"source fallbacks count",value:null},{defaultValue:null,id:"subtitlesSets",label:"subtitles sets count",value:null},{defaultValue:null,id:"audioSets",label:"audio sets count",value:null},{defaultValue:null,id:"splashImages",label:"splash images count",value:null},{defaultValue:null,id:"posterImages",label:"poster images count",value:null},{defaultValue:null,id:"mediaPlaylist",label:"playlist items count",value:null},{defaultValue:null,id:"mediaLandingPage",label:"landing page",value:null}]},{title:"Player",id:"player",list:[{defaultValue:"not available",id:"version",label:"Bradmax Media Player",value:null},{defaultValue:"not available",id:"playerSize",unit:"px",label:"player size",value:null}]},{title:"Configuration",id:"config",list:[{defaultValue:!1,id:"autoplay",label:"autoplay",value:null},{defaultValue:!1,id:"mute",label:"mute",value:null},{defaultValue:null,id:"volume",label:"volume",value:null},{defaultValue:null,id:"startTime",label:"startTime",value:null},{defaultValue:null,id:"qualitySelectionEnabled",label:"quality selection enabled",value:null},{defaultValue:null,id:"qualityLabelType",label:"qualityLabelType",value:null},{defaultValue:null,id:"qualityInitialBandwidthKbs",label:"quality initial bandwidth",value:null},{defaultValue:!0,id:"showSkinOnInit",label:"show skin on init",value:null},{defaultValue:null,id:"shareButtons",label:"share buttons",value:null},{defaultValue:null,id:"endSplash",label:"end splash",value:null},{defaultValue:null,id:"subtitles",label:"subtitles",value:null},{defaultValue:null,id:"audio",label:"audio",value:null},{defaultValue:null,id:"locale",label:"locale",value:null},{defaultValue:null,id:"dvrWindowStartTime",label:"dvr window start time",value:null},{defaultValue:null,id:"dvrWindowEndTime",label:"dvr window end time",value:null},{defaultValue:null,id:"dvrMinLenForSeekbar",label:"dvr minimum length for seekbar",value:null},{defaultValue:!1,id:"isDvrWallTimeMode",label:"dvr wall time",value:null},{defaultValue:!1,id:"iosInlineVideo",label:"ios inline video",value:null},{defaultValue:!1,id:"gdprAgreeRequired",label:"gdpr agree required",value:null},{defaultValue:!1,id:"gdprAgreeForCookie",label:"gdpr agree for cookie",value:null},{defaultValue:null,id:"logoFile",label:"logo",value:null},{defaultValue:null,id:"logoLink",label:"logo link",value:null},{defaultValue:null,id:"logoPosition",label:"logo position",value:null},{defaultValue:null,id:"logoAutohide",label:"logo autohide",value:null},{defaultValue:null,id:"logoVisibleDuringAdPlayback",label:"logo visible during ad playback",value:null},{defaultValue:null,id:"skinColor",label:"skin color",value:null},{defaultValue:!1,id:"fullscreenEnabled",label:"fullscreen enabled",value:null},{defaultValue:!1,id:"pictureInPictureEnabled",label:"picture in picture enabled",value:null},{defaultValue:!1,id:"videoCastEnabled",label:"video casting enabled",value:null}]},{title:"Device",id:"device",list:[{defaultValue:"not available",id:"useragent",label:"user agent",value:null},{defaultValue:"not available",id:"screenSize",unit:"px",label:"screen size",value:null},{defaultValue:!1,id:"isMobile",label:"mobile",value:null},{defaultValue:!1,id:"isSmartTV",label:"smart TV",value:null},{defaultValue:"not available",id:"browserName",label:"browser name",value:null},{defaultValue:!1,id:"isBrowserOnline",label:"online",value:null},{defaultValue:!1,id:"isWebGLAvailable",label:"WebGL",value:null},{defaultValue:!1,id:"isWebGL2Available",label:"WebGL2",value:null},{defaultValue:!1,id:"isDeviceOrientationSupported",label:"device orientation",value:null},{defaultValue:"not available",id:"orientation",unit:"°",label:"orientation",value:null}]}]},this.context=t,null!=s&&this.set_prefix(s),this.templateCtx.version=i,this.initCtx(e),m.add(t,"mediaMetadataData",qt(this,this.onDataProviderEvent)),m.add(t,"movieData",qt(this,this.onDataProviderEvent)),y.add(t,"videoMediaElementInit",qt(this,this.onVideoElementEvent)),y.add(t,"networkActivityUrl",qt(this,this.onVideoNetworkActivity));}renderTemplate(t){return null}renderHtml(t,e){}set_prefix(t){return null!=this.templateCtx&&(this.templateCtx.prefix=t),t}destroy(){m.remove(this.context,"mediaMetadataData",qt(this,this.onDataProviderEvent)),m.remove(this.context,"movieData",qt(this,this.onDataProviderEvent)),y.remove(this.context,"videoMediaElementInit",qt(this,this.onVideoElementEvent)),y.remove(this.context,"networkActivityUrl",qt(this,this.onVideoNetworkActivity)),this.destroyCharts();}open(){let t=new f("showMessage");t.data={type:"normal",title:"Player information",text:'<div id="'+this.context+'-info-view" style="flex-direction: column;"></div>',onAfterShow:qt(this,this.afterShow),close:!0,onAfterClose:qt(this,this.afterClose),style:{window:{minWidth:"380px",width:"380px",maxWidth:"380px",backgroundColor:"#000",pointerEvents:"all"},overlay:{height:"90%",background:"none",backdropFilter:"none",pointerEvents:"none"}}},t.dispatch(this.context);}close(){new f("closeMessage").dispatch(this.context);}resize(t){this.playerWidth=t.data.width,this.playerHeight=t.data.height;let e=0,s=this.templateCtx.panels;for(;e<s.length;){let t=s[e];++e,"player"==t.id&&this.updatePlayerCtx(t.list);}}afterShow(){let t=window.document.getElementById(this.context+"-info-view");m.add(this.context,"mediaMetadataData",qt(this,this.onNewDataProviderEvent)),m.add(this.context,"mediaAfterPlaybackStartMetadata",qt(this,this.onDataProviderEvent)),y.add(this.context,"currentTimeChange",qt(this,this.onVideoEvent)),null!=t&&(this.templateCtx.size.w=t.clientWidth,this.templateCtx.size.h=t.clientHeight),null==this.template&&(this.template=this.renderTemplate('${ctx.panels.map((panel, panelIndex) => html`\n<div class="${ctx.prefix}-message-info-con">\n\t<h4 class="${ctx.prefix}-message-info-title">${panel.title}:</h4>\n\t<div  class="${ctx.prefix}-message-info-list">\n\t\t${panel.list.map((item, itemIndex) => item.value != item.defaultValue\n\t\t? html`\n\t\t<div class="${ctx.prefix}-message-info-item">\n\t\t\t<small class="${ctx.prefix}-message-info-item-label">${item.label}</small>\n\t\t\t<small  class="${ctx.prefix}-message-info-item-value">\n\t\t\t\t${item.value != null ? html`<strong>${item.value}</strong>${item.unit ? html`<small class="${ctx.prefix}-message-info-item-unit">&nbsp;${item.unit}</small>` : nothing}` : html`<i>${item.defaultValue}</i>`}\n\t\t\t</small>\n\t\t</div>${item.chart ? html`<canvas ${ctrl(item.chart)} class="${ctx.prefix}-message-info-item-chart"></canvas>` : nothing}`\n\t\t: nothing\n\t\t)}\n\t</div>\n</div>`)}\n'));let e=this,s=function(){e.countNetworkActivityBytes(),e.updateCtx(),e.renderHtml(t,e.template(e.templateCtx));};null==this.renderTimer&&(this.renderTimer=new At(250)),this.renderTimer.run=s,s();}afterClose(){m.remove(this.context,"mediaMetadataData",qt(this,this.onNewDataProviderEvent)),m.remove(this.context,"mediaAfterPlaybackStartMetadata",qt(this,this.onDataProviderEvent)),y.remove(this.context,"currentTimeChange",qt(this,this.onVideoEvent)),null!=this.renderTimer&&this.renderTimer.stop(),this.renderTimer=null;}onVideoElementEvent(t){this.videoElement=t.data;}onVideoEvent(t){null!=t&&null!=t.data&&null!=t.data.media&&(this.media=t.data.media);}onVideoNetworkActivity(t){this.hasNetworkActivitySamples=!0,this.networkActivitySamples.h[t.data.url]=t.data.loaded;}onNewDataProviderEvent(t){this.networkActivitySamples.h=Object.create(null),null!=t&&null!=t.data&&(this.media=t.data);}onDataProviderEvent(t){null!=t&&null!=t.data&&(this.media=t.data);}initCtx(t){let e=0,s=this.templateCtx.panels;for(;e<s.length;){let i=s[e];switch(++e,i.id){case"config":this.updateConfigCtx(i.list,t);break;case"device":this.updateDeviceCtx(i.list);break;case"player":this.updatePlayerCtx(i.list);break;default:continue}}}updateCtx(){let t=0,e=this.templateCtx.panels;for(;t<e.length;){let s=e[t];switch(++t,s.id){case"media":this.updateMediaCtx(s.list,this.media);break;case"video":this.updateVideoCtx(s.list,this.media);break;default:continue}}}updatePlayerCtx(t){let e=0;for(;e<t.length;){let s=t[e];switch(++e,s.id){case"playerSize":s.value=this.playerWidth+" x "+this.playerHeight;break;case"version":s.value=this.templateCtx.version;break;default:continue}}this.resolvePlugins(t,exports.bs.player.plugin);}updateConfigCtx(t,e){let s=null;Object.prototype.hasOwnProperty.call(e,"logoFile")&&(s=o.field(e,"logoFile"));let i=null!=s,a=0;for(;a<t.length;){let s=t[a];switch(++a,s.id){case"audio":let t=null;Object.prototype.hasOwnProperty.call(e,"audio")&&(t=o.field(e,"audio"));let l=!1,n=null;if(n=Ut.getSessionStorage(),l=null!=n,l){let e,s=null,i=!1,l=null;if(l=Ut.getSessionStorage(),i=null!=l,i){try{let t,e=null,i=!1,a=null;if(a=Ut.getSessionStorage(),i=null!=a,i){let s=null;s=Ut.getSessionStorage(),e=s.getItem("_brplayer_aud_lang"),null==e||(e=u.trim(e)),t=e;}else t=e;null!=t&&""!=t&&(s=t);}catch(a){}e=s;}else e=s;null!=e&&(t=e);}s.value=t;break;case"autoplay":let r;if(Object.prototype.hasOwnProperty.call(e,"autoplay"))switch(o.field(e,"autoplay")){case 1:case"true":case!0:r=!0;break;default:r=!1;}else r=!1;s.value=r;break;case"dvrMinLenForSeekbar":s.value=Object.prototype.hasOwnProperty.call(e,"dvrMinLenForSeekbar")?parseFloat(o.field(e,"dvrMinLenForSeekbar")):null;break;case"dvrWindowEndTime":s.value=Object.prototype.hasOwnProperty.call(e,"dvrWindowEndTime")?parseFloat(o.field(e,"dvrWindowEndTime")):null;break;case"dvrWindowStartTime":s.value=Object.prototype.hasOwnProperty.call(e,"dvrWindowStartTime")?parseFloat(o.field(e,"dvrWindowStartTime")):null;break;case"endSplash":let h=null;Object.prototype.hasOwnProperty.call(e,"endSplash")&&(h=o.field(e,"endSplash")),s.value=h;break;case"fullscreenEnabled":if(Object.prototype.hasOwnProperty.call(e,"hideUIElements")){let t=o.field(e,"hideUIElements");null!=t&&"string"==typeof t&&t.indexOf("fullscreenButton")>-1&&(e.fullscreenEnabled=!1);}let c;if(Object.prototype.hasOwnProperty.call(e,"fullscreenEnabled"))switch(o.field(e,"fullscreenEnabled")){case 0:case"false":case!1:c=!1;break;default:c=!0;}else c=!0;s.value=c;break;case"gdprAgreeForCookie":let d;if(Object.prototype.hasOwnProperty.call(e,"gdprAgreeForCookie"))switch(o.field(e,"gdprAgreeForCookie")){case 1:case"true":case!0:d=!0;break;default:d=!1;}else d=!1;s.value=d;break;case"gdprAgreeRequired":let p;if(Object.prototype.hasOwnProperty.call(e,"gdprAgreeRequired"))switch(o.field(e,"gdprAgreeRequired")){case 1:case"true":case!0:p=!0;break;default:p=!1;}else p=!1;s.value=p;break;case"iosInlineVideo":let m;if(Object.prototype.hasOwnProperty.call(e,"iosInlineVideo"))switch(o.field(e,"iosInlineVideo")){case 1:case"true":case!0:m=!0;break;default:m=!1;}else m=!1;s.value=m;break;case"isDvrWallTimeMode":let f;if(Object.prototype.hasOwnProperty.call(e,"isDvrWallTimeMode"))switch(o.field(e,"isDvrWallTimeMode")){case 1:case"true":case!0:f=!0;break;default:f=!1;}else f=!1;s.value=f;break;case"locale":s.value=Object.prototype.hasOwnProperty.call(e,"locale")?o.field(e,"locale"):null;break;case"logoAutohide":if(i){let t;if(Object.prototype.hasOwnProperty.call(e,"logoAutohide"))switch(o.field(e,"logoAutohide")){case 0:case"false":case!1:t=!1;break;default:t=!0;}else t=!0;s.value=t;}break;case"logoFile":if(i){let t=null;Object.prototype.hasOwnProperty.call(e,"logoFile")&&(t=o.field(e,"logoFile")),s.value=t;}break;case"logoLink":if(i){let t=null;Object.prototype.hasOwnProperty.call(e,"logoLink")&&(t=o.field(e,"logoLink")),s.value=t;}break;case"logoPosition":if(i){let t;if(Object.prototype.hasOwnProperty.call(e,"logoXPosition"))switch(o.field(e,"logoXPosition")){case"left":default:t="left";break;case"right":t="right";}else t="left";let i,a=t+" / ";if(Object.prototype.hasOwnProperty.call(e,"logoYPosition"))if("bottom"===o.field(e,"logoYPosition"))i="bottom";else i="top";else i="top";s.value=a+i;}break;case"logoVisibleDuringAdPlayback":if(i){let t;if(Object.prototype.hasOwnProperty.call(e,"logoVisibleDuringAdPlayback"))switch(o.field(e,"logoVisibleDuringAdPlayback")){case 1:case"true":case!0:t=!0;break;default:t=!1;}else t=!1;s.value=t;}break;case"mute":let g;if(Object.prototype.hasOwnProperty.call(e,"mute"))switch(o.field(e,"mute")){case 1:case"true":case!0:g=!0;break;default:g=!1;}else g=!1;s.value=g;break;case"pictureInPictureEnabled":if(Object.prototype.hasOwnProperty.call(e,"pictureInPictureButtonVisible"))switch(o.field(e,"pictureInPictureButtonVisible")){case 0:case"false":case!1:e.pictureInPictureEnabled=!1;break;default:e.pictureInPictureEnabled=!0;}let _;if(Object.prototype.hasOwnProperty.call(e,"pictureInPictureEnabled"))switch(o.field(e,"pictureInPictureEnabled")){case 0:case"false":case!1:_=!1;break;default:_=!0;}else _=!0;s.value=_;break;case"qualityInitialBandwidthKbs":s.value=Object.prototype.hasOwnProperty.call(e,"qualityInitialBandwidthKbs")?parseFloat(o.field(e,"qualityInitialBandwidthKbs")):null;break;case"qualityLabelType":s.value=Object.prototype.hasOwnProperty.call(e,"qualityLabelType")?o.field(e,"qualityLabelType"):null;break;case"qualitySelectionEnabled":let b;if(Object.prototype.hasOwnProperty.call(e,"qualitySelectionEnabled"))switch(o.field(e,"qualitySelectionEnabled")){case 0:case"false":case!1:b=!1;break;default:b=!0;}else b=!0;s.value=b;break;case"shareButtons":let v;if(Object.prototype.hasOwnProperty.call(e,"shareButtons")){let t=o.field(e,"shareButtons");v=null!=t&&"string"==typeof t&&""!=u.trim(t)?t.toLowerCase():null;}else v=null;s.value=v;break;case"showSkinOnInit":let y;if(Object.prototype.hasOwnProperty.call(e,"showSkinOnInit"))switch(o.field(e,"showSkinOnInit")){case 0:case"false":case!1:y=!1;break;default:y=!0;}else y=!0;s.value=y;break;case"skinColor":s.value=Object.prototype.hasOwnProperty.call(e,"skinColor")?o.field(e,"skinColor"):null;break;case"startTime":s.value=Object.prototype.hasOwnProperty.call(e,"startTime")?parseFloat(o.field(e,"startTime")):null;break;case"subtitles":let k=null;Object.prototype.hasOwnProperty.call(e,"subtitles")&&(k=o.field(e,"subtitles"));let x=!1,w=null;if(w=Ut.getSessionStorage(),x=null!=w,x){let t,e=null,s=!1,i=null;if(i=Ut.getSessionStorage(),s=null!=i,s){try{let t,s=null,i=!1,a=null;if(a=Ut.getSessionStorage(),i=null!=a,i){let e=null;e=Ut.getSessionStorage(),s=e.getItem("_brplayer_sub_lang"),null==s||(s=u.trim(s)),t=s;}else t=s;null!=t&&""!=t&&(e=t);}catch(a){}t=e;}else t=e;null!=t&&(k=t);}s.value=k;break;case"videoCastEnabled":let E;if(Object.prototype.hasOwnProperty.call(e,"videoCastEnabled"))switch(o.field(e,"videoCastEnabled")){case 0:case"false":case!1:E=!1;break;default:E=!0;}else E=!0;s.value=E;break;case"volume":let S=null;Object.prototype.hasOwnProperty.call(e,"volume")&&(S=o.field(e,"volume"));let P=!1,O=null;if(O=Ut.getSessionStorage(),P=null!=O,P){let t,e=NaN,s=!1,i=null;if(i=Ut.getSessionStorage(),s=null!=i,s){try{let t,s=null,i=!1,a=null;if(a=Ut.getSessionStorage(),i=null!=a,i){let e=null;e=Ut.getSessionStorage(),s=e.getItem("_brplayer_vol"),null==s||(s=u.trim(s)),t=s;}else t=s;null!=t&&""!=t&&(e=parseFloat(t));}catch(a){}t=e;}else t=e;isNaN(t)||(S=t);}s.value=S;break;default:continue}}}updateDeviceCtx(t){let e=0;for(;e<t.length;){let s=t[e];switch(++e,s.id){case"browserName":s.value=g.browserName;break;case"isBrowserOnline":s.value=g.isBrowserOnline();break;case"isDeviceOrientationSupported":s.value=g.isDeviceOrientationSupported();break;case"isMobile":s.value=g.isMobile();break;case"isSmartTV":s.value=g.isSmartTV();break;case"isWebGL2Available":s.value=g.isWebGL2Available();break;case"isWebGLAvailable":s.value=g.isWebGLAvailable();break;case"orientation":s.value=g.getOrientation();break;case"screenSize":let t=g.getScreenSize();s.value=t.width+" x "+t.height;break;case"useragent":s.value=g.getUserAgent();break;default:continue}}}updateMediaCtx(t,e){let s=!1,i=!1;e instanceof C?(s=!1,i=!1):e instanceof w?(s=!0,i=e instanceof E):(s=!1,i=!1);let a=0;for(;a<t.length;){let l=t[a];switch(++a,l.id){case"audioSets":null!=e.audioSets&&e.audioSets.length>0&&(l.value=e.audioSets.length);break;case"duration":l.value=e.duration;break;case"hasConcurrencyControl":l.value=e.mediaSettings.hasConcurrencyControl;break;case"id":l.value=e.id;break;case"isDvr":l.value=s;break;case"isLiveStream":l.value=i;break;case"mediaLandingPage":null!=e.mediaLandingPage&&(l.value=e.mediaLandingPage);break;case"mediaPlaylist":null!=e.mediaPlaylist&&e.mediaPlaylist.get_length()>0&&(l.value=e.mediaPlaylist.get_length());break;case"posterImages":null!=e.posterImages&&e.posterImages.length>0&&(l.value=e.posterImages.length);break;case"source":null!=e.source&&e.source.length>0&&(l.value=e.source.length);break;case"sourceFallbacks":null!=e.sourceFallbacks&&e.sourceFallbacks.length>0&&(l.value=e.sourceFallbacks.length);break;case"spherical":l.value=e.spherical;break;case"splashImages":null!=e.splashImages&&e.splashImages.length>0&&(l.value=e.splashImages.length);break;case"subtitlesSets":null!=e.subtitlesSets&&e.subtitlesSets.length>0&&(l.value=e.subtitlesSets.length);break;case"title":l.value=e.title;break;default:continue}}}updateVideoCtx(t,e){if(null==this.videoElement)return;let i=this.videoElement.getVideoPlaybackQuality(),a=e.mediaPlaybackInfo.currentTime,l=this.videoElement.buffered,n=this.getBufferLength(l,a);null!=i&&(e.mediaPlaybackInfo.isPlaying?this.countFps(i.totalVideoFrames):this.framesPerSecond=0);let o=0;for(;o<t.length;){let h=t[o];switch(++o,h.id){case"buffer":h.value=l.length,null==h.chart&&(null==this.bufferChart&&(this.bufferChart=new G(["#2ca02c","#e6f598"].slice(0))),h.chart=qt(s=this.bufferChart,s.ctrl)),this.bufferChart.render({duration:e.duration,buffered:l});break;case"bufferLength":h.value=0==n?"0":n.toFixed(2),null==h.chart&&(null==this.bufferLengthChart&&(this.bufferLengthChart=new $(["#000000","#fdae61","#e6f598","#66c2a5","#3288bd","#ffffff"].slice(0),[0,15,30,60,90,120].slice(0))),h.chart=qt(s=this.bufferLengthChart,s.ctrl)),this.bufferLengthChart.render(n);break;case"creationTime":null!=i&&(h.value=r.dateStr(new Date(this.timeOrigin+i.creationTime)));break;case"currentTime":h.value=a;break;case"currentTotalBitrateKpbs":let t=e.mediaPlaybackInfo.currentTotalBitrateKpbs;null==t&&(t=this.tryToCountBitrate()),h.value=t,null==h.chart&&(null==this.currentTotalBitrateKpbsChart&&(this.currentTotalBitrateKpbsChart=new $(this.bandwidthColors,this.bandwidthSteps.slice(0))),h.chart=qt(s=this.currentTotalBitrateKpbsChart,s.ctrl)),this.currentTotalBitrateKpbsChart.render(1e3*t);break;case"framesPerSecond":h.value=this.framesPerSecond,null==h.chart&&(null==this.framesPerSecondChart&&(this.framesPerSecondChart=new $(["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5"].slice(0),[0,12,18,24,32,48,60].slice(0))),h.chart=qt(s=this.framesPerSecondChart,s.ctrl)),this.framesPerSecondChart.render(this.framesPerSecond);break;case"networkActivityBytes":if(0==this.hasNetworkActivitySamples)continue;if(h.value=Math.round(this.networkActivityBytes/1e3),null==h.chart){if(null==this.networkActivityChart){let t=this.bandwidthColors,e=this.bandwidthSteps,s=new Array(e.length),i=0,a=e.length;for(;i<a;){let t=i++;s[t]=e[t]/4;}this.networkActivityChart=new $(t,s.slice(0));}h.chart=qt(s=this.networkActivityChart,s.ctrl);}this.networkActivityChart.render(8*this.networkActivityBytes/1e3);break;case"videoFrames":null!=i&&(h.value=i.droppedVideoFrames+" dropped of "+i.totalVideoFrames);break;case"videoSize":h.value=this.videoElement.videoWidth+" x "+this.videoElement.videoHeight;break;default:continue}}}destroyCharts(){null!=this.currentTotalBitrateKpbsChart&&this.currentTotalBitrateKpbsChart.destroy(),null!=this.bufferLengthChart&&this.bufferLengthChart.destroy(),null!=this.networkActivityChart&&this.networkActivityChart.destroy(),null!=this.framesPerSecondChart&&this.framesPerSecondChart.destroy(),null!=this.bufferChart&&this.bufferChart.destroy();}getBufferLength(t,e){let s=0,i=t.length;for(;s<i;){let i=s++,a=t.start(i),l=t.end(i);if(a<=e&&e<l)return l-e}return 0}countNetworkActivityBytes(){this.networkActivityBytes=0;let t=this.networkActivitySamples.h,e=Object.keys(t),s=e.length,i=0;for(;i<s;)this.networkActivityBytes+=t[e[i++]];this.networkActivitySamples.h=Object.create(null);}countFps(t){let e=t-this.lastDecodedFrames;if(0!=e){let s=window.performance.now();this.framesPerSecond=Math.round(e/(s-this.lastDecodedFrameTime)*1e3),this.lastDecodedFrames=t,this.lastDecodedFrameTime=s;}}tryToCountBitrate(){if("webkitVideoDecodedByteCount"in this.videoElement){let t=parseFloat(this.videoElement.webkitVideoDecodedByteCount),e=(t-this.lastDecodedByteCount)/1e3*8;return this.lastDecodedByteCount=t,Math.round(e)}return null}resolvePlugins(t,e){if(0==o.isObject(e))return;let s=e.__name__;if(null!=s){let i,a,l=s.split(".").pop(),n=e;if(0==o.isObject(n))a=!1;else {let t=Object.prototype.hasOwnProperty.call(n,"__plugfaces__")?o.field(n,"__plugfaces__"):null;a=null!=t&&t.indexOf("IVideoPlayer")>-1;}if(a)i=!0;else {let t=e;if(0==o.isObject(t))i=!1;else {let e=Object.prototype.hasOwnProperty.call(t,"__plugfaces__")?o.field(t,"__plugfaces__"):null;i=null!=e&&e.indexOf("IPlugin")>-1;}}if(i){let e=[],i=0,a=t;for(;i<a.length;){let t=a[i];++i,t.id==s&&e.push(t);}return void(0==e.length&&t.push({id:s,label:""+l,value:"active"}))}}else {let s=0,i=o.fields(e);for(;s<i.length;)this.resolvePlugins(t,o.field(e,i[s++]));}}}K.__name__="bs.player.plugin.skin.model.contextmenu.info.PlayerInfoMessage",Object.assign(K.prototype,{__class__:K});class X extends V{constructor(t,e,s,i,a,l){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,l);}_hx_constructor(t,e,s,i,a,l){this.cssPrefix=null,super._hx_constructor(t,e,s,i);let n=g.isMobile(),r=g.isSmartTV();this.state={browserName:g.browserName.toLowerCase(),desktop:0==n&&0==r,mobile:n,ios:g.isiOS,tv:r,tizen:g.isSamsungSmartTVTizen,webview:g.isWebView(),css:null},this.element=l,this.set_prefix(a);}set_prefix(t){if(this.cssPrefix=t,null!=this.element&&null!=this.cssPrefix&&""!=this.cssPrefix){let t=this.toStringArray();this.state.css=t.join(" ");let e=0;for(;e<t.length;)this.element.classList.add(t[e++]);this.refreshCallback(this.state);}return this.cssPrefix}toStringArray(){let t=[this.cssPrefix+"-"+this.state.browserName],e=0,s=o.fields(this.state);for(;e<s.length;){let i=s[e];++e;let a=o.field(this.state,i);"boolean"==typeof a&&1==a&&t.push(this.cssPrefix+"-"+i);}return t}}X.__name__="bs.player.plugin.skin.model.device.DeviceModel",X.__super__=V,Object.assign(X.prototype,{__class__:X});class Q extends V{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){if(this.active=!1,super._hx_constructor(t,e,s,i),this.element=a,Object.prototype.hasOwnProperty.call(e,"hideUIElements")){let t=o.field(e,"hideUIElements");null!=t&&"string"==typeof t&&t.indexOf("fullscreenButton")>-1&&(e.fullscreenEnabled=!1);}let l,n;if(Object.prototype.hasOwnProperty.call(e,"fullscreenEnabled"))switch(o.field(e,"fullscreenEnabled")){case 0:case"false":case!1:l=!1;break;default:l=!0;}else l=!0;if(this.enabled=l,Object.prototype.hasOwnProperty.call(e,"fullscreenOrientationLock"))switch(o.field(e,"fullscreenOrientationLock")){case"any":n="any";break;case"landscape":n="landscape";break;case"landscape-primary":n="landscape-primary";break;case"landscape-secondary":n="landscape-secondary";break;case"natural":n="natural";break;case"portrait":n="portrait";break;case"portrait-primary":n="portrait-primary";break;case"portrait-secondary":n="portrait-secondary";break;default:n=null;}else n=null;this.fullscreenOrientationLock=n,this.enabled&&(g.isiOS?(y.add(t,"videoMediaElementInit",qt(this,this.oniOSVideoMediaElementInit)),y.add(t,"playing",qt(this,this.oniOSPlaying)),y.add(t,"complete",qt(this,this.oniOSComplete))):this.enabled&&this.activate());}destroy(){this.enabled&&(this.deactivate(),g.isiOS&&(y.remove(this.context,"videoMediaElementInit",qt(this,this.oniOSVideoMediaElementInit)),y.remove(this.context,"playing",qt(this,this.oniOSPlaying)),y.remove(this.context,"complete",qt(this,this.oniOSComplete)))),super.destroy();}activate(){0!=this.enabled&&1!=this.active&&(this.active=!0,this.state={active:kt.isFullscreen(this.videoElement),toggle:qt(this,this.toggle)},p.add(this.context,"fullscreen",qt(this,this.onFullscreen)),this.refreshCallback(this.state));}deactivate(){0!=this.active&&(this.active=!1,this.state=null,p.remove(this.context,"fullscreen",qt(this,this.onFullscreen)),this.refreshCallback(this.state));}toggle(t){0!=this.enabled&&(null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),kt.toggle(this.element,this.videoElement,qt(this,this.toggled)),new p("fullscreen").dispatch(this.context));}toggled(t){if(0==this.enabled)return;let e=kt.isFullscreen(this.videoElement);null!=this.fullscreenOrientationLock&&(e?xt.lock(this.fullscreenOrientationLock):xt.unlock()),this.state.active!=e&&(this.state.active=e,this.refreshCallback(this.state));}onFullscreen(t){0!=this.enabled&&(this.state.active=!this.state.active,this.refreshCallback(this.state));}oniOSVideoMediaElementInit(t){null!=t&&null!=t.data&&this.videoElement!=t.data&&(this.videoElement=t.data,o.isFunction(qt(s=this.videoElement,s.webkitSupportsPresentationMode))&&o.isFunction(qt(s=this.videoElement,s.webkitSetPresentationMode))&&(this.videoElement.removeEventListener("webkitpresentationmodechanged",qt(this,this.oniOSWebkitPresentationModeChanged)),this.videoElement.addEventListener("webkitpresentationmodechanged",qt(this,this.oniOSWebkitPresentationModeChanged))));}oniOSWebkitPresentationModeChanged(t){0!=this.enabled&&(this.state.active=null!=this.videoElement&&"fullscreen"==this.videoElement.webkitPresentationMode,this.refreshCallback(this.state));}oniOSPlaying(t){0!=this.enabled&&y.add(this.context,"currentTimeChange",qt(this,this.oniOSCurrentTimeChange));}oniOSCurrentTimeChange(t){null!=t&&null!=t.data&&null!=t.data.media&&null!=t.data.media.mediaPlaybackInfo&&0!=t.data.media.mediaPlaybackInfo.isPlaying&&(this.enabled=1==this.videoElement.webkitSupportsFullscreen,this.enabled?this.activate():this.deactivate(),y.remove(this.context,"currentTimeChange",qt(this,this.oniOSCurrentTimeChange)));}oniOSComplete(t){0!=this.enabled&&this.deactivate();}}Q.__name__="bs.player.plugin.skin.model.fullscreen.FullscreenModel",Q.__super__=V,Object.assign(Q.prototype,{__class__:Q});class Y extends V{constructor(t,e,s,i,a,l){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,l);}_hx_constructor(t,e,s,i,a,l){let n;if(this.pauseSelector=null,this.isPlaying=!1,this.showSkinOnInit=!0,this.skinElement=null,super._hx_constructor(t,e,s,i),this.skinElement=l,null!=a&&this.set_prefix(a),Object.prototype.hasOwnProperty.call(e,"showSkinOnInit"))switch(o.field(e,"showSkinOnInit")){case 0:case"false":case!1:n=!1;break;default:n=!0;}else n=!0;this.showSkinOnInit=n,this.state="show",m.add(t,"mediaMetadataData",qt(this,this.onMetadata)),f.add(t,"animateShow",qt(this,this.onShow)),y.add(t,"playing",qt(this,this.onPlaying)),y.add(t,"paused",qt(this,this.onStopped)),y.add(t,"complete",qt(this,this.onStopped)),g.isMobile()?(this.skinElement.addEventListener("touchmove",qt(this,this.onMove),yt.get_passiveOptions()),this.skinElement.addEventListener("touchend",qt(this,this.onTouchEnd),yt.get_passiveOptions())):this.skinElement.addEventListener("mousemove",qt(this,this.onMove),yt.get_passiveOptions()),this.refreshCallback("show");}set_prefix(t){return this.pauseSelector="."+t+"-hide-pause-on-over",t}destroy(){super.destroy(),g.isMobile()?(this.skinElement.removeEventListener("touchmove",qt(this,this.onMove)),this.skinElement.removeEventListener("touchend",qt(this,this.onTouchEnd))):this.skinElement.removeEventListener("mousemove",qt(this,this.onMove)),m.remove(this.context,"mediaMetadataData",qt(this,this.onMetadata)),f.remove(this.context,"animateShow",qt(this,this.onShow)),y.remove(this.context,"playing",qt(this,this.onPlaying)),y.remove(this.context,"paused",qt(this,this.onStopped)),y.remove(this.context,"complete",qt(this,this.onStopped));}onTouchEnd(t){this.isPlaying&&this.startAutohide();}onMove(t){if(!this.isPlaying)return;null!=t.target.closest(this.pauseSelector)?(this.refreshCallback("show"),this.stopAutohide()):this.startAutohide();}onMetadata(t){this.isPlaying=!1,this.refreshCallback("show"),this.stopAutohide(),this.showSkinOnInit||this.refreshCallback("hide-force");}onStopped(t){this.isPlaying=!1,this.refreshCallback("show"),this.stopAutohide();}onPlaying(t){this.isPlaying=!0,this.refreshCallback("hide"),this.stopAutohide();}onShow(t){this.startAutohide();}startAutohide(){if(this.refreshCallback("show"),this.stopAutohide(),!this.isPlaying)return;let t=this;this.animTimer=At.delay((function(){t.isPlaying&&(t.refreshCallback("hide"),t.stopAutohide());}),100);}stopAutohide(){let t=this.animTimer;null!=t&&t.stop(),this.animTimer=null;}}Y.__name__="bs.player.plugin.skin.model.hide.AutohideModel",Y.__super__=V,Object.assign(Y.prototype,{__class__:Y});class Z extends V{constructor(t,e,s,i){super(t,e,s,i),this.state={type:"css",airplay:{id:"bmp-ico-airplay"},alert:{id:"bmp-ico-alert"},subtitles:{id:"bmp-ico-subtitles"},pip:{id:"bmp-ico-pip"},chromecast:{id:"bmp-ico-chromecast"},copy:{id:"bmp-ico-copy"},playNext:{id:"bmp-ico-play-next"},maximize:{id:"bmp-ico-maximize"},minimize:{id:"bmp-ico-minimize"},menu:{id:"bmp-ico-menu"},audio:{id:"bmp-ico-audio"},pause:{id:"bmp-ico-pause"},play:{id:"bmp-ico-play"},replay:{id:"bmp-ico-replay"},quality:{id:"bmp-ico-quality"},share:{id:"bmp-ico-share",type:"css",code:{id:"bmp-ico-code",group:"share"},mail:{id:"bmp-ico-mail",group:"share"},facebook:{id:"bmp-ico-facebook",group:"share"},twitter:{id:"bmp-ico-twitter",group:"share"},linkedin:{id:"bmp-ico-linkedin",group:"share"}},volume:{id:"bmp-ico-volume"},volume1:{id:"bmp-ico-volume-1"},volume2:{id:"bmp-ico-volume-2"},volumeX:{id:"bmp-ico-volume-x"},close:{id:"bmp-ico-close"},left:{id:"bmp-ico-left"},right:{id:"bmp-ico-right"},up:{id:"bmp-ico-up"},down:{id:"bmp-ico-down"},center:{id:"bmp-ico-center"},vr:{id:"bmp-ico-vr"},gyroscope:{id:"bmp-ico-gyroscope"},zoom:{plus:{id:"bmp-ico-zoom-plus"},minus:{id:"bmp-ico-zoom-minus"},reset:{id:"bmp-ico-zoom-reset"}},playbackRate:{id:"bmp-ico-playback-rate"}};}updateTypesState(t,e){this.state.type=t,this.state.share.type=e,this.refreshCallback(this.state);}}Z.__name__="bs.player.plugin.skin.model.icon.IconModel",Z.__super__=V,Object.assign(Z.prototype,{__class__:Z});class J extends V{constructor(t,e,s,i,a){super(t,e,s,i),this.state={count:0,audio:{hasItems:!1,activate:null},casting:null,fullscreen:null,pictureInPicture:null,quality:{hasItems:!1,activate:null,value:null},subtitles:{hasItems:!1,activate:null},vr:null,playbackRate:{hasItems:!1,items:null,activate:null}};let l=this;this.audio=new R(t,e,(function(t,e){l.menuStateChange({audio:t},e);}),(function(t){l.reportError(t);})),this.casting=new W(t,e,(function(t,e){l.menuStateChange({casting:t},e);}),(function(t){l.reportError(t);})),this.fullscreen=new Q(t,e,(function(t,e){l.menuStateChange({fullscreen:t},e);}),(function(t){l.reportError(t);}),a),this.pip=new et(t,e,(function(t,e){l.menuStateChange({pictureInPicture:t},e);}),(function(t){l.reportError(t);})),this.quality=new lt(t,e,(function(t,e){l.menuStateChange({quality:t},e);}),(function(t){l.reportError(t);})),this.subtitles=new pt(t,e,(function(t,e){l.menuStateChange({subtitles:t},e);}),(function(t){l.reportError(t);})),this.vr=new _t(t,e,(function(t,e){l.menuStateChange({vr:t},e);}),(function(t){l.reportError(t);})),this.playbackRate=new st(t,e,(function(t,e){l.menuStateChange({playbackRate:t},e);}),(function(t){l.reportError(t);}));}menuStateChange(t,e){if(null!=t){let e=0,s=o.fields(t);for(;e<s.length;){let i=s[e];++e,this.state[i]=o.field(t,i);}}let s=0;this.state.quality.hasItems&&(s=1),this.state.subtitles.hasItems&&++s,this.state.audio.hasItems&&++s,null!=this.state.casting&&++s,null!=this.state.pictureInPicture&&++s,null!=this.state.fullscreen&&++s,null!=this.state.vr&&++s,this.state.playbackRate.hasItems&&++s,this.state.count=s,this.refreshCallback(this.state);}destroy(){null!=this.audio&&this.audio.destroy(),null!=this.casting&&this.casting.destroy(),null!=this.fullscreen&&this.fullscreen.destroy(),null!=this.pip&&this.pip.destroy(),null!=this.quality&&this.quality.destroy(),null!=this.subtitles&&this.subtitles.destroy(),null!=this.vr&&this.vr.destroy();}}J.__name__="bs.player.plugin.skin.model.menu.MenuModel",J.__super__=V,Object.assign(J.prototype,{__class__:J});class tt extends V{constructor(t,e,s,i){super(t,e,s,i),this.state=null,f.add(t,"showMessage",qt(this,this.onOpenEvent)),f.add(t,"closeMessage",qt(this,this.onCloseEvent)),this.refreshCallback(this.state);}destroy(){super.destroy(),f.remove(this.context,"showMessage",qt(this,this.onOpenEvent)),f.remove(this.context,"closeMessage",qt(this,this.onCloseEvent));}close(){new f("closeMessage").dispatch(this.context);}onOpenEvent(t){if(this.state=null,null!=t&&null!=t.data){if(Object.prototype.hasOwnProperty.call(t.data,"type")&&""!=t.data.type)switch(null==this.state&&(this.state={type:{alert:!1,code:!1,normal:!1,text:"normal"}}),t.data.type){case"alert":this.state.type.alert=!0,this.state.type.text="alert";break;case"code":this.state.type.code=!0,this.state.type.text="code";break;case"normal":this.state.type.normal=!0,this.state.type.text="normal";break;default:this.state.type=null;}null!=this.state.type?(Object.prototype.hasOwnProperty.call(t.data,"title")&&""!=t.data.title&&(this.state.title={html:t.data.title}),Object.prototype.hasOwnProperty.call(t.data,"text")&&""!=t.data.text&&(this.state.content={html:t.data.text}),Object.prototype.hasOwnProperty.call(t.data,"textDetails")&&""!=t.data.textDetails&&(null==this.state.content&&(this.state.content={}),this.state.content.text=t.data.textDetails),Object.prototype.hasOwnProperty.call(t.data,"userSingleActionButtonText")&&""!=t.data.userSingleActionButtonText&&Object.prototype.hasOwnProperty.call(t.data,"onUserSingleAction")&&o.isFunction(t.data.onUserSingleAction)&&(this.state.action={icon:this.state.type.code?"copy":null,text:t.data.userSingleActionButtonText,click:t.data.onUserSingleAction}),Object.prototype.hasOwnProperty.call(t.data,"close")&&0==t.data.close?this.state.close=null:this.state.close={click:qt(this,this.close)},null!=t.data.onAfterShow&&o.isFunction(t.data.onAfterShow)&&(this.onAfterShow=t.data.onAfterShow),null!=t.data.onAfterClose&&o.isFunction(t.data.onAfterClose)&&(this.onAfterClose=t.data.onAfterClose),Object.prototype.hasOwnProperty.call(t.data,"style")&&(this.state.style=o.field(t.data,"style")),this.refreshCallback(this.state,qt(this,this.afterOpenStateRefresh))):this.refreshCallback(this.state);}else this.refreshCallback(this.state);}afterOpenStateRefresh(t){null!=this.onAfterShow&&this.onAfterShow(),this.onAfterShow=null;}onCloseEvent(t){this.state=null,this.refreshCallback(this.state,qt(this,this.afterCloseStateRefresh));}afterCloseStateRefresh(t){null!=this.onAfterClose&&this.onAfterClose(),this.onAfterClose=null;}}tt.__name__="bs.player.plugin.skin.model.message.MessageModel",tt.__super__=V,Object.assign(tt.prototype,{__class__:tt});class et extends V{constructor(t,e,s,i){if(super(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"pictureInPictureButtonVisible"))switch(o.field(e,"pictureInPictureButtonVisible")){case 0:case"false":case!1:e.pictureInPictureEnabled=!1;break;default:e.pictureInPictureEnabled=!0;}let a;if(Object.prototype.hasOwnProperty.call(e,"pictureInPictureEnabled"))switch(o.field(e,"pictureInPictureEnabled")){case 0:case"false":case!1:a=!1;break;default:a=!0;}else a=!0;this.enabled=a,this.state=null,this.enabled&&(p.add(t,"pipAvailable",qt(this,this.onPipAvailable)),p.add(t,"pipEntered",qt(this,this.onPipEntered)),p.add(t,"pipLeaved",qt(this,this.onPipLeaved))),this.refreshCallback(this.state);}destroy(){super.destroy(),this.enabled&&(p.remove(this.context,"pipAvailable",qt(this,this.onPipAvailable)),p.remove(this.context,"pipEntered",qt(this,this.onPipEntered)),p.remove(this.context,"pipLeaved",qt(this,this.onPipLeaved)));}onPipAvailable(t){this.isPipAvailable=null!=t&&1==t.data,0!=this.enabled&&(this.isPipAvailable?this.state={active:!1,click:qt(this,this.dispatchPipToggle)}:this.state=null,this.refreshCallback(this.state));}onPipEntered(t){0!=this.enabled&&(this.state.active=!0,this.refreshCallback(this.state));}onPipLeaved(t){0!=this.enabled&&(this.state.active=!1,this.refreshCallback(this.state));}dispatchPipToggle(t){new p("pipToggle").dispatch(this.context);}}et.__name__="bs.player.plugin.skin.model.pip.PictureInPictureModel",et.__super__=V,Object.assign(et.prototype,{__class__:et});class st extends V{constructor(t,e,s,i){let a;if(super(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"playbackRateEnabled"))switch(o.field(e,"playbackRateEnabled")){case 1:case"true":case!0:a=!0;break;default:a=!1;}else a=!1;this.enabled=a;let l=[.25,.5,.75,1,1.25,1.5,1.75,2],n=Object.prototype.hasOwnProperty.call(e,"playbackRate")?parseFloat(o.field(e,"playbackRate")):null;null==n||isNaN(n)||-1!=l.indexOf(n)||(l=l.concat([n]),l.sort((function(t,e){return t>e?1:-1})));let r=[],h=0;for(;h<l.length;){let t=l[h];++h,r.push({active:1==t,label:1==t?"Normal":""+t,data:""+t});}this.ITEMS=r,this.state={hasItems:!1,items:null,activate:null},this.enabled&&(this.state.hasItems=!0,this.state.items=this.ITEMS,this.state.activate=qt(this,this.activate)),this.enabled&&(y.add(t,"playbackRate",qt(this,this.onPlaybackRate)),y.add(t,"videoCastingStart",qt(this,this.onCastingStart)),y.add(t,"videoCastingEnd",qt(this,this.onCastingEnd))),this.refreshCallback(this.state);}get_activeRate(){if(null!=this.state&&null!=this.state.items){let t=0,e=this.state.items;for(;t<e.length;){let s=e[t];if(++t,s.active)return parseFloat(s.data)}}return 0}destroy(){super.destroy(),this.enabled&&(y.remove(this.context,"playbackRate",qt(this,this.onPlaybackRate)),y.remove(this.context,"videoCastingStart",qt(this,this.onCastingStart)),y.remove(this.context,"videoCastingEnd",qt(this,this.onCastingEnd)));}onPlaybackRate(t){if(0==t.data)return;if(this.get_activeRate()==t.data||null==this.state.items)return;let e=0,s=this.state.items.length;for(;e<s;){let s=e++,i=t.data,a=parseFloat(this.state.items[s].data);this.state.items[s].active=i==a;}this.refreshCallback(this.state);}onCastingStart(t){let e=this.ITEMS,s=[],i=0;for(;i<e.length;){let t=e[i];++i,parseFloat(t.data)>=.5&&s.push(t);}this.state.items=s,this.refreshCallback(this.state);}onCastingEnd(t){this.state.items=this.ITEMS,this.refreshCallback(this.state);}dispatch(t){let e=this.state.items[t];if(null==e)return;let s=parseFloat(this.state.items[this.state.items.length-1].data),i=Math.max(0,Math.min(s,parseFloat(e.data))),a=new p("setVideoPlaybackRate");a.data=i,a.dispatch(this.context);}activate(t){if(!Object.prototype.hasOwnProperty.call(this.state,"items"))return;null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=h.parseInt(zt.__cast(t.target,HTMLElement).getAttribute("data-item-index"));isNaN(e)||(this.dispatch(e),this.refreshCallback(this.state));}}st.__name__="bs.player.plugin.skin.model.playbackRate.PlaybackRateModel",st.__super__=V,Object.assign(st.prototype,{__class__:st});class it extends V{constructor(t,e,s,i){super(t,e,s,i),this.state={hasNext:!1,currentPos:-1,items:null,playItem:null},this.state.playItem=qt(this,this.playItem),m.add(t,"mediaMetadataData",qt(this,this.onMetadataData)),m.add(t,"mediaPlaylistData",qt(this,this.onPlaylistData)),this.refreshCallback(this.state);}destroy(){super.destroy(),m.remove(this.context,"mediaMetadataData",qt(this,this.onMetadataData)),m.remove(this.context,"mediaPlaylistData",qt(this,this.onPlaylistData));}onMetadataData(t){this.state={hasNext:!1,currentPos:-1,items:null,playItem:null},this.state.playItem=qt(this,this.playItem),this.mediaPlaylist=null,this.refreshCallback(this.state);}onPlaylistData(t){if(null==t||null==t.data)return this.state={hasNext:!1,currentPos:-1,items:null,playItem:null},this.state.playItem=qt(this,this.playItem),void(this.mediaPlaylist=null);this.mediaPlaylist=S.clone(t.data);let e=null!=this.mediaPlaylist&&this.mediaPlaylist.hasNext();if(this.state.hasNext=e,this.state.currentPos=null!=this.mediaPlaylist?this.mediaPlaylist.currentPos:0,this.state.items=[],null!=this.mediaPlaylist){let t=0,e=this.mediaPlaylist.items;for(;t<e.length;){let s=e[t];++t;let i={},a=this.cleanupCustomParams(o.field(s,"title"));null!=a&&this.copyParams(i,"title",a);let l=this.cleanupCustomParams(o.field(s,"duration"));null!=l&&this.copyParams(i,"duration",l);let n=this.cleanupCustomParams(o.field(s,"splashImages"));null!=n&&this.copyParams(i,"splashImages",n),this.state.items.push(i);}}this.refreshCallback(this.state);}copyParams(t,e,s){if("duration"==e)t[e]={time:s,text:Tt.formatTime(parseFloat(""+h.string(s)))};else if("splashImages"==e){let e=s;null!=e&&e instanceof Array&&e.length>0&&(t.image=Et.imageToState(e));}else t[e]=s;}cleanupCustomParams(t){if(null==t||"string"==typeof t||"number"==typeof t)return t;if(t instanceof Array){let e=t,s=[],i=0;for(;i<e.length;)s.push(this.cleanupCustomParams(e[i++]));return s}if(o.isObject(t)){let e=o.copy(t);return Object.prototype.hasOwnProperty.call(e,"customParams")&&o.deleteField(e,"customParams"),e}return t}playItem(t){if(null==this.mediaPlaylist)return;let e=this.mediaPlaylist.items[t];this.mediaPlaylist.currentPos=t,it.play(this.context,e,this.mediaPlaylist);}static play(t,e,s){if(null==e)return;let i=new m("mediaMetadataData");i.data=e,i.dispatch(t);let a=new m("mediaPlaylistData");a.data=s,a.dispatch(t);let l=new m("movieData");l.data=e,l.dispatch(t);let n=new m("audioData");null!=e.audioSets?n.data=e.audioSets:n.data=[],n.dispatch(t);let r=new m("subtitleData");null!=e.subtitlesSets?r.data=e.subtitlesSets:r.data=[],r.dispatch(t),new p("skinPlay").dispatch(t);}}it.__name__="bs.player.plugin.skin.model.playlist.PlaylistModel",it.__super__=V,Object.assign(it.prototype,{__class__:it});class at extends U{constructor(t,e,s,i,a,l){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,l);}_hx_constructor(t,e,s,i,a,l){this.popupResizeObserver=null,this.popupRect=null,this.popupElement=null,this.boundsRect=null,this.boundsElement=null,this.handleRect=null,this.handleMoveX=null,this.handleMoveTime=null,this.handleMoveFromTime=null,this.handleElement=null,this.thumbService=null,this.skinRect=null,this.skinElement=null,this.segments=null,this.markers=null,this.thumbnails=null,this.isTrackDown=!1,super._hx_constructor(t,e,s,i),this.skinElement=a,this.skinRect=this.skinElement.getBoundingClientRect(),this.thumbService=l,this.state={time:0,text:Tt.formatTime(0),width:"0",seekable:!0,has:{thumb:!1,segments:!1,segment:!1,markers:!1,marker:!1,texts:!1},popup:{active:!1,time:0,text:Tt.formatTime(0),position:"0",width:"0",bounds:{offset:"0px",ctrl:null},ctrl:null},ctrl:null},this.state.ctrl=qt(this,this.controlHandler),this.state.popup.ctrl=qt(this,this.controlPopup),this.state.popup.bounds.ctrl=qt(this,this.controlPopupBounds),b.add(t,"resize",qt(this,this.onResize)),this.updateState();}destroy(){super.destroy(),b.remove(this.context,"resize",qt(this,this.onResize)),this.unobservePopupElement();}updateState(t){super.updateState(t),this.state.time=this.currentTime,this.state.text=Tt.formatTime(this.state.time);let e=this.state.time/this.duration,s=isNaN(e)||!isFinite(e);this.state.width=s?"0%":Math.max(0,Math.min(100,100*e))+"%",this.state.has.texts=this.state.has.marker||this.state.has.segment,this.refreshSegments(this.state.time),this.refreshCallback(this.state);}onResize(t){if(null!=this.skinElement){let t=null;t=this.skinElement.getBoundingClientRect(),this.skinRect=t;}this.updatePopupSizes();}updateDuration(t){this.duration=Math.max(0,t),this.duration>0&&(this.state.seekable=this.isSeekingPossible());}controlHandler(t){if(null==t)return g.isMobile()?(this.handleElement.removeEventListener("touchstart",qt(this,this.handle),!1),this.handleElement.removeEventListener("touchmove",qt(this,this.handle),!1),this.handleElement.removeEventListener("touchend",qt(this,this.handle),!1)):(this.handleElement.removeEventListener("mousedown",qt(this,this.handle),!1),this.handleElement.removeEventListener("mousemove",qt(this,this.handle),!1),this.handleElement.removeEventListener("mouseup",qt(this,this.handle),!1)),this.handleElement=null,void(this.handleRect=null);this.handleElement=t;let e=null;e=this.handleElement.getBoundingClientRect(),this.handleRect=e,g.isMobile()?(this.handleElement.addEventListener("touchstart",qt(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("touchmove",qt(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("touchend",qt(this,this.handle),yt.get_passiveOptions())):(this.handleElement.addEventListener("mousedown",qt(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("mousemove",qt(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("mouseup",qt(this,this.handle),yt.get_passiveOptions()));}dispatchSeek(t){let e=new p("skinSeek");e.data=t,e.dispatch(this.context);}handle(t){if(!(this.duration<=0))switch(t.type){case"blur":case"mouseleave":case"mouseup":case"touchend":let e=this.skinElement,s=qt(this,this.handle);g.enableHtmlSelection(),window.document.removeEventListener("mouseup",s),window.document.removeEventListener("mousemove",s),window.document.removeEventListener("mouseleave",s),window.document.removeEventListener("blur",s),e.removeEventListener("mouseup",s),e.removeEventListener("mousemove",s),e.removeEventListener("blur",s),g.isMobile()&&(window.document.removeEventListener("touchend",s),e.removeEventListener("touchend",s)),this.state.popup.active=!1;let i=t.target;this.skinElement.contains(i)&&this.isTrackDown?this.handleMoveEnd(t):(this.currentTime=this.handleMoveFromTime,this.updateState()),this.handleMoveFromTime=null,this.isTrackDown=!1;break;case"mousedown":case"touchstart":if(this.isTrackDown)return;let a=this.skinElement,l=qt(this,this.handle);g.disableHtmlSelection(),window.document.addEventListener("mouseup",l,yt.get_passiveOptions()),window.document.addEventListener("mousemove",l,yt.get_passiveOptions()),window.document.addEventListener("mouseleave",l,yt.get_passiveOptions()),window.document.addEventListener("blur",l,yt.get_passiveOptions()),a.addEventListener("mouseup",l,yt.get_passiveOptions()),a.addEventListener("mousemove",l,yt.get_passiveOptions()),a.addEventListener("blur",l,yt.get_passiveOptions()),g.isMobile()&&(window.document.addEventListener("touchend",l,yt.get_passiveOptions()),a.addEventListener("touchend",l,yt.get_passiveOptions())),this.handleMoveFromTime=this.currentTime,this.state.popup.active=!0,this.handleMoving(t),this.isTrackDown=!0;break;case"mousemove":case"touchmove":this.handleMoving(t);break;default:return}}handleMoving(t){if(null==this.duration)return;this.updatePopupSizes();let e=0;t instanceof MouseEvent&&(e=zt.__cast(t,MouseEvent).clientX);let s,i=window;if(Object.prototype.hasOwnProperty.call(i,"TouchEvent")&&t instanceof TouchEvent){let s=t;if(s.touches.length>0){e=s.touches.item(0).clientX;}}if(this.handleMoveX=e,this.handleMoveTime=this.calculateProgressTime(),null!=this.handleMoveTime){if(this.isTrackDown&&(this.currentTime=this.handleMoveTime,this.updateState()),this.updatePopupData(this.handleMoveTime),null==t)s=null;else {let e=t.target;s=null==e?null:e.dataset;}this.searchForMarkerByEvent(s),this.searchForSegmentByEvent(s),this.updateState();}}handleMoveEnd(t){this.isSeekingPossible()&&(this.handleMoveTime<=0||(this.currentTime=this.handleMoveTime,this.dispatchSeek(this.currentTime),this.handleMoveTime=null,this.handleMoveX=null));}onSeekingStart(t){null!=t&&null!=t.data&&t.data.currentTime>=0&&(this.currentTime=t.data.currentTime),this.currentTime>0&&(this.hasPlaybackStarted=!0),this.updateState();}onCurrentTimeChange(t){this.isTrackDown||this.currentTime!=t.data.currentTime&&(this.currentTime=Math.max(0,t.data.currentTime),this.isDvr&&this.onDurationChange(t),this.updateState(!0));}onDurationChange(t){this.duration!=t.data.duration&&(this.duration=t.data.duration,this.updateDuration(this.duration),this.updateSegments(this.duration),this.updateMarkers(this.duration),this.updateState());}onMetadataData(t){super.onMetadataData(t),this.resetThumbs(),this.resetSegments(),this.resetMarkers(),this.updateDuration(this.duration);let e=this.monitor.currentMedia;if(null==e)return void this.updateState();let s=e.progress;if(null==s)return void this.updateState();let i=s.thumbnails;null!=i?this.onThumbsMetadataData(i):this.resetThumbs(),null!=s.segmentsUrl?this.reqSegmentsVtt(s.segmentsUrl):null!=s.segments?"string"==typeof s.segments?this.reqSegmentsVtt(s.segments):this.parseSegmentsObject(s.segments):this.resetSegments(),null!=s.markersUrl?this.reqMarkersVtt(s.markersUrl):null!=s.markers?"string"==typeof s.markers?this.reqMarkersVtt(s.markers):this.parseMarkersObject(s.markers):this.resetMarkers(),this.updateState();}resetThumbs(){o.deleteField(this.state,"thumb"),this.state.has.thumb=!1,this.thumbnails=null,null!=this.thumbService&&this.thumbService.reset();}onThumbsMetadataData(t){let e=t.url;if(null==e)return void console.error("Cannot load external file. "+e);if(e.lastIndexOf("vtt")<0)return void console.error("Not .vtt file format. "+e+".");let s=e;if(null==t.imageBaseUrl){let t=e.split("/");t.pop(),s=t.join("/");}let i=new c(e);i.onError=qt(this,this.reportError);let a=this;i.onData=function(t){a.parseThumbs(s,t);},i.request();}parseThumbs(t,e){null!=t&&null!=e&&(this.thumbnails=new D(t).parse(e));}searchForThumbByTime(t){if(null!=this.thumbnails){let e=null,s=this.thumbnails.entries,i=0;for(;i<s.length;){let a=s[i];if(++i,t>=a.showTime&&t<=a.hideTime){e={url:a.source.url,x:a.source.x,y:a.source.y,w:a.source.w,h:a.source.h,style:{backgroundImage:"url("+a.source.url+")",backgroundPosition:"-"+a.source.x+"px -"+a.source.y+"px",width:a.source.w+"px",height:a.source.h+"px"}};break}}this.updateStateThumb(e);}else null!=this.thumbService?this.thumbService.searchForThumbByTime(t,qt(this,this.thumbServiceResolve)):this.updateStateThumb(null);}thumbServiceResolve(t){null!=t?(this.updateStateThumb({url:t.url,x:0,y:0,w:t.width,h:t.height,style:{backgroundImage:"url("+t.url+")",backgroundPosition:"0 0",width:t.width+"px",height:t.height+"px"}}),this.updateState(),this.updatePopupSizes(),this.correctPopupPosition()):this.updateStateThumb(null),this.updateState();}updateStateThumb(t){this.state.thumb=t,this.state.has.thumb=null!=this.state.thumb,null==this.state.thumb&&o.deleteField(this.state,"thumb"),this.state.has.thumb?this.state.popup.width=this.state.thumb.w+"px":this.state.popup.width=null;}resetSegments(){o.deleteField(this.state,"segment"),this.state.has.segment=!1,o.deleteField(this.state,"segments"),this.state.has.segments=!1,this.segments=null;}reqSegmentsVtt(t){let e=new c(t);e.onError=qt(this,this.reportError),e.onData=qt(this,this.parseSegmentsVtt),e.request();}parseSegmentsVtt(t){"string"==typeof t?(this.segments=(new A).parse(t),this.updateSegments(this.duration)):console.error("progress.segmentsUrl must be string");}parseSegmentsObject(t){if(!(t instanceof Array))return void console.error("progress.segments must be array");this.segments=[];let e,s=0,i=0,a=0,l=t,n=0;for(;n<l.length;){let t=l[n];++n,Object.prototype.hasOwnProperty.call(t,"duration")&&null!=t.duration&&(s=parseFloat(t.duration),null==s||s<=0||(e=new L,a=i+s,e.showTime=i,e.hideTime=a,e.duration=s,e.text=t.label,this.segments.push(e),i=e.hideTime));}this.updateSegments(this.duration),this.updateState();}searchForSegmentByTime(t){let e=null;if(null!=this.state.segments){let s=this.state.segments,i=0;for(;i<s.length;){let a=s[i];if(++i,t>a.time.show&&t<a.time.hide){e=a;break}}}this.state.segment=e,this.state.has.segment=null!=this.state.segment,null==this.state.segment&&o.deleteField(this.state,"segment");}searchForSegmentByEvent(t){return null!=t&&Object.prototype.hasOwnProperty.call(t,"segmentIndex")&&(this.state.segment=this.state.segments[o.field(t,"segmentIndex")],this.state.has.segment=null!=this.state.segment),this.state.has.segment}updateSegments(t){if(null!=this.segments&&isFinite(t)&&t>0){let e,s,i,a,l,n,r=[],o=this.segments,h=0;for(;h<o.length;){let u=o[h],c=h++;a=u.showTime,l=u.duration,n=u.hideTime,i=0==c?0:this.segments[c-1].hideTime;let d=(a-i)/t;e={type:"space",time:{show:i,duration:a-i,hide:a},width:isNaN(d)||!isFinite(d)?"0%":Math.max(0,Math.min(100,100*d))+"%",progressWidth:isNaN(0)||!isFinite(0)?"0%":Math.max(0,Math.min(100,0))+"%"},e.time.duration>0&&r.push(e);let p=l/t;if(s={type:"item",time:{show:a,duration:l,hide:n},text:u.text,width:isNaN(p)||!isFinite(p)?"0%":Math.max(0,Math.min(100,100*p))+"%",progressWidth:isNaN(0)||!isFinite(0)?"0%":Math.max(0,Math.min(100,0))+"%"},t>0&&n>t){s.time.duration=t-a,s.time.hide=t;let e=(t-a)/t;s.width=isNaN(e)||!isFinite(e)?"0%":Math.max(0,Math.min(100,100*e))+"%";}if(s.time.duration>0&&r.push(s),c==this.segments.length-1){let i=(t-s.time.hide)/t;e={type:"space",time:{show:s.time.hide,duration:t-s.time.hide,hide:t},width:isNaN(i)||!isFinite(i)?"0%":Math.max(0,Math.min(100,100*i))+"%",progressWidth:isNaN(0)||!isFinite(0)?"0%":Math.max(0,Math.min(100,0))+"%"},e.time.duration>0&&r.push(e);}}this.state.segments=r,this.state.has.segments=this.state.segments.length>0;}else this.resetSegments();}hasSegments(){return !(!Object.prototype.hasOwnProperty.call(this.state,"segments")||null==this.state.segments)&&this.state.segments instanceof Array}refreshSegments(t){if(!this.hasSegments())return;let e=0,s=this.state.segments;for(;e<s.length;){let i=s[e];++e;let a="0%";if(i.time.show<=t&&i.time.hide>=t){let e=(t-i.time.show)/i.time.duration;a=isNaN(e)||!isFinite(e)?"0%":Math.max(0,Math.min(100,100*e))+"%";}else i.time.hide<=t&&(a="100%");i.progressWidth!=a&&(i.progressWidth=a);}}resetMarkers(){this.state.has.marker=!1,o.deleteField(this.state,"marker"),this.state.has.markers=!1,o.deleteField(this.state,"markers"),this.markers=null;}reqMarkersVtt(t){let e=new c(t);e.onError=qt(this,this.reportError),e.onData=qt(this,this.parseMarkersVtt),e.request();}parseMarkersVtt(t){null!=t&&(this.markers=(new I).parse(t),this.updateMarkers(this.duration));}parseMarkersObject(t){if(!(t instanceof Array))return void console.error("progress.segments must be array");this.markers=[];let e,s=0,i=t,a=0;for(;a<i.length;){let t=i[a];++a,Object.prototype.hasOwnProperty.call(t,"time")&&null!=t.time&&(s=parseFloat(t.time),null==s||s<=0||(e=new M,e.showTime=s,e.text=Object.prototype.hasOwnProperty.call(t,"label")?o.field(t,"label"):null,this.markers.push(e)));}this.updateMarkers(this.duration),this.updateState();}searchForMarkerByTime(t){let e=null;if(null!=this.state.markers){let s=this.state.markers,i=0;for(;i<s.length;){let a=s[i];if(++i,a.time==t){e=a;break}}}this.state.marker=e,this.state.has.marker=null!=this.state.marker,null==this.state.marker&&o.deleteField(this.state,"marker");}searchForMarkerByEvent(t){return null!=t&&Object.prototype.hasOwnProperty.call(t,"markerIndex")&&(this.state.marker=this.state.markers[o.field(t,"markerIndex")],this.state.has.marker=null!=this.state.marker),this.state.has.marker}updateMarkers(t){let e;if(null!=this.markers&&isFinite(t)&&t>0){let s=[],i=0,a=this.markers;for(;i<a.length;){let l=a[i];++i;let n=l.showTime/t;e=isNaN(n)||!isFinite(n)?"0%":Math.max(0,Math.min(100,100*n))+"%",s.push({time:l.showTime,text:l.text,left:e});}this.state.markers=s,this.state.has.markers=this.state.markers.length>0;}else this.resetMarkers();}controlPopup(t){if(null==t)return this.unobservePopupElement(),this.popupElement=null,void(this.popupRect=null);this.popupElement=t;let e=null;e=this.popupElement.getBoundingClientRect(),this.popupRect=e,this.observePopupElement();}controlPopupBounds(t){if(null==t)return this.boundsElement=null,void(this.boundsRect=null);if(this.boundsElement=t,null!=this.boundsElement){let t=null;t=this.boundsElement.getBoundingClientRect(),this.boundsRect=t;}}observePopupElement(){let t=this,e=window;Object.prototype.hasOwnProperty.call(e,"ResizeObserver")&&(this.popupResizeObserver=new ResizeObserver((function(){let e=null;e=t.popupElement.getBoundingClientRect(),t.popupRect=e,t.correctPopupPosition();})),this.popupResizeObserver.observe(this.popupElement));}unobservePopupElement(){null!=this.popupResizeObserver&&this.popupResizeObserver.disconnect();}updatePopupData(t){if(null==t)return;let e=t/this.duration,s=isNaN(e)||!isFinite(e);if(this.state.popup.position=s?"0%":Math.max(0,Math.min(100,100*e))+"%",this.state.popup.bounds.offset="0px",this.isDvr){let e=this.duration-t,s={time:-e,text:"-"+Tt.formatTime(e)};if(this.isDvrWallTimeMode&&this.monitor.currentMedia instanceof w&&this.duration>0){let e=this.monitor.currentMedia;if(e.dvrWindowLength>0&&e.dvrWindowLiveEdge>0){let i={time:0,text:Tt.formatDateTime(new Date(1e3*(e.dvrWindowLiveEdge-e.dvrWindowLength*(1-t/this.duration))),0)};null!=i&&(s=i);}}this.state.popup.time=s.time,this.state.popup.text=s.text;}else this.state.popup.time=t,this.state.popup.text=Tt.formatTime(t),this.searchForThumbByTime(t),this.searchForMarkerByTime(t),this.searchForSegmentByTime(t);this.correctPopupPosition();}correctPopupPosition(){if(null==this.popupRect)return;let t=this.popupRect.width/2,e=this.handleMoveX-this.boundsRect.left,s=this.handleMoveX-this.handleRect.left;if(e<t){let e=null!=this.boundsRect?this.handleRect.left-this.boundsRect.left:0,i=Math.abs(t-e);this.state.popup.position=i+"px",this.state.popup.bounds.offset=s-i+"px";}else if(null!=this.boundsRect&&e+t>this.boundsRect.width){let e=this.boundsRect.left-this.handleRect.left,i=this.boundsRect.width-this.handleRect.width,a=this.boundsRect.width-(e+i)-t;this.state.popup.position=a+"px",this.state.popup.bounds.offset=s-a+"px";}else this.state.popup.bounds.offset="0px";}updatePopupSizes(){if(null!=this.handleElement){let t=null;t=this.handleElement.getBoundingClientRect(),this.handleRect=t;}if(null!=this.boundsElement){let t=null;t=this.boundsElement.getBoundingClientRect(),this.boundsRect=t;}if(null!=this.popupElement){let t=null;t=this.popupElement.getBoundingClientRect(),this.popupRect=t;}}calculateProgressTime(){if(null==this.handleMoveX||null==this.handleRect)return 0;let t=0|this.handleRect.left,e=0|this.handleRect.width,s=(this.handleMoveX-t)/e*this.duration;return s>this.duration&&(s=0|this.duration),s<0&&(s=0),s}}at.__name__="bs.player.plugin.skin.model.progress.ProgressModel",at.__super__=U,Object.assign(at.prototype,{__class__:at});class lt extends V{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){let a;if(this.activeQualityData="-1",super._hx_constructor(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"qualitySelectionEnabled"))switch(o.field(e,"qualitySelectionEnabled")){case 0:case"false":case!1:a=!1;break;default:a=!0;}else a=!0;this.enabled=a,this.state={hasItems:!1,activate:null,value:null},this.enabled&&(this.state.activate=qt(this,this.activate)),this.enabled&&(m.add(t,"videoQualityData",qt(this,this.onQualityData)),m.add(t,"videoQualityPlaybackLevelChange",qt(this,this.onQualityPlaybackLevelChange)),p.add(t,"videoQualityHasChanged",qt(this,this.onQualityChange))),this.refreshCallback(this.state);}destroy(){super.destroy(),this.enabled&&(m.remove(this.context,"videoQualityData",qt(this,this.onQualityData)),m.remove(this.context,"videoQualityPlaybackLevelChange",qt(this,this.onQualityPlaybackLevelChange)),p.remove(this.context,"videoQualityHasChanged",qt(this,this.onQualityChange)));}dispatch(t){let e=new p("requestVideoQualityChange");e.data=t.data,e.dispatch(this.context);}activate(t){if(0==this.enabled)return;null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=h.parseInt(zt.__cast(t.target,HTMLElement).getAttribute("data-item-index"));isNaN(e)||this.dispatch(this.state.items[e]);}onQualityPlaybackLevelChange(t){let e=""+t.data;if(!this.state.hasItems)return;let s=this.findItemByData(e);this.activeQualityData==e?this.setAutoSubLabel(null):this.setAutoSubLabel("("+s.label+")"),this.state.value=s.label,this.refreshCallback(this.state);}setAutoSubLabel(t){let e=0,s=this.state.items;for(;e<s.length;){let i=s[e];if(++e,"-1"==i.data){i.sublabel=t;break}}}findItemByData(t){let e=0,s=this.state.items;for(;e<s.length;){let i=s[e];if(++e,i.data==t)return i}return null}onQualityData(t){let e=t.data;this.items=[];let s=0;for(;s<e.length;){let t=e[s];++s,t.label=Tt.capilizeFirstLetter(t.label),this.items.push(t);}0!=this.enabled&&(this.updateStateItems(),this.refreshCallback(this.state));}updateStateItems(){this.state.hasItems=null!=this.items&&this.items.length>0,this.state.hasItems&&(this.state.items=this.items);}updateActiveQuality(){if(!this.state.hasItems||null==this.activeQualityData)return;let t=0,e=this.state.items;for(;t<e.length;){let s=e[t];++t,s.active=o.field(s,"data")==this.activeQualityData;}}onQualityChange(t){this.activeQualityData=t.data,0!=this.enabled&&(this.updateActiveQuality(),this.refreshCallback(this.state));}}lt.__name__="bs.player.plugin.skin.model.quality.QualityModel",lt.__super__=V,Object.assign(lt.prototype,{__class__:lt});class nt extends V{constructor(t,e,s,i){super(t,e,s,i);let a,l=this;if(this.openEmbedCodeWindow=function(s){null!=s&&(s.stopImmediatePropagation(),s.stopPropagation(),s.preventDefault()),l.beforeEmbedWindowOpen(),vt.showWindow(t,e,qt(l,l.afterEmbedWindowClose));},Object.prototype.hasOwnProperty.call(e,"shareButtons")){let t=o.field(e,"shareButtons");a=null!=t&&"string"==typeof t&&""!=u.trim(t)?t.toLowerCase():null;}else a=null;this.shareButtons=a,this.parse();}openEmbedCodeWindow(t){}destroy(){super.destroy();}parse(){this.state=null,this.containButton("embed")&&(null==this.state&&(this.state={}),this.state.embed={click:qt(this,this.openEmbedCodeWindow)}),this.containButton("mail")&&(null==this.state&&(this.state={}),this.state.email={click:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),wt.shareViaMail(t);}}),this.containButton("facebook")&&(null==this.state&&(this.state={}),this.state.facebook={click:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),wt.shareOnFacebook(t);}}),this.containButton("twitter")&&(null==this.state&&(this.state={}),this.state.twitter={click:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),wt.shareOnTwitter(t);}}),this.containButton("linkedin")&&(null==this.state&&(this.state={}),this.state.linkedin={click:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),wt.shareOnLinkedIn(t);}}),this.refreshCallback(this.state);}beforeEmbedWindowOpen(){}afterEmbedWindowClose(){}containButton(t){let e=!1;return null!=this.shareButtons&&"string"==typeof this.shareButtons&&(e=this.shareButtons.indexOf(rt.toString(t))>-1),e}}nt.__name__="bs.player.plugin.skin.model.share.ShareModel",nt.__super__=V,Object.assign(nt.prototype,{__class__:nt});class rt{static toString(t){switch(t){case"embed":return "embed";case"facebook":return "facebook";case"linkedin":return "linkedin";case"mail":return "mail";case"twitter":return "twitter";default:return null}}}class ot extends V{constructor(t,e,s,i,a,l){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,l);}_hx_constructor(t,e,s,i,a,l){this.resizeObserver=null,this.BREAKPOINT_PX=[0,320,576,768,992,1200,1400],this.BREAKPOINT_KEYS=["xxs","xs","sm","md","lg","xl","xxl"],this.BREAKPOINT_LENGTH=7,super._hx_constructor(t,e,s,i),this.observeElement=l,this.cssPrefix=a,this.state={width:NaN,height:NaN,css:"",is:{xxs:!0,xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1},not:{xxs:!1,xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}};let n=this.observeElement.ownerDocument;"complete"==n.readyState?this.onReady():n.addEventListener("readystatechange",qt(this,this.onReady));}set_prefix(t){return this.cssPrefix=t,this.state.css=this.formatSizeCss(),this.updateElementSizeCss(),this.refreshCallback(this.state),this.cssPrefix}destroy(){super.destroy(),this.observeElement.ownerDocument.removeEventListener("readystatechange",qt(this,this.onReady)),null!=this.resizeObserver&&this.resizeObserver.disconnect(),null!=this.timer&&this.timer.stop();}onReady(t){this.observeElement.ownerDocument.removeEventListener("readystatechange",qt(this,this.onReady)),this.observe();}observe(){let t=window;if(Object.prototype.hasOwnProperty.call(t,"ResizeObserver"))return this.resizeObserver=new ResizeObserver(qt(this,this.onResizeObserver)),void this.resizeObserver.observe(this.observeElement);let e=this,s=function(){let t=null;t=e.observeElement.getBoundingClientRect();let s=t;e.updateSize(s.width,s.height);};s(),this.timer=new At(500),this.timer.run=s;}onResizeObserver(t){let e=NaN,s=NaN,i=0;for(;i<t.length;){let a=t[i];if(++i,a.contentRect)e=a.contentRect.width,s=a.contentRect.height;else if(a.contentBoxSize){let t=a.contentBoxSize instanceof Array?a.contentBoxSize[0]:a.contentBoxSize;e=t.inlineSize,s=t.blockSize;}}let a=e,l=s;a<1||l<1||this.updateSize(a,l);}updateSize(t,e){let s=!1;if(this.state.width!=t&&(this.state.width=t,s=!0),this.state.height!=e&&(this.state.height=e,s=!0),s){this.state.css=this.formatSizeCss(),this.updateElementSizeCss(),this.refreshCallback(this.state);let t=new b("resize");t.data=this.state,t.dispatch(this.context);}}formatSizeCss(){let t="",e="",s=NaN,i=0,a=this.BREAKPOINT_LENGTH;for(;i<a;){let a=i++;t=this.BREAKPOINT_KEYS[a],s=this.BREAKPOINT_PX[a],s<this.state.width?(this.state.is[t]=!0,this.state.not[t]=!1,e+=" "+this.cssPrefix+"-"+t):(this.state.is[t]=!1,this.state.not[t]=!0,e+=" "+this.cssPrefix+"-not-"+t);}return e}updateElementSizeCss(){let t=0,e=this.BREAKPOINT_LENGTH;for(;t<e;){let e=t++;this.updateElementCss(this.cssPrefix+"-"+this.BREAKPOINT_KEYS[e]),this.updateElementCss(this.cssPrefix+"-not-"+this.BREAKPOINT_KEYS[e]);}}updateElementCss(t){let e=this.observeElement.classList.contains(t);this.state.css.indexOf(t)>-1?e||this.observeElement.classList.add(t):e&&this.observeElement.classList.remove(t);}}ot.__name__="bs.player.plugin.skin.model.size.SizeModel",ot.__super__=V,Object.assign(ot.prototype,{__class__:ot});class ht extends V{constructor(t,e,s,i){super(t,e,s,i),this.state={ctrl:qt(this,this.ctrl)},this.refreshCallback(this.state);}renderHtml(t){}ctrl(t){null!=t&&this.renderHtml(t);}}ht.__name__="bs.player.plugin.skin.model.spinner.SpinnerModel",ht.__super__=V,Object.assign(ht.prototype,{__class__:ht});class ut extends U{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){let a;if(this.hasShareButtons=!1,super._hx_constructor(t,e,s,i),this.state={show:{start:!1,state:!1,end:!1},start:{type:"image"},state:{type:"standard"},end:{type:"standard",playNext:null}},this.state.end.playNext=qt(this,this.playNext),Object.prototype.hasOwnProperty.call(e,"shareButtons")){let t=o.field(e,"shareButtons");a=null!=t&&"string"==typeof t&&""!=u.trim(t)?t.toLowerCase():null;}else a=null;this.hasShareButtons=null!=a,this.parseVars(e),m.add(t,"mediaPlaylistData",qt(this,this.onPlaylistData)),this.updateState();}destroy(){super.destroy(),m.remove(this.context,"mediaPlaylistData",qt(this,this.onPlaylistData)),this.cleanEndState();}parseVars(t){let e=null;Object.prototype.hasOwnProperty.call(t,"startSplash")&&(e=o.field(t,"startSplash")),null!=e&&(this.state.start.type="image");let s=null;Object.prototype.hasOwnProperty.call(t,"endSplash")&&(s=o.field(t,"endSplash"));let i=s;if(null!=i)if(null==i)this.state.end.type="standard";else switch(i){case"countdown":this.state.end.type="countdown";break;case"share":case"social":this.state.end.type=this.hasShareButtons?"share":"standard";break;case"tiles":this.state.end.type="tiles";break;default:this.state.end.type="standard";}}updateState(t){super.updateState(t);let e=!(this.isComplete||this.isSeeking||this.isBuffering||this.duration>1&&!(this.currentTime<this.duration));this.state.show.start=e&&!this.isPlaying&&!this.hasPlaybackStarted&&null!=this.state.start.image&&null!=this.state.start.image.url,this.state.show.state=this.isInited&&e,this.state.show.end=this.currentTime>0&&this.duration>0&&this.currentTime>=this.duration-1&&!this.isPlaying&&this.isComplete&&!this.isSeeking&&!this.isBuffering,this.refreshCallback(this.state);}onMetadataData(t){this.hasPlaybackStarted=!1,this.cleanEndState();let e=this.monitor.currentMedia;null!=e&&null!=e.splashImages&&e.splashImages.length>0?this.state.start.image=Et.imageToState(e.splashImages):o.deleteField(this.state,"image"),super.onMetadataData(t),this.checkEndStateThankYouImage();}cleanEndState(){null!=this.tiles&&this.tiles.destroy(),this.tiles=null,null!=this.countdown&&this.countdown.destroy(),this.countdown=null,o.deleteField(this.state.end,"nextMedia"),o.deleteField(this.state.end,"standard"),o.deleteField(this.state.end,"countdown"),o.deleteField(this.state.end,"tiles"),o.deleteField(this.state.end,"share"),o.deleteField(this.state.end,"image");}refreshEndState(){let t=null!=this.mediaPlaylist&&this.mediaPlaylist.hasNext();this.cleanEndState();let e=this;switch(this.state.end.type){case"countdown":t?(this.updateNextMediaState(),this.countdown=new ct(this.context,null,(function(t,s){e.state.end.countdown=t,e.updateState();}),qt(this,this.reportError),qt(this,this.playNext))):(this.updateNextMediaState(),this.initStandardEndsplash());break;case"image":this.updateNextMediaState(),this.checkEndStateThankYouImage();break;case"reload":case"standard":default:this.updateNextMediaState(),this.initStandardEndsplash();break;case"share":case"social":this.initShareEndsplash();break;case"tiles":t?this.tiles=new dt(this.context,null,(function(t,s){e.state.end.tiles=t,e.updateState();}),qt(this,this.reportError),this.mediaPlaylist.items.length):(this.updateNextMediaState(),this.initStandardEndsplash());}}updateNextMediaState(){if(this.mediaPlaylist.hasNext()){let t=this.mediaPlaylist.items[this.mediaPlaylist.currentPos+1],e={};null!=t.title&&(e.title=t.title),null!=t.splashImages&&t.splashImages.length>0&&(e.image=Et.imageToState(t.splashImages)),null!=t.duration&&(e.duration={time:t.duration,text:Tt.formatTime(t.duration)}),o.fields(e).length>0?this.state.end.nextMedia=e:o.deleteField(this.state.end,"nextMedia");}else o.deleteField(this.state.end,"nextMedia");}onPlaying(t){if(this.isLiveStream){let t=this.monitor.currentMedia.streamWaitingForTransmissionImageUrl;if(null!=t&&""!=t){let e=new P;e.url=t,this.state.state.image=Et.imageToState([e]),this.state.state.type="image";}}super.onPlaying(t);}onCurrentTimeChange(t){"standard"!=this.state.state.type&&(o.deleteField(this.state.state,"image"),this.state.state.type="standard"),super.onCurrentTimeChange(t);}onComplete(t){this.refreshEndState(),super.onComplete(t);}onPlaylistData(t){this.mediaPlaylist=S.clone(t.data);}playNext(t){let e=null!=this.mediaPlaylist&&this.mediaPlaylist.hasNext()?this.mediaPlaylist.next():null;null==e||null==e.mediaLandingPage||""==e.mediaLandingPage?it.play(this.context,e,this.mediaPlaylist):window.open(e.mediaLandingPage,"_self");}initStandardEndsplash(){this.state.end.standard={replay:!0};}initShareEndsplash(){this.state.end.share={show:!0};}checkEndStateThankYouImage(){if(this.isLiveStream){let t=this.monitor.currentMedia.streamEndThankYouImageUrl;if(null!=t&&""!=t){let e=new P;e.url=t,this.state.end.image=Et.imageToState([e]),this.state.end.type="image",this.updateState();}}}}ut.__name__="bs.player.plugin.skin.model.splash.SplashModel",ut.__super__=U,Object.assign(ut.prototype,{__class__:ut});class ct extends V{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){this.counter=10,super._hx_constructor(t,e,s,i),this.onComplete=a,this.state={timer:10},this.refreshCallback(this.state),this.stopCountdown(),this.timer=new At(1e3),this.timer.run=qt(this,this.onCountdown);}destroy(){super.destroy(),null!=this.timer&&this.timer.stop();}onCountdown(){this.counter--,this.state.timer=this.counter,this.refreshCallback(this.state),this.counter>0||this.handleCoundown();}stopCountdown(){this.counter=10,null!=this.timer&&this.timer.stop(),this.timer=null;}handleCoundown(t){this.stopCountdown(),this.onComplete(t);}}ct.__name__="bs.player.plugin.skin.model.splash.end.SplashEndCountdownModel",ct.__super__=V,Object.assign(ct.prototype,{__class__:ct});class dt extends V{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){this.tileHeight=0,this.tileWidth=0,this.gridHeight=0,this.gridWidth=0,this.maxTilesCount=0,this.rafId=0,super._hx_constructor(t,e,s,i),this.mediaPlaylistCount=a,this.maxTilesCount=0|Math.max(1,Math.min(12,a)),this.state={count:1,grid:{columns:1,rows:1,ctrl:null},playlist:{from:0,to:1},page:{current:1,total:1,next:null,prev:null}},this.state.count=a,this.state.grid.ctrl=qt(this,this.gridCtrl),this.state.page.next=qt(this,this.nextPage),this.state.page.prev=qt(this,this.prevPage),b.add(t,"resize",qt(this,this.onResize)),this.refreshCallback(this.state);}destroy(){super.destroy(),b.remove(this.context,"resize",qt(this,this.onResize)),this.cleanupTilesGrid();}onResize(t){this.setupTilesGrid();}nextPage(t){this.state.page.current!=this.state.page.total&&(this.state.page.current++,this.updateEndTilesGridPlaylist(),this.refreshCallback(this.state));}prevPage(t){1!=this.state.page.current&&(this.state.page.current--,this.updateEndTilesGridPlaylist(),this.refreshCallback(this.state));}gridCtrl(t){this.gridElement=t,this.tileElement=null!=this.gridElement&&null!=this.gridElement.firstElementChild?this.gridElement.firstElementChild:null,this.cleanupTilesGrid();let e=qt(this,this.setupTilesGrid),s=-1;s=window.requestAnimationFrame((function(t){e();})),this.rafId=s,this.timer=new At(250),this.timer.run=qt(this,this.setupTilesGrid);}updateEndTilesGridPlaylist(){let t=this.state.grid.columns*this.state.grid.rows,e=this.state.page.current;this.state.playlist.from=t*(e-1),this.state.playlist.to=t*e-1;}cleanupTilesGrid(){if(null!=this.rafId){let t=this.rafId;null==t||isNaN(t)||window.cancelAnimationFrame(t);}this.rafId=null,null!=this.timer&&this.timer.stop(),this.timer=null;}setupTilesGrid(){if(this.cleanupTilesGrid(),null==this.gridElement||null==this.gridElement.firstElementChild)return;let t=this.gridElement.style.maxWidth;this.gridElement.style.maxWidth="unset";let e=null;e=this.gridElement.getBoundingClientRect();let s=e,i=null;i=this.gridElement.firstElementChild.getBoundingClientRect();let a=i;if(this.gridElement.style.maxWidth=t,this.gridWidth==s.width&&this.gridHeight==s.height&&this.tileWidth==a.width&&this.tileHeight==a.height)return;this.gridWidth=s.width,this.gridHeight=s.height,this.tileWidth=a.width,this.tileHeight=a.height;let l=Math.floor(Math.max(1,Math.min(Math.min(4,this.maxTilesCount),this.gridWidth/(this.tileWidth+2)))),n=Math.floor(Math.max(1,Math.min(3,this.gridHeight/this.tileHeight)));this.state.page.current=1,this.state.page.total=Math.ceil(this.mediaPlaylistCount/(l*n)),this.state.grid.columns=l,this.state.grid.rows=n,this.updateEndTilesGridPlaylist(),this.gridElement.style.maxWidth=Math.ceil((this.tileWidth+2)*l)+"px",this.refreshCallback(this.state);}}dt.__name__="bs.player.plugin.skin.model.splash.end.SplashEndTilesModel",dt.__super__=V,Object.assign(dt.prototype,{__class__:dt});class pt extends V{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.subtitlesSets=[],super._hx_constructor(t,e,s,i);let a=null;Object.prototype.hasOwnProperty.call(e,"subtitles")&&(a=o.field(e,"subtitles"));let l=!1,n=null;if(n=Ut.getSessionStorage(),l=null!=n,l){let t,e=null,s=!1,i=null;if(i=Ut.getSessionStorage(),s=null!=i,s){try{let t,s=null,i=!1,a=null;if(a=Ut.getSessionStorage(),i=null!=a,i){let e=null;e=Ut.getSessionStorage(),s=e.getItem("_brplayer_sub_lang"),null==s||(s=u.trim(s)),t=s;}else t=s;null!=t&&""!=t&&(e=t);}catch(t){}t=e;}else t=e;null!=t&&(a=t);}this.languageCode=a,this.state={hasItems:!1,activate:null},this.state.activate=qt(this,this.activate),m.add(t,"subtitleData",qt(this,this.onSubtitleData)),m.add(t,"mediaMetadataData",qt(this,this.cleanupState)),this.refreshCallback(this.state);}destroy(){super.destroy(),m.remove(this.context,"subtitleData",qt(this,this.onSubtitleData)),m.remove(this.context,"mediaMetadataData",qt(this,this.cleanupState));}onSubtitleData(t){if(this.subtitlesSets=t.data,null!=this.subtitlesSets){this.state.items=[];let t=null,e=!1,s=0,i=this.subtitlesSets.length;for(;s<i;){let i=s++;t=this.subtitlesSets[i],e=0==e&&this.languageCode==t.languageCode,this.state.items.push({active:e,label:Tt.capilizeFirstLetter(null==t.name?t.languageCode:t.name),data:t.languageCode}),1==e&&this.dispatch(i);}}else this.state.items=null;this.state.hasItems=null!=this.state.items&&this.state.items.length>0,this.refreshCallback(this.state);}cleanupState(t){this.subtitlesSets=[],o.deleteField(this.state,"items"),this.refreshCallback(this.state);}dispatch(t){let e=this.subtitlesSets[t],s=new p("selectSubtitles");s.data=e,s.dispatch(this.context);let i=s.data.languageCode,a=!1,l=null;if(l=Ut.getSessionStorage(),a=null!=l,a)try{if(null==i){let t=null;t=Ut.getSessionStorage(),t.removeItem("_brplayer_sub_lang");}else {let t=null;t=Ut.getSessionStorage(),t.setItem("_brplayer_sub_lang",h.string(i));}}catch(t){}}activate(t){if(!Object.prototype.hasOwnProperty.call(this.state,"items"))return;null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=h.parseInt(zt.__cast(t.target,HTMLElement).getAttribute("data-item-index"));if(isNaN(e))return;let s=0,i=this.state.items.length;for(;s<i;){let t=s++;this.state.items[t].active=t==e;}this.dispatch(e),this.refreshCallback(this.state);}}pt.__name__="bs.player.plugin.skin.model.subtitles.SubtitlesModel",pt.__super__=V,Object.assign(pt.prototype,{__class__:pt});class mt extends V{constructor(t,e,s,i){super(t,e,s,i),m.add(t,"mediaMetadataData",qt(this,this.onMetadataData));}destroy(){super.destroy(),m.remove(this.context,"mediaMetadataData",qt(this,this.onMetadataData));}onMetadataData(t){if(null==t||null==t.data)return this.state=null,void this.refreshCallback(this.state);let e=t.data;e.title!=this.state&&(this.state=e.title,this.refreshCallback(this.state));}}mt.__name__="bs.player.plugin.skin.model.title.TitleModel",mt.__super__=V,Object.assign(mt.prototype,{__class__:mt});class ft extends U{constructor(t,e,s,i){super(t,e,s,i),this.resetState(),this.refreshCallback(this.state);}resetState(){this.state={current:{time:0,text:Tt.formatTime(0)},duration:{time:0,text:Tt.formatTime(0)},status:{inited:!1,playing:!1,paused:!1,buffering:!1,seeking:!1,complete:!1,live:!1,dvr:!1},playPause:null,seekEnd:null};let t=this;this.state.playPause=function(e){new p("skinPlayPause").dispatch(t.context);},this.state.seekEnd=function(e){let s=new p("skinSeek");s.data=t.duration,s.dispatch(t.context);};}updateState(t){if(super.updateState(t),this.isDvr){let t=this.duration-this.currentTime;if(this.isDvrWallTimeMode&&null!=this.monitor.currentMedia.mediaPlaybackInfo&&this.monitor.currentMedia.mediaPlaybackInfo.currentTime>0){let t={time:0,text:Tt.formatDateTime(new Date(1e3*this.monitor.currentMedia.mediaPlaybackInfo.currentTime),0)};null!=t&&(this.state.dvrTime=t);}else this.state.current={time:-t,text:"-"+Tt.formatTime(t)};}else {let t=this.currentTime;this.state.current={time:t,text:Tt.formatTime(t)};let e=this.duration;this.state.duration={time:e,text:Tt.formatTime(e)};}this.state.status.inited=this.isInited,this.state.status.playing=this.isPlaying,this.state.status.paused=this.isPaused,this.state.status.buffering=this.isBuffering,this.state.status.seeking=this.isSeeking,this.state.status.complete=this.isComplete,this.state.status.live=this.isLive,this.state.status.dvr=this.isDvr,this.refreshCallback(this.state);}}ft.__name__="bs.player.plugin.skin.model.video.VideoModel",ft.__super__=U,Object.assign(ft.prototype,{__class__:ft});class gt extends V{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){this.moveDir="ltr",this.moveAxis="y",this.handleVolume=null,this.handleElement=null,this.skinElement=null,this.isTrackDown=!1,super._hx_constructor(t,e,s,i),this.skinElement=a,this.state={mute:!1,value:1,prc:isNaN(1)||!isFinite(1)?"0%":Math.max(0,Math.min(100,100))+"%",text:"100",active:!1,ctrl:null,toggle:null},this.state.ctrl=qt(this,this.controlTrack),this.state.toggle=qt(this,this.toggle),this.parseVars(e),p.add(t,"skinVolume",qt(this,this.onVolumeEvent)),p.add(t,"skinMute",qt(this,this.onMuteEvent)),p.add(t,"skinUnmute",qt(this,this.onUnmuteEvent)),b.add(t,"resize",qt(this,this.onResize)),this.refreshCallback(this.state);}destroy(){super.destroy(),b.remove(this.context,"resize",qt(this,this.onResize)),p.remove(this.context,"skinVolume",qt(this,this.onVolumeEvent)),p.remove(this.context,"skinMute",qt(this,this.onMuteEvent)),p.remove(this.context,"skinUnmute",qt(this,this.onUnmuteEvent));}parseVars(t){let e=null;Object.prototype.hasOwnProperty.call(t,"volume")&&(e=o.field(t,"volume"));let s=!1,i=null;if(i=Ut.getSessionStorage(),s=null!=i,s){let t,s=NaN,i=!1,a=null;if(a=Ut.getSessionStorage(),i=null!=a,i){try{let t,e=null,i=!1,a=null;if(a=Ut.getSessionStorage(),i=null!=a,i){let s=null;s=Ut.getSessionStorage(),e=s.getItem("_brplayer_vol"),null==e||(e=u.trim(e)),t=e;}else t=e;null!=t&&""!=t&&(s=parseFloat(t));}catch(t){}t=s;}else t=s;isNaN(t)||(e=t);}let a,l=e;if(null!=l&&!isNaN(l)&&isFinite(l)&&this.updateValue(l),Object.prototype.hasOwnProperty.call(t,"mute"))switch(o.field(t,"mute")){case 1:case"true":case!0:a=!0;break;default:a=!1;}else a=!1;this.state.mute=a;}onResize(t){this.updateMoveDataset();}updateMoveDataset(){if(null==this.handleElement)return;let t=this.handleElement.dataset;null!=t&&(this.moveAxis=Object.prototype.hasOwnProperty.call(t,"axis")?t.axis:"y",this.moveDir=Object.prototype.hasOwnProperty.call(t,"direction")?t.direction:"ltr");}controlTrack(t){null!=t?(this.handleElement=t,this.updateMoveDataset(),g.isMobile()?(this.handleElement.addEventListener("touchstart",qt(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("touchmove",qt(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("touchend",qt(this,this.handleTrack),yt.get_passiveOptions())):(this.handleElement.addEventListener("mousedown",qt(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("mousemove",qt(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("mouseup",qt(this,this.handleTrack),yt.get_passiveOptions()))):null!=this.handleElement&&(g.isMobile()?(this.handleElement.removeEventListener("touchstart",qt(this,this.handleTrack)),this.handleElement.removeEventListener("touchmove",qt(this,this.handleTrack)),this.handleElement.removeEventListener("touchend",qt(this,this.handleTrack))):(this.handleElement.removeEventListener("mousedown",qt(this,this.handleTrack)),this.handleElement.removeEventListener("mousemove",qt(this,this.handleTrack)),this.handleElement.removeEventListener("mouseup",qt(this,this.handleTrack))),this.handleElement=null);}toggle(t){if(null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),this.state.mute||0==this.state.value){let t=0==this.state.value?1:this.state.value;return this.updateValue(t),this.dispatchVolume(t),void this.dispatchUnmute()}this.dispatchMute();}handleTrack(t){switch(t.type){case"blur":case"mouseleave":case"mouseup":let e=this.skinElement,s=qt(this,this.handleTrack);g.enableHtmlSelection(),window.document.removeEventListener("mouseup",s),window.document.removeEventListener("mousemove",s),window.document.removeEventListener("mouseleave",s),window.document.removeEventListener("blur",s),e.removeEventListener("mouseup",s),e.removeEventListener("mousemove",s),e.removeEventListener("blur",s),g.isMobile()&&(window.document.removeEventListener("touchend",s),e.removeEventListener("touchend",s)),this.state.active=!1;let i=t.target;this.skinElement.contains(i)&&this.isTrackDown?this.handleMoveEnd(t):this.refreshCallback(this.state),this.isTrackDown=!1;break;case"mousedown":if(this.isTrackDown)return;let a=this.skinElement,l=qt(this,this.handleTrack);g.disableHtmlSelection(),window.document.addEventListener("mouseup",l,yt.get_passiveOptions()),window.document.addEventListener("mousemove",l,yt.get_passiveOptions()),window.document.addEventListener("mouseleave",l,yt.get_passiveOptions()),window.document.addEventListener("blur",l,yt.get_passiveOptions()),a.addEventListener("mouseup",l,yt.get_passiveOptions()),a.addEventListener("mousemove",l,yt.get_passiveOptions()),a.addEventListener("blur",l,yt.get_passiveOptions()),g.isMobile()&&(window.document.addEventListener("touchend",l,yt.get_passiveOptions()),a.addEventListener("touchend",l,yt.get_passiveOptions())),this.state.active=!0,this.handleMoving(t),this.isTrackDown=!0;break;case"mousemove":this.handleMoving(t);}}handleMoving(t){this.handleVolume=this.calculateVolume(t),null!=this.handleVolume&&this.isTrackDown&&(this.updateValue(this.handleVolume),this.dispatchVolume(this.handleVolume),this.refreshCallback(this.state));}handleMoveEnd(t){null!=this.handleVolume&&(this.updateValue(this.handleVolume),this.dispatchVolume(this.handleVolume));}calculateVolume(t){let e=null;if("x"==this.moveAxis){let s=0;t instanceof MouseEvent&&(s=zt.__cast(t,MouseEvent).clientX);let i=window;if(Object.prototype.hasOwnProperty.call(i,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){s=e.touches.item(0).clientX;}}e=s;}else {let s=0;t instanceof MouseEvent&&(s=zt.__cast(t,MouseEvent).clientY);let i=window;if(Object.prototype.hasOwnProperty.call(i,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){s=e.touches.item(0).clientY;}}e=s;}let s=null;s=this.handleElement.getBoundingClientRect();let i=s,a=0;a="x"==this.moveAxis?e-i.x:e-i.y;let l=0;return l="x"==this.moveAxis?a/i.width:a/i.height,l>.995?l=1:l<.005&&(l=0),"ltr"===this.moveDir?1-l:l}updateValue(t){if(null==t)return;this.state.value=t;let e=isNaN(t)||!isFinite(t);this.state.prc=e?"0%":Math.max(0,Math.min(100,100*t))+"%",this.state.text=""+(100*t|0);}onVolumeEvent(t){this.updateValue(t.data),this.refreshCallback(this.state);}onMuteEvent(t){this.state.mute=!0,this.refreshCallback(this.state);}onUnmuteEvent(t){this.state.mute=!1,this.refreshCallback(this.state);}dispatchVolume(t){let e=new p("skinVolume");e.data=t,e.dispatch(this.context);let s=null==t?"null":""+t,i=!1,a=null;if(a=Ut.getSessionStorage(),i=null!=a,i)try{if(null==s){let t=null;t=Ut.getSessionStorage(),t.removeItem("_brplayer_vol");}else {let t=null;t=Ut.getSessionStorage(),t.setItem("_brplayer_vol",r.substr(h.string(s),0,5));}}catch(t){}}dispatchMute(){new p("skinMute").dispatch(this.context);}dispatchUnmute(){new p("skinUnmute").dispatch(this.context);}}gt.__name__="bs.player.plugin.skin.model.volume.VolumeModel",gt.__super__=V,Object.assign(gt.prototype,{__class__:gt});class _t extends z{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.isVrDevice=!1,this.isVrEnabled=!1,super._hx_constructor(t,e,s,i),this.state=null,v.add(t,"vrEnabled",qt(this,this.onVrEnabled)),v.add(t,"vrSupport",qt(this,this.onVrSupport)),v.add(t,"vrActive",qt(this,this.onVrActive)),this.refreshCallback(this.state);}destroy(){super.destroy(),v.remove(this.context,"vrEnabled",qt(this,this.onVrEnabled)),v.remove(this.context,"vrSupport",qt(this,this.onVrSupport)),v.remove(this.context,"vrActive",qt(this,this.onVrActive));}updateState(t){super.updateState(t),this.formatState();}formatState(){this.state=this.isMediaSpherical?{enabled:this.isVrEnabled,active:!1,supported:this.isVrDevice,click:qt(this,this.click)}:null,this.refreshCallback(this.state);}onVrEnabled(t){this.isVrEnabled=t.data,null!=this.state&&(this.state.enabled=this.isVrEnabled,this.refreshCallback(this.state));}onVrSupport(t){this.isVrDevice=t.data,null!=this.state&&(this.state.supported=this.isVrDevice,this.refreshCallback(this.state));}onVrActive(t){null!=this.state&&(this.state.active=t.data,this.refreshCallback(this.state));}click(t){new v(this.state.active?"vrEnd":"vrStart").dispatch(this.context);}}_t.__name__="bs.player.plugin.skin.model.vr.VrModel",_t.__super__=z,Object.assign(_t.prototype,{__class__:_t});class bt{static injectAssets(t,e,s){let i=0;if(null==s)return 0;let a=[],l=0,n=t.getElementsByTagName("link");for(;l<n.length;)a.push(n[l++]);let r=[],o=0,h=s.children;for(;o<h.length;)r.push(h[o++]);let u=[],c=0;for(;c<r.length;){let t=r[c];++c,"LINK"==t.tagName&&u.push(t);}let d=u,p=null,m=null,f=!1,g=0;for(;g<d.length;){let s=d[g];if(++g,null==s||!(s instanceof HTMLLinkElement))continue;if(f=!1,m=null!=s.href&&""!=s.href?s.href:null,null==m)continue;p=null!=s.id&&""!=s.id?s.id:e+"-"+Nt.encode(s.href);let l=[],n=0;for(;n<a.length;){let t=a[n];++n,t.id==p&&l.push(t);}f=l.length<1,f&&(t.appendChild(s),++i);}return i}static appendStyle(t,e,s){let i=e+"-skin-"+Nt.encode(s),a=t.querySelector("style#"+i);null==a&&(a=window.document.createElement("style"),a.id=""+i,a.insertAdjacentHTML("beforeend",s),t.appendChild(a));}}bt.__name__="bs.player.plugin.skin.util.Dom";class vt{static showWindow(t,e,s){let i=vt.getEmbedCode(e),a=u.htmlEscape(i),l='<small id="'+t+'-embed-code-text" style="word-break: break-all;">'+a+"</small>",n='<p style="text-align:center;"><a>'+Tt.translate("embed_code_info")+"</a></p>",r=window.document.queryCommandSupported("copy"),o=new f("showMessage");o.data={type:"code",title:Tt.translate("embed_code"),text:l+(r?"":n),onAfterShow:function(){let e=window.document.getElementById(t+"-embed-code-text");null!=e&&(e.focus(),g.highlightHtmlNode(e));},close:!0,onAfterClose:s},r&&(o.data.userSingleActionButtonText=Tt.translate("embed_code_copy"),o.data.onUserSingleAction=function(){g.copyToClipboard(i),new f("closeMessage").dispatch(t);}),o.dispatch(t);}static getEmbedCode(t){let e,s=Mt.UID_CHARS.length,i="",a=0;for(;a<24;){let t;switch(e="xxxx-xxxx-xxxx-xxxx-xxxx".charAt(a++),e){case"-":case"_":t=e;break;default:t=Mt.UID_CHARS.charAt(h.random(s));}i+=t;}let l=i;return '<div style="width: 640px; height: 480px;" id="'+l+'"></div><script src="'+vt.findEmbedScriptPath(t,"modular_v2.14.364")+'" type="text/javascript" data-bs-parent-id="'+l+'" data-bs-variables="'+Vt.encode(Ft.ofString(JSON.stringify(t)))+'"><\/script>'}static findEmbedScriptPath(t,e){let s=null;if(s=o.field(t,"playerSourcePath"),null!=s&&""!=s)return s;if(null!=e&&""!=e){let t=window;if(Object.prototype.hasOwnProperty.call(t,"bradmax")){let s=o.field(t,"bradmax");if(Object.prototype.hasOwnProperty.call(s,"player")){let t=o.field(s,"player");if(Object.prototype.hasOwnProperty.call(t,"embeders")){let s=o.field(t,"embeders");if(Object.prototype.hasOwnProperty.call(s,e)){let t=o.field(s,e);if(Object.prototype.hasOwnProperty.call(t,"sourcePath"))return o.field(t,"sourcePath")}}}}}return null}}vt.__name__="bs.player.plugin.skin.util.EmbedCode";class yt{static get_passiveOptions(){return !!yt.get_supportPassive()&&{passive:!0}}static get_supportPassive(){if(null==yt._supportPassive){yt._supportPassive=!1;try{let t=Object.defineProperty({},"passive",{get:function(){yt._supportPassive=!0;}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t);}catch(t){}}return yt._supportPassive}}yt.__name__="bs.player.plugin.skin.util.Event";class kt{static toggle(t,e,s){g.isSmartTV()||(kt.isFullscreen(e)?kt.exit(t,e,s):kt.enter(t,e,s));}static isFullscreen(t){let e=!1,s=window.document,i=window,a=t;return null!=i.bradmaxIsFullscreenEnabled&&o.isFunction(qt(i,i.bradmaxIsFullscreenEnabled))?e=i.bradmaxIsFullscreenEnabled():null!=s.fullscreenElement||null!=s.webkitFullscreenElement||null!=s.mozFullScreenElement||null!=s.msFullscreenElement||null!=a&&(1==a.webkitDisplayingFullscreen||"fullscreen"==a.webkitPresentationMode)?e=!0:kt.isFullscreenEmulation&&(e=kt.isFullscreenEmulationActive),e}static enter(t,e,s){let i=window,a=t,l=e,n=null;window.document.addEventListener(_.get_FULLSCREEN_CHANGE(),s),null!=i.bradmaxSetFullscreen?i.bradmaxSetFullscreen(!0):null!=a.requestFullscreen?n=a.requestFullscreen():null!=a.requestFullScreen?n=a.requestFullScreen():null!=a.msRequestFullscreen?n=a.msRequestFullscreen():null!=a.mozRequestFullScreen?n=a.mozRequestFullScreen():null!=a.webkitRequestFullscreen?n=a.webkitRequestFullscreen():null!=l&&null!=l.webkitSupportsFullscreen&&1==l.webkitSupportsFullscreen&&null!=l.webkitEnterFullscreen&&o.isFunction(qt(l,l.webkitEnterFullscreen))?l.webkitEnterFullscreen():null!=l&&null!=l.webkitSetPresentationMode&&o.isFunction(qt(l,l.webkitSetPresentationMode))&&null!=l.webkitSupportsPresentationMode&&o.isFunction(qt(l,l.webkitSupportsPresentationMode))&&l.webkitSupportsPresentationMode("fullscreen")?l.webkitSetPresentationMode("fullscreen"):(kt.isFullscreenEmulation=!0,kt.enterEmulatedFullscreen(a)),null!=n&&n.catch((function(t){console.warn("BRADMAX PLAYER NOTICE:\nBrowser doesn't allow openinng fullscreen mode without user interaction.\nPlayer is waiting for user to click 'fullscreen' button.\n\nPlease also check server HTTP response headers. Fullscreen could be also blocked by setting Feature-Policy proper header https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/fullscreen \n\n",t);}));}static enterEmulatedFullscreen(t){kt.isFullscreenEmulationActive=!0;let e=t.style;t.setAttribute("data-pre-fullscreen",t.style.cssText),e.objectFit="contain",e.userSelect="text",e.position="fixed",e.top="0",e.left="0",e.boxSizing="border-box",e.minWidth="0px",e.maxWidth="nonet",e.minHeight="0px",e.maxHeight="none",e.width="100%",e.height="100%",e.transform="none",e.inset="0px",e.margin="0px",e.zIndex="10000";let s=window.document;s.body.setAttribute("data-pre-fullscreen",s.body.style.cssText),s.body.style.overflow="hidden";}static exitEmulatedFullscreen(t){kt.isFullscreenEmulationActive=!1,t.style.cssText=t.getAttribute("data-pre-fullscreen");let e=window.document;e.body.style.cssText=e.body.getAttribute("data-pre-fullscreen");}static exit(t,e,s){let i=window.document,a=window,l=e;null!=a.bradmaxSetFullscreen?a.bradmaxSetFullscreen(!1):kt.isFullscreenEmulation?kt.exitEmulatedFullscreen(t):null!=i.exitFullscreen?i.exitFullscreen():null!=i.exitFullScreen?i.exitFullScreen():null!=i.msExitFullscreen?i.msExitFullscreen():null!=i.mozCancelFullScreen?i.mozCancelFullScreen():null!=i.webkitExitFullscreen?i.webkitExitFullscreen():null!=l&&null!=l.webkitExitFullscreen&&l.webkitExitFullscreen(),i.addEventListener(_.get_FULLSCREEN_CHANGE(),s);}}kt.__name__="bs.player.plugin.skin.util.FullscreenTool";class xt{static unlock(){let t=xt.orientationApi();if(null!=t&&null!=t.unlock&&o.isFunction(qt(t,t.unlock))){try{t.unlock();}catch(t){let e=Lt.caught(t);console.error(e);}return}let e=xt.oldUnlockOrientationApi();if(null!=e&&o.isFunction(e))try{e();}catch(t){let e=Lt.caught(t);console.error(e);}}static lock(t){if(null==t)return void xt.unlock();let e=xt.orientationApi();if(null!=e&&null!=e.lock&&o.isFunction(qt(e,e.lock)))return void e.lock(t).then((function(t){})).catch((function(t){console.error(t);}));let s=xt.oldLockOrientationApi();if(null!=s&&o.isFunction(s))try{s(t);}catch(t){let e=Lt.caught(t);console.error(e);}}static orientationApi(){let t=window;if(Object.prototype.hasOwnProperty.call(t,"screen")){if(null!=t.screen.orientation)return t.screen.orientation;let e=t.screen;if(null!=e.mozOrientation)return e.mozOrientation;if(null!=e.msOrientation)return e.msOrientation}return null}static oldLockOrientationApi(){let t=window;if(Object.prototype.hasOwnProperty.call(t,"screen")){let e=t.screen;if(null!=e.lockOrientation&&o.isFunction(e.lockOrientation))return e.lockOrientation;if(null!=e.mozLockOrientation&&o.isFunction(e.mozLockOrientation))return e.mozLockOrientation;if(null!=e.msLockOrientation&&o.isFunction(e.msLockOrientation))return e.msLockOrientation}return null}static oldUnlockOrientationApi(){let t=window;if(Object.prototype.hasOwnProperty.call(t,"screen")){let e=t.screen;if(null!=e.unlockOrientation&&o.isFunction(e.unlockOrientation))return e.unlockOrientation;if(null!=e.mozUnlockOrientation&&o.isFunction(e.mozUnlockOrientation))return e.mozUnlockOrientation;if(null!=e.msUnlockOrientation&&o.isFunction(e.msUnlockOrientation))return e.msUnlockOrientation}return null}}xt.__name__="bs.player.plugin.skin.util.ScreenOrientationTool";class wt{static shareViaMail(t){let e=wt.collectShareUrl(),s=wt.collectShareTitle();wt.goToUrl("mailto:?body="+e+(null!=s?"&subject="+s:""),"_self");}static shareOnFacebook(t){let e=wt.collectShareUrl(),s=wt.collectShareTitle();wt.goToUrl("http://www.facebook.com/sharer.php?u="+e+(null!=s?"&t="+s:""));}static shareOnTwitter(t){let e=wt.collectShareUrl(),s=wt.collectShareTitle();wt.goToUrl("http://twitter.com/share/?url="+e+(null!=s?"&text="+s:""));}static shareOnLinkedIn(t){let e=wt.collectShareUrl(),s=wt.collectShareTitle();wt.goToUrl("http://www.linkedin.com/shareArticle?mini=true&url="+e+(null!=s?"&title="+s:""));}static collectShareUrl(){let t=window.top.location.href;return ""==t?null:encodeURIComponent(t)}static collectShareTitle(){let t=window.top.document.title;return ""==t?null:encodeURIComponent(t)}static goToUrl(t,e){null==e&&(e="_blank"),window.open(t,e);}}wt.__name__="bs.player.plugin.skin.util.Share";class Et{static stateToSizesAttribute(t,e){return null==e||null==e.sources||e.sources.length<2?null:"(min-width: "+t.width+"px) "+t.width+"px, (min-height: "+t.height+"px) "+t.height+"px"}static stateToAttribute(t){if(null==t||null==t.sources)return null;if(null!=t.srcset)return t.srcset;let e=[],s=0,i=t.sources;for(;s<i.length;){let t=i[s];++s;let a="";null!=t.width&&(a=" "+t.width+"w"),e.push(""+t.url+a);}let a=e.join(", ");return t.srcset=a,""+a}static imageToState(t){let e=[],s=0;for(;s<t.length;)e.push(o.copy(t[s++]));e.sort((function(t,e){return e.width-t.width}));let i=[],a=0;for(;a<e.length;){let t=e[a];++a,(null==t.width||t.width<=0)&&i.push(t);}let l=[],n=0;for(;n<e.length;){let t=e[n];++n,null!=t.width&&t.width>0&&l.push(t);}let r=i.length>0?i[0]:l.length>0?l[l.length-1]:null,h=null!=r?r.url:null;if(null==h)return null;let u={url:h};if(l.length>0){u.sources=[];let t=0;for(;t<l.length;){let e=l[t];++t;let s={url:e.url};null!=e.width&&(s.width=e.width),u.sources.push(s);}0==u.sources.length&&o.deleteField(u,"sources");}return u}}Et.__name__="bs.player.plugin.skin.util.Srcset";class St{static cleanup(t){let e=new n("(\x3c!--)([\\s\\S]*?)(--\x3e)","g".split("u").join("")),s=new n("[\n\r]+","g".split("u").join("")),i=new n("[ ]+","g".split("u").join(""));return t=(t=(t=t.replace(e,"")).replace(s,"\n\r")).replace(i," ")}static merge(t,e){let s="",i=0;for(;i<t.length;){let a=t[i++],l=i-1;s+=a+(l<e.length?e[l]:"");}return s}static removeCustomTag(t,e){return t.replace(e.r,"")}static readCustomAttribute(t){return u.htmlUnescape(t)}static escapeCustomAttributes(t,e){let s=0;for(;s<e.length;)t=e[s++].map(t,(function(t){return ""+t.matched(1)+u.htmlEscape(t.matched(2))+t.matched(3)}));return t}}St.__name__="bs.player.plugin.skin.util.Template";class Pt{static formatCss(t,e){let s=Object.prototype.hasOwnProperty.call(e,"time")?o.field(e,"time"):null;if(null==s)return null;if("number"==typeof s)return Pt.timeToText(t.time,e.time,NaN);let i=e;return Pt.timeToText(t.time,i.time.show,i.time.hide)}static timeToText(t,e,s){return isNaN(t)?null:t<.1?"future":isNaN(e)?null:isNaN(s)?e<t?"past":"future":t>e&&t<s?"current":e<t?"past":"future"}}Pt.__name__="bs.player.plugin.skin.util.Time";class Ot{static decodeBase64(t){try{return Vt.urlDecode(t).toString()}catch(e){try{return Vt.decode(t).toString()}catch(e){try{return window.atob(t)}catch(t){return null}}}}}Ot.__name__="bs.player.plugin.skin.util.Variables";var Ct=require("bs.util.ObjectTools"),Tt=require("bs.util.TextTools"),Mt=require("bs.util.UUID");class Lt extends Error{constructor(t,e,s){super(t),this.message=t,this.__previousException=e,this.__nativeException=null!=s?s:this;}get_native(){return this.__nativeException}static caught(t){return t instanceof Lt?t:t instanceof Error?new Lt(t.message,null,t):new Dt(t,null,t)}static thrown(t){if(t instanceof Lt)return t.get_native();if(t instanceof Error)return t;return new Dt(t)}}Lt.__name__="haxe.Exception",Lt.__super__=Error,Object.assign(Lt.prototype,{__class__:Lt});var At=require("haxe.Timer");class Dt extends Lt{constructor(t,e,s){super(String(t),e,s),this.value=t;}}Dt.__name__="haxe.ValueException",Dt.__super__=Lt,Object.assign(Dt.prototype,{__class__:Dt});var Ft=require("haxe.io.Bytes"),jt=a["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:i},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:i}};jt.__constructs__=[jt.UTF8,jt.RawNative];var Vt=require("haxe.crypto.Base64");class Nt{constructor(){}bitOR(t,e){return (t>>>1|e>>>1)<<1|1&t|1&e}bitXOR(t,e){return (t>>>1^e>>>1)<<1|1&t^1&e}bitAND(t,e){return (t>>>1&e>>>1)<<1|1&t&e}addme(t,e){let s=(65535&t)+(65535&e);return (t>>16)+(e>>16)+(s>>16)<<16|65535&s}hex(t){let e="",s=0;for(;s<t.length;){let i=t[s];++s,e+="0123456789abcdef".charAt(i>>4&15)+"0123456789abcdef".charAt(15&i),e+="0123456789abcdef".charAt(i>>12&15)+"0123456789abcdef".charAt(i>>8&15),e+="0123456789abcdef".charAt(i>>20&15)+"0123456789abcdef".charAt(i>>16&15),e+="0123456789abcdef".charAt(i>>28&15)+"0123456789abcdef".charAt(i>>24&15);}return e}rol(t,e){return t<<e|t>>>32-e}cmn(t,e,s,i,a,l){return this.addme(this.rol(this.addme(this.addme(e,t),this.addme(i,l)),a),s)}ff(t,e,s,i,a,l,n){return this.cmn(this.bitOR(this.bitAND(e,s),this.bitAND(~e,i)),t,e,a,l,n)}gg(t,e,s,i,a,l,n){return this.cmn(this.bitOR(this.bitAND(e,i),this.bitAND(s,~i)),t,e,a,l,n)}hh(t,e,s,i,a,l,n){return this.cmn(this.bitXOR(this.bitXOR(e,s),i),t,e,a,l,n)}ii(t,e,s,i,a,l,n){return this.cmn(this.bitXOR(s,this.bitOR(e,~i)),t,e,a,l,n)}doEncode(t){let e=1732584193,s=-271733879,i=-1732584194,a=271733878,l=0;for(;l<t.length;){let n=e,r=s,o=i,h=a;e=this.ff(e,s,i,a,t[l],7,-680876936),a=this.ff(a,e,s,i,t[l+1],12,-389564586),i=this.ff(i,a,e,s,t[l+2],17,606105819),s=this.ff(s,i,a,e,t[l+3],22,-1044525330),e=this.ff(e,s,i,a,t[l+4],7,-176418897),a=this.ff(a,e,s,i,t[l+5],12,1200080426),i=this.ff(i,a,e,s,t[l+6],17,-1473231341),s=this.ff(s,i,a,e,t[l+7],22,-45705983),e=this.ff(e,s,i,a,t[l+8],7,1770035416),a=this.ff(a,e,s,i,t[l+9],12,-1958414417),i=this.ff(i,a,e,s,t[l+10],17,-42063),s=this.ff(s,i,a,e,t[l+11],22,-1990404162),e=this.ff(e,s,i,a,t[l+12],7,1804603682),a=this.ff(a,e,s,i,t[l+13],12,-40341101),i=this.ff(i,a,e,s,t[l+14],17,-1502002290),s=this.ff(s,i,a,e,t[l+15],22,1236535329),e=this.gg(e,s,i,a,t[l+1],5,-165796510),a=this.gg(a,e,s,i,t[l+6],9,-1069501632),i=this.gg(i,a,e,s,t[l+11],14,643717713),s=this.gg(s,i,a,e,t[l],20,-373897302),e=this.gg(e,s,i,a,t[l+5],5,-701558691),a=this.gg(a,e,s,i,t[l+10],9,38016083),i=this.gg(i,a,e,s,t[l+15],14,-660478335),s=this.gg(s,i,a,e,t[l+4],20,-405537848),e=this.gg(e,s,i,a,t[l+9],5,568446438),a=this.gg(a,e,s,i,t[l+14],9,-1019803690),i=this.gg(i,a,e,s,t[l+3],14,-187363961),s=this.gg(s,i,a,e,t[l+8],20,1163531501),e=this.gg(e,s,i,a,t[l+13],5,-1444681467),a=this.gg(a,e,s,i,t[l+2],9,-51403784),i=this.gg(i,a,e,s,t[l+7],14,1735328473),s=this.gg(s,i,a,e,t[l+12],20,-1926607734),e=this.hh(e,s,i,a,t[l+5],4,-378558),a=this.hh(a,e,s,i,t[l+8],11,-2022574463),i=this.hh(i,a,e,s,t[l+11],16,1839030562),s=this.hh(s,i,a,e,t[l+14],23,-35309556),e=this.hh(e,s,i,a,t[l+1],4,-1530992060),a=this.hh(a,e,s,i,t[l+4],11,1272893353),i=this.hh(i,a,e,s,t[l+7],16,-155497632),s=this.hh(s,i,a,e,t[l+10],23,-1094730640),e=this.hh(e,s,i,a,t[l+13],4,681279174),a=this.hh(a,e,s,i,t[l],11,-358537222),i=this.hh(i,a,e,s,t[l+3],16,-722521979),s=this.hh(s,i,a,e,t[l+6],23,76029189),e=this.hh(e,s,i,a,t[l+9],4,-640364487),a=this.hh(a,e,s,i,t[l+12],11,-421815835),i=this.hh(i,a,e,s,t[l+15],16,530742520),s=this.hh(s,i,a,e,t[l+2],23,-995338651),e=this.ii(e,s,i,a,t[l],6,-198630844),a=this.ii(a,e,s,i,t[l+7],10,1126891415),i=this.ii(i,a,e,s,t[l+14],15,-1416354905),s=this.ii(s,i,a,e,t[l+5],21,-57434055),e=this.ii(e,s,i,a,t[l+12],6,1700485571),a=this.ii(a,e,s,i,t[l+3],10,-1894986606),i=this.ii(i,a,e,s,t[l+10],15,-1051523),s=this.ii(s,i,a,e,t[l+1],21,-2054922799),e=this.ii(e,s,i,a,t[l+8],6,1873313359),a=this.ii(a,e,s,i,t[l+15],10,-30611744),i=this.ii(i,a,e,s,t[l+6],15,-1560198380),s=this.ii(s,i,a,e,t[l+13],21,1309151649),e=this.ii(e,s,i,a,t[l+4],6,-145523070),a=this.ii(a,e,s,i,t[l+11],10,-1120210379),i=this.ii(i,a,e,s,t[l+2],15,718787259),s=this.ii(s,i,a,e,t[l+9],21,-343485551),e=this.addme(e,n),s=this.addme(s,r),i=this.addme(i,o),a=this.addme(a,h),l+=16;}return [e,s,i,a]}static encode(t){let e=new Nt;return e.hex(e.doEncode(Nt.str2blks(t)))}static str2blks(t){let e=Ft.ofString(t),s=1+(e.length+8>>6),i=[],a=16*s,l=0;for(;l<a;)i[l++]=0;let n=0,r=e.length,o=8*r;for(;n<r;)i[n>>2]|=e.b[n]<<(o+n)%4*8,++n;i[n>>2]|=128<<(o+n)%4*8;let h=16*s-2;return i[h]=255&o,i[h]=(i[h]|=(o>>>8&255)<<8)|(o>>>16&255)<<16,i[h]|=(o>>>24&255)<<24,i}}Nt.__name__="haxe.crypto.Md5",Object.assign(Nt.prototype,{__class__:Nt});var Rt=a["haxe.ds.Either"]={__ename__:!0,__constructs__:null,Left:(s=function(t){return {_hx_index:0,v:t,__enum__:"haxe.ds.Either",toString:i}},s._hx_name="Left",s.__params__=["v"],s),Right:(s=function(t){return {_hx_index:1,v:t,__enum__:"haxe.ds.Either",toString:i}},s._hx_name="Right",s.__params__=["v"],s)};Rt.__constructs__=[Rt.Left,Rt.Right];var Bt=require("haxe.ds.StringMap");class zt{static getClass(t){if(null==t)return null;if(t instanceof Array)return Array;{let e=t.__class__;if(null!=e)return e;let s=zt.__nativeClassName(t);return null!=s?zt.__resolveNativeClass(s):null}}static __string_rec(t,e){if(null==t)return "null";if(e.length>=5)return "<...>";let s=typeof t;switch("function"==s&&(t.__name__||t.__ename__)&&(s="object"),s){case"function":return "<function>";case"object":if(t.__enum__){let s=a[t.__enum__].__constructs__[t._hx_index],i=s._hx_name;return s.__params__?(e+="\t",i+"("+function(i){let a=[];{let i=0,l=s.__params__;for(;i<l.length;){let s=l[i];i+=1,a.push(zt.__string_rec(t[s],e));}}return a}().join(",")+")"):i}if(t instanceof Array){let s="[";e+="\t";let i=0,a=t.length;for(;i<a;){let a=i++;s+=(a>0?",":"")+zt.__string_rec(t[a],e);}return s+="]",s}let s;try{s=t.toString;}catch(t){return "???"}if(null!=s&&s!=Object.toString&&"function"==typeof s){let e=t.toString();if("[object Object]"!=e)return e}let i="{\n";e+="\t";let l=null!=t.hasOwnProperty,n=null;for(n in t)l&&!t.hasOwnProperty(n)||"prototype"!=n&&"__class__"!=n&&"__super__"!=n&&"__interfaces__"!=n&&"__properties__"!=n&&(2!=i.length&&(i+=", \n"),i+=e+n+" : "+zt.__string_rec(t[n],e));return i+="\n"+(e=e.substring(1))+"}",i;case"string":return t;default:return String(t)}}static __interfLoop(t,e){for(;;){if(null==t)return !1;if(t==e)return !0;let s=t.__interfaces__;if(null!=s&&(null==t.__super__||t.__super__.__interfaces__!=s)){let t=0,i=s.length;for(;t<i;){let i=s[t++];if(i==e||zt.__interfLoop(i,e))return !0}}t=t.__super__;}}static __instanceof(t,e){if(null==e)return !1;switch(e){case Array:return t instanceof Array;case Gt:return "boolean"==typeof t;case Ht:return null!=t;case $t:return "number"==typeof t;case Wt:return "number"==typeof t&&(0|t)===t;case String:return "string"==typeof t;default:if(null==t)return !1;if("function"==typeof e){if(zt.__downcastCheck(t,e))return !0}else if("object"==typeof e&&zt.__isNativeObj(e)&&t instanceof e)return !0;return e==Kt&&null!=t.__name__||(e==Xt&&null!=t.__ename__||null!=t.__enum__&&a[t.__enum__]==e)}}static __downcastCheck(t,e){return t instanceof e||!!e.__isInterface__&&zt.__interfLoop(zt.getClass(t),e)}static __cast(t,e){if(null==t||zt.__instanceof(t,e))return t;throw Lt.thrown("Cannot cast "+h.string(t)+" to "+h.string(e))}static __nativeClassName(t){let e=zt.__toStr.call(t).slice(8,-1);return "Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e}static __isNativeObj(t){return null!=zt.__nativeClassName(t)}static __resolveNativeClass(t){return e[t]}}zt.__name__="js.Boot";class Ut{static getSessionStorage(){try{let t=window.sessionStorage;if(t.getItem(""),0==t.length){let e="_hx_"+Math.random();t.setItem(e,e),t.removeItem(e);}return t}catch(t){return null}}}function qt(t,s){return null==s?null:(null==s.__id__&&(s.__id__=e.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[s.__id__],null==i&&(i=s.bind(t),t.hx__closures__[s.__id__]=i),i);var i;}Ut.__name__="js.Browser",e.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var Wt={},Ht={},$t=Number,Gt=Boolean,Kt={},Xt={};zt.__toStr={}.toString,T._hx_skip_constructor=!1,F.__plugfaces__="IPlugin",V._hx_skip_constructor=!1,$._hx_skip_constructor=!1,kt.isFullscreenEmulation=!1,kt.isFullscreenEmulationActive=!1;}(exports,window);
function t(t,n,i){return n=h(n),d(t,e$1()?Reflect.construct(n,i||[],h(t).constructor):n.apply(t,i))}function e$1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(t){}return (e$1=function(){return !!t})()}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i);}return n}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){a$1(t,e,i[e]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e));}));}return t}function r(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===e?String:Number)(t)}(t,"string");return "symbol"==typeof e?e:String(e)}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s$1(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i);}}function u(t,e,n){return e&&s$1(t.prototype,e),n&&s$1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a$1(t,e,n){return (e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e);}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},p.apply(this,arguments)}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,l,s=[],u=!0,a=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1;}else for(;!(u=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);u=!0);}catch(t){a=!0,r=t;}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(a)throw r}}return s}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return "Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function $(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=g(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return {s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return {s:function(){n=n.call(t);},n:function(){var t=n.next();return l=t.done,t},e:function(t){s=!0,o=t;},f:function(){try{l||null==n.return||n.return();}finally{if(s)throw o}}}}var b,A=globalThis,k=A.trustedTypes,w=k?k.createPolicy("lit-html",{createHTML:function(t){return t}}):void 0,x="$lit$",O="lit$".concat((Math.random()+"").slice(9),"$"),C="?"+O,T="<".concat(C,">"),j=document,E=function(){return j.createComment("")},S=function(t){return null===t||"object"!=o(t)&&"function"!=typeof t},I=Array.isArray,H="[ \t\n\f\r]",N=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,P=/-->/g,M=/>/g,L=RegExp(">|".concat(H,"(?:([^\\s\"'>=/]+)(").concat(H,"*=").concat(H,"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),D=/'/g,U=/"/g,Y=/^(?:script|style|textarea|title)$/i,R=function(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return {_$litType$:t,strings:e,values:i}}},V=R(1),B=R(2),W=Symbol.for("lit-noChange"),z=Symbol.for("lit-nothing"),q=new WeakMap,Z=j.createTreeWalker(j,129);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function F(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==w?w.createHTML(e):e}var Q=function(t,e){for(var n,i=t.length-1,r=[],o=2===e?"<svg>":"",l=N,s=0;s<i;s++){for(var u=t[s],a=void 0,c=void 0,h=-1,v=0;v<u.length&&(l.lastIndex=v,null!==(c=l.exec(u)));){var f;v=l.lastIndex,l===N?"!--"===c[1]?l=P:void 0!==c[1]?l=M:void 0!==c[2]?(Y.test(c[2])&&(n=RegExp("</"+c[2],"g")),l=L):void 0!==c[3]&&(l=L):l===L?">"===c[0]?(l=null!==(f=n)&&void 0!==f?f:N,h=-1):void 0===c[1]?h=-2:(h=l.lastIndex-c[2].length,a=c[1],l=void 0===c[3]?L:'"'===c[3]?U:D):l===U||l===D?l=L:l===P||l===M?l=N:(l=L,n=void 0);}var d=l===L&&t[s+1].startsWith("/>")?" ":"";o+=l===N?u+T:h>=0?(r.push(a),u.slice(0,h)+x+u.slice(h)+O+d):u+O+(-2===h?s:d);}return [F(t,o+(t[i]||"<?>")+(2===e?"</svg>":"")),r]},G=function(){function t(e,n){var i,r=e.strings,o=e._$litType$;l(this,t),this.parts=[];var s=0,u=0,a=r.length-1,c=this.parts,h=y(Q(r,o),2),v=h[0],f=h[1];if(this.el=t.createElement(v,n),Z.currentNode=this.el.content,2===o){var d=this.el.content.firstChild;d.replaceWith.apply(d,_(d.childNodes));}for(;null!==(i=Z.nextNode())&&c.length<a;){if(1===i.nodeType){if(i.hasAttributes()){var p,g=$(i.getAttributeNames());try{for(g.s();!(p=g.n()).done;){var m=p.value;if(m.endsWith(x)){var b=f[u++],A=i.getAttribute(m).split(O),w=/([.?@])?(.*)/.exec(b);c.push({type:1,index:s,name:w[2],strings:A,ctor:"."===w[1]?et:"?"===w[1]?nt:"@"===w[1]?it:tt}),i.removeAttribute(m);}else m.startsWith(O)&&(c.push({type:6,index:s}),i.removeAttribute(m));}}catch(t){g.e(t);}finally{g.f();}}if(Y.test(i.tagName)){var T=i.textContent.split(O),j=T.length-1;if(j>0){i.textContent=k?k.emptyScript:"";for(var S=0;S<j;S++)i.append(T[S],E()),Z.nextNode(),c.push({type:2,index:++s});i.append(T[j],E());}}}else if(8===i.nodeType)if(i.data===C)c.push({type:2,index:s});else for(var I=-1;-1!==(I=i.data.indexOf(O,I+1));)c.push({type:7,index:s}),I+=O.length-1;s++;}}return u(t,null,[{key:"createElement",value:function(t,e){var n=j.createElement("template");return n.innerHTML=t,n}}]),t}();function J(t,e){var n,i,r,o,l,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,u=arguments.length>3?arguments[3]:void 0;if(e===W)return e;var a=void 0!==u?null===(n=s._$Co)||void 0===n?void 0:n[u]:s._$Cl,c=S(e)?void 0:e._$litDirective$;return (null===(i=a)||void 0===i?void 0:i.constructor)!==c&&(null!==(r=a)&&void 0!==r&&null!==(o=r._$AO)&&void 0!==o&&o.call(r,!1),void 0===c?a=void 0:(a=new c(t))._$AT(t,s,u),void 0!==u?(null!==(l=s._$Co)&&void 0!==l?l:s._$Co=[])[u]=a:s._$Cl=a),void 0!==a&&(e=J(t,a._$AS(t,e.values),a,u)),e}var K=function(){function t(e,n){l(this,t),this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n;}return u(t,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"u",value:function(t){var e,n=this._$AD,i=n.el.content,r=n.parts,o=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:j).importNode(i,!0);Z.currentNode=o;for(var l=Z.nextNode(),s=0,u=0,a=r[0];void 0!==a;){var c;if(s===a.index){var h=void 0;2===a.type?h=new X(l,l.nextSibling,this,t):1===a.type?h=new a.ctor(l,a.name,a.strings,this,t):6===a.type&&(h=new rt(l,this,t)),this._$AV.push(h),a=r[++u];}s!==(null===(c=a)||void 0===c?void 0:c.index)&&(l=Z.nextNode(),s++);}return Z.currentNode=j,o}},{key:"p",value:function(t){var e,n=0,i=$(this._$AV);try{for(i.s();!(e=i.n()).done;){var r=e.value;void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++;}}catch(t){i.e(t);}finally{i.f();}}}]),t}(),X=function(){function t(e,n,i,r){var o;l(this,t),this.type=2,this._$AH=z,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=i,this.options=r,this._$Cv=null===(o=null==r?void 0:r.isConnected)||void 0===o||o;}return u(t,[{key:"_$AU",get:function(){var t,e;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cv}},{key:"parentNode",get:function(){var t,e=this._$AA.parentNode,n=this._$AM;return void 0!==n&&11===(null===(t=e)||void 0===t?void 0:t.nodeType)&&(e=n.parentNode),e}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(t){t=J(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),S(t)?t===z||null==t||""===t?(this._$AH!==z&&this._$AR(),this._$AH=z):t!==this._$AH&&t!==W&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):function(t){return I(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator])}(t)?this.k(t):this._(t);}},{key:"S",value:function(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}},{key:"T",value:function(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t));}},{key:"_",value:function(t){this._$AH!==z&&S(this._$AH)?this._$AA.nextSibling.data=t:this.T(j.createTextNode(t)),this._$AH=t;}},{key:"$",value:function(t){var e,n=t.values,i=t._$litType$,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=G.createElement(F(i.h,i.h[0]),this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.p(n);else {var o=new K(r,this),l=o.u(this.options);o.p(n),this.T(l),this._$AH=o;}}},{key:"_$AC",value:function(t){var e=q.get(t.strings);return void 0===e&&q.set(t.strings,e=new G(t)),e}},{key:"k",value:function(e){I(this._$AH)||(this._$AH=[],this._$AR());var n,i,r=this._$AH,o=0,l=$(e);try{for(l.s();!(i=l.n()).done;){var s=i.value;o===r.length?r.push(n=new t(this.S(E()),this.S(E()),this,this.options)):n=r[o],n._$AI(s),o++;}}catch(t){l.e(t);}finally{l.f();}o<r.length&&(this._$AR(n&&n._$AB.nextSibling,o),r.length=o);}},{key:"_$AR",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,e=arguments.length>1?arguments[1]:void 0;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,e);t&&t!==this._$AB;){var n,i=t.nextSibling;t.remove(),t=i;}}},{key:"setConnected",value:function(t){var e;void 0===this._$AM&&(this._$Cv=t,null===(e=this._$AP)||void 0===e||e.call(this,t));}}]),t}(),tt=function(){function t(e,n,i,r,o){l(this,t),this.type=1,this._$AH=z,this._$AN=void 0,this.element=e,this.name=n,this._$AM=r,this.options=o,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=z;}return u(t,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=this.strings,o=!1;if(void 0===r)t=J(this,t,e,0),(o=!S(t)||t!==this._$AH&&t!==W)&&(this._$AH=t);else {var l,s,u=t;for(t=r[0],l=0;l<r.length-1;l++){var a;(s=J(this,u[n+l],e,l))===W&&(s=this._$AH[l]),o||(o=!S(s)||s!==this._$AH[l]),s===z?t=z:t!==z&&(t+=(null!==(a=s)&&void 0!==a?a:"")+r[l+1]),this._$AH[l]=s;}}o&&!i&&this.j(t);}},{key:"j",value:function(t){t===z?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"");}}]),t}(),et=function(e){function n(){var e;return l(this,n),(e=t(this,n,arguments)).type=3,e}return c(n,tt),u(n,[{key:"j",value:function(t){this.element[this.name]=t===z?void 0:t;}}]),n}(),nt=function(e){function n(){var e;return l(this,n),(e=t(this,n,arguments)).type=4,e}return c(n,tt),u(n,[{key:"j",value:function(t){this.element.toggleAttribute(this.name,!!t&&t!==z);}}]),n}(),it=function(e){function n(e,i,r,o,s){var u;return l(this,n),(u=t(this,n,[e,i,r,o,s])).type=5,u}return c(n,tt),u(n,[{key:"_$AI",value:function(t){var e;if((t=null!==(e=J(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==e?e:z)!==W){var n=this._$AH,i=t===z&&n!==z||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==z&&(n===z||i);i&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this._$AH=t;}}},{key:"handleEvent",value:function(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(e=null===(n=this.options)||void 0===n?void 0:n.host)&&void 0!==e?e:this.element,t):this._$AH.handleEvent(t);}}]),n}(),rt=function(){function t(e,n,i){l(this,t),this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i;}return u(t,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(t){J(this,t);}}]),t}(),ot=A.litHtmlPolyfillSupport;null!=ot&&ot(G,X),(null!==(b=A.litHtmlVersions)&&void 0!==b?b:A.litHtmlVersions=[]).push("3.1.2");var lt=function(t,e,n){var i,r=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:e,o=r._$litPart$;if(void 0===o){var l,s=null!==(l=null==n?void 0:n.renderBefore)&&void 0!==l?l:null;r._$litPart$=o=new X(e.insertBefore(E(),s),s,void 0,null!=n?n:{});}return o._$AI(t),o},st=1,ut=2,at=6,ct=function(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return {_$litDirective$:t,values:n}}},ht=function(){function t(e){l(this,t);}return u(t,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AT",value:function(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n;}},{key:"_$AS",value:function(t,e){return this.update(t,e)}},{key:"update",value:function(t,e){return this.render.apply(this,_(e))}}]),t}(),vt=function t(e,n){var i=e._$AN;if(void 0===i)return !1;var r,o=$(i);try{for(o.s();!(r=o.n()).done;){var l,s=r.value;null!==(l=s._$AO)&&void 0!==l&&l.call(s,n,!1),t(s,n);}}catch(t){o.e(t);}finally{o.f();}return !0},ft=function(t){var e,n;do{var i;if(void 0===(e=t._$AM))break;(n=e._$AN).delete(t),t=e;}while(0===(null===(i=n)||void 0===i?void 0:i.size))},dt=function(t){for(var e;e=t._$AM;t=e){var n=e._$AN;if(void 0===n)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),_t(e);}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function pt(t){void 0!==this._$AN?(ft(this),this._$AM=t,dt(this)):this._$AM=t;}function yt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(e)if(Array.isArray(i))for(var o=n;o<i.length;o++)vt(i[o],!1),ft(i[o]);else null!=i&&(vt(i,!1),ft(i));else vt(this,t);}var _t=function(t){var e,n;t.type==ut&&(null!==(e=t._$AP)&&void 0!==e||(t._$AP=yt),null!==(n=t._$AQ)&&void 0!==n||(t._$AQ=pt));},gt=function(e){function n(){var e;return l(this,n),(e=t(this,n,arguments))._$AN=void 0,e}return c(n,ht),u(n,[{key:"_$AT",value:function(t,e,i){p(h(n.prototype),"_$AT",this).call(this,t,e,i),dt(this),this.isConnected=t._$AU;}},{key:"_$AO",value:function(t){var e,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==this.isConnected&&(this.isConnected=t,t?null===(e=this.reconnected)||void 0===e||e.call(this):null===(n=this.disconnected)||void 0===n||n.call(this)),i&&(vt(this,t),ft(this));}},{key:"setValue",value:function(t){if(function(t){return void 0===t.strings}(this._$Ct))this._$Ct._$AI(t,this);else {var e=_(this._$Ct._$AH);e[this._$Ci]=t,this._$Ct._$AI(e,this,0);}}},{key:"disconnected",value:function(){}},{key:"reconnected",value:function(){}}]),n}(),mt=new WeakMap,$t=ct(function(e){function n(){return l(this,n),t(this,n,arguments)}return c(n,gt),u(n,[{key:"render",value:function(t){return z}},{key:"update",value:function(t,e){var n,i=y(e,1)[0],r=i!==this.Y;return r&&void 0!==this.Y&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.Y=i,this.ht=null===(n=t.options)||void 0===n?void 0:n.host,this.rt(this.ct=t.element)),z}},{key:"rt",value:function(t){if("function"==typeof this.Y){var e,n=null!==(e=this.ht)&&void 0!==e?e:globalThis,i=mt.get(n);void 0===i&&(i=new WeakMap,mt.set(n,i)),void 0!==i.get(this.Y)&&this.Y.call(this.ht,void 0),i.set(this.Y,t),void 0!==t&&this.Y.call(this.ht,t);}else this.Y.value=t;}},{key:"lt",get:function(){var t,e,n;return "function"==typeof this.Y?null===(t=mt.get(null!==(e=this.ht)&&void 0!==e?e:globalThis))||void 0===t?void 0:t.get(this.Y):null===(n=this.Y)||void 0===n?void 0:n.value}},{key:"disconnected",value:function(){this.lt===this.ct&&this.rt(void 0);}},{key:"reconnected",value:function(){this.rt(this.ct);}}]),n}()),bt="important",At=" !"+bt,kt=ct(function(e){function n(e){var i,r;if(l(this,n),r=t(this,n,[e]),e.type!==st||"style"!==e.name||(null===(i=e.strings)||void 0===i?void 0:i.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");return d(r)}return c(n,ht),u(n,[{key:"render",value:function(t){return Object.keys(t).reduce((function(e,n){var i=t[n];return null==i?e:e+"".concat(n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase(),":").concat(i,";")}),"")}},{key:"update",value:function(t,e){var n=y(e,1)[0],i=t.element.style;if(void 0===this.ft)return this.ft=new Set(Object.keys(n)),this.render(n);var r,o=$(this.ft);try{for(o.s();!(r=o.n()).done;){var l=r.value;null==n[l]&&(this.ft.delete(l),l.includes("-")?i.removeProperty(l):i[l]=null);}}catch(t){o.e(t);}finally{o.f();}for(var s in n){var u=n[s];if(null!=u){this.ft.add(s);var a="string"==typeof u&&u.endsWith(At);s.includes("-")||a?i.setProperty(s,a?u.slice(0,-11):u,a?bt:""):i[s]=u;}}return W}}]),n}()),wt=function(e){function n(e){var i;if(l(this,n),(i=t(this,n,[e])).it=z,e.type!==ut)throw Error(i.constructor.directiveName+"() can only be used in child bindings");return d(i)}return c(n,ht),u(n,[{key:"render",value:function(t){if(t===z||null==t)return this._t=void 0,this.it=t;if(t===W)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;var e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}]),n}();wt.directiveName="unsafeHTML",wt.resultType=1;var xt,Ot=ct(wt),Ct=ct(function(e){function n(e){var i;l(this,n),a$1(f(i=t(this,n,[e])),"_DELAY",200),a$1(f(i),"_singleclick",null),a$1(f(i),"_doubleclick",null),a$1(f(i),"_handleClick",(function(t){null!=i.timeout&&clearTimeout(i.timeout);var e=t.type;"click"!==e&&"dblclick"!==e||null==i._singleclick&&null==i._doubleclick||(null!=i._doubleclick||null==i._singleclick||"function"!=typeof i._singleclick?i.timeout=setTimeout((function(){null!=i.timeout&&clearTimeout(i.timeout),i._execClick(t);}),i._DELAY):i._singleclick(t));}));var r=e.type,o=e.element;if(r!==at)throw new Error("The `multiClick` directive must be used as `element` directive");return null==o||o.addEventListener("click",i._handleClick),null==o||o.addEventListener("dblclick",i._handleClick),i}return c(n,ht),u(n,[{key:"update",value:function(t,e){var n=y(e,2),i=n[0],r=n[1];return this._singleclick!==i&&(this._singleclick=i),this._doubleclick!==r&&(this._doubleclick=r),W}},{key:"render",value:function(t,e){return W}},{key:"_execClick",value:function(t){2!==t.detail?null!=this._singleclick&&"function"==typeof this._singleclick&&this._singleclick(t):null!=this._doubleclick&&"function"==typeof this._doubleclick&&this._doubleclick(t);}}]),n}()),Tt=function(e){function n(e){var i;l(this,n),a$1(f(i=t(this,n,[e])),"_id",null),a$1(f(i),"_baseUrl",null);var r=e.type,o=e.element,s=e.options;if(r!==at)throw new Error("The `multiClick` directive must be used as `element` directive");var u=s.host.state.prefix;return i._addCssClass(o,u),i}return c(n,ht),u(n,[{key:"update",value:function(t,e){var n=y(e,1)[0];if(!n)return W;var i=n.id,r=location.hash?location.href.split(location.hash).join(""):location.href;if(this._id===i&&this._baseUrl===r)return W;var o,l,s=this._parse(t,n),u=s.element,a=s.host,c=s.prefix,h=s.skinIcoPrefix,v=s.type,f=s.group;try{switch(v){case"css":this._addCssClass(u,c,f),this._updateId(u,i);break;case"svg":lt(B(xt||(o=['<svg xmlns="http://www.w3.org/2000/svg"><use href="',"#","",'"></use></svg>'],l||(l=o.slice(0)),xt=Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(l)}}))),r,h,i),u,{host:a}),this._addCssClass(u,c,f),this._updateId(u,i);}}catch(t){console.error(t);}return this._baseUrl=r,W}},{key:"render",value:function(t){return W}},{key:"_parse",value:function(t,e){var n=t.element,i=t.options.host,r=i.skinIcoPrefix,o=i.state,l=o.prefix,s=o.icon,u=null,a=null;return "group"in e&&e.group in s&&(u=s[a=e.group].type),!u&&null!=s&&s.type&&(u=null==s?void 0:s.type),{element:n,host:i,skinIcoPrefix:r,prefix:l,type:u,group:a}}},{key:"_updateId",value:function(t,e){t.classList.contains(this._id)&&t.classList.remove(this._id),t.classList.contains(e)||t.classList.add(e),this._id=e;}},{key:"_addCssClass",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i="".concat(e,"-ico");if(t.classList.contains(i)||t.classList.add(i),null!=n){var r="".concat(e,"-").concat(n,"-ico");t.classList.contains(r)||t.classList.add(r);}}}]),n}(),jt=ct(Tt),Et=ct(function(e){function n(e){var i;l(this,n),a$1(f(i=t(this,n,[e])),"_prefix",null),a$1(f(i),"_delayIdx",null),a$1(f(i),"_observer",null),a$1(f(i),"_element",void 0),a$1(f(i),"_triggerElement",void 0),a$1(f(i),"_handleObserver",(function(t,e){if(null!=i._prefix){var n,r=$(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,l=o.type,s=o.target;if("attributes"===l){var u,a,c,h,v=s.classList;if(v&&0!==(null==v?void 0:v.length))if(v.contains("".concat(i._prefix,"-popup-trigger"))&&i._triggerElement!=s)null===(u=i._triggerElement)||void 0===u||u.removeEventListener("mouseover",i._handleTriggerMouseOver),null===(a=i._triggerElement)||void 0===a||a.removeEventListener("click",i._handleTriggerClick),i._triggerElement=s,null===(c=i._triggerElement)||void 0===c||c.addEventListener("mouseover",i._handleTriggerMouseOver),null===(h=i._triggerElement)||void 0===h||h.addEventListener("click",i._handleTriggerClick);else v.contains("".concat(i._prefix,"-popup-openned"))?i._scrollIntoView(null==s?void 0:s.querySelector(".".concat(i._prefix,"-popup-list-item.").concat(i._prefix,"-active"))):v.contains("".concat(i._prefix,"-popup-list-item"))&&v.contains("".concat(i._prefix,"-active"))&&i._scrollIntoView(s);}}}catch(t){r.e(t);}finally{r.f();}}})),a$1(f(i),"_handleMouseLeave",(function(t){var e;null===(e=i._element)||void 0===e||e.classList.remove("".concat(i._prefix,"-popup-openned"));})),a$1(f(i),"_handleTriggerClick",(function(t){var e;null===(e=i._element)||void 0===e||e.classList.toggle("".concat(i._prefix,"-popup-openned"));})),a$1(f(i),"_handleTriggerMouseOver",(function(t){i._delayCallback((function(){var t;i._scrollIntoView(null===(t=i._element)||void 0===t?void 0:t.querySelector(".".concat(i._prefix,"-popup-list-item.").concat(i._prefix,"-active")));}));})),a$1(f(i),"_scrollIntoView",(function(t){null==t||t.scrollIntoView({behavior:"instant",block:"nearest",inline:"nearest"});})),a$1(f(i),"_delayCallback",(function(t){"requestIdleCallback"in window?(null!=i._delayIdx&&window.cancelIdleCallback(i._delayIdx),i._delayIdx=window.requestIdleCallback(t,{timeout:100})):(null!=i._delayIdx&&window.clearTimeout(i._delayIdx),i._delayIdx=window.setTimeout(t,100));}));var r,o,s=e.type,u=e.element,c=e.options;if(s!==at)throw new Error("The `popup` directive must be used as `element` directive");c.host&&c.host.get_prefix&&"function"==typeof c.host.get_prefix&&i._element!=u?(i._prefix=c.host.get_prefix(),null===(r=i._element)||void 0===r||r.removeEventListener("mouseleave",i._handleMouseLeave),i._element=u,null===(o=i._element)||void 0===o||o.addEventListener("mouseleave",i._handleMouseLeave),i._startObserver()):console.warn(" !!! ctx.prefix is required !!! ");return i}return c(n,ht),u(n,[{key:"update",value:function(t){return W}},{key:"render",value:function(){return W}},{key:"_startObserver",value:function(){var t;null!=this._prefix&&(null===(t=this._observer)||void 0===t||t.disconnect(),this._observer=new MutationObserver(this._handleObserver),this._observer.observe(this._element,{attributeFilter:["class"],attributeOldValue:!1,attributes:!0,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0}));}}]),n}()),St={html:V,svg:B,nothing:z,render:lt,asHtml:Ot,ctrl:$t,style:kt,optional:function(t){return null!=t?t:z},multiClick:Ct,icon:jt,popupList:Et},It=Object.keys(St).map((function(t){return "var ".concat(t," = this.").concat(t,";")})).join(""),Ht=i(i({},St),{},{template:function(t){return Function("context","return (function lit(ctx) { "+It+" return "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html")+"`"+t+"`; }).call(this,context)").bind(St)}});exports.lit=Ht;
!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.dataProvider=e.bs.player.plugin.dataProvider||{};var r=function(){return B.__string_rec(this,"")},a=a||{};Math.__name__="Math";var s=require("haxe.Reflect");class i{static string(e){return B.__string_rec(e,"")}}i.__name__="Std";var l=require("haxe.StringTools"),o=require("bs.net.Http"),n=require("bs.player.core.events.ControlEvent"),p=require("bs.player.core.events.DataProviderEvent"),c=require("bs.player.core.events.ErrorEvent"),u=require("bs.player.core.manager.I18NHelper"),h=require("bs.player.core.model.Media"),d=require("bs.player.core.model.LiveStream"),_=require("bs.player.core.model.LiveChannel"),m=require("bs.player.core.model.MediaPlaylist"),y=require("bs.player.core.model.MediaSource"),g=require("bs.player.core.model.MediaDetails"),b=require("bs.player.core.model.MediaUserSettings"),P=require("bs.player.core.model.MediaSettings"),O=require("bs.player.core.model.MediaPlaybackInfo"),f=require("bs.player.core.model.SubtitlesSet"),w=require("bs.player.core.model.AudioSet"),S=require("bs.player.core.model.Image"),v=require("bs.player.core.model.Genre"),j=require("bs.player.core.model.MediaProgress");class x{constructor(){x._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=B.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,r=exports.configuration;this.pluginConfig=null!=r&&Object.prototype.hasOwnProperty.call(r,t)?s.field(r,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}x.__name__="bs.player.core.plugin.PluginBase",Object.assign(x.prototype,{__class__:x});class E extends x{constructor(){x._hx_skip_constructor=!0,super(),x._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.emittedMediaPlaylist=null,this.emittedMedia=null,this.data=null,this.reportErrors=!0,this.debugMode=!1,super._hx_constructor();let e=B.getClass(this);this.thisClass=e.__name__.split(".").pop(),this.parser=new D(this.reportErrors),this.parser.reportError=W(this,this.reportError);}activate(){super.activate();let e=this.get_variables();Object.prototype.hasOwnProperty.call(e,"dataDebugMode")&&(this.debugMode=s.field(this.get_variables(),"dataDebugMode"));let t=this.get_variables();Object.prototype.hasOwnProperty.call(t,"dataReportErrors")&&(this.reportErrors=s.field(this.get_variables(),"dataReportErrors"));}postActivate(){let e=this.get_variables();if(Object.prototype.hasOwnProperty.call(e,"dataSource"))this.mediaLoad(s.field(this.get_variables(),"dataSource"));else {let e=this.get_variables();Object.prototype.hasOwnProperty.call(e,"dataProvider")&&this.parseData(s.field(this.get_variables(),"dataProvider"));}}changeSource(e){this.mediaLoad(e);}injectData(e){this.parseData(e);}mediaLoad(e){if(null==e){if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] Error in BradmaxDataProvider : Empty source url";console.error(e);let t=new c("mediaProviderError");t.data="Error in BradmaxDataProvider : Empty source url",t.dispatch(this.context);}return}let t=new o(e);t.onData=W(this,this.parseString),t.onError=W(this,this.mediaLoadError),t.request(!1);}mediaLoadError(e){let t="Error in BradmaxDataProvider : Invalid http request: "+i.string(e);if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] "+t;console.error(e);let r=new c("mediaProviderError");r.data=t,r.dispatch(this.context);}}parseString(e){this.data=null;try{let t=e;for(;-1!=t.indexOf("/*")||-1!=t.indexOf("*/");){let e=t.indexOf("/*"),r=t.indexOf("*/",e)+2;-1!=e&&-1!=r&&(t=t.substring(0,e)+t.substring(r,t.length));}this.data=JSON.parse(t);}catch(e){let t="Error in BradmaxDataProvider : Invalid string while parsing to object (JSON) : "+i.string(N.caught(e).unwrap());if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] "+t;console.error(e);let r=new c("mediaProviderError");r.data=t,r.dispatch(this.context);}return}if(null!=this.data)this.parseData(this.data);else if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] Error in BradmaxDataProvider : Invalid string while parsing to object (JSON)";console.error(e);let t=new c("mediaProviderError");t.data="Error in BradmaxDataProvider : Invalid string while parsing to object (JSON)",t.dispatch(this.context);}}parseData(e){if(null==this.parser){if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] Error in BradmaxDataProvider : BradmaxMediaParser return empty object";console.error(e);let t=new c("mediaProviderError");t.data="Error in BradmaxDataProvider : BradmaxMediaParser return empty object",t.dispatch(this.context);}return}if(null!=e&&!(e instanceof Array)){let t=e;e=[t];let r=this.parsePlaylistLegacyNames(t);if(null!=r){let t=0;for(;t<r.length;)e.push(r[t++]);}}if(this.parser.parse(e),null==this.parser.playlist){if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] Error in BradmaxDataProvider : BradmaxMediaParser return empty playlist object";console.error(e);let t=new c("mediaProviderError");t.data="Error in BradmaxDataProvider : BradmaxMediaParser return empty playlist object",t.dispatch(this.context);}return}let t=this.get_variables();if(Object.prototype.hasOwnProperty.call(t,"startTime")&&this.get_variables().startTime>0&&this.parser.playlist.items.length>0){let e=this.parser.playlist.items[0],t=this.get_variables();e.mediaUserSettings.resumePostion=s.field(t,"startTime"),s.deleteField(this.get_variables(),"startTime");}this.parser.playlist.hasNext()&&(this.emitMedia(this.parser.playlist.next()),this.emittedMediaPlaylist=this.parser.playlist,this.emitMediaPlaylist(this.emittedMediaPlaylist));}parsePlaylistLegacyNames(e){let t=null,r=["mediaPlaylist","playList"],a=0;for(;a<r.length;){let s=r[a];if(++a,t=this.findPlaylistLegacyName(s,e),null==t&&(t=this.findPlaylistLegacyName(s.toLowerCase(),e)),null!=t)return t}return t}findPlaylistLegacyName(e,t){let r=null;if(Object.prototype.hasOwnProperty.call(t,e)){let a=s.field(t,e);if(a instanceof Array)r=a;else if(Object.prototype.hasOwnProperty.call(a,"items")){let e=s.field(a,"items");e instanceof Array&&(r=e);}s.deleteField(t,e);}return r}emitMediaPlaylist(e){let t=new p("mediaPlaylistData");t.data=e,t.dispatch(this.context);}orderMediaSourceForBetterSupport(e){if(null==e||null==e.source||0==e.source.length)return;let t=null;t=C.mobile||"Safari"==C.browserName?[W(this,this.isHlsUrl),W(this,this.isMpegDashUrl),W(this,this.isMsSmoothStreamingUrl)]:"Edge"==C.browserName||"Microsoft Internet Explorer"==C.browserName?[W(this,this.isMsSmoothStreamingUrl),W(this,this.isMpegDashUrl),W(this,this.isHlsUrl)]:[W(this,this.isMpegDashUrl),W(this,this.isHlsUrl),W(this,this.isMsSmoothStreamingUrl)];let r=[],a=new U,s=0,i=e.source;for(;s<i.length;)a.add(i[s++]);let l=0;for(;l<t.length;){let e=t[l++],s=new U,i=a.h;for(;null!=i;){let t=i.item;i=i.next,e(t.url)&&(r.push(t),s.add(t));}let o=s.h;for(;null!=o;){let e=o.item;o=o.next,a.remove(e);}}let o=a.h;for(;null!=o;){let e=o.item;o=o.next,r.push(e);}e.source=r;}isHlsUrl(e){return this.normalizeSourceUrl(e).endsWith(".m3u8")}isMpegDashUrl(e){return this.normalizeSourceUrl(e).endsWith(".mpd")}isMsSmoothStreamingUrl(e){let t=this.normalizeSourceUrl(e);return !!t.endsWith(".ism/manifest")||t.endsWith(".isml/manifest")}normalizeSourceUrl(e){return null==e?"":e.split("?")[0].toLowerCase()}emitMedia(e){this.orderMediaSourceForBetterSupport(e),this.emittedMedia=e;let t=new p("mediaMetadataData");t.data=e,t.dispatch(this.context);let r=new p("movieData");r.data=e,r.dispatch(this.context);let a=new p("subtitleData");null!=e.subtitlesSets?a.data=e.subtitlesSets:a.data=null,a.dispatch(this.context),this.emitSubtitlesSet(e.subtitlesSets);let s=new p("audioData");null!=e.audioSets?s.data=e.audioSets:s.data=null,s.dispatch(this.context),this.emitAudioSet(e.audioSets);}emitAudioSet(e){if(null==e)return;let t=null,r=this.get_variables();Object.prototype.hasOwnProperty.call(r,"audio")&&(t=s.field(this.get_variables(),"audio"));let a=!1,o=null;if(o=q.getSessionStorage(),a=null!=o,a){let e,r=null,a=!1,s=null;if(s=q.getSessionStorage(),a=null!=s,a){try{let e,t=null,a=!1,s=null;if(s=q.getSessionStorage(),a=null!=s,a){let r=null;r=q.getSessionStorage(),t=r.getItem("_brplayer_aud_lang"),null==t||(t=l.trim(t)),e=t;}else e=t;null!=e&&""!=e&&(r=e);}catch(p){}e=r;}else e=r;null!=e&&(t=e);}if(null==t)return;let p=[],c=0;for(;c<e.length;){let r=e[c];++c,r.languageCode==t&&p.push(r);}if(null==p||p.length<1)return;let u=p[0];if(null==u)return;let h=new n("selectAudio");h.data=u,h.dispatch(this.context);let d=u.languageCode,_=!1,m=null;if(m=q.getSessionStorage(),_=null!=m,_)try{if(null==d){let e=null;e=q.getSessionStorage(),e.removeItem("_brplayer_aud_lang");}else {let e=null;e=q.getSessionStorage(),e.setItem("_brplayer_aud_lang",i.string(d));}}catch(p){}}emitSubtitlesSet(e){if(null==e)return;let t=null,r=this.get_variables();Object.prototype.hasOwnProperty.call(r,"subtitles")&&(t=s.field(this.get_variables(),"subtitles"));let a=!1,o=null;if(o=q.getSessionStorage(),a=null!=o,a){let e,r=null,a=!1,s=null;if(s=q.getSessionStorage(),a=null!=s,a){try{let e,t=null,a=!1,s=null;if(s=q.getSessionStorage(),a=null!=s,a){let r=null;r=q.getSessionStorage(),t=r.getItem("_brplayer_sub_lang"),null==t||(t=l.trim(t)),e=t;}else e=t;null!=e&&""!=e&&(r=e);}catch(p){}e=r;}else e=r;null!=e&&(t=e);}if(null==t)return;let p=[],c=0;for(;c<e.length;){let r=e[c];++c,r.languageCode==t&&p.push(r);}if(null==p||p.length<1)return;let u=p[0];if(null==u)return;let h=new n("selectSubtitles");h.data=u,h.dispatch(this.context);let d=u.languageCode,_=!1,m=null;if(m=q.getSessionStorage(),_=null!=m,_)try{if(null==d){let e=null;e=q.getSessionStorage(),e.removeItem("_brplayer_sub_lang");}else {let e=null;e=q.getSessionStorage(),e.setItem("_brplayer_sub_lang",i.string(d));}}catch(p){}}emitDebug(e){}emitWarning(e){}emitError(e){if(this.reportErrors||this.debugMode){let t="["+this.thisClass+"] "+e;console.error(t);let r=new c("mediaProviderError");r.data=e,r.dispatch(this.context);}}reportError(e,t){if(e!=M.ERROR);else {let e="Error in BradmaxDataProvider : parser : "+t;if(this.reportErrors||this.debugMode){let t="["+this.thisClass+"] "+e;console.error(t);let r=new c("mediaProviderError");r.data=e,r.dispatch(this.context);}}}}e.bs.player.plugin.dataProvider.BradmaxDataProvider=E,E.__name__="bs.player.plugin.dataProvider.BradmaxDataProvider",E.__super__=x,Object.assign(E.prototype,{__class__:E});var M=a["bs.player.plugin.dataProvider.BradmaxDataParseExceptionType"]={__ename__:!0,__constructs__:null,ERROR:{_hx_name:"ERROR",_hx_index:0,__enum__:"bs.player.plugin.dataProvider.BradmaxDataParseExceptionType",toString:r},WARNING:{_hx_name:"WARNING",_hx_index:1,__enum__:"bs.player.plugin.dataProvider.BradmaxDataParseExceptionType",toString:r}};M.__constructs__=[M.ERROR,M.WARNING];class D{constructor(e){null==e&&(e=!1),this.reportErrors=!1,this.reportErrors=e;}reportError(e,t){}parse(e){this.playlist=new m;let t=0;for(;t<e.length;)this.playlist.items.push(this.parseMedia(e[t++]));}parseMedia(e){let t=new h;if(Object.prototype.hasOwnProperty.call(e,"liveStream")&&null!=s.field(e,"liveStream")&&(t=new d,t.duration=-1),Object.prototype.hasOwnProperty.call(e,"channel")&&(t=new _),Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=e.customParams),Object.prototype.hasOwnProperty.call(e,"id")&&(t.id=e.id),Object.prototype.hasOwnProperty.call(e,"title")&&(t.title=e.title),Object.prototype.hasOwnProperty.call(e,"duration")&&(t.duration=e.duration),Object.prototype.hasOwnProperty.call(e,"source"))t.source=this.parseMediaSource(e.source);else if(Object.prototype.hasOwnProperty.call(e,"sourceWithFallbacks")){let r=this.parseMediaSourceWithFallbacls(e.sourceWithFallbacks);r.length>0&&(t.source=r[0]),r.length>1&&(t.sourceFallbacks=r.slice(1));}else this.reportErrors&&this.reportError(M.ERROR,"media source is missing");if(this.reportErrors&&0==t.source.length&&this.reportError(M.ERROR,"media sources are empty"),Object.prototype.hasOwnProperty.call(e,"audioSets")&&(t.audioSets=this.parseMediaAudioSet(e.audioSets)),Object.prototype.hasOwnProperty.call(e,"mediaDetails")&&(t.mediaDetails=this.parseMediaDetails(e.mediaDetails)),Object.prototype.hasOwnProperty.call(e,"mediaPlaybackInfo")&&(t.mediaPlaybackInfo=this.parseMediaPlaybackInfo(e.mediaPlaybackInfo)),Object.prototype.hasOwnProperty.call(e,"mediaSettings")&&(t.mediaSettings=this.parseMediaSettings(e.mediaSettings)),Object.prototype.hasOwnProperty.call(e,"mediaUserSettings")&&(t.mediaUserSettings=this.parseMediaUserSettings(e.mediaUserSettings)),Object.prototype.hasOwnProperty.call(e,"splashImages")&&(t.splashImages=this.parseMediaImages(e.splashImages)),Object.prototype.hasOwnProperty.call(e,"subtitlesSets")&&(t.subtitlesSets=this.parseMediaSubtitleSets(e.subtitlesSets)),Object.prototype.hasOwnProperty.call(e,"posterImages")&&(t.posterImages=this.parseMediaImages(e.posterImages)),Object.prototype.hasOwnProperty.call(e,"mediaLandingPage")&&(t.mediaLandingPage=e.mediaLandingPage),Object.prototype.hasOwnProperty.call(e,"progress")&&(t.progress=this.parseProgress(e.progress)),t instanceof _?this.parseLiveChannelFields(t,e):t instanceof d&&this.parseLiveStreamFields(t,e),Object.prototype.hasOwnProperty.call(e,"spherical"))switch(""+e.spherical){case"1":case"true":t.spherical=!0;break;default:t.spherical=!1;}return Object.prototype.hasOwnProperty.call(e,"contentMeta")&&(t.contentMeta=this.parseContentMeta(e.contentMeta)),t}parseLiveStreamFields(e,t){let r=s.field(t,"liveStream");Object.prototype.hasOwnProperty.call(r,"endDate")&&(e.streamEnd=this.parseIso8266Date(r.endDate)),Object.prototype.hasOwnProperty.call(r,"thankYouImageUrl")&&(e.streamEndThankYouImageUrl=r.thankYouImageUrl),Object.prototype.hasOwnProperty.call(r,"waitingForTransmissionImageUrl")&&(e.streamWaitingForTransmissionImageUrl=r.waitingForTransmissionImageUrl),Object.prototype.hasOwnProperty.call(r,"lowLatencyMode")&&(e.lowLatencyMode=r.lowLatencyMode);}parseIso8266Date(e){let t=new Date(e);return new Date(t.getTime())}parseLiveChannelFields(e,t){e.id=t.id,e.name=null!=t.channel?t.channel.name:t.title;}parseMediaSource(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let i=new y;if(Object.prototype.hasOwnProperty.call(a,"customParams"))if(B.__implements(a.customParams,I))i.customParams=a.customParams;else if(B.__instanceof(a.customParams,k)){let e=0,t=s.fields(a.customParams);for(;e<t.length;){let r=t[e];++e,i.customParams.h[r]=s.field(a.customParams,r);}}Object.prototype.hasOwnProperty.call(a,"id")&&(i.id=a.id),Object.prototype.hasOwnProperty.call(a,"url")?i.url=a.url:this.reportErrors&&this.reportError(M.WARNING,"media source need url attribute to be present"),Object.prototype.hasOwnProperty.call(a,"width")&&(i.width=a.width),Object.prototype.hasOwnProperty.call(a,"height")&&(i.height=a.height),Object.prototype.hasOwnProperty.call(a,"contentType")&&(i.contentType=a.contentType),Object.prototype.hasOwnProperty.call(a,"drm")&&(i.drm=this.parseDrm(a.drm)),t.push(i);}return t}parseDrm(e){return {provider:s.field(e,"provider"),selectedDrmSystem:s.field(e,"selectedDrmSystem"),playready:this.parseDrmData(s.field(e,"playready")),widevine:this.parseDrmData(s.field(e,"widevine")),fairplay:this.parseDrmData(s.field(e,"fairplay"))}}parseDrmData(e){return null==e?null:{laUrl:s.field(e,"laUrl"),customData:s.field(e,"customData"),certUrl:s.field(e,"certUrl"),audioRobustness:s.field(e,"audioRobustness"),videoRobustness:s.field(e,"videoRobustness")}}parseMediaSourceWithFallbacls(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=[],i=0;for(;i<a.length;){let e=a[i];++i;let t=new y;Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=e.customParams),Object.prototype.hasOwnProperty.call(e,"id")&&(t.id=e.id),Object.prototype.hasOwnProperty.call(e,"url")?t.url=e.url:this.reportErrors&&this.reportError(M.WARNING,"media source need url attribute to be present"),Object.prototype.hasOwnProperty.call(e,"width")&&(t.width=e.width),Object.prototype.hasOwnProperty.call(e,"height")&&(t.height=e.height),Object.prototype.hasOwnProperty.call(e,"contentType")&&(t.contentType=e.contentType),s.push(t);}t.push(s);}return t}parseMediaAudioSet(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=new w;Object.prototype.hasOwnProperty.call(a,"customParams")&&(s.customParams=a.customParams),Object.prototype.hasOwnProperty.call(a,"id")&&(s.id=a.id),Object.prototype.hasOwnProperty.call(a,"languageCode")?(s.name=u.getLanguageNativeNameByCode(a.languageCode),s.languageCode=a.languageCode):this.reportErrors?this.reportError(M.WARNING,"media audio set need languageCode attribute to be present"):Object.prototype.hasOwnProperty.call(a,"name")&&(s.name=a.name),t.push(s);}return t}parseMediaDetails(e){let t=new g;return Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=s.field(e,"customParams")),Object.prototype.hasOwnProperty.call(e,"descriptionLong")&&(t.descriptionLong=e.descriptionLong),Object.prototype.hasOwnProperty.call(e,"descriptionShort")&&(t.descriptionShort=e.descriptionShort),Object.prototype.hasOwnProperty.call(e,"directors")&&(t.directors=e.directors),Object.prototype.hasOwnProperty.call(e,"genres")&&(t.genres=this.parseMediaGenres(e.genres)),Object.prototype.hasOwnProperty.call(e,"mediaCast")&&(t.mediaCast=e.mediaCast),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.tags=e.tags),Object.prototype.hasOwnProperty.call(e,"year")&&(t.year=e.year),t}parseMediaGenres(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=new v;Object.prototype.hasOwnProperty.call(a,"customParams")&&(s.customParams=a.customParams),Object.prototype.hasOwnProperty.call(a,"id")&&(s.id=a.id),Object.prototype.hasOwnProperty.call(a,"name")?s.name=a.name:this.reportErrors&&this.reportError(M.WARNING,"media genre need name attribute to be present"),t.push(s);}return t}parseMediaPlaybackInfo(e){let t=new O;return Object.prototype.hasOwnProperty.call(e,"currentTime")&&(t.currentTime=e.currentTime),Object.prototype.hasOwnProperty.call(e,"isPlaying")&&(t.isPlaying=e.isPlaying),Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=e.customParams),t}parseProgress(e){let t=new j;if(Object.prototype.hasOwnProperty.call(e,"segments")){let r=e.segments;null!=r&&(r instanceof Array&&(t.segments=r),"string"==typeof r&&(t.segmentsUrl=r));}if(Object.prototype.hasOwnProperty.call(e,"markers")){let r=e.markers;null!=r&&(r instanceof Array&&(t.markers=r),"string"==typeof r&&(t.markersUrl=r));}return Object.prototype.hasOwnProperty.call(e,"thumbnails")&&(t.thumbnails=e.thumbnails),t}parseContentMeta(e){let t=new A,r=0,a=s.fields(e);for(;r<a.length;){let i=a[r];++r,t.h[i]=s.field(e,i);}return t}parseMediaSettings(e){let t=new P;return Object.prototype.hasOwnProperty.call(e,"hasConcurrencyControl")&&(t.hasConcurrencyControl=e.hasConcurrencyControl),Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=e.customParams),t}parseMediaUserSettings(e){let t=new b;return Object.prototype.hasOwnProperty.call(e,"hasWatchingFinished")&&(t.hasWatchingFinished=e.hasWatchingFinished),Object.prototype.hasOwnProperty.call(e,"isFavorite")&&(t.isFavorite=e.isFavorite),Object.prototype.hasOwnProperty.call(e,"resumePostion")&&(t.resumePostion=e.resumePostion),Object.prototype.hasOwnProperty.call(e,"wasWatched")&&(t.wasWatched=e.wasWatched),t}parseMediaImages(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=new S;Object.prototype.hasOwnProperty.call(a,"customParams")&&(s.customParams=a.customParams),Object.prototype.hasOwnProperty.call(a,"id")&&(s.id=a.id),Object.prototype.hasOwnProperty.call(a,"url")?s.url=a.url:this.reportErrors&&this.reportError(M.WARNING,"media image need url attribute to be present"),Object.prototype.hasOwnProperty.call(a,"width")&&(s.width=a.width),Object.prototype.hasOwnProperty.call(a,"height")&&(s.height=a.height),t.push(s);}return t}parseMediaSubtitleSets(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=new f;Object.prototype.hasOwnProperty.call(a,"customParams")&&(s.customParams=a.customParams),Object.prototype.hasOwnProperty.call(a,"id")&&(s.id=a.id),Object.prototype.hasOwnProperty.call(a,"url")?s.url=a.url:this.reportErrors&&this.reportError(M.WARNING,"media subtitle set need url attribute to be present"),Object.prototype.hasOwnProperty.call(a,"languageCode")?(s.name=u.getLanguageNativeNameByCode(a.languageCode),s.languageCode=a.languageCode):this.reportErrors?this.reportError(M.WARNING,"media subtitle set need languageCode attribute to be present"):Object.prototype.hasOwnProperty.call(a,"name")&&(s.name=a.name),t.push(s);}return t}}D.__name__="bs.player.plugin.dataProvider.BradmaxMediaParser",Object.assign(D.prototype,{__class__:D});var C=require("bs.util.BrowserTools");class I{}I.__name__="haxe.IMap",I.__isInterface__=!0;class N extends Error{constructor(e,t,r){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=r?r:this;}unwrap(){return this.__nativeException}static caught(e){return e instanceof N?e:e instanceof Error?new N(e.message,null,e):new L(e,null,e)}}N.__name__="haxe.Exception",N.__super__=Error,Object.assign(N.prototype,{__class__:N});class L extends N{constructor(e,t,r){super(String(e),t,r),this.value=e;}unwrap(){return this.value}}L.__name__="haxe.ValueException",L.__super__=N,Object.assign(L.prototype,{__class__:L});var U=require("haxe.ds.List");class R{constructor(e,t){this.item=e,this.next=t;}}R.__name__="haxe.ds._List.ListNode",Object.assign(R.prototype,{__class__:R});var A=require("haxe.ds.StringMap");class B{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let r=B.__nativeClassName(e);return null!=r?B.__resolveNativeClass(r):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let r=typeof e;switch("function"==r&&(e.__name__||e.__ename__)&&(r="object"),r){case"function":return "<function>";case"object":if(e.__enum__){let r=a[e.__enum__].__constructs__[e._hx_index],s=r._hx_name;return r.__params__?(t+="\t",s+"("+function(a){let s=[];{let a=0,i=r.__params__;for(;a<i.length;){let r=i[a];a+=1,s.push(B.__string_rec(e[r],t));}}return s}().join(",")+")"):s}if(e instanceof Array){let r="[";t+="\t";let a=0,s=e.length;for(;a<s;){let s=a++;r+=(s>0?",":"")+B.__string_rec(e[s],t);}return r+="]",r}let r;try{r=e.toString;}catch(e){return "???"}if(null!=r&&r!=Object.toString&&"function"==typeof r){let t=e.toString();if("[object Object]"!=t)return t}let s="{\n";t+="\t";let i=null!=e.hasOwnProperty,l=null;for(l in e)i&&!e.hasOwnProperty(l)||"prototype"!=l&&"__class__"!=l&&"__super__"!=l&&"__interfaces__"!=l&&"__properties__"!=l&&(2!=s.length&&(s+=", \n"),s+=t+l+" : "+B.__string_rec(e[l],t));return s+="\n"+(t=t.substring(1))+"}",s;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let r=e.__interfaces__;if(null!=r&&(null==e.__super__||e.__super__.__interfaces__!=r)){let e=0,a=r.length;for(;e<a;){let a=r[e++];if(a==t||B.__interfLoop(a,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case G:return "boolean"==typeof e;case k:return null!=e;case T:return "number"==typeof e;case F:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(B.__downcastCheck(e,t))return !0}else if("object"==typeof t&&B.__isNativeObj(t)&&e instanceof t)return !0;return t==H&&null!=e.__name__||(t==J&&null!=e.__ename__||null!=e.__enum__&&a[e.__enum__]==t)}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&B.__interfLoop(B.getClass(e),t)}static __implements(e,t){return B.__interfLoop(B.getClass(e),t)}static __nativeClassName(e){let t=B.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=B.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}B.__name__="js.Boot";class q{static getSessionStorage(){try{let e=window.sessionStorage;if(e.getItem(""),0==e.length){let t="_hx_"+Math.random();e.setItem(t,t),e.removeItem(t);}return e}catch(e){return null}}}function W(e,r){return null==r?null:(null==r.__id__&&(r.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:a=e.hx__closures__[r.__id__],null==a&&(a=r.bind(e),e.hx__closures__[r.__id__]=a),a);var a;}q.__name__="js.Browser",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var F={},k={},T=Number,G=Boolean,H={},J={};B.__toStr={}.toString,x._hx_skip_constructor=!1,E.__plugfaces__="IPlugin";}(exports,window);!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.video=e.bs.player.plugin.video||{};var i=require("haxe.EReg"),s=require("haxe.EReg"),a=require("haxe.HxOverrides");Math.__name__="Math";var n=require("haxe.Reflect");class r{static string(e){return X.__string_rec(e,"")}static parseInt(e){let t=parseInt(e);return isNaN(t)?null:t}}r.__name__="Std";var l=require("haxe.StringTools");class o{static getInstanceFields(e){let t=[];for(;null!=e;){let i=0,s=Object.getOwnPropertyNames(e.prototype);for(;i<s.length;){let e=s[i];switch(++i,e){case"__class__":case"__properties__":case"constructor":break;default:-1==t.indexOf(e)&&t.push(e);}}e=e.__super__;}return t}}o.__name__="Type";var d=require("bs.player.composer.Embeder"),h=require("bs.player.core.events.AdEvent"),u=require("bs.player.core.events.ChromecastEvent"),m=require("bs.player.core.events.ControlEvent"),c=require("bs.player.core.events.DataProviderEvent"),v=require("bs.player.core.events.DisplayEvent"),y=require("bs.player.core.events.ResizeEvent"),p=require("bs.player.core.events.VideoEvent"),g=require("bs.player.core.manager.I18NHelper"),b=require("bs.player.core.model.Media"),S=require("bs.player.core.model.Live"),P=require("bs.player.core.model.LiveStream"),E=require("bs.player.core.model.MediaSource"),f=require("bs.player.core.model.SubtitlesSet"),T=require("bs.player.core.model.SubtitleEntry"),w=require("bs.player.core.model.SubtitleEntryText"),_=require("bs.player.core.model.AudioSet");class C{}C.__name__="bs.player.core.model.DrmCustomLicenseServerHandler",C.__isInterface__=!0,Object.assign(C.prototype,{__class__:C,initContext:null,destroy:null,customFairplayCertificateRequestHandler:null,customFairplayLicenseRequestHandler:null});var k=require("bs.player.core.model.Point");class A{constructor(){A._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=X.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,i=exports.configuration;this.pluginConfig=null!=i&&Object.prototype.hasOwnProperty.call(i,t)?n.field(i,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}A.__name__="bs.player.core.plugin.PluginBase",Object.assign(A.prototype,{__class__:A,uid:null,context:null,className:null,pluginConfig:null,variables:null,eventHub:null,parentDisplay:null,display:null,player:null,pluginName:null});class V{constructor(e,t){this.context=e,this.playerContainer=t,this.isInitialized=!1,m.add(e,"selectSubtitles",J(this,this.onSelectSubtitles)),y.add(e,"resize",J(this,this.onResize));}destroy(){m.remove(this.context,"selectSubtitles",J(this,this.onSelectSubtitles)),y.remove(this.context,"resize",J(this,this.onResize)),this.playerContainer=null;}onSelectSubtitles(e){this.initSubtitlesPlaceholder();}onResize(e){if(null!=this.subtitlesParentContainer){let e=this.subtitlesParentContainer.getBoundingClientRect().height;this.subtitlesContainer.style.fontSize=Math.floor(.05*e)+"px",this.subtitlesContainer.style.lineHeight=Math.floor(.08*e)+"px";}}initSubtitlesPlaceholder(){if(this.isInitialized)return;this.isInitialized=!0;let e=this.playerContainer.getElementsByClassName("htmlSubtitlesPlaceholder");if(0==e.length){this.subtitlesParentContainer=window.document.createElement("div"),this.subtitlesParentContainer.setAttribute("class","htmlSubtitlesPlaceholder"),this.subtitlesParentContainer.setAttribute("style","height: 100%;left: 0px;position: absolute;top: 0px;width: 100%;");let e=this.playerContainer.childNodes,t=e.length-1,i=0,s=e.length;for(;i<s;){let s=i++;"video"==e.item(s).nodeName.toLowerCase()&&(t=s);}t<e.length-1?this.playerContainer.insertBefore(this.subtitlesParentContainer,e[t+1]):this.playerContainer.appendChild(this.subtitlesParentContainer);}else this.subtitlesParentContainer=e.item(0),this.subtitlesParentContainer.innerHTML="";null==this.subtitlesContainer?(this.subtitlesContainer=window.document.createElement("div"),this.subtitlesContainer.style.position="absolute",this.subtitlesContainer.style.display="table",this.subtitlesContainer.style.textAlign="center",this.subtitlesContainer.style.overflow="initial",this.subtitlesContainer.style.pointerEvents="none",this.subtitlesContainer.style.bottom="5%",this.subtitlesContainer.style.left="10%",this.subtitlesContainer.style.width="80%",this.subtitlesContainer.style.height="auto",this.subtitlesContainer.style.justifyContent="center",this.subtitlesContainer.style.color="white",this.subtitlesContainer.style.backgroundColor="transparent",this.subtitlesContainer.style.fontFamily='"Helvetica Neue", Helvetica, Arial,sans-serif',this.subtitlesContainer.style.textShadow="0px 0px 7px #000000, 0px 0px 4px #000000, 0px 0px 10px #000000"):null!=this.subtitlesContainer.parentElement&&this.subtitlesContainer.parentElement.removeChild(this.subtitlesContainer),this.onResize(),this.subtitlesParentContainer.appendChild(this.subtitlesContainer);}onCueEnter(e){this.initSubtitlesPlaceholder();let t=window.document.createElement("p"),i=[],s=0,a=e.texts;for(;s<a.length;)i.push(a[s++].text);t.innerText=i.join("\n"),t.style.margin="0",t.style.display="table-row",null==this.subtitlesParentContainer.parentNode&&this.playerContainer.appendChild(this.subtitlesParentContainer),e.customParams.h._element=t,this.subtitlesContainer.appendChild(t);}onCueExit(e){this.subtitlesContainer.removeChild(e.customParams.h._element);}}V.__name__="bs.player.core.renderer.SubtitlesRenderer",Object.assign(V.prototype,{__class__:V,context:null,playerContainer:null,subtitlesParentContainer:null,subtitlesContainer:null,isInitialized:null});class I extends A{constructor(){A._hx_skip_constructor=!0,super(),A._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.videoPlaybackRate=1,this.lastMediaError=null,this.permamentPlaybackErrorTimer=null,this.videoCurrentTime=null,this.volumeValue=null,this.minAudioTracksForInfo=2,this.chromecastSender=$,this.chromecastSession=$,this.chromecastConnected=!1,this.videoPlayers=[],this.videoPlayersClasses=[],super._hx_constructor(),this.isAdVideoTagInitializedForMobiles=!1,this.isInStreamAdPlaying=!1,this.currentMedia=null,this.lastDataProviderEvent=null,this.shouldVideoPlay=!1;}isSingleVideoTagPlay(){return !(!F.isiOS&&"Safari"!=F.browserName)||F.isSamsungSmartTVTizen}hasInStreamAds(){let e=this.get_variables();return Object.prototype.hasOwnProperty.call(e,"yospace")}hasDefinedAds(){let e=this.get_variables();if(Object.prototype.hasOwnProperty.call(e,"freewheel"))return !0;{let e=this.get_variables();return Object.prototype.hasOwnProperty.call(e,"advertisement")}}hasAdvertisementPlugin(){let e=exports.bs.player.plugin;return null!=e&&(null!=n.field(e,"freewheel")&&null!=n.field(n.field(e,"freewheel"),"FreeWheel")||null!=n.field(e,"advertisement")&&null!=n.field(n.field(e,"advertisement"),"AdvertisementDataProvider"))}create(){let e;if(super.create(),this.htmlVideo=this.getVideoElementReadyForAutoplayOrCreate(),this.htmlVideo.controls=!1,this.isSingleVideoTagPlay()?this.htmlAdVideo=this.htmlVideo:(this.htmlAdVideo=this.getVideoElementReadyForAutoplayOrCreate(),this.htmlAdVideo.controls=!1),this.htmlAdVideo.classList.add("bs-v-supporting-ad-play"),this.shouldVideoPlay=1==this.get_variables().autoplay,F.isiOS&&"Safari"==F.browserName&&1==this.get_variables().autoplay&&1==this.get_variables().mute&&(this.get_variables().iosInlineVideo=!0,this.log("BRADMAX PLAYER NOTICE:\nBrowser run with iosInlineVideo:true mode, because it is required for autoplay muted video for iOS.\n","warn")),F.isiOS){let t=this.get_variables();e=0==Object.prototype.hasOwnProperty.call(t,"iosInlineVideo")||1==X.__cast(n.field(this.get_variables(),"iosInlineVideo"),te);}else e=!1;e&&(this.htmlVideo.setAttribute("playsinline",""),this.htmlVideo.setAttribute("webkit-playsinline","")),this.initVideoElementSize(this.htmlVideo),this.initVideoElementSize(this.htmlAdVideo);let t=this.get_variables();Object.prototype.hasOwnProperty.call(t,"mute")&&X.__cast(n.field(this.get_variables(),"mute"),te)&&(this.htmlVideo.muted=this.htmlAdVideo.muted=!0);let i=this.get_variables();if(Object.prototype.hasOwnProperty.call(i,"playbackRate")){let e=n.field(this.get_variables(),"playbackRate");!isNaN(e)&&isFinite(e)&&e>=-1&&(this.videoPlaybackRate=e);}this.updateVideoMediaElementCrossOrigin(),this.triggerVideoMediaElementInitEvent(),this.div=this.get_parentDisplay(),this.divFlash=window.document.createElement("div"),this.div.appendChild(this.divFlash),this.isSingleVideoTagPlay()||this.div.appendChild(this.htmlAdVideo),this.div.appendChild(this.htmlVideo),this.nativeVideo=this.htmlVideo,this.nativeAdVideo=this.htmlAdVideo,this.initVideoPlayersClasses();let s=this.context;u.add(s,"connected",J(this,this.onChromecastConnect)),u.add(s,"disconnected",J(this,this.onChromecastDisonnect)),m.add(s,"skinPause",J(this,this.onPauseEvent)),m.add(s,"skinStop",J(this,this.onStopEvent)),m.add(s,"skinPlay",J(this,this.onPlayEvent)),m.add(s,"skinPlayPause",J(this,this.onPlayPauseEvent)),m.add(s,"skinSeek",J(this,this.onSeekEvent)),m.add(s,"selectAudio",J(this,this.onSelectAudioEvent)),m.add(s,"selectSubtitles",J(this,this.onSelectSubtitlesEvent)),m.add(s,"skinVolume",J(this,this.onVolumeEvent)),m.add(s,"skinMute",J(this,this.onMuteEvent)),m.add(s,"skinUnmute",J(this,this.onUnmuteEvent));let a=this;c.add(s,"mediaMetadataData",(function(e){a.onSetDataEvent(e,false);}));let r=this;c.add(s,"adMetadataData",(function(e){r.onSetDataEvent(e,true);})),y.add(s,"resize",J(this,this.onPlayerResizeEvent)),p.add(s,"ready",J(this,this.onVideoReadyEvent)),p.add(s,"connectionError",J(this,this.onNetworkErrorEvent)),p.add(s,"mediaError",J(this,this.onVideoErrorEvent)),p.add(s,"loadError",J(this,this.onVideoErrorEvent)),p.add(s,"currentTimeChange",J(this,this.onVideoTimeChange)),p.add(s,"drmAuthenticationError",J(this,this.onVideoDrmAuthError)),p.add(s,"drmModuleCrush",J(this,this.onVideoDrmModuleCrush)),h.add(s,"adPlay",J(this,this.onAdPlay)),h.add(s,"adPause",J(this,this.onAdPause)),h.add(s,"adResume",J(this,this.onAdResume)),h.add(s,"adMediaError",J(this,this.onAdErrorEvent)),p.add(s,"playing",J(this,this.onVideoPlaying)),h.add(s,"adPlaying",J(this,this.onAdVideoPlaying)),p.add(s,"currentTimeChange",J(this,this.onVideoPlaying)),h.add(s,"adCurrentTimeChange",J(this,this.onAdVideoPlaying)),h.add(s,"adInStreamPlaying",J(this,this.onAdInStreamPlaying)),h.add(s,"adInStreamPlayingSilent",J(this,this.onAdInStreamPlaying)),h.add(s,"adInStreamEnd",J(this,this.onAdInStreamEnd)),h.add(s,"adInStreamEndSilent",J(this,this.onAdInStreamEnd)),h.add(s,"adConnectionError",J(this,this.onNetworkErrorEvent)),m.add(s,"setVideoPlaybackRate",J(this,this.onSetVideoPlaybackRate)),this.setDefaultVariablesFromVideoPluginConfig(),this.subtitlesRenderer=new V(this.context,this.get_parentDisplay()),this.externalSubtitlesController=new R(this.context,this.subtitlesRenderer),null!=this.get_variables().locale&&(U.locale=this.get_variables().locale),window.document.removeEventListener("visibilitychange",J(this,this.onSaveBandwidthModeVisibilityChange));let l=this.get_variables();Object.prototype.hasOwnProperty.call(l,"saveBandwidthMode")&&X.__cast(this.get_variables().saveBandwidthMode,te)&&window.document.addEventListener("visibilitychange",J(this,this.onSaveBandwidthModeVisibilityChange));}onSaveBandwidthModeVisibilityChange(){null!=this.playerInstance&&this.playerInstance.saveBandwidthModeVisibilityChange("visible"!=window.document.visibilityState);}initVideoElementSize(e){null!=e&&null!=e.style&&(e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%");}postActivate(){super.postActivate(),this.updateVideoMediaElementCrossOrigin(),this.triggerVideoMediaElementInitEvent(),1==this.get_variables().mute&&(n.deleteField(this.get_variables(),"mute"),new m("skinMute").dispatch(this.context));}updateVideoMediaElementCrossOrigin(){if(null==this.htmlVideo)return;let e=this.get_variables();Object.prototype.hasOwnProperty.call(e,"anonymousCrossOrigin")&&X.__cast(n.field(this.get_variables(),"anonymousCrossOrigin"),te)?"anonymous"!=this.htmlVideo.crossOrigin&&this.htmlVideo.setAttribute("crossOrigin","anonymous"):null!=this.htmlVideo.crossOrigin&&this.htmlVideo.removeAttribute("crossOrigin");}triggerVideoMediaElementInitEvent(){if(null!=this.htmlVideo){let e=new p("videoMediaElementInit");e.data=this.htmlVideo,e.dispatch(this.context);}}destroy(){u.remove(this.context,"connected",J(this,this.onChromecastConnect)),u.remove(this.context,"disconnected",J(this,this.onChromecastDisonnect)),m.remove(this.context,"skinPause",J(this,this.onPauseEvent)),m.remove(this.context,"skinPlay",J(this,this.onPlayEvent)),m.remove(this.context,"skinPlayPause",J(this,this.onPlayPauseEvent)),m.remove(this.context,"skinSeek",J(this,this.onSeekEvent)),m.remove(this.context,"selectAudio",J(this,this.onSelectAudioEvent)),m.remove(this.context,"selectSubtitles",J(this,this.onSelectSubtitlesEvent)),m.remove(this.context,"skinVolume",J(this,this.onVolumeEvent)),m.remove(this.context,"skinMute",J(this,this.onMuteEvent)),m.remove(this.context,"skinUnmute",J(this,this.onUnmuteEvent));let e=this;c.remove(this.context,"mediaMetadataData",(function(t){e.onSetDataEvent(t,false);}));let t=this;c.remove(this.context,"adMetadataData",(function(e){t.onSetDataEvent(e,true);})),y.remove(this.context,"resize",J(this,this.onPlayerResizeEvent)),p.remove(this.context,"ready",J(this,this.onVideoReadyEvent)),p.remove(this.context,"connectionError",J(this,this.onNetworkErrorEvent)),p.remove(this.context,"mediaError",J(this,this.onVideoErrorEvent)),p.remove(this.context,"loadError",J(this,this.onVideoErrorEvent)),p.remove(this.context,"currentTimeChange",J(this,this.onVideoTimeChange)),p.remove(this.context,"drmAuthenticationError",J(this,this.onVideoDrmAuthError)),h.remove(this.context,"adPlay",J(this,this.onAdPlay)),h.remove(this.context,"adPause",J(this,this.onAdPause)),h.remove(this.context,"adResume",J(this,this.onAdResume)),h.remove(this.context,"adMediaError",J(this,this.onAdErrorEvent)),p.remove(this.context,"playing",J(this,this.onVideoPlaying)),h.remove(this.context,"adPlaying",J(this,this.onAdVideoPlaying)),p.remove(this.context,"currentTimeChange",J(this,this.onVideoPlaying)),h.remove(this.context,"adCurrentTimeChange",J(this,this.onAdVideoPlaying)),h.remove(this.context,"adInStreamPlaying",J(this,this.onAdInStreamPlaying)),h.remove(this.context,"adInStreamPlayingSilent",J(this,this.onAdInStreamPlaying)),h.remove(this.context,"adInStreamEnd",J(this,this.onAdInStreamEnd)),h.remove(this.context,"adInStreamEndSilent",J(this,this.onAdInStreamEnd)),h.remove(this.context,"adConnectionError",J(this,this.onNetworkErrorEvent)),m.remove(this.context,"setVideoPlaybackRate",J(this,this.onSetVideoPlaybackRate)),null!=this.externalSubtitlesController&&(this.externalSubtitlesController.destroy(),this.externalSubtitlesController=null),null!=this.subtitlesRenderer&&(this.subtitlesRenderer.destroy(),this.subtitlesRenderer=null),null!=this.currentMedia&&null!=this.currentMedia.drmCustomLicenseServerHandler&&this.currentMedia.drmCustomLicenseServerHandler.destroy(),this.currentMedia=null;let i=0,s=this.videoPlayers;for(;i<s.length;)s[i++].destroy();this.videoPlayers=null,null!=this.playerInstance&&this.playerInstance.destroy(),this.playerInstance=null,null!=this.adPlayerInstance&&this.adPlayerInstance.destroy(),this.adPlayerInstance=null,null!=this.nativeVideo&&null!=this.nativeVideo.parentElement&&null!=this.nativeVideo.load&&(this.nativeVideo.setAttribute("src",""),this.nativeVideo.load(),this.nativeVideo.parentElement.removeChild(this.nativeVideo)),this.nativeVideo=null,null!=this.nativeAdVideo&&null!=this.nativeAdVideo.parentElement&&null!=this.nativeAdVideo.load&&(this.nativeAdVideo.setAttribute("src",""),this.nativeAdVideo.load(),this.nativeAdVideo.parentElement.removeChild(this.nativeAdVideo)),this.nativeAdVideo=null,null!=this.htmlVideo&&null!=this.htmlVideo.parentElement&&null!=this.htmlVideo.load&&(this.htmlVideo.setAttribute("src",""),this.htmlVideo.load(),this.htmlVideo.parentElement.removeChild(this.htmlVideo)),this.htmlVideo=null,null!=this.htmlAdVideo&&null!=this.htmlAdVideo.parentElement&&null!=this.htmlAdVideo.load&&(this.htmlAdVideo.setAttribute("src",""),this.htmlAdVideo.load(),this.htmlAdVideo.parentElement.removeChild(this.htmlAdVideo)),this.htmlAdVideo=null,null!=this.divFlash&&null!=this.divFlash.parentElement&&this.divFlash.parentElement.removeChild(this.divFlash),this.divFlash=null,this.div=null,this.videoPlayersClasses=null,this.isAdVideoTagInitializedForMobiles=null,this.videoPlaybackRate=1,window.document.removeEventListener("visibilitychange",J(this,this.onSaveBandwidthModeVisibilityChange)),super.destroy();}initVideoPlayersClasses(){if("Safari"==F.browserName&&!F.isSamsungSmartTVTizen||F.isMobile()){this.videoPlayersClasses.push(N);let e=0,t=this.get_player().pluginsVideo;for(;e<t.length;)this.videoPlayersClasses.push(X.getClass(t[e++]));}else {let e=0,t=this.get_player().pluginsVideo;for(;e<t.length;)this.videoPlayersClasses.push(X.getClass(t[e++]));this.videoPlayersClasses.push(N);}}moveSelectedMediaSourceToFirstPosition(e,t){let i=[];i.push(e[t]);let s=0,a=e.length;for(;s<a;){let a=s++;a!=t&&i.push(e[a]);}return i}onChromecastConnect(e){this.chromecastConnected=!0,this.chromecastSession=e.data.session,this.chromecastSender=e.data.sender,this.videoPlayersClasses[0].__name__!=O.__name__&&this.videoPlayersClasses.splice(0,0,O),this.onSetDataEvent(this.lastDataProviderEvent,!1),this.updateChromecastPlayerInstanceSession(this.chromecastSession,this.chromecastSender);}onChromecastDisonnect(e){this.chromecastConnected=!1,this.chromecastSession=null,this.playerInstance instanceof O&&this.playerInstance.onChromecastDisonnect(),this.videoPlayersClasses[0].__name__==O.__name__&&this.videoPlayersClasses.shift(),this.onSetDataEvent(this.lastDataProviderEvent,!1),null!=this.currentMedia&&this.currentMedia.mediaPlaybackInfo.currentTime>0&&(this.currentMedia.mediaUserSettings.resumePostion=this.currentMedia.mediaPlaybackInfo.currentTime),null!=this.currentMedia&&this.currentMedia.mediaPlaybackInfo.isPlaying&&new m("skinPlay").dispatch(this.context);}updateChromecastPlayerInstanceSession(e,t){this.playerInstance instanceof O&&this.playerInstance.setSession(this.chromecastSession,this.chromecastSender);}setupParamsForFallbackMechanism(e,t){this.currentMedia=e,this.lastDataProviderEvent=t,this.videoCurrentTime=null,this.currentMedia.mediaUserSettings.resumePostion>0&&(this.videoCurrentTime=this.currentMedia.mediaUserSettings.resumePostion);}onSetDataEvent(e,t){this.updateVideoMediaElementCrossOrigin();let i=this;if((F.isiOS||"Safari"==F.browserName)&&1==this.get_variables().autoplay&&"1"!=this.htmlVideo.getAttribute(d.VIDEO_TAG_FOR_AUTOPLAY_INITIALSED))if(d.hasHtmlVideoReadyForAutoplay())this.recreateNativeVideoElement();else if(d.hasPendingVideoElementsForLaterAutoplay())return void d.addListenerForVideoElementForAutoplay((function(){i.onSetDataEvent(e,t);}));if(null!=this.playerInstance&&(this.isSingleVideoTagPlay()||this.hasInStreamAds())&&this.playerInstance.destroy(),null==this.videoPlayersClasses)return;if(null==e.data)return;let s,a=-1,n=null;t?n=e.data.media:(n=e.data,this.setupParamsForFallbackMechanism(n,e));let r=this.videoPlayersClasses;Object.prototype.hasOwnProperty.call(n.customParams.h,"preferedVideoPlayersClassesOrder")&&(r=this.makePreferedVideoClassesInOrder(n.customParams.h.preferedVideoPlayersClassesOrder));let l=0,o=r.length;for(;l<o;){let e=l++;s=r[e];let t=n.failedPlaybackPlayers,i=r[e].__name__;if(Object.prototype.hasOwnProperty.call(t.h,i))continue;let o=0,d=n.source.length;for(;o<d;){let t=o++;if(s.canPlay(n.source[t])){a=e,n.source=this.moveSelectedMediaSourceToFirstPosition(n.source,t);break}}if(a>-1)break}if(a<0)return void this.dispatchNotSupportedVideoError();let h,u=null,m=0,c=r.length;for(;m<c;){let e=m++;s=r[e],e==a&&(t?(this.shouldPlayerInstanceBeUpdated(this.adPlayerInstance,r[e])&&this.adPlayerInstance.destroy(),u=this.adPlayerInstance=s.getInstance(this.context,t)):(this.shouldPlayerInstanceBeUpdated(this.playerInstance,r[e])&&this.playerInstance.destroy(),u=this.playerInstance=s.getInstance(this.context,t)),u.variables=this.get_variables(),u.minAudioTracksForInfo=this.minAudioTracksForInfo,!t&&"Safari"!=F.browserName&&null!=this.nativeVideo.textTracks&&this.nativeVideo.textTracks.length>0&&null!=this.nativeVideo.replaceWith&&this.recreateNativeVideoElement(),u.attachVideo(t?this.nativeAdVideo:this.nativeVideo));}if(null!=this.videoPlaybackRate){let e=this.videoPlaybackRate;h=!isNaN(e);}else h=!1;h&&u.setPlaybackRate(this.videoPlaybackRate),null!=this.volumeValue&&u.volume(this.volumeValue),u.setData(n),this.externalSubtitlesController.setData(n);}recreateNativeVideoElement(){let e=this.getVideoElementReadyForAutoplayOrCreate();if(e.controls=!1,null!=this.nativeVideo.attributes)try{let t=this.nativeVideo.attributes,i=0;for(;i<t.length;){let s=t[i];++i,"src"!=s.name&&e.setAttribute(s.name,s.value);}}catch(e){}e.muted=this.htmlVideo.muted,e.volume=this.htmlVideo.volume,e.playbackRate=this.htmlVideo.playbackRate,this.htmlVideo=e,this.setDefaultPoster(this.htmlVideo),this.nativeVideo.replaceWith(this.htmlVideo),this.nativeVideo=this.htmlVideo,this.updateVideoMediaElementCrossOrigin(),this.triggerVideoMediaElementInitEvent();}dispatchNotSupportedVideoError(){let e=new p("playbackPermamentError");e.data={additionalData:{message:"Provided video is not supported."}},this.lastMediaError=e,this.showMediaErrorMessage(e);}getVideoElementReadyForAutoplayOrCreate(){let e=d.getHtmlVideoReadyForAutoplay(),t=F.isMobile()&&"Safari"==F.browserName;if(t&&null==e&&null!=I.lastUsedVideoElement){let t=window.bradmax.player.list(),i=!1,s=0;for(;s<t.length;)if(t[s++].uid==I.lastUsedVideoElementContext){i=!0;break}I.lastUsedVideoElementContext!=this.context&&i||(e=I.lastUsedVideoElement);}return null==e&&(e=window.document.createElement("video")),t&&(I.lastUsedVideoElement=e,I.lastUsedVideoElementContext=this.context),this.setDefaultPoster(e),e}setDefaultPoster(e){F.isAndroid&&null!=e&&(e.poster="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=");}makePreferedVideoClassesInOrder(e){let t=[],i=0;for(;i<e.length;){let s=e[i];++i,-1!=this.videoPlayersClasses.indexOf(s)&&t.push(s);}return t}shouldPlayerInstanceBeUpdated(e,t){return null!=e&&X.getClass(e)!=t}setDefaultVariablesFromVideoPluginConfig(){let e,t=["qualitySelectionEnabled","minAudioTracksForInfo"],i=0;for(;i<t.length;){let e,s=t[i];if(++i,null!=this.pluginConfig&&Object.prototype.hasOwnProperty.call(this.pluginConfig,s)&&null!=this.get_variables()){let t=this.get_variables();e=!Object.prototype.hasOwnProperty.call(t,s);}else e=!1;e&&(this.get_variables()[s]=n.field(this.pluginConfig,s));}if(null!=this.get_variables()){let t=this.get_variables();e=Object.prototype.hasOwnProperty.call(t,"minAudioTracksForInfo");}else e=!1;if(e){let e=n.field(this.get_variables(),"minAudioTracksForInfo");e>=1&&(this.minAudioTracksForInfo=e);}}onPlayerResizeEvent(e){null==this.playerInstance&&e.data instanceof k||this.playerInstance.playerResize(e.data);}onSetVideoPlaybackRate(e){let t;if(this.videoPlaybackRate=parseFloat(e.data),null!=this.playerInstance&&null!=this.videoPlaybackRate){let e=this.videoPlaybackRate;t=isNaN(e);}else t=!0;t||this.playerInstance.setPlaybackRate(this.videoPlaybackRate);}onVideoReadyEvent(e){}onPauseEvent(e){null!=this.playerInstance&&(this.shouldVideoPlay=!1,this.playerInstance.pause());}onStopEvent(e){null!=this.playerInstance&&(this.shouldVideoPlay=!1,this.playerInstance.pause(),this.playerInstance.destroy());}log(e,t){null==t&&(t="log"),console&&("error"==t?console.error(e):"warn"==t?console.warn(e):console.log(e));}initAdVideoTagForMobilesAndPropagate(){if(null==this.playerInstance)return !1;let e=!0;if(!this.isAdVideoTagInitializedForMobiles&&!F.isWebView()&&(F.isMobile()||"Safari"==F.browserName)&&this.hasDefinedAds()&&this.hasAdvertisementPlugin()){if(!this.isSingleVideoTagPlay()||null==this.playerInstance||this.playerInstance instanceof N||(this.playerInstance.destroy(),e=!1),this.isAdVideoTagInitializedForMobiles=!0,null==this.adPlayerInstance){this.adPlayerInstance=N.getInstance(this.context,!0),this.adPlayerInstance.variables=this.get_variables(),this.adPlayerInstance.attachVideo(this.nativeAdVideo);let e=new b,t=new E;t.url=exports.mp4,e.source=[t],this.adPlayerInstance.setData(e);}this.adPlayerInstance.play(),this.adPlayerInstance.pause();}return e}onPlayEvent(e){this.initAdVideoTagForMobilesAndPropagate()&&(this.shouldVideoPlay=!0,this.playerInstance.play());}onPlayPauseEvent(e){this.initAdVideoTagForMobilesAndPropagate()&&(this.shouldVideoPlay=!this.shouldVideoPlay,this.playerInstance.playPause());}onSeekEvent(e){null!=this.playerInstance&&this.playerInstance.seek(e.data);}onSelectAudioEvent(e){}onSelectSubtitlesEvent(e){}onVolumeEvent(e){this.volumeValue=parseFloat(e.data),null!=this.playerInstance&&(this.htmlVideo.muted=this.volumeValue<=0,this.playerInstance.volume(this.volumeValue)),null!=this.adPlayerInstance&&(this.htmlAdVideo.muted=this.volumeValue<=0,this.adPlayerInstance.volume(this.volumeValue));}onMuteEvent(e){this.htmlVideo.muted=this.htmlAdVideo.muted=!0;}onUnmuteEvent(e){this.htmlVideo.muted=this.htmlAdVideo.muted=!1,this.htmlVideo.volume=0==this.htmlVideo.volume?1:this.htmlVideo.volume,this.htmlAdVideo.volume=0==this.htmlAdVideo.volume?1:this.htmlAdVideo.volume;}onAdPlay(e){null!=this.adPlayerInstance&&(this.shouldVideoPlay=!0,this.adPlayerInstance.play());}onAdPause(e){null!=this.adPlayerInstance&&(this.shouldVideoPlay=!1,this.adPlayerInstance.pause());}onAdResume(e){null!=this.adPlayerInstance&&(this.shouldVideoPlay=!0,this.adPlayerInstance.play());}onVideoPlaying(e){this.isSingleVideoTagPlay()||(null!=this.htmlVideo&&(this.htmlVideo.style.display="block"),null!=this.htmlAdVideo&&(this.htmlAdVideo.style.display="none"));}hasFallbackSourceToCheck(){let e=null!=this.currentMedia&&null!=this.currentMedia.source&&this.currentMedia.source.length>0&&Object.prototype.hasOwnProperty.call(this.currentMedia.source[0].customParams.h,"yospaceStream"),t=null==this.currentMedia.drmCustomLicenseServerHandler||F.isSamsungSmartTVTizen;return !(null==this.currentMedia||!this.currentMedia.hasFallbackSources()||null==this.lastDataProviderEvent)&&(t||e)}reloadVideoWithNextFallbackSource(){let e=null!=this.nativeAdVideo&&null!=this.nativeAdVideo.src&&!this.nativeAdVideo.paused;e&&(this.shouldVideoPlay=!1),this.log("BRADMAX PLAYER NOTICE:\nError occurred during video load. Trying to load next fallback video.\n","warn");let t=new p("mediaErrorUsingFallbackSource");t.data=this.currentMedia,t.dispatch(this.context),this.currentMedia.useFallbackSources(),this.shouldVideoPlay||1!=this.get_variables().autoplay||(this.get_variables().autoplay=!1),this.lastDataProviderEvent.dispatch(this.context),e&&new h("adPlaying").dispatch(this.context),this.shouldVideoPlay&&new m("skinPlay").dispatch(this.context);}reloadVideoWithNextSupportedPlayer(){this.log("BRADMAX PLAYER NOTICE:\nError occurred during video playback. Trying to use fallback player.\n","warn");let e=X.getClass(this.playerInstance).__name__;this.currentMedia.failedPlaybackPlayers.h[e]=e,this.lastDataProviderEvent.dispatch(this.context),new m("skinPlay").dispatch(this.context);}reloadVideoAfterNetworkProblem(){if(new v("closeMessage").dispatch(this.context),null!=this.playerInstance&&(this.playerInstance.destroy(),this.playerInstance=null),null!=this.adPlayerInstance&&(this.adPlayerInstance.destroy(),this.adPlayerInstance=null),null!=this.lastDataProviderEvent){if(this.lastDataProviderEvent.data instanceof b&&this.videoCurrentTime>0){let e=this.lastDataProviderEvent.data;null!=e.mediaUserSettings&&(e.mediaUserSettings.resumePostion=this.videoCurrentTime);}this.lastDataProviderEvent.dispatch(this.context);}new m("skinPlay").dispatch(this.context);}onNetworkErrorEvent(e){this.stopPermamentPlaybackErrorTimer(),this.hasFallbackSourceToCheck()?this.reloadVideoWithNextFallbackSource():this.showNetworkTemporaryErrorMessage(e);}onVideoErrorEvent(e){this.lastMediaError=e,this.stopPermamentPlaybackErrorTimer(),this.hasFallbackSourceToCheck()?this.hasInStreamAds()?H.delay(J(this,this.reloadVideoWithNextFallbackSource),0):this.reloadVideoWithNextFallbackSource():F.isAndroid?this.reloadVideoWithNextSupportedPlayer():(this.showMediaErrorMessage(e),this.playerInstance.pause());}onAdErrorEvent(e){this.hasFallbackSourceToCheck()?this.hasInStreamAds()?H.delay(J(this,this.reloadVideoWithNextFallbackSource),0):this.reloadVideoWithNextFallbackSource():F.isAndroid?this.reloadVideoWithNextSupportedPlayer():(this.showMediaErrorMessage(e),this.playerInstance.pause());}onVideoDrmAuthError(e){this.stopPermamentPlaybackErrorTimer();let t=new p("playbackPermamentError");t.data=e.data,t.dispatch(this.context);}onVideoDrmModuleCrush(e){this.stopPermamentPlaybackErrorTimer();let t=new p("playbackPermamentError");t.data=e.data,t.dispatch(this.context);}showMediaErrorMessage(e){let t=new v("showMessage");t.data={type:"normal",title:U.translate("error"),text:U.translate("cannot_decode_media"),textDetails:this.getVideoEventErrorMessage(e),close:!1},t.dispatch(this.context),this.startPermamentPlaybackErrorTimer();}showNetworkPermamentErrorMessage(e){let t=new v("showMessage");t.data={type:"normal",title:U.translate("error"),text:U.translate("connection_error_permanent"),textDetails:this.getVideoEventErrorMessage(e),close:!1},t.dispatch(this.context),this.startPermamentPlaybackErrorTimer();}showNetworkTemporaryErrorMessage(e){let t=new v("showMessage");t.data={type:"normal",title:U.translate("error"),text:U.translate("connection_error"),textDetails:this.getVideoEventErrorMessage(e),userSingleActionButtonText:U.translate("try_again"),onUserSingleAction:J(this,this.reloadVideoAfterNetworkProblem),close:!1},t.dispatch(this.context),new p("connectionErrorWaitingForUserAction").dispatch(this.context),this.stopPermamentPlaybackErrorTimer();}startPermamentPlaybackErrorTimer(){this.stopPermamentPlaybackErrorTimer();let e=6e3;Object.prototype.hasOwnProperty.call(this.pluginConfig,"permamentPlaybackErrorSafetyWindow")&&this.pluginConfig.permamentPlaybackErrorSafetyWindow>0&&(e=this.pluginConfig.permamentPlaybackErrorSafetyWindow),this.permamentPlaybackErrorTimer=H.delay(J(this,this.onPermamentPlaybackErrorTimer),e);}stopPermamentPlaybackErrorTimer(){null!=this.permamentPlaybackErrorTimer&&(this.permamentPlaybackErrorTimer.stop(),this.permamentPlaybackErrorTimer=null);}onPermamentPlaybackErrorTimer(){this.stopPermamentPlaybackErrorTimer();let e=new p("playbackPermamentError");null!=this.lastMediaError&&(e.data=this.lastMediaError.data),e.dispatch(this.context);}getVideoEventErrorMessage(e){if(0==n.field(this.get_variables(),"showErrorDetails"))return "";let t=U.translate("details");if(null!=this.playerInstance){let e=X.getClass(this.playerInstance).__name__.split(".");t+=" ["+e[e.length-1]+"]";}return t+=":\n",null!=e&&null!=e.data&&null!=e.data.additionalData&&null!=e.data.additionalData.message&&(t+=r.string(e.data.additionalData.message)),t}onVideoTimeChange(e){null!=e&&null!=e.data&&(this.videoCurrentTime=e.data.currentTime);}onAdVideoPlaying(e){this.isInStreamAdPlaying||this.isSingleVideoTagPlay()||(this.htmlVideo.style.display="none",this.htmlAdVideo.style.display="block");}onAdInStreamPlaying(e){this.isInStreamAdPlaying=!0;}onAdInStreamEnd(e){this.isInStreamAdPlaying=!1;}eventFilter(e){let t=e instanceof p;return t&&"connectionError"==e.type&&this.hasFallbackSourceToCheck()?(this.onNetworkErrorEvent(e),!1):t&&("mediaError"==e.type||"loadError"==e.type)&&this.hasFallbackSourceToCheck()?(this.onVideoErrorEvent(e),!1):super.eventFilter(e)}getSupportRateForUrls(e){let t=[],i=0;for(;i<e.length;){let s=e[i++],a=0,n=0,r=this.videoPlayersClasses.length;for(;n<r;){let e=n++,t=this.videoPlayersClasses[e],i=new E;i.url=s,t.canPlay(i)&&(a=e+1);}t.push(a);}return t}}e.bs.player.plugin.video.Video=I,I.__name__="bs.player.plugin.video.Video",I.__super__=A,Object.assign(I.prototype,{__class__:I,videoPlayersClasses:null,videoPlayers:null,nativeVideo:null,nativeAdVideo:null,chromecastConnected:null,chromecastSession:null,chromecastSender:null,htmlVideo:null,htmlAdVideo:null,div:null,divFlash:null,minAudioTracksForInfo:null,playerInstance:null,adPlayerInstance:null,externalSubtitlesController:null,subtitlesRenderer:null,isAdVideoTagInitializedForMobiles:null,isInStreamAdPlaying:null,volumeValue:null,currentMedia:null,videoCurrentTime:null,lastDataProviderEvent:null,permamentPlaybackErrorTimer:null,lastMediaError:null,shouldVideoPlay:null,videoPlaybackRate:null});class R{constructor(e,t){this.context=e,this.areListenersAttached=!1,this.renderer=t,this.hasPlaybackStarted=!1,this.activeEntries=new q;}setData(e){this.media=e,this.hasPlaybackStarted=!1,this.selectedSubtitlesSet=null,this.hasMediaExternalSubtitles(e)?this.attachListeners():this.detachListeners();}hasMediaExternalSubtitles(e){if(null!=e.subtitlesSets){let t=0,i=e.subtitlesSets;for(;t<i.length;){let e=i[t];if(++t,null!=e.url&&(this.isExtensionSrt(e.url)||this.isExtensionVtt(e.url)))return !0}}return !1}isExtensionSrt(e){return !!(e=this.stripQueryParams(e)).endsWith(".srt")||e.endsWith(".SRT")}isExtensionVtt(e){return !!((e=this.stripQueryParams(e)).endsWith(".vtt")||e.endsWith(".VTT")||e.endsWith(".webvtt"))||e.endsWith(".WEBVTT")}stripQueryParams(e){let t=new s("[?#].*","".split("u").join(""));return null!=e&&(e=e.replace(t,"")),e}attachListeners(){this.areListenersAttached||(m.add(this.context,"selectSubtitles",J(this,this.onSelectSubtitles)),p.add(this.context,"playing",J(this,this.onPlayEvent)),p.add(this.context,"currentTimeChange",J(this,this.onTimeupdate)),this.areListenersAttached=!0);}detachListeners(){this.areListenersAttached&&(m.remove(this.context,"selectSubtitles",J(this,this.onSelectSubtitles)),p.remove(this.context,"playing",J(this,this.onPlayEvent)),p.remove(this.context,"currentTimeChange",J(this,this.onTimeupdate)),this.areListenersAttached=!1);}onPlayEvent(e){this.hasPlaybackStarted=!0,this.loadSelectedSubtitles();}onSelectSubtitles(e){if(null==e)return;let t=this.activeEntries.h;for(;null!=t;){let e=t.item;t=t.next,this.renderer.onCueExit(e);}this.activeEntries.clear(),this.selectSubtitlesSet(e.data);}selectSubtitlesSet(e){null!=e&&null!=e.url&&(this.isExtensionSrt(e.url)||this.isExtensionVtt(e.url))?(this.selectedSubtitlesSet=e,this.loadSelectedSubtitles()):this.selectedSubtitlesSet=null;}loadSelectedSubtitles(){if(this.hasPlaybackStarted&&null!=this.selectedSubtitlesSet&&null==this.selectedSubtitlesSet.subtitleEntries){let e=new Q(this.selectedSubtitlesSet.url);e.onData=J(this,this.onLoadExternalSubtitlesSuccess),e.onError=J(this,this.onLoadExternalSubtitlesError),e.request();}}onTimeupdate(e){if(null==e||null==e.data||null==this.selectedSubtitlesSet||null==this.selectedSubtitlesSet.subtitleEntries)return;this.currentTime=e.data.currentTime;let t=new q,i=this.activeEntries.h;for(;null!=i;){let e=i.item;i=i.next;let s=this.currentTime;e.showTime<=s&&s<e.hideTime||(this.renderer.onCueExit(e),t.add(e));}let s=t.h;for(;null!=s;){let e=s.item;s=s.next,this.activeEntries.remove(e);}let a=this.findEntriesByTime(this.currentTime),n=0;for(;n<a.length;){let e=a[n];++n,this.isEntryOnList(e,this.activeEntries)||(this.activeEntries.push(e),this.renderer.onCueEnter(e));}}isEntryOnList(e,t){let i=t.h;for(;null!=i;){let t=i.item;if(i=i.next,t==e)return !0}return !1}findEntriesByTime(e){let t=[],i=this.selectedSubtitlesSet.subtitleEntries,s=0,a=i.length,n=Math.floor(a/2);for(;s<a;)e<i[n].showTime?a=n-1:s=n+1,n=Math.floor((s+a)/2);let r=n-1;for(;;){let s;if(r>=0){let t=i[r];s=t.showTime<=e&&e<t.hideTime;}else s=!1;if(!s)break;t.unshift(i[r]),--r;}for(r=n;;){let s;if(r<i.length){let t=i[r];s=t.showTime<=e&&e<t.hideTime;}else s=!1;if(!s)break;t.push(i[r]),++r;}return t}destroy(){this.detachListeners();}onLoadExternalSubtitlesSuccess(e){let t=null;t=this.isExtensionSrt(this.selectedSubtitlesSet.url)?new D:new L;try{this.selectedSubtitlesSet.subtitleEntries=t.parse(e);}catch(e){let t=B.caught(e).unwrap();if(!(t instanceof M))throw e;{let e="Cannot load subtitles file. Parse error. \n"+r.string(t.message);console.error(e);}}}onLoadExternalSubtitlesError(e){let t="Cannot load external subtitles file "+this.selectedSubtitlesSet.url+".";console.error(t);}}R.__name__="bs.player.plugin.video.caption.ExternalSubtitlesController",Object.assign(R.prototype,{__class__:R,media:null,context:null,areListenersAttached:null,selectedSubtitlesSet:null,currentTime:null,activeEntries:null,hasPlaybackStarted:null,renderer:null});class x{}x.__name__="bs.player.plugin.video.caption.SubtitlesParserInterface",x.__isInterface__=!0,Object.assign(x.prototype,{__class__:x,parse:null});class D{constructor(){this.timeEntriesSeparator=" --\x3e ",this.lineNumber=0,this.lines=null,this.endLinesRegexp=new i("(\r\n)|(\n)","g"),this.milisecondsSeparatorRegexp=new i("[,\\.]","g"),this.whiteSpacesRegexp=new i("[ \t\r\n]+","g");}readLine(){let e=this.lines[this.lineNumber];return this.lineNumber++,null!=e&&0==this.lineNumber?l.replace(e,"\ufeff",""):e}isFileEnd(){return this.lineNumber>=this.lines.length}isEmptyStr(e){return null==e||""==e}skipEmptyLines(){let e=this.readLine();for(;this.isEmptyStr(e)&&!this.isFileEnd();)e=this.readLine();this.isFileEnd()||this.lineNumber--;}parseEntry(){let e=new T;if(this.isEmptyStr(this.readLine()))throw B.thrown(new M("Error in line: "+this.lineNumber+". Cannot parse entry number."));let t=this.readLine();if(this.isEmptyStr(t))throw B.thrown(new M("Error in line: "+this.lineNumber+". Cannot parse time for entry."));t=t.replace(this.whiteSpacesRegexp.r," ");let i=t.split(this.timeEntriesSeparator);if(2!=i.length)throw B.thrown(new M("Error in line: "+this.lineNumber+". Cannot parse time for entry."));e.showTime=this.parseTime(i[0]),e.hideTime=this.parseTime(i[1]),e.texts=[];let s=this.readLine();for(;!this.isEmptyStr(s);){let t=new w;t.text=l.trim(s),e.texts.push(t),s=this.readLine();}if(0==e.texts.length)throw B.thrown(new M("Error in line: "+this.lineNumber+". No text for entry."));return e}parseTime(e){if(null==e)throw B.thrown(new M("Error in line: "+this.lineNumber+". Cannot parse time for entry."));let t=this.milisecondsSeparatorRegexp.split(e),i=0;t.length>1&&(i=r.parseInt(t[1]));let s=t[0].split(":");if(3!=s.length)throw B.thrown(new M("Error in line: "+this.lineNumber+". Cannot parse time for entry."));let a=0;return a=0+3600*r.parseInt(s[0]),a+=60*r.parseInt(s[1]),a+=r.parseInt(s[2]),a+=i/1e3,a}parse(e){this.lines=this.endLinesRegexp.split(e),this.lineNumber=0,this.skipEmptyLines();let t=[];for(;!this.isFileEnd();)t.push(this.parseEntry()),this.skipEmptyLines();return t}}D.__name__="bs.player.plugin.video.caption.SrtSubtitlesParser",D.__interfaces__=[x],Object.assign(D.prototype,{__class__:D,lineNumber:null,lines:null,endLinesRegexp:null,timeEntriesSeparator:null,milisecondsSeparatorRegexp:null,whiteSpacesRegexp:null});class M{constructor(e){this.message=e;}}M.__name__="bs.player.plugin.video.caption.SubtitlesParserError",Object.assign(M.prototype,{__class__:M,message:null});class L extends D{constructor(){super();}parse(e){this.lines=this.endLinesRegexp.split(e),this.lineNumber=0,this.skipEmptyLines();let t=this.readLine();if(t=l.trim(t),65279==a.cca(t,0)&&(t=a.substr(t,1,null)),"WEBVTT"!=t)throw B.thrown(new M("Error in line: "+this.lineNumber+". WEBVTT text expected in first line."));this.skipEmptyLines();let i=[];for(;!this.isFileEnd();)i.push(this.parseEntry()),this.skipEmptyLines();return i}}L.__name__="bs.player.plugin.video.caption.VttSubtitlesParser",L.__super__=D,Object.assign(L.prototype,{__class__:L});class O{constructor(e){this.state=0,this.castSession=null,this.isSeeking=!1,this.isAdvertisement=!1,this.minAudioTracksForInfo=2,null==O.instances.h[(e?"ad_":"")+this.context]&&(this.volumeLevel=1,this.isAdvertisement=e);}setSession(e,t){this.castSession=e,this.sender=t,m.add(this.context,"skinVolume",J(this,this.onVolumeChange)),m.add(this.context,"skinMute",J(this,this.onMuteChange)),m.add(this.context,"skinUnmute",J(this,this.onUnMuteChange)),null!=this.castSession&&(this.state=10,this.setupMedia());}setPlaybackRate(e){if(this.isAdvertisement||this.currentPlaybackRate==e)return;if(this.desiredPlaybackRate=e,null==this.castSession)return;let t=this.castSession.getMediaSession();null!=t&&this.castSession.sendMessage("urn:x-cast:com.google.cast.media",{type:"SET_PLAYBACK_RATE",playbackRate:this.desiredPlaybackRate,mediaSessionId:t.mediaSessionId,requestId:1}).then((function(e){})).catch((function(e){console.error("Set playback rate error: "+e);}));}getPlaybackRate(){return this.isAdvertisement?1:this.currentPlaybackRate}triggerVideoPlaybackRateEvent(){if(this.isAdvertisement)return;let e=new p("playbackRate");e.data=this.getPlaybackRate(),e.dispatch(this.context);}setupMedia(){if(null!=this.media&&null!=this.media.source&&this.media.source.length>0&&null!=this.castSession&&null!=this.sender){this.state=20;let e=this.sender.newMediaInfo(this.media.source[0].url);e.metadata=this.sender.newGenericMediaMetadata(),e.metadata.title=this.media.title;let t=(null!=this.media.splashImages?this.media.splashImages:[]).concat(null!=this.media.posterImages?this.media.posterImages:[]),i=[],s=0;for(;s<t.length;){let e=t[s];++s,null!=e&&i.push(e);}let a=[],n=0;for(;n<i.length;)a.push(this.sender.castMediaImage(i[n++]));if(e.metadata.images=a,e.customData={statsId:this.media.id,statsTitle:this.media.title},null!=this.mediaVmapResponse||null!=this.mediaVmapUrl){let t={};null!=this.mediaVmapResponse?t.adsResponse=this.mediaVmapResponse:t.adTagUrl=this.mediaVmapUrl,e.vmapAdsRequest=t;}let r,l=this.sender.newLoadRequest(e);if(l.autoplay=this.media.mediaPlaybackInfo.isPlaying,this.media.mediaPlaybackInfo.currentTime>0&&(l.currentTime=this.media.mediaPlaybackInfo.currentTime),null!=this.desiredPlaybackRate){let e=this.desiredPlaybackRate;r=!isNaN(e);}else r=!1;r&&this.desiredPlaybackRate>=.5&&(l.playbackRate=this.desiredPlaybackRate);let o=this.castSession.loadMedia(l);this.setupMediaTimeoutTimer=H.delay(J(this,this.onRemoteMediaSetupTimeout),12e3),o.then(J(this,this.onRemoteMediaLoad),J(this,this.onRemoteMediaError)).catch(J(this,this.onRemoteMediaError));}}stopSetupMediaTimeoutTimer(){null!=this.setupMediaTimeoutTimer&&(this.setupMediaTimeoutTimer.stop(),this.setupMediaTimeoutTimer=null);}onRemoteMediaSetupTimeout(){this.stopSetupMediaTimeoutTimer(),this.onRemoteMediaError({description:'Chromecast cannot initialize remote media. Probably Chromecast is blocking playback because of more restricted CORS policy (no wildcard "*" is allowed). Please check page if you are a stream provider: https://developers.google.com/cast/docs/chrome_sender/advanced#cors_requirements '});}onRemoteMediaError(e){this.stopSetupMediaTimeoutTimer();let t="";null!=e&&null!=e.code&&(t="errorCode: "+r.string(e.code)),null!=e&&null!=e.description&&(t+=" description: "+r.string(e.description)),this.dispatchEvent(this.isAdvertisement?new h("adConnectionError"):new p("connectionError"),{errObj:e,isTemporaryNetworkIssue:!1,message:t}),this.sender.disconnect();}onRemoteMediaLoad(){this.stopSetupMediaTimeoutTimer(),new p("videoCastingStart").dispatch(this.context),this.remotePlayer=this.sender.newRemotePlayer(),this.remotePlayerController=this.sender.newRemotePlayerController(this.remotePlayer),this.state=30,this.media.mediaPlaybackInfo.currentTime>0&&this.remotePlayer.canSeek&&this.seek(this.media.mediaPlaybackInfo.currentTime),this.volume(this.volumeLevel),this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing")),this.media.mediaPlaybackInfo.isPlaying||this.dispatchEvent(this.isAdvertisement?new h("adPaused"):new p("paused")),this.dispatchEvent(this.isAdvertisement?new h("adDurationChange"):new p("durationChange"));let e=this.sender.getCast().framework.RemotePlayerEventType;this.remotePlayerController.addEventListener(e.CURRENT_TIME_CHANGED,J(this,this.onRemoteTimeChange)),this.remotePlayerController.addEventListener(e.DURATION_CHANGED,J(this,this.onRemoteDurationChange)),this.remotePlayerController.addEventListener(e.IS_PAUSED_CHANGED,J(this,this.onRemotePauseChange)),this.remotePlayerController.addEventListener(e.MEDIA_INFO_CHANGED,J(this,this.onRemoteMediaInfoChange));}onRemoteTimeChange(){null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isConnected&&(this.dispatchEvent(this.isAdvertisement?new h("adCurrentTimeChange"):new p("currentTimeChange")),this.isSeeking&&(this.isSeeking=!1,this.dispatchEvent(this.isAdvertisement?new h("seekingEnd"):new p("seekingEnd"))),this.remotePlayer.isPaused&&this.dispatchEvent(this.isAdvertisement?new h("adPaused"):new p("paused")));}onRemoteDurationChange(){null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isConnected&&(this.dispatchEvent(this.isAdvertisement?new h("adDurationChange"):new p("durationChange")),0==this.remotePlayer.duration&&null==this.remotePlayer.mediaInfo&&this.dispatchEvent(this.isAdvertisement?new h("adComplete"):new p("complete")));}onRemotePauseChange(){null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isConnected&&(this.remotePlayer.isPaused?this.dispatchEvent(this.isAdvertisement?new h("adPaused"):new p("paused")):this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing")));}onRemoteMediaInfoChange(){if(null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isConnected){if(null!=this.castSession){let e=this.castSession.getMediaSession();if(null!=e){let t=e.playbackRate;!isNaN(t)&&t>0&&t!=this.currentPlaybackRate&&(this.currentPlaybackRate=t,this.triggerVideoPlaybackRateEvent());}}this.hasVideoComplete()&&(this.state=10,this.dispatchEvent(this.isAdvertisement?new h("adComplete"):new p("complete")));}}onChromecastDisonnect(){if(null!=this.mediaVmapResponse&&null!=this.variables.freewheel){this.variables.freewheel.testFeed=this.mediaVmapResponse;let e=new h("feedUpdate");e.data=this.mediaVmapResponse,e.dispatch(this.context);}if(null!=this.mediaVmapUrl&&null!=this.variables.freewheel){this.variables.freewheel.testFeedUrl=this.mediaVmapUrl;let e=new h("feedUpdate");e.data=this.mediaVmapUrl,e.dispatch(this.context);}if(null!=this.media&&null!=this.media.mediaPlaybackInfo&&this.media.mediaPlaybackInfo.currentTime>0&&(this.media.mediaUserSettings.resumePostion=this.media.mediaPlaybackInfo.currentTime),m.remove(this.context,"skinVolume",J(this,this.onVolumeChange)),m.remove(this.context,"skinMute",J(this,this.onMuteChange)),m.remove(this.context,"skinUnmute",J(this,this.onUnMuteChange)),null!=this.remotePlayerController){let e=this.sender.getCast().framework.RemotePlayerEventType;this.remotePlayerController.removeEventListener(e.CURRENT_TIME_CHANGED,J(this,this.onRemoteTimeChange)),this.remotePlayerController.removeEventListener(e.DURATION_CHANGED,J(this,this.onRemoteDurationChange)),this.remotePlayerController.removeEventListener(e.IS_PAUSED_CHANGED,J(this,this.onRemotePauseChange)),this.remotePlayerController.removeEventListener(e.MEDIA_INFO_CHANGED,J(this,this.onRemoteMediaInfoChange));}this.state=0,this.media=null,this.remotePlayer=null,this.remotePlayerController=null;}dispatchEvent(e,t){let i=0,s=0;null!=this.remotePlayer&&(i=this.remotePlayer.duration,s=this.remotePlayer.currentTime,0==s&&null!=this.remotePlayer.savedPlayerState&&(s=this.remotePlayer.savedPlayerState.currentTime,i=this.remotePlayer.savedPlayerState.mediaInfo.duration)),null!=this.media&&(this.media.mediaPlaybackInfo.currentTime=s,this.media.mediaPlaybackInfo.isPlaying=null!=this.remotePlayer&&!this.remotePlayer.isPaused,this.media.mediaPlaybackInfo.playbackRate=this.getPlaybackRate()),null==e.data&&(e.data={}),e.data.duration=i,e.data.currentTime=s,e.data.media=this.media,e.data.additionalData=t,e.dispatch(this.context);}create(){}destroy(){}attachVideo(e){}attachSubtitlesRenderer(e){}playerResize(e){}videoReady(){}onDurationChange(e){}pause(){null!=this.remotePlayer&&null!=this.remotePlayerController&&(this.remotePlayer.isPaused||this.remotePlayerController.playOrPause());}play(){null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isPaused&&(this.hasVideoComplete()?(this.media.mediaPlaybackInfo.isPlaying=!0,this.setupMedia()):this.remotePlayerController.playOrPause());}playPause(){this.hasVideoComplete()?(this.media.mediaPlaybackInfo.isPlaying=!0,this.setupMedia()):null!=this.remotePlayerController&&this.remotePlayerController.playOrPause();}hasVideoComplete(){return null!=this.media&&null!=this.remotePlayer&&null==this.remotePlayer.mediaInfo&&null!=this.castSession&&this.state>=10&&(null==this.remotePlayer.savedPlayerState||this.remotePlayer.savedPlayerState.duration>0&&this.remotePlayer.savedPlayerState.currentTime>=this.remotePlayer.savedPlayerState.duration-1)}reset(){}seek(e){null!=this.remotePlayer&&null!=this.remotePlayerController&&(this.remotePlayer.currentTime=e,this.remotePlayerController.seek(),this.isSeeking=!0,this.dispatchEvent(this.isAdvertisement?new h("seekingStart"):new p("seekingStart")));}selectAudio(e){}selectSubtitles(e){}volume(e){this.volumeLevel=e,null!=this.remotePlayer&&null!=this.remotePlayerController&&(this.remotePlayer.volumeLevel=e,this.remotePlayerController.setVolumeLevel());}onVolumeChange(e){null!=e&&null!=e.data&&this.volume(e.data);}onMuteChange(e){null!=this.remotePlayer&&null!=this.remotePlayerController&&0==this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute();}onUnMuteChange(e){null!=this.remotePlayer&&null!=this.remotePlayerController&&1==this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute();}setData(e){if(this.media=e,this.mediaVmapResponse=null,this.mediaVmapUrl=null,null!=this.variables.freewheel){null!=this.variables.freewheel.testFeed&&(this.mediaVmapResponse=this.variables.freewheel.testFeed,this.variables.freewheel.testFeed=""),null!=this.variables.freewheel.testFeedUrl&&(this.mediaVmapUrl=this.variables.freewheel.testFeedUrl,this.variables.freewheel.testFeedUrl="");let e=new h("feedUpdate");e.data="",e.dispatch(this.context);}null!=this.castSession&&this.state>=10&&(e.mediaPlaybackInfo.isPlaying=!0,this.setupMedia());}saveBandwidthModeVisibilityChange(e){}static canPlay(e){return !0}static getInstance(e,t){let i=t?"ad_":"";if(Object.prototype.hasOwnProperty.call(O.instances.h,i+e))return O.instances.h[i+e];{let s=new O(t);return O.instances.h[i+e]=s,s.context=e,s.create(),s}}}O.__name__="bs.player.plugin.video.chromecast.ChromecastVideo",Object.assign(O.prototype,{__class__:O,minAudioTracksForInfo:null,context:null,variables:null,isAdvertisement:null,isSeeking:null,media:null,mediaVmapResponse:null,mediaVmapUrl:null,sender:null,remotePlayer:null,remotePlayerController:null,castSession:null,state:null,volumeLevel:null,setupMediaTimeoutTimer:null,desiredPlaybackRate:null,currentPlaybackRate:null});class N{constructor(e){this.playbackRate=1,this.isStartTimeInitialized=!1,this.currentTime=0,this.initialAsAdvertisement=!1,this.isInStreamAdvertisement=!1,this.isAdvertisement=!1,this.minAudioTracksForInfo=2,null==N.instances.h[(e?"ad_":"")+this.context]&&(this.isAdvertisement=e,this.initialAsAdvertisement=e,this.isInStreamAdvertisement=!1,this.state=0,this.fairPlayDrm=new W(this),this.areSubtitlesAndAudioTracksInitialized=!1,this.isStartTimeInitialized=!1,this.isBuffering=!1,this.prePlaybackSeekRelativePosition=null,this.videoElementCommandsQueue=[],this.videoElementPromise=null,this.androidHlsPlaybackWatchdogTimer=null,this.androidHlsPlaybackEndWatchdogTimer=null,this.onErrorFallbackTriesNum=0,this.iosIsStalledConnection=!1,this.iosIsStalledConnectionDetectionEnabled=!1,this.iosIsStalledConnectionProblemsStart=null,this.hasCriticalErrorBeenDispatched=!1,this.mobileOrSafariBufferingTimeoutOccurred=!1);}create(){m.add(this.context,"selectSubtitles",J(this,this.onSelectSubtitles)),m.add(this.context,"selectAudio",J(this,this.onSelectAudio)),"Safari"!=F.browserName||F.isSamsungSmartTVTizen||(y.add(this.context,"resize",J(this,this.onPlayerResizeEvent)),window.addEventListener("resize",J(this,this.onWindowResize))),h.add(this.context,"adInStreamPlaying",J(this,this.onAdInStreamPlaying)),h.add(this.context,"adInStreamPlayingSilent",J(this,this.onAdInStreamPlaying)),h.add(this.context,"adInStreamEnd",J(this,this.onAdInStreamEnd)),h.add(this.context,"adInStreamEndSilent",J(this,this.onAdInStreamEnd)),h.add(this.context,"adInStreamClipPlaying",J(this,this.onAdClipInStreamPlaying)),h.add(this.context,"adInStreamClipPlayingSilent",J(this,this.onAdClipInStreamPlaying)),h.add(this.context,"adInStreamClipEnd",J(this,this.onAdClipInStreamEnd)),h.add(this.context,"adInStreamClipEndSilent",J(this,this.onAdClipInStreamEnd));}onAdInStreamPlaying(e){this.isAdvertisement=!0,this.isInStreamAdvertisement=!0;}onAdInStreamEnd(e){this.isAdvertisement=this.initialAsAdvertisement,this.isInStreamAdvertisement=!1,!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen||(this.iosHitDecoderAfter=this.video.currentTime+.5);}onAdClipInStreamPlaying(e){null!=this.video&&null!=this.media&&(this.inStreamAdvertStartPos=this.video.currentTime,null!=e.data&&e.data.adStartTime>=0&&(this.inStreamAdvertStartPos=e.data.adStartTime,(F.isiOS||"Safari"==F.browserName)&&!F.isSamsungSmartTVTizen&&this.inStreamAdvertStartPos>86400&&null!=this.dvrPlaybackStartTs&&this.dvrPlaybackStartTs>0&&(this.inStreamAdvertStartPos-=this.dvrPlaybackStartTs)),this.inStreamAdvertMedia=null,null!=e&&null!=e.data&&(this.inStreamAdvertMedia=e.data.media));}onAdClipInStreamEnd(e){this.inStreamAdvertStartPos=null,this.inStreamAdvertMedia=null;}destroy(){this.stopLiveEdgeUpdateTimer(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.stopLiveStreamEndingTimeout(),this.stopMobileOrSafariBufferingTimeoutTimer(),this.stopPlaybackRestartTimeoutTimer(),this.stopInitializeAfterCanplaythrouTimer(),m.remove(this.context,"selectSubtitles",J(this,this.onSelectSubtitles)),m.remove(this.context,"selectAudio",J(this,this.onSelectAudio)),"Safari"!=F.browserName||F.isSamsungSmartTVTizen||(y.remove(this.context,"resize",J(this,this.onPlayerResizeEvent)),window.removeEventListener("resize",J(this,this.onWindowResize))),h.remove(this.context,"adInStreamPlaying",J(this,this.onAdInStreamPlaying)),h.remove(this.context,"adInStreamPlayingSilent",J(this,this.onAdInStreamPlaying)),h.remove(this.context,"adInStreamEnd",J(this,this.onAdInStreamEnd)),h.remove(this.context,"adInStreamEndSilent",J(this,this.onAdInStreamEnd)),h.remove(this.context,"adInStreamClipPlaying",J(this,this.onAdClipInStreamPlaying)),h.remove(this.context,"adInStreamClipPlayingSilent",J(this,this.onAdClipInStreamPlaying)),h.remove(this.context,"adInStreamClipEnd",J(this,this.onAdClipInStreamEnd)),h.remove(this.context,"adInStreamClipEndSilent",J(this,this.onAdClipInStreamEnd)),null!=this.video&&(this.video.removeEventListener("pause",J(this,this.onVideoPause)),this.video.removeEventListener("play",J(this,this.onVideoPlay)),this.video.removeEventListener("playing",J(this,this.onVideoPlaying)),this.video.removeEventListener("timeupdate",J(this,this.onVideoTimeupdate)),this.video.removeEventListener("durationchange",J(this,this.onVideoDurationchange)),this.video.removeEventListener("waiting",J(this,this.onVideoWaiting)),this.video.removeEventListener("ended",J(this,this.onVideoEnded)),this.video.removeEventListener("seeking",J(this,this.onVideoSeeking)),this.video.removeEventListener("seeked",J(this,this.onVideoSeeked)),this.video.removeEventListener("error",J(this,this.onError)),!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen||this.video.removeEventListener("stalled",J(this,this.onIosStalled)),this.video.removeEventListener("canplaythrough",J(this,this.onVideoCanplaythrough)),null!=this.fairPlayDrm&&this.video.removeEventListener("webkitneedkey",J(G=this.fairPlayDrm,G.onNeedKey)),this.video.removeEventListener("loadedmetadata",J(this,this.onVideoLoadedMetadata)),null!=this.video.textTracks&&this.video.textTracks.removeEventListener("addtrack",J(this,this.onAddTrack)),this.video.removeEventListener("ratechange",J(this,this.onVideoRateChange)),this.video.setAttribute("src",""),this.video.load()),this.video=null,this.mediaSourceUrl=null,N.canPlayFileExtensionCache=new Y,N.instances=new Y,this.isAdvertisement=null,this.media=null,this.currentTime=null,this.state=null,this.fairPlayDrm=null,this.areSubtitlesAndAudioTracksInitialized=null,this.isStartTimeInitialized=!1,this.isBuffering=!1,this.onErrorFallbackTriesNum=0,this.iosIsStalledConnection=!1,this.iosIsStalledConnectionDetectionEnabled=!1,this.iosIsStalledConnectionProblemsStart=null;}dispatchEvent(e,t){if(!this.isEventFromRightContext())return;let i=this.video.duration,s=this.currentTime;if(null!=this.media&&(this.media.mediaPlaybackInfo.playbackRate=this.getPlaybackRate()),null!=this.media&&this.areSubtitlesAndAudioTracksInitialized){if(this.media.mediaPlaybackInfo.currentTime=s,this.media.mediaPlaybackInfo.isPlaying=!this.video.paused,this.isDvr()){i=this.getDVRWindowSize(),this.media.duration=i;let t=this.getDVRWindowRange();this.isVideoCurrentTimeReliable()?(s=this.dvrRelativePlaybackTimeToDvrWindowTime(this.video.currentTime),this.media.mediaPlaybackInfo.currentTime=this.dvrRelativePlaybackTimeToTs(this.video.currentTime)):(s=this.dvrRelativePlaybackTimeToDvrWindowTime(this.currentTime),this.media.mediaPlaybackInfo.currentTime=this.dvrRelativePlaybackTimeToTs(this.currentTime));let a=this.media;a.dvrWindowLength=i,null!=t&&(a.dvrWindowLiveEdge=this.dvrRelativePlaybackTimeToTs(t.end),"currentTimeChange"==e.type&&(this.dvrWindowTailLastSend=t.start));}}else if(null!=this.media&&this.isDvr()&&0==this.currentTime){let e=this.getPlaybackStartTime(this.media),t=this.getDVRWindowRange();this.media.mediaPlaybackInfo.currentTime=e>0?e:null!=t?this.dvrRelativePlaybackTimeToTs(t.end):this.getNowTs();}null!=this.prePlaybackSeekRelativePosition&&0==s&&(s=this.prePlaybackSeekRelativePosition*this.media.duration);let a=0,n=0,r=this.video.buffered.length;for(;n<r;){let e=n++;a+=this.video.buffered.end(e)-this.video.buffered.start(e);}null==e.data&&(e.data={}),this.isInStreamAdvertisement&&this.inStreamAdvertStartPos>=0&&(s=this.video.currentTime-this.inStreamAdvertStartPos,null!=this.inStreamAdvertMedia&&(i=this.inStreamAdvertMedia.duration),s>i&&(s=i),0==this.video.currentTime&&s<0&&(s=i,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.currentTime=this.inStreamAdvertStartPos+i))),e.data.duration=i,e.data.currentTime=s,e.data.videoTagCurrentTime=this.video.currentTime,e.data.source=this.video.currentSrc,e.data.totalBufferedTime=a,e.data.media=this.media,e.data.additionalData=t,this.isPlaybackNotAllowed&&(null==e.data.additionalData&&(e.data.additionalData={}),e.data.additionalData.isPlaybackNotAllowed=!0),e.dispatch(this.context);}dvrRelativePlaybackTimeToDvrWindowTime(e){let t=this.getDVRWindowRange();return null==t?e:e-t.start}dvrWindowTimeToDvrRelativePlaybackTime(e){if(null!=this.dvrWindowTailLastSend)return e+this.dvrWindowTailLastSend;let t=this.getDVRWindowRange();return null==t?e:e+t.start}isDvr(){return null!=this.media&&this.media instanceof S}dvrRelativePlaybackTimeToTs(e){let t=0;return null!=this.dvrPlaybackStartTs&&(t=this.dvrPlaybackStartTs),t+e}getDVRWindowRangeRaw(){if(null==this.video||null==this.video.seekable||0==this.video.seekable.length)return null;return {start:this.video.seekable.start(0),end:this.video.seekable.end(0)}}getDVRWindowRange(){let e=this.getDVRWindowRangeRaw();return null==e?null:(null!=this.dvrWindowStartTimeTs&&null!=this.dvrPlaybackStartTs&&this.dvrRelativePlaybackTimeToTs(e.start)<this.dvrWindowStartTimeTs&&(e.start=this.dvrWindowStartTimeTs-this.dvrPlaybackStartTs),null!=this.dvrWindowEndTimeTs&&null!=this.dvrPlaybackStartTs&&this.dvrWindowEndTimeTs<this.dvrRelativePlaybackTimeToTs(e.end)&&(e.end=this.dvrWindowEndTimeTs-this.dvrPlaybackStartTs),e)}getDVRWindowSize(){let e,t=this.getDVRWindowRange();if(null!=t){let i=t.end;e=!isFinite(i);}else e=!0;return e?0:t.end-t.start}getNowTs(){return (new Date).getTime()/1e3}attachSubtitlesRenderer(e){this.subtitlesRenderer=e;}attachVideo(e){this.video=e,this.video.addEventListener("pause",J(this,this.onVideoPause)),this.video.addEventListener("play",J(this,this.onVideoPlay)),this.video.addEventListener("playing",J(this,this.onVideoPlaying)),this.video.addEventListener("timeupdate",J(this,this.onVideoTimeupdate)),this.video.addEventListener("durationchange",J(this,this.onVideoDurationchange)),this.video.addEventListener("waiting",J(this,this.onVideoWaiting)),this.video.addEventListener("ended",J(this,this.onVideoEnded)),this.video.addEventListener("seeking",J(this,this.onVideoSeeking)),this.video.addEventListener("seeked",J(this,this.onVideoSeeked)),this.video.addEventListener("error",J(this,this.onError)),!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen||this.video.addEventListener("stalled",J(this,this.onIosStalled)),this.video.addEventListener("canplaythrough",J(this,this.onVideoCanplaythrough)),this.video.addEventListener("loadedmetadata",J(this,this.onVideoLoadedMetadata)),null!=this.video.textTracks&&this.video.textTracks.addEventListener("addtrack",J(this,this.onAddTrack)),"Safari"!=F.browserName||F.isSamsungSmartTVTizen||this.video.addEventListener("webkitneedkey",J(G=this.fairPlayDrm,G.onNeedKey),!1),this.video.addEventListener("ratechange",J(this,this.onVideoRateChange)),this.checkPlaybackRate(),this.triggerVideoPlaybackRateEvent();}setPlaybackRate(e){this.isAdvertisement||(this.playbackRate=e,this.checkPlaybackRate());}getPlaybackRate(){return this.video.playbackRate}onVideoRateChange(e){this.triggerVideoPlaybackRateEvent();}triggerVideoPlaybackRateEvent(){if(this.isAdvertisement)return;let e=new p("playbackRate");e.data=this.getPlaybackRate(),e.dispatch(this.context);}checkPlaybackRate(){let e;if(this.isAdvertisement)e=!0;else {let t=this.playbackRate;e=isNaN(t);}e||this.getPlaybackRate()==this.playbackRate||(this.video.playbackRate=this.playbackRate);}onAddTrack(e){let t=this.isAdvertisement?new h("addTrack"):new p("addTrack");t.data={track:e},this.dispatchEvent(t);}onVideoPause(){this.isEventFromRightContext()&&(this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.lastPausedTime=new Date,this.video.currentTime>0&&this.video.currentTime==this.video.duration||(this.state=102,this.dispatchEvent(this.isAdvertisement?new h("adPaused"):new p("paused"))));}onVideoPlay(){this.isEventFromRightContext()&&(this.state=103,this.stopAndroidHlsPlaybackEndWatchdogTimer(),(!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen||!this.isDvr()||this.isVideoElementPlaying())&&(this.checkPlaybackRate(),this.storeStartPlayingPositionForCastingIos(),this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing"))));}onVideoPlaying(){this.isEventFromRightContext()&&(this.stopMobileOrSafariBufferingTimeoutTimer(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.storeStartPlayingPositionForCastingIos());}storeStartPlayingPositionForCastingIos(){(F.isiOS||"Safari"==F.browserName)&&!F.isSamsungSmartTVTizen&&null!=this.video&&this.video.currentTime>0&&(this.iosLastPlayingEvent=new Date,this.iosLastPlayingEventPosition=this.video.currentTime);}shouldRestorePlaybackPositionForCastingIos(){return !!((F.isiOS||"Safari"==F.browserName)&&!F.isSamsungSmartTVTizen&&null!=this.iosLastPlayingEvent&&this.isAirPlayCasting()&&(new Date).getTime()-this.iosLastPlayingEvent.getTime()<3e3&&null!=this.iosLastPlayingEventPosition&&null!=this.video&&this.video.currentTime>=1&&this.video.duration!=1/0&&this.video.duration>=1)&&this.iosLastPlayingEventPosition-this.video.currentTime>1}restorePlayingPositionForCastingIos(){let e=this.iosLastPlayingEventPosition;this.iosLastPlayingEvent=null,this.iosLastPlayingEventPosition=null;let t=this;H.delay((function(){t.seek(e);}),100);}stopAndroidHlsPlaybackEndWatchdogTimer(){null!=this.androidHlsPlaybackEndWatchdogTimer&&(this.androidHlsPlaybackEndWatchdogTimer.stop(),this.androidHlsPlaybackEndWatchdogTimer=null);}onVideoTimeupdate(){if(!this.isEventFromRightContext())return;if(null!=this.mobileOrSafariBufferingTimeoutTimer&&null!=this.video&&this.video.readyState>=3&&this.stopMobileOrSafariBufferingTimeoutTimer(),this.isDvr()&&null==this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer=new H(1e3),this.liveEdgeUpdateTimer.run=J(this,this.onLiveEdgeUpdate)),F.isAndroid&&this.isVideoElementPlaying()&&(this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.androidHlsPlaybackEndWatchdogTimer=H.delay(J(this,this.onVideoWaiting),1e3)),null!=this.androidHlsPlaybackWatchdogTimer&&null!=this.video&&this.video.currentTime>0&&(this.androidHlsPlaybackWatchdogTimer.stop(),this.androidHlsPlaybackWatchdogTimer=null),null!=this.iosHitDecoderAfter&&null!=this.video&&this.iosHitDecoderAfter<=this.video.currentTime&&(this.iosHitDecoderAfter=null,this.video.pause(),this.video.play()),this.shouldRestorePlaybackPositionForCastingIos())return void this.restorePlayingPositionForCastingIos();this.isVideoCurrentTimeReliable()&&(this.currentTime=this.video.currentTime),this.iosIsStalledConnectionDetectionEnabled&&!this.isAirPlayCasting()&&this.iosDetectStalledConnection(),this.onErrorFallbackTriesNum>0&&this.isVideoElementPlaying()&&(this.onErrorFallbackTriesNum=0);let e=(101==this.state||15==this.state||this.isBuffering)&&this.isVideoElementPlaying();e&&(this.state=103),this.dispatchEvent(this.isAdvertisement?new h("adCurrentTimeChange"):new p("currentTimeChange")),e&&(this.isBuffering=!1,this.dispatchEvent(new p("bufferingEnd")),!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen||!this.isVideoElementPlaying()||(this.storeStartPlayingPositionForCastingIos(),this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing")))),this.isDvr()&&null!=this.dvrWindowEndTimeTs&&this.media.mediaPlaybackInfo.currentTime>this.dvrWindowEndTimeTs&&(new m("skinPause").dispatch(this.context),this.dispatchEvent(this.isAdvertisement?new h("adComplete"):new p("complete")));}isAirPlayCasting(){return !(!F.isiOS||null==this.video)&&this.video.webkitCurrentPlaybackTargetIsWireless}iosDetectStalledConnection(){if(null==this.video||this.video.seeking||this.video.ended||this.video.paused||null==this.video.buffered||0==this.video.buffered.length)return;let e=!1,t=0,i=this.video.buffered.length;for(;t<i;){let i=t++;if(this.video.buffered.start(i)<=this.video.currentTime&&this.video.currentTime<=this.video.buffered.end(i)){e=!0;break}}if(e)this.iosIsStalledConnectionProblemsStart=null;else {null==this.iosIsStalledConnectionProblemsStart&&(this.iosIsStalledConnectionProblemsStart=new Date);let e=5e3;this.isAdsInsertionStream(this.media)&&(e=25e3),null!=this.iosIsStalledConnectionProblemsStart&&(new Date).getTime()-this.iosIsStalledConnectionProblemsStart.getTime()>e&&(null!=this.video&&this.video.pause(),this.iosIsStalledConnection=!0,this.onError({message:"Connection with server has stalled/broken. No data from server."}));}}isVideoElementPlaying(){let e=!0;if((F.isiOS||"Safari"==F.browserName)&&!F.isSamsungSmartTVTizen){let t=null!=this.video&&null!=this.video.seekable&&this.video.seekable.length>0&&this.video.seekable.end(0)-this.video.seekable.start(0)>0,i=null!=this.video&&this.video.duration==1/0&&null!=this.video.buffered&&this.video.buffered.length>0&&this.video.buffered.end(0)-this.video.buffered.start(0)>0&&this.video.buffered.end(0)-this.video.buffered.start(0)<30&&this.video.buffered.start(0)<=this.video.currentTime&&this.video.currentTime<=this.video.buffered.end(0);e=t||i;}return null!=this.video&&this.video.currentTime>0&&!this.video.paused&&!this.video.seeking&&!this.video.ended&&this.video.readyState>2&&e}isVideoCurrentTimeReliable(){return !(null==this.video||!this.isStartTimeInitialized||4!=this.video.readyState)&&(!this.isDvr()||this.video.currentTime>1)}onVideoDurationchange(){if(this.isEventFromRightContext()&&!this.isAirPlayCasting()){if(this.media instanceof b&&!(this.media instanceof S)&&this.video.duration==1/0){let e=new S,t=o.getInstanceFields(b),i=0;for(;i<t.length;){let s=t[i];++i,e[s]=n.field(this.media,s);}this.media=e;let s=new c("mediaAfterPlaybackStartMetadata");s.data=e,s.dispatch(this.context);}if(this.media instanceof S&&this.video.duration!=1/0&&this.video.duration>0){let e=new b,t=o.getInstanceFields(b),i=0;for(;i<t.length;){let s=t[i];++i,e[s]=n.field(this.media,s);}this.media=e;let s=new c("mediaAfterPlaybackStartMetadata");s.data=this.media,s.dispatch(this.context);}if(this.media.duration=this.video.duration,null!=this.prePlaybackSeekRelativePosition&&this.video.duration>0){let e=this.prePlaybackSeekRelativePosition;this.prePlaybackSeekRelativePosition=null;let t=e*this.video.duration,i=Math.abs(this.video.duration-this.media.duration)>2,s=Math.abs(this.video.currentTime-t)>1;(i||s)&&this.seek(t);}this.dispatchEvent(this.isAdvertisement?new h("adDurationChange"):new p("durationChange"));}}onVideoWaiting(){this.isEventFromRightContext()&&(this.state>=101&&(this.state=101),this.dispatchEvent(new p("bufferingStart")),this.isBuffering=!0,this.stopAndroidHlsPlaybackEndWatchdogTimer(),((F.isiOS||"Safari"==F.browserName)&&!F.isSamsungSmartTVTizen||F.isAndroid)&&(this.stopMobileOrSafariBufferingTimeoutTimer(),this.mobileOrSafariBufferingTimeoutTimer=H.delay(J(this,this.onMobileOrSafariBufferingTimeout),14e3)));}onMobileOrSafariBufferingTimeout(){this.stopMobileOrSafariBufferingTimeoutTimer(),this.mobileOrSafariBufferingTimeoutOccurred=!0,this.onError("Buffering timeout occured.");}onVideoEnded(){this.isEventFromRightContext()&&(this.stopLiveStreamEndingTimeout(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),200!=this.state&&0!=this.state&&(this.state=200,this.dispatchEvent(this.isAdvertisement?new h("adComplete"):new p("complete"))));}onVideoSeeking(){if(!this.isEventFromRightContext())return;this.stopAndroidHlsPlaybackEndWatchdogTimer();let e=this.state;this.state=101,this.dispatchEvent(this.isAdvertisement?new h("seekingStart"):new p("seekingStart")),!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen||this.isBuffering||102!=e||(this.isBuffering=!0,this.dispatchEvent(new p("bufferingStart")));}onVideoSeeked(){if(!this.isEventFromRightContext())return;this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.state=102,this.dispatchEvent(this.isAdvertisement?new h("seekingEnd"):new p("seekingEnd")),!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen||!this.isVideoElementPlaying()||(this.storeStartPlayingPositionForCastingIos(),this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing"))),!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen||!this.isBuffering||(this.isBuffering=!1,this.dispatchEvent(new p("bufferingEnd")));let e=this;if((F.isiOS||"Safari"==F.browserName)&&!F.isSamsungSmartTVTizen&&null!=this.video&&0==this.video.currentTime&&this.video.paused){let t=this.video.play();null!=t&&t.then((function(){e.video.pause();}));}}initDvrWindowStartTimestamp(){if(null==this.dvrPlaybackStartTs&&this.isDvr()){let e=this.getDVRWindowRangeRaw();null==e&&null!=this.video&&null!=this.video.buffered&&this.video.buffered.length>0&&(e={end:this.video.buffered.end(0)}),null!=e&&(this.dvrPlaybackStartTs=this.getNowTs()-e.end),null!=this.dvrPlaybackStartTs&&null!=this.dvrRequestedInitialTimeTs&&this.seek(this.dvrRequestedInitialTimeTs-this.dvrPlaybackStartTs);}}onVideoCanplaythrough(){this.isEventFromRightContext()&&(this.isPlaybackNotAllowed&&"Safari"==F.browserName&&!F.isSamsungSmartTVTizen?(this.stopInitializeAfterCanplaythrouTimer(),this.initializeAfterCanplaythrouTimer=H.delay(J(this,this.initializeAfterCanplaythrou),500)):this.initializeAfterCanplaythrou());}initializeAfterCanplaythrou(){this.areSubtitlesAndAudioTracksInitialized||(this.updateSubtitlesSets(),this.updateAudioSets(),this.areSubtitlesAndAudioTracksInitialized=!0,"Safari"!=F.browserName||F.isSamsungSmartTVTizen||this.updateSafariStylingForSubtitles()),this.initVideoCurrentTime(),this.initDvrWindowStartTimestamp();}onVideoLoadedMetadata(){this.isEventFromRightContext()&&(!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen)&&this.initVideoCurrentTime();}initVideoCurrentTime(){if(this.video.readyState>=1&&!this.isStartTimeInitialized)if(0!=this.currentTime){let e=Math.floor(1e3*this.currentTime)/1e3;this.video.currentTime=e,this.isStartTimeInitialized=this.video.currentTime==e;}else this.isStartTimeInitialized=!0;}reset(){null!=this.video&&(this.video.pause(),this.video.setAttribute("src",""),this.video.load()),this.mediaSourceUrl="",this.isStartTimeInitialized=!1,this.fairPlayDrm.reset(),this.state=0;}pause(){this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.videoElementCommandAdd(2);}stopMobileOrSafariBufferingTimeoutTimer(){null!=this.mobileOrSafariBufferingTimeoutTimer&&(this.mobileOrSafariBufferingTimeoutTimer.stop(),this.mobileOrSafariBufferingTimeoutTimer=null);}reloadPlayerSourceAndCurrentTimeIfNeeded(){return null!=this.media&&null!=this.media.source&&null!=this.video&&this.mediaSourceUrl!=this.media.source[0].url?(this.video.src=this.mediaSourceUrl=this.media.source[0].url,this.state=0,this.hasCriticalErrorBeenDispatched=!1,this.mobileOrSafariBufferingTimeoutOccurred=!1,!0):(this.video.getAttribute("src")!=this.mediaSourceUrl&&(F.isiOS&&(this.isStartTimeInitialized=!1),this.hasCriticalErrorBeenDispatched=!1,this.mobileOrSafariBufferingTimeoutOccurred=!1,this.video.src=this.mediaSourceUrl),!1)}play(){this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.reloadPlayerSourceAndCurrentTimeIfNeeded(),this.videoElementCommandAdd(1);}onAndrdoidHlsPlaybackStartTimout(){null!=this.androidHlsPlaybackWatchdogTimer&&this.androidHlsPlaybackWatchdogTimer.stop(),this.androidHlsPlaybackWatchdogTimer=null,null==this.video||this.video.readyState>1||this.video.currentTime>0||(this.video.currentTime=1);}videoElementCommandAdd(e){this.videoElementCommandsQueue.push(e),1==this.videoElementCommandsQueue.length&&null==this.videoElementPromise&&this.onVideoElementCommandComplete();}onVideoElementCommandComplete(){if(this.videoElementPromise=null,0==this.videoElementCommandsQueue.length)return;let e=this.videoElementCommandsQueue.shift();1==e?this.videoElementCommandPlay():2==e?this.videoElementCommandPause():3==e?this.videoElementCommandPlayPause():console.error("ERROR: Invalid command type for VideoWeb ("+e+")");}onPlayerResetWithMseExtension(){null!=this.video&&(this.video.removeEventListener("player_reset",J(this,this.onPlayerResetWithMseExtension)),this.videoElementCommandPlay());}videoElementCommandPlay(){if(null!=this.video&&this.video.hasAttribute("data-mse-resetting"))this.video.addEventListener("player_reset",J(this,this.onPlayerResetWithMseExtension));else {if(this.isPlaybackNotAllowed=!1,this.reloadPlayerSourceAndCurrentTimeIfNeeded(),0==this.state){let e=this.getM3U8MediaSource(this.media.source);F.isAndroid&&null!=e&&(this.androidHlsPlaybackWatchdogTimer=new H(7e3),this.androidHlsPlaybackWatchdogTimer.run=J(this,this.onAndrdoidHlsPlaybackStartTimout));let t=null!=e&&Object.prototype.hasOwnProperty.call(e.customParams.h,"laUrl")&&Object.prototype.hasOwnProperty.call(e.customParams.h,"certUrl"),i=null!=e&&null!=e.drm,s=null!=e&&null!=this.media.drmCustomLicenseServerHandler;if(s&&this.media.drmCustomLicenseServerHandler.initContext(this.media,e,this.variables),t||i||s)return this.video.load(),void this.fairPlayDrm.init(this.media,e)}if(null!=this.video&&(F.isiOS||"Safari"==F.browserName)&&!F.isSamsungSmartTVTizen&&this.video.duration==1/0){let e=!1,t=0,i=this.video.buffered.length;for(;t<i;){let i=t++;if(this.video.buffered.start(i)<=this.video.currentTime&&this.video.currentTime<=this.video.buffered.end(i)){e=!0;break}}if(e&&1==this.video.buffered.length&&null!=this.lastPausedTime){e=((new Date).getTime()-this.lastPausedTime.getTime())/1e3<this.video.buffered.end(0)-this.video.buffered.start(0);}if(this.video.buffered.length>0&&!e)return this.log("BRADMAX PLAYER NOTICE:\nVideo paused outside DVR window. Restarting video for catching-up live stream.","warn"),void this.handlePlaybackRestart()}try{this.videoElementPromise=this.video.play(),null!=this.videoElementPromise&&this.videoElementPromise.catch(J(this,this.onPlayPromiseError)),null!=this.videoElementPromise&&(!F.isiOS&&"Safari"!=F.browserName||F.isSamsungSmartTVTizen)?this.videoElementPromise.then(J(this,this.onVideoElementCommandComplete),J(this,this.onVideoElementCommandComplete)):this.onVideoElementCommandComplete();}catch(e){console.error("Error occured during play call on video HtmlMediaElement."),this.onVideoElementCommandComplete();}}}log(e,t){null==t&&(t="log"),console&&("error"==t?console.error(e):"warn"==t?console.warn(e):console.log(e));}onPlayPromiseError(e){if(null!=e&&"AbortError"==e.name&&null!=this.video&&null!=this.video.src&&-1!=this.video.src.indexOf("data:video/mp4;base64,"))return;let t=this;null==e||"NotAllowedError"!=e.name&&"AbortError"!=e.name?(this.log("BRADMAX PLAYER NOTICE:\nException occured durring starting player. Details below:\n","error"),this.log(e,"error")):(this.isPlaybackNotAllowed=!0,this.variables.autoplay?this.log("BRADMAX PLAYER NOTICE:\nBrowser doesn't allow for autoplaying video without user interaction.\nPlayer is waiting for user 'play' click. You can autoplay muted video (mute=true).\n\nMode details about browser autoplay policy: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes","warn"):(this.log("BRADMAX PLAYER NOTICE:\nBrowser block starting playing video. Details below:\n","warn"),this.log(e,"warn")),H.delay((function(){t.isBuffering=!1,t.dispatchEvent(new p("bufferingEnd")),t.dispatchEvent(t.isAdvertisement?new h("adPlaying"):new p("playing")),t.dispatchEvent(t.isAdvertisement?new h("adPaused"):new p("paused"));}),0));}videoElementCommandPause(){this.video.pause(),this.onVideoElementCommandComplete();}videoElementCommandPlayPause(){this.video.paused?this.videoElementCommandPlay():this.videoElementCommandPause();}stopPlaybackRestartTimeoutTimer(){null!=this.playbackRestartTimeoutTimer&&(this.playbackRestartTimeoutTimer.stop(),this.playbackRestartTimeoutTimer=null);}stopInitializeAfterCanplaythrouTimer(){null!=this.initializeAfterCanplaythrouTimer&&(this.initializeAfterCanplaythrouTimer.stop(),this.initializeAfterCanplaythrouTimer=null);}stopLiveEdgeUpdateTimer(){null!=this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer.stop(),this.liveEdgeUpdateTimer=null);}onLiveEdgeUpdate(){null!=this.video&&this.video.paused&&!this.video.seeking&&!this.video.ended&&this.video.readyState>2&&this.onVideoTimeupdate();}hasLiveStreamEnded(){if(!(this.media instanceof P))return !1;let e=this.media;return null==e.streamEnd||e.streamEnd.getTime()<(new Date).getTime()}hasVideoErrorCode(){return null!=this.video&&null!=this.video.error&&this.video.error.code>=0}onError(e){if(this.isAdvertisement&&!this.isInStreamAdvertisement)return void this.dispatchEvent(new h("adMediaError"),this.prepareErrorMessage(e));if(this.hasCriticalErrorBeenDispatched)return;if(!this.isEventFromRightContext()||10==this.state&&!this.hasVideoErrorCode()||150==this.state)return;if(this.stopPlaybackRestartTimeoutTimer(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.state>=200)return;if(this.media instanceof P){let e=this.hasLiveStreamEnded();if(!e&&this.onErrorFallbackTriesNum>=5&&(this.onErrorFallbackTriesNum-=1),e)return void this.handleLiveStreamEnding()}let t=this.isDvr()?5:3,i=F.isAndroid&&!this.isNetworkConnectionProblem(),s=this.isDvr()&&this.media.hasFallbackSources(),a=this.isDvr()&&102==this.state;if((103==this.state||101==this.state||a)&&this.onErrorFallbackTriesNum<t&&!i&&!s){this.stopPlaybackRestartTimeoutTimer(),this.state=150,this.playbackRestartTimeoutTimer=H.delay(J(this,this.handlePlaybackRestart),1e3*(this.onErrorFallbackTriesNum+1));let t={videowebError:e,currTry:this.onErrorFallbackTriesNum};return void this.dispatchEvent(this.isAdvertisement&&!this.isInStreamAdvertisement?new h("adMediaErrorFallbackTry"):new p("mediaErrorFallbackTry"),t)}let n=this.state;this.state=210,this.stopMobileOrSafariBufferingTimeoutTimer(),this.isNetworkConnectionProblem()?this.dispatchEvent(this.isAdvertisement&&!this.isInStreamAdvertisement?new h("adConnectionError"):new p("connectionError"),this.prepareErrorMessage(e)):!this.hasVideoErrorCode()&&(10<=n&&n<=15||20==n)?(this.hasCriticalErrorBeenDispatched=!0,this.dispatchEvent(new p("drmAuthenticationError"),this.prepareErrorMessage(e)),this.reset()):null!=this.video&&3==this.video.networkState?(this.hasCriticalErrorBeenDispatched=!0,this.dispatchEvent(this.isAdvertisement&&!this.isInStreamAdvertisement?new h("adMediaError"):new p("loadError"),this.prepareErrorMessage(e)),this.reset()):(this.hasCriticalErrorBeenDispatched=!0,this.dispatchEvent(this.isAdvertisement&&!this.isInStreamAdvertisement?new h("adMediaError"):new p("mediaError"),this.prepareErrorMessage(e)),this.reset());}onIosStalled(e){this.iosIsStalledConnectionDetectionEnabled=!0;}prepareErrorMessage(e){let t=this.isNetworkConnectionProblem()&&(this.media instanceof P||this.video.currentTime>0||null!=this.video.error&&2==this.video.error.code||null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0),i="";return null!=this.video&&null!=this.video.error&&(i=" code: ",i=1==this.video.error.code?" code: MEDIA_ERR_ABORTED":2==this.video.error.code?" code: MEDIA_ERR_NETWORK":3==this.video.error.code?" code: MEDIA_ERR_DECODE":4==this.video.error.code?" code: MEDIA_ERR_SRC_NOT_SUPPORTED":" code: "+this.video.error.code),null!=this.video&&null!=this.video.networkState&&(i+=" net: ",0==this.video.networkState?i+="NETWORK_EMPTY":1==this.video.networkState?i+="NETWORK_IDLE":2==this.video.networkState?i+="NETWORK_LOADING":3==this.video.networkState?i+="NETWORK_NO_SOURCE":i+=this.video.networkState),null!=this.video&&null!=this.video.src&&(i+="\nurl: "+this.video.src),null!=e&&(this.log("bradmax.player.error: Error occured durring playback. "+i,"error"),this.log(e,"error")),{errObj:e,isTemporaryNetworkIssue:t,message:i}}stopLiveStreamEndingTimeout(){null!=this.liveStreamEndingTimeout&&(this.liveStreamEndingTimeout.stop(),this.liveStreamEndingTimeout=null);}handleLiveStreamEnding(){new m("skinPause").dispatch(this.context),this.state=180,this.stopLiveStreamEndingTimeout(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.liveStreamEndingTimeout=H.delay(J(this,this.onVideoEnded),500);}isNetworkConnectionProblem(){return null!=this.video&&null!=this.media&&(!!(!t.navigator.onLine||this.mobileOrSafariBufferingTimeoutOccurred||null!=this.video.error&&2==this.video.error.code||this.iosIsStalledConnection)||3==this.video.networkState&&(null!=this.video.error&&4!=this.video.error.code))}handlePlaybackRestart(){this.onErrorFallbackTriesNum++;let e=this.currentTime;this.video.pause(),this.video.setAttribute("src",""),this.video.load(),this.mediaSourceUrl="",this.isStartTimeInitialized=!1,this.isDvr()||this.seek(e),this.fairPlayDrm.reset(),this.state=0,this.play();}playPause(){this.videoElementCommandAdd(3);}seek(e){this.video.duration>0&&e+1>=this.video.duration&&(e=this.video.duration-1);let t,i=this.video.paused&&(null==this.video.getAttribute("src")||""==this.video.getAttribute("src"))&&null!=this.media&&this.media.duration>0;if(i&&(this.prePlaybackSeekRelativePosition=e/this.media.duration),this.isDvr()&&(e=this.dvrWindowTimeToDvrRelativePlaybackTime(e)),this.currentTime=e,this.reloadPlayerSourceAndCurrentTimeIfNeeded(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),!i&&this.video.readyState>=1&&this.currentTime>=0){let e=this.currentTime;t=isFinite(e);}else t=!1;t&&(this.video.currentTime=this.currentTime),i&&this.video.load(),!this.video.paused||"Microsoft Internet Explorer"!=F.browserName&&"Edge"!=F.browserName||this.preloadPausedVideoAfterSeek();}preloadPausedVideoAfterSeek(){let e=this;try{let t=this.video.play();null!=t?t.then((function(){e.video.pause();})):this.video.pause();}catch(e){console.error("Error occured during seeking in VideoWeb component, when video was played.");}}selectAudio(e){}selectSubtitles(e){}volume(e){this.video.volume=e;}isEventFromRightContext(){return null!=this.video&&null!=this.media&&null!=this.media.source&&this.video.getAttribute("src")==this.media.source[0].url}setData(e){this.media=e,this.areSubtitlesAndAudioTracksInitialized=!1,this.isStartTimeInitialized=!1,this.onErrorFallbackTriesNum=0,this.iosIsStalledConnection=!1,this.iosIsStalledConnectionDetectionEnabled=!1,this.isPlaybackNotAllowed=!1,this.hasCriticalErrorBeenDispatched=!1,this.mobileOrSafariBufferingTimeoutOccurred=!1,this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.stopInitializeAfterCanplaythrouTimer(),this.mediaSourceUrl=e.source[0].url,null!=this.video&&null!=this.video.src&&this.video.duration>0&&(this.pause(),null!=this.video.seekable&&this.video.seekable.length>0&&(this.video.currentTime=this.video.seekable.start(0))),Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowStartTime")?(this.dvrWindowStartTimeTs=n.field(this.variables,"dvrWindowStartTime"),this.getNowTs()<this.dvrWindowStartTimeTs&&(this.dvrWindowStartTimeTs=null),n.deleteField(this.variables,"dvrWindowStartTime")):this.dvrWindowStartTimeTs=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowEndTime")?(this.dvrWindowEndTimeTs=n.field(this.variables,"dvrWindowEndTime"),n.deleteField(this.variables,"dvrWindowEndTime")):this.dvrWindowEndTimeTs=null,this.dvrPlaybackStartTs=null,this.dvrRequestedInitialTimeTs=null,this.dvrWindowTailLastSend=null,this.currentTime=0,this.prePlaybackSeekRelativePosition=null;let t=this.getPlaybackStartTime(e);null!=t&&t>0&&(this.currentTime=t),this.state=0,1==this.variables.autoplay&&this.play();}getPlaybackStartTime(e){let t=null;return null!=this.dvrWindowStartTimeTs&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<this.getNowTs()&&this.isDvr()&&(t=this.dvrWindowStartTimeTs,this.dvrRequestedInitialTimeTs=this.dvrWindowStartTimeTs),null!=e&&null!=e.mediaUserSettings&&null!=e.mediaUserSettings.resumePostion&&(t=e.mediaUserSettings.resumePostion),null==t&&null!=this.dvrWindowStartTimeTs&&t<this.dvrWindowStartTimeTs&&(t=this.dvrWindowStartTimeTs),null==t&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<t&&(t=this.dvrWindowEndTimeTs),this.isDvr()&&null!=t&&(this.dvrRequestedInitialTimeTs=t),t}playerResize(e){}videoReady(){}onDurationChange(e){}updateSubtitlesSets(){let e=this.video.textTracks;if(null!=e&&e.length>0){let t=[],i=0;for(;i<e.length;){let s=e[i];if(++i,null==s.language||""==s.language)continue;let a=new f;a.id=s.language+"",a.name=g.normalizeLanguageNameFormat(g.getLanguageNativeNameByCode(s.language)),a.languageCode=s.language,t.push(a);}if(null!=this.variables.subtitles&&t.length>0&&g.preselectSubtitlesSet(this.variables.subtitles,t),t.length>0){let e=new c("subtitleData");e.data=t,e.dispatch(this.context);}}}onSelectSubtitles(e){if(null==e||null==this.video)return;let t=e.data;if(null!=t){let e=this.video.textTracks,i=null,s=0;for(;s<e.length;){let a=e[s];++s,a.mode="hidden",a.language==t.id&&(i=a);}null!=i&&(i.mode="showing");}else {let e=this.video.textTracks,t=0;for(;t<e.length;)e[t++].mode="hidden";}}updateAudioSets(){let e=this.video.audioTracks;if(null!=e&&e.length>=this.minAudioTracksForInfo){let t=[],i=0;for(;i<e.length;){let s=e[i];if(++i,null==s.language||""==s.language)continue;let a=new _;a.id=r.string(s.language)+"",a.name=g.normalizeLanguageNameFormat(g.getLanguageNativeNameByCode(s.language)),null!=a.name&&""!=a.name||(a.name=s.label),null!=a.name&&""!=a.name||(a.name=s.language),a.languageCode=s.language,a.isDefault=s.enabled,t.push(a);}if(t.length>=this.minAudioTracksForInfo){let e=new c("audioData");e.data=t,e.dispatch(this.context);}}}onSelectAudio(e){if(null==e||null==this.video)return;let t=e.data;if(null==t)return;if(this.getActiveTrackLanguage()==t.id)return;let i=!this.video.paused;i&&this.video.pause();let s=this;H.delay((function(){let e=X.__cast(s.video,HTMLVideoElement).audioTracks;if(null!=e){let i=0;for(;i<e.length;)e[i++].enabled=!1;if(null!=t){let i=0;for(;i<e.length;){let s=e[i];++i,s.language==t.id&&(s.enabled=!0);}}}i&&s.video.play();}),100);}getActiveTrackLanguage(){let e=null,t=X.__cast(this.video,HTMLVideoElement).audioTracks;if(null==t)return e;let i=0;for(;i<t.length;){let s=t[i];if(++i,s.enabled){e=s.language;break}}return e}onPlayerResizeEvent(e){"Safari"!=F.browserName||F.isSamsungSmartTVTizen||this.updateSafariStylingForSubtitles();}onWindowResize(){"Safari"!=F.browserName||F.isSamsungSmartTVTizen||(this.updateSafariStylingForSubtitles(),H.delay(J(this,this.updateSafariStylingForSubtitles),300));}updateSafariStylingForSubtitles(){if(null==this.video)return;if(!N.subtitlesStylesForSafariInitialized){let e="",t=0;for(;t<100;){let i=t++;e+="video.bs-subs-top"+i+"::-webkit-media-text-track-container {top:"+i+"%;overflow:visible;} ",e+="video.bs-subs-height"+i+"::-webkit-media-text-track-container {height:"+i+"%;} ";}let i=10;for(;i<80;){let t=i++;e+="video.bs-subs-fontsize"+t+"::cue {font-size:"+t+"px;} ";}let s=document.createElement("style");s.setAttribute("type","text/css"),s.innerHTML=e,document.body.appendChild(s),N.subtitlesStylesForSafariInitialized=!0;}let e=this.video.clientWidth,t=this.video.clientHeight,i=this.video.videoWidth,s=this.video.videoHeight;if(i>0&&s>0&&e>0&&t>0){let a=this.getVideoVisibleVideoSize(e,t,i,s),n=[],r=0,l=this.video.classList;for(;r<l.length;){let e=l[r];++r,null!=e&&0!=e.indexOf("bs-subs-")&&n.push(e);}let o=n.join(" ")+" ";t>e&&a.y>0&&(a=this.adjustSubtitlesPlaceholderForMobiles(e,t,a),o+="bs-subs-top"+Math.floor(100*a.y/t)+" bs-subs-height"+Math.floor(100*a.h/t)+" bs-subs-fontsize"+Math.ceil(.05*Math.min(a.w,a.h))),e>t&&F.isiPhone&&(o+=" bs-subs-height"+(100-Math.ceil(3e3/t))+" "),this.video.setAttribute("class",o);}}getVideoVisibleVideoSize(e,t,i,s){let a=i/s,n=0,r=0;e/t>i/s?(r=t,n=t/s*i):(n=e,r=e/i*s);let l=0,o=0,d=0,h=0;return n/r>a?(h=r,d=r*a):(d=n,h=n/a),l=(e-d)/2,o=(t-h)/2,{x:l,y:o,w:d,h}}adjustSubtitlesPlaceholderForMobiles(e,t,i){return t>e&&i.y>0?{x:i.x,y:Math.floor(i.y/2),w:i.w,h:i.h+i.y}:i}getM3U8MediaSource(e){let t=0;for(;t<e.length;){let i=e[t];if(++t,"m3u8"==N.getExtension(i.url))return i}return null}isAdsInsertionStream(e){return null!=e.source&&e.source.length>0&&null!=e.source[0]&&1==e.source[0].customParams.h.yospaceStream}saveBandwidthModeVisibilityChange(e){}static canPlay(e){let t=N.getExtension(e.url);if("com/videoplayback"==t&&null!=e.url&&-1!=e.url.indexOf("googlevideo.com/videoplayback")&&-1!=e.url.indexOf("mime=video/mp4")&&(t="mp4"),F.isAndroid&&"m3u8"==t)return !1;if(!Object.prototype.hasOwnProperty.call(N.canPlayFileExtensionCache.h,t)){let e=N.canPlayFileExtensionCache,i=N.checkIfCanPlayFileType(t);e.h[t]=i;}return N.canPlayFileExtensionCache.h[t]}static getExtension(e){let t=e.split("?")[0];if(t=a.substr(t,t.lastIndexOf(".")+1,null).toLowerCase(),-1!=e.indexOf(";jsessionid=")){let i=e.split(";jsessionid=")[0];t=a.substr(i,i.lastIndexOf(".")+1,null).toLowerCase();}return t}static checkIfCanPlayFileType(e){let t="";return t="m3u8"==e?"application/vnd.apple.mpegurl":"video/"+e,""!=window.document.createElement("video").canPlayType(t)}static getInstance(e,t){let i=t?"ad_":"";if(Object.prototype.hasOwnProperty.call(N.instances.h,i+e))return N.instances.h[i+e];{let s=new N(t);return N.instances.h[i+e]=s,s.context=e,s.create(),s}}}N.__name__="bs.player.plugin.video.videoPlayer.VideoWeb",Object.assign(N.prototype,{__class__:N,minAudioTracksForInfo:null,context:null,variables:null,isAdvertisement:null,isInStreamAdvertisement:null,initialAsAdvertisement:null,inStreamAdvertStartPos:null,inStreamAdvertMedia:null,hasCriticalErrorBeenDispatched:null,video:null,media:null,mediaSourceUrl:null,subtitlesRenderer:null,currentTime:null,state:null,fairPlayDrm:null,mobileOrSafariBufferingTimeoutTimer:null,mobileOrSafariBufferingTimeoutOccurred:null,initializeAfterCanplaythrouTimer:null,areSubtitlesAndAudioTracksInitialized:null,prePlaybackSeekRelativePosition:null,videoElementPromise:null,videoElementCommandsQueue:null,isStartTimeInitialized:null,isPlaybackNotAllowed:null,onErrorFallbackTriesNum:null,isBuffering:null,lastPausedTime:null,iosIsStalledConnection:null,iosIsStalledConnectionDetectionEnabled:null,iosIsStalledConnectionProblemsStart:null,iosHitDecoderAfter:null,iosLastPlayingEvent:null,iosLastPlayingEventPosition:null,androidHlsPlaybackWatchdogTimer:null,androidHlsPlaybackEndWatchdogTimer:null,playbackRestartTimeoutTimer:null,liveStreamEndingTimeout:null,liveEdgeUpdateTimer:null,dvrWindowStartTimeTs:null,dvrWindowTailLastSend:null,dvrWindowEndTimeTs:null,dvrPlaybackStartTs:null,dvrRequestedInitialTimeTs:null,playbackRate:null});class W{constructor(e){this.videoWeb=e,this.initialized=!1,this.initKeySessionData=null;}reset(){this.clearStepTimeoutTimer(),null!=this.keySession&&(this.keySession.removeEventListener("webkitkeymessage",J(this,this.onLicenseWaiting),!1),this.keySession.removeEventListener("webkitkeyadded",J(this,this.onKeyAdded),!1),this.keySession.removeEventListener("webkitkeyerror",J(G=this.videoWeb,G.onError),!1)),this.initialized=!1,this.laUrl=null,this.certUrl=null,this.certificate=null,this.keySystem=null,this.keySession=null,this.stepTimeoutTimer=null,this.initKeySessionData=null;}setStepTimeoutTimer(){this.clearStepTimeoutTimer(),this.stepTimeoutTimer=H.delay(J(this,this.onStepTimeout),3e4);}clearStepTimeoutTimer(){null!=this.stepTimeoutTimer&&(this.stepTimeoutTimer.stop(),this.stepTimeoutTimer=null);}init(e,t){if("Safari"!=F.browserName)return void this.videoWeb.onError("FairPlay DRM is not supported by this browser.");this.videoWeb.state=10,this.currMedia=e,this.setStepTimeoutTimer();let i=null;try{i=t.drm.provider;}catch(e){}this.drmProvider=null!=i?i.toLowerCase():null;try{this.certUrl=t.customParams.h.certUrl,this.laUrl=t.customParams.h.laUrl;}catch(e){}try{null==this.certUrl&&(this.certUrl=t.drm.fairplay.certUrl,this.laUrl=t.drm.fairplay.laUrl);}catch(e){}try{this.drmCustomData=t.drm.fairplay.customData;}catch(e){}if("ezdrm"==i){let e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",J(this,this.onCertificateResponseRawBytes),!1),e.addEventListener("error",J(this,this.onServerCertificateDownloadError),!1),e.open("GET",this.certUrl,!0),e.send();}else if("keyos"==i){let e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",J(this,this.onCertificateResponseRawBytes),!1),e.addEventListener("error",J(this,this.onServerCertificateDownloadError),!1),e.open("GET",this.certUrl,!0),e.send();}else if("default"==i){let e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",J(this,this.onCertificateResponseRawBytes),!1),e.addEventListener("error",J(this,this.onServerCertificateDownloadError),!1),e.open("GET",this.certUrl,!0),e.send();}else if(null==e.drmCustomLicenseServerHandler){let e=new Q(this.certUrl);e.setHeader("Accept","application/json"),e.onData=J(this,this.onCertificateResponse),e.onError=J(this,this.onServerCertificateDownloadError),e.request(!0);}else e.drmCustomLicenseServerHandler.customFairplayCertificateRequestHandler(J(this,this.onCertificateResponse),J(this,this.onServerCertificateDownloadError));}onServerCertificateDownloadError(e){this.videoWeb.state=11,this.videoWeb.onError("DRM initialization error. Error occurred during DRM server certificate download.");}onCertificateResponseRawBytes(e){this.videoWeb.state=11,this.setStepTimeoutTimer(),this.certificate=new Uint8Array(e.target.response),this.videoWeb.video.play();}onCertificateResponse(e){this.videoWeb.state=11,this.setStepTimeoutTimer();let t=JSON.parse(e);if(!Object.prototype.hasOwnProperty.call(t,"certificate"))throw new Error("Cannot initialize DRM module.");if(this.certificate=this.base64DecodeUint8Array(t.certificate),this.videoWeb.video.play(),null!=this.initKeySessionData){let e=this.initKeySessionData;this.initKeySessionData=null,this.initKeySession(e);}}onNeedKey(e){"Safari"==F.browserName?null!=this.certificate?this.initKeySession(e.initData):this.initKeySessionData=e.initData:this.videoWeb.onError("FairPlay DRM is not supported by this browser.");}initKeySession(e){this.videoWeb.state<12&&(this.setStepTimeoutTimer(),this.videoWeb.state=12);let t=this.extractContentId(e,!0),i=this.concatInitDataIdAndCertificate(e,t,this.certificate);this.videoWeb.video.webkitKeys||(this.keySystem=this.selectKeySystem(),this.videoWeb.video.webkitSetMediaKeys(new window.WebKitMediaKeys(this.keySystem))),this.videoWeb.video.webkitKeys||this.videoWeb.onError("DRM initialization error. Could not create MediaKeys."),this.keySession=this.videoWeb.video.webkitKeys.createSession("video/mp4",i),null==this.keySession&&this.videoWeb.onError("DRM initialization error. Could not create key session"),this.keySession.contentId=t,this.keySession.keyPath=this.extractContentId(e,!1),this.keySession.addEventListener("webkitkeymessage",J(this,this.onLicenseWaiting),!1),this.keySession.addEventListener("webkitkeyadded",J(this,this.onKeyAdded),!1),this.keySession.addEventListener("webkitkeyerror",J(G=this.videoWeb,G.onError),!1);}extractContentId(e,t){null==t&&(t=!0);let s=this.arrayToString(e),a=null;if("ezdrm"==this.drmProvider){let e=document.createElement("a");e.href=s,a=e.hostname;}else {if(-1==s.indexOf("skd://"))throw new Error("DRM Initialization error. Cannot prepare content identifier from initData.");if(a=s.split("skd://")[1],t){let e=new i("\\?.*?key[^=]*=([a-fA-F0-9]+)","");e.match(a)&&(a=e.matched(1)),a=a.split("?")[0];}}return a}concatInitDataIdAndCertificate(e,t,i){"string"==typeof t&&(t=this.stringToArray(t));let s=0,a=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),n=new DataView(a);new Uint8Array(a,0,e.byteLength).set(e),s=0+e.byteLength,n.setUint32(s,t.byteLength,!0),s+=4;let r=new Uint16Array(a,s,t.length);return r.set(t),s+=r.byteLength,n.setUint32(s,i.byteLength,!0),s+=4,new Uint8Array(a,s,i.byteLength).set(i),new Uint8Array(a,0,a.byteLength)}selectKeySystem(){if(window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))return "com.apple.fps.1_0";throw new Error("Key System not supported")}onLicenseWaiting(e){this.videoWeb.state<13&&(this.videoWeb.state=13,this.setStepTimeoutTimer());let t=e.message;if("ezdrm"==this.drmProvider){let e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",J(this,this.onLicenseLoadedRawBytes),!1),e.addEventListener("error",J(G=this.videoWeb,G.onError),!1),e.open("POST",this.laUrl,!0),e.setRequestHeader("Content-type","application/octet-stream"),e.send(t);}else if("keyos"==this.drmProvider){let e=new Q(this.laUrl);e.setHeader("customdata",this.drmCustomData),e.onData=J(this,this.onLicenseLoadedBase64),e.onError=J(G=this.videoWeb,G.onError);let i="";i+="spc="+this.base64EncodeUint8Array(t);let s=this.keySession.contentId;i+="&assetId="+encodeURIComponent(s),e.setPostData(i),e.request(!0);}else if("default"==this.drmProvider){let e=new Q(this.laUrl);e.setHeader("customdata",this.drmCustomData),e.onData=J(this,this.onLicenseLoadedBase64),e.onError=J(G=this.videoWeb,G.onError);let i="";i+="spc="+this.base64EncodeUint8Array(t);let s=this.keySession.contentId;i+="&assetId="+encodeURIComponent(s),e.setPostData(i),e.request(!0);}else if(null==this.currMedia.drmCustomLicenseServerHandler){let e=this.base64EncodeUint8Array(t),i=new Q(this.laUrl);i.setHeader("Accept","application/json"),i.setHeader("Content-Type","application/json"),i.onData=J(this,this.onLicenseLoaded),i.onError=J(G=this.videoWeb,G.onError),i.setPostData(JSON.stringify({spc:e})),i.request(!0);}else this.currMedia.drmCustomLicenseServerHandler.customFairplayLicenseRequestHandler(t,J(this,this.onCustomLicenseLoaderSuccess),J(G=this.videoWeb,G.onError),this.keySession);}onLicenseLoadedRawBytes(e){this.videoWeb.state<14&&(this.videoWeb.state=14,this.setStepTimeoutTimer()),this.keySession.update(new Uint8Array(e.target.response));}onLicenseLoadedBase64(e){this.videoWeb.state<14&&(this.videoWeb.state=14,this.setStepTimeoutTimer()),this.keySession.update(this.base64DecodeUint8Array(e));}onLicenseLoaded(e){this.videoWeb.state<14&&(this.videoWeb.state=14,this.setStepTimeoutTimer());let t=this.base64DecodeUint8Array(JSON.parse(e).licence);this.keySession.update(t);}onCustomLicenseLoaderSuccess(e){this.videoWeb.state<14&&(this.videoWeb.state=14,this.setStepTimeoutTimer()),this.keySession.update(new Uint8Array(e));}onKeyAdded(){this.clearStepTimeoutTimer(),this.videoWeb.state=15;}onStepTimeout(){null!=this.videoWeb.video&&this.videoWeb.video.currentTime>0||(this.videoWeb.state=20,this.videoWeb.onError("DRM initialization error. Internal error - DRM initialisation timeout."));}stringToArray(e){let t=new Uint16Array(new ArrayBuffer(2*e.length)),i=0,s=e.length;for(;i<s;){let s=i++;t[s]=a.cca(e,s);}return t}arrayToString(e){let t=new Uint16Array(e.buffer),i="",s=0,a=t.length;for(;s<a;){let e=s++;i+=String.fromCodePoint(t[e]);}return i}base64DecodeUint8Array(e){let t=window.atob(e),i=t.length,s=new Uint8Array(new ArrayBuffer(i)),n=0;for(;n<i;){let e=n++;s[e]=a.cca(t,e);}return s}base64EncodeUint8Array(e){let t,i,s,a,n,r,l,o="",d=0;for(;d<e.length;)t=e[d++],i=d<e.length?e[d++]:null,s=d<e.length?e[d++]:null,a=t>>2,n=(3&t)<<4|i>>4,r=(15&i)<<2|s>>6,l=63&s,null==i?(l=64,r=64):null==s&&(l=64),o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l);return o}}W.__name__="bs.player.plugin.video.videoPlayer.VideoWebHelperForFairPlayDrm",Object.assign(W.prototype,{__class__:W,videoWeb:null,initialized:null,laUrl:null,certUrl:null,certificate:null,keySystem:null,keySession:null,stepTimeoutTimer:null,drmProvider:null,drmCustomData:null,initKeySessionData:null,currMedia:null});var F=require("bs.util.BrowserTools"),U=require("bs.util.TextTools");class B extends Error{constructor(e,t,i){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=i?i:this;}unwrap(){return this.__nativeException}get_native(){return this.__nativeException}static caught(e){return e instanceof B?e:e instanceof Error?new B(e.message,null,e):new j(e,null,e)}static thrown(e){if(e instanceof B)return e.get_native();if(e instanceof Error)return e;return new j(e)}}B.__name__="haxe.Exception",B.__super__=Error,Object.assign(B.prototype,{__class__:B,__skipStack:null,__nativeException:null,__previousException:null});var H=require("haxe.Timer");class j extends B{constructor(e,t,i){super(String(e),t,i),this.value=e;}unwrap(){return this.value}}j.__name__="haxe.ValueException",j.__super__=B,Object.assign(j.prototype,{__class__:j,value:null});var q=require("haxe.ds.List");class K{constructor(e,t){this.item=e,this.next=t;}}K.__name__="haxe.ds._List.ListNode",Object.assign(K.prototype,{__class__:K,item:null,next:null});var G,Y=require("haxe.ds.StringMap"),Q=require("haxe.http.HttpJs");class X{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=X.__nativeClassName(e);return null!=i?X.__resolveNativeClass(i):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return "<function>";case"object":if(e instanceof Array){let i="[";t+="\t";let s=0,a=e.length;for(;s<a;){let a=s++;i+=(a>0?",":"")+X.__string_rec(e[a],t);}return i+="]",i}let i;try{i=e.toString;}catch(e){return "???"}if(null!=i&&i!=Object.toString&&"function"==typeof i){let t=e.toString();if("[object Object]"!=t)return t}let s="{\n";t+="\t";let a=null!=e.hasOwnProperty,n=null;for(n in e)a&&!e.hasOwnProperty(n)||"prototype"!=n&&"__class__"!=n&&"__super__"!=n&&"__interfaces__"!=n&&"__properties__"!=n&&(2!=s.length&&(s+=", \n"),s+=t+n+" : "+X.__string_rec(e[n],t));return s+="\n"+(t=t.substring(1))+"}",s;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let i=e.__interfaces__;if(null!=i&&(null==e.__super__||e.__super__.__interfaces__!=i)){let e=0,s=i.length;for(;e<s;){let s=i[e++];if(s==t||X.__interfLoop(s,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case te:return "boolean"==typeof e;case $:return null!=e;case ee:return "number"==typeof e;case Z:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(X.__downcastCheck(e,t))return !0}else if("object"==typeof t&&X.__isNativeObj(t)&&e instanceof t)return !0;return t==ie&&null!=e.__name__||t==se&&null!=e.__ename__}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&X.__interfLoop(X.getClass(e),t)}static __cast(e,t){if(null==e||X.__instanceof(e,t))return e;throw B.thrown("Cannot cast "+r.string(e)+" to "+r.string(t))}static __nativeClassName(e){let t=X.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=X.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}function J(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:s=e.hx__closures__[i.__id__],null==s&&(s=i.bind(e),e.hx__closures__[i.__id__]=s),s);var s;}X.__name__="js.Boot",t.$haxeUID|=0,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var Z={},$={},ee=Number,te=Boolean,ie={},se={};X.__toStr={}.toString,A._hx_skip_constructor=!1,I.SUPPORT_RATE_NOT_SUPPORTED=0,I.SUPPORT_RATE_BEST_RATE=1,I.PERMAMENT_PLAYBACK_ERROR_SAFETY_WINDOW=6e3,I.__plugfaces__="IVideoPluginSupportRateForUrls,IPlugin",O.instances=new Y,N.canPlayFileExtensionCache=new Y,N.instances=new Y,N.subtitlesStylesForSafariInitialized=!1;}(exports,window);
!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.video=e.bs.player.plugin.video||{},e.bs.player.plugin.video.videoPlayer=e.bs.player.plugin.video.videoPlayer||{};var i=require("haxe.HxOverrides");Math.__name__="Math";var s=require("haxe.Reflect");class a{static string(e){return L.__string_rec(e,"")}static parseInt(e){let t=parseInt(e);return isNaN(t)?null:t}}a.__name__="Std";class l{static getInstanceFields(e){let t=[];for(;null!=e;){let i=0,s=Object.getOwnPropertyNames(e.prototype);for(;i<s.length;){let e=s[i];switch(++i,e){case"__class__":case"__properties__":case"constructor":break;default:-1==t.indexOf(e)&&t.push(e);}}e=e.__super__;}return t}}l.__name__="Type";var r=require("bs.player.core.events.AdEvent"),n=require("bs.player.core.events.ControlEvent"),o=require("bs.player.core.events.DataProviderEvent"),d=require("bs.player.core.events.VideoEvent"),h=require("bs.player.core.manager.I18NHelper"),u=require("bs.player.core.model.Media"),v=require("bs.player.core.model.Live"),p=require("bs.player.core.model.LiveStream"),c=require("bs.player.core.model.SubtitlesSet"),m=require("bs.player.core.model.AudioSet"),y=require("bs.player.core.model.VideoQualityEventData");class g{constructor(){this.pluginName="";let e=L.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,i=exports.configuration;this.pluginConfig=null!=i&&Object.prototype.hasOwnProperty.call(i,t)?s.field(i,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}g.__name__="bs.player.core.plugin.PluginBase",Object.assign(g.prototype,{__class__:g,uid:null,context:null,className:null,pluginConfig:null,variables:null,eventHub:null,parentDisplay:null,display:null,player:null,pluginName:null});var S=require("bs.player.core.plugin.VideoPlayerUtil");class b{static create(e){return null==e&&(e={}),new exports.Hls(e)}}b.__name__="bs.player.plugin.video.videoPlayer.HlsJsFactory";class T{constructor(e){this.saveBandwidthModeStore=null,this.playbackRate=1,this.initialAsAdvertisement=!1,this.isInStreamAdvertisement=!1,this.isAdvertisement=!1,this.minAudioTracksForInfo=2,null==T.instances.h[(e?"ad_":"")+this.context]&&(this.pluginConfig=S.readPluginConfig(this),this.isAdvertisement=e,this.initialAsAdvertisement=e,this.isInStreamAdvertisement=!1,this.isQualitySelectionEnabled=!0,this.hasSubtitlesAndAudioInitialized=!1,this.liveStreamRestartsOnError=0,this.prePlaybackSeekRelativePosition=null,this.prePlaybackHandlingSeeking=!1,this.dvrPlaybackStartTs=null,this.dvrRequestedInitialTimeTs=null,this.dvrWindowLength=null,this.dvrIsSupported=!1,this.isHlsLiveStream=!1,this.isPlaybackNotAllowed=!1,this.lastTimeUpdatePostionForEdgeBrowser=null,this.unfreezeEdgeBrowserTimer=null,this.hlsQualityLevel=a.parseInt("-1"),this.playbackState=0,this.saveBandwidthModeStore=null);}create(){n.add(this.context,"selectSubtitles",A(this,this.onSelectSubtitles)),n.add(this.context,"selectAudio",A(this,this.onSelectAudio)),n.add(this.context,"requestVideoQualityChange",A(this,this.onVideoQualityChange)),r.add(this.context,"adInStreamPlaying",A(this,this.onAdInStreamPlaying)),r.add(this.context,"adInStreamPlayingSilent",A(this,this.onAdInStreamPlaying)),r.add(this.context,"adInStreamEnd",A(this,this.onAdInStreamEnd)),r.add(this.context,"adInStreamEndSilent",A(this,this.onAdInStreamEnd)),r.add(this.context,"adInStreamClipPlaying",A(this,this.onAdClipInStreamPlaying)),r.add(this.context,"adInStreamClipPlayingSilent",A(this,this.onAdClipInStreamPlaying)),r.add(this.context,"adInStreamClipEnd",A(this,this.onAdClipInStreamEnd)),r.add(this.context,"adInStreamClipEndSilent",A(this,this.onAdClipInStreamEnd));}destroy(){n.remove(this.context,"selectSubtitles",A(this,this.onSelectSubtitles)),n.remove(this.context,"selectAudio",A(this,this.onSelectAudio)),n.remove(this.context,"requestVideoQualityChange",A(this,this.onVideoQualityChange)),r.remove(this.context,"adInStreamPlaying",A(this,this.onAdInStreamPlaying)),r.remove(this.context,"adInStreamPlayingSilent",A(this,this.onAdInStreamPlaying)),r.remove(this.context,"adInStreamEnd",A(this,this.onAdInStreamEnd)),r.remove(this.context,"adInStreamEndSilent",A(this,this.onAdInStreamEnd)),r.remove(this.context,"adInStreamClipPlaying",A(this,this.onAdClipInStreamPlaying)),r.remove(this.context,"adInStreamClipPlayingSilent",A(this,this.onAdClipInStreamPlaying)),r.remove(this.context,"adInStreamClipEnd",A(this,this.onAdClipInStreamEnd)),r.remove(this.context,"adInStreamClipEndSilent",A(this,this.onAdClipInStreamEnd)),this.stopLiveEdgeUpdateTimer(),this.cleanVideoAndPlayer(),this.media=null,this.liveStreamRestartsOnError=0;}cleanVideoAndPlayer(){this.cleanPlayer(),null!=this.video&&(this.video.removeEventListener("pause",A(this,this.onHlsjsPause)),this.video.removeEventListener("play",A(this,this.onHlsjsPlay)),this.video.removeEventListener("playing",A(this,this.onHlsjsPlaying)),this.video.removeEventListener("timeupdate",A(this,this.onHlsjsTimeupdate)),this.video.removeEventListener("durationchange",A(this,this.onHlsjsDurationchange)),this.video.removeEventListener("waiting",A(this,this.onHlsjsWaiting)),this.video.removeEventListener("ended",A(this,this.onHlsjsEnded)),this.video.removeEventListener("seeked",A(this,this.onHlsjsSeeked)),this.video.removeEventListener("canplaythrough",A(this,this.onVideoCanplaythrough)),null!=this.video.textTracks&&this.video.textTracks.removeEventListener("addtrack",A(this,this.onAddTrack)),this.video.removeEventListener("ratechange",A(this,this.onVideoRateChange)),this.video.pause(),this.video=null),this.source=null,this.saveBandwidthModeStore=null;}onAdInStreamPlaying(e){this.isAdvertisement=!0,this.isInStreamAdvertisement=!0;}onAdClipInStreamPlaying(e){null!=this.video&&null!=this.media&&(this.inStreamAdvertStartPos=null,this.video.currentTime>=0&&(this.inStreamAdvertStartPos=this.video.currentTime),this.inStreamAdvertMedia=null,null!=e&&null!=e.data&&(this.inStreamAdvertMedia=e.data.media));}onAdClipInStreamEnd(e){this.inStreamAdvertStartPos=null,this.inStreamAdvertMedia=null;}onAdInStreamEnd(e){this.isAdvertisement=this.initialAsAdvertisement,this.isInStreamAdvertisement=!1;}onLiveEdgeUpdate(){null!=this.player&&this.hasSubtitlesAndAudioInitialized&&this.isPaused()&&this.dispatchEvent(this.isAdvertisement?new r("adCurrentTimeChange"):new d("currentTimeChange"));}dispatchEvent(e,t){if(null==this.video)return;let i=this.video.duration,s=this.video.currentTime;if(null!=this.media&&this.hasSubtitlesAndAudioInitialized&&(this.media.mediaPlaybackInfo.currentTime=s,this.media.mediaPlaybackInfo.isPlaying=!this.video.paused,null!=this.player&&null!=this.player.levels&&null!=this.player.currentLevel&&this.player.currentLevel<this.player.levels.length&&null!=this.player.levels[this.player.currentLevel]&&this.player.levels[this.player.currentLevel].bitrate>0&&(this.media.mediaPlaybackInfo.currentTotalBitrateKpbs=Math.round(this.player.levels[this.player.currentLevel].bitrate/1e3)),this.media.mediaPlaybackInfo.playbackRate=this.getPlaybackRate(),this.isDvr()&&(s=this.dvrRelativePlaybackTimeToDvrWindowTime(this.video.currentTime),this.media.mediaPlaybackInfo.currentTime=this.dvrRelatibePlaybackTimeToTs(this.video.currentTime))),this.isDvr()){i=this.dvrIsSupported?this.dvrWindowLength:1;let e=this.media,t=this.getDVRWindowRange();null!=t&&null!=this.dvrPlaybackStartTs?(e.dvrWindowLength=t.end-t.start,e.dvrWindowLiveEdge=this.dvrRelatibePlaybackTimeToTs(t.end)):(e.dvrWindowLength=this.dvrWindowLength,e.dvrWindowLiveEdge=(new Date).getTime()/1e3),null!=e.dvrWindowLength&&(i=e.dvrWindowLength),null==this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer=new w(1e3),this.liveEdgeUpdateTimer.run=A(this,this.onLiveEdgeUpdate));}null==e.data&&(e.data={}),0==s&&null!=this.media&&null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0&&(s=this.media.mediaUserSettings.resumePostion),this.isInStreamAdvertisement&&this.inStreamAdvertStartPos>=0&&(s=this.video.currentTime-this.inStreamAdvertStartPos,null!=this.inStreamAdvertMedia&&(i=this.inStreamAdvertMedia.duration),s>i&&(s=i)),e.data.duration=i,e.data.currentTime=s,e.data.videoTagCurrentTime=this.video.currentTime,e.data.source=this.video.currentSrc,e.data.media=this.media,e.data.additionalData=t,this.isPlaybackNotAllowed&&(null==e.data.additionalData&&(e.data.additionalData={}),e.data.additionalData.isPlaybackNotAllowed=!0),e.dispatch(this.context);}onHlsjsLevelLoaded(e,t){null!=t&&null!=t.details&&(this.isHlsLiveStream=t.details.live,this.checkMediaType(),null==this.dvrWindowLength&&(this.dvrWindowLength=t.details.totalduration,this.dvrIsSupported=this.dvrWindowLength>this.getLiveStreamDvrMinLen()),null!=t.level&&this.updateVideoQualityPlaybackLevel(t.level)),this.triggerCodecsEvent();}getLiveStreamDvrMinLen(){let e=600;return Object.prototype.hasOwnProperty.call(this.variables,"dvrMinLenForSeekbar")&&this.variables.dvrMinLenForSeekbar>=0&&(e=this.variables.dvrMinLenForSeekbar),Object.prototype.hasOwnProperty.call(this.pluginConfig,"liveStreamDvrMinLen")&&null!=s.field(this.pluginConfig,"liveStreamDvrMinLen")&&(e=this.pluginConfig.liveStreamDvrMinLen),e}onHlsjsManifestLoaded(e,t){this.isDvr()&&(this.dvrPlaybackStartTs=null),this.triggerCodecsEvent(),this.updateVideoQualityList();}checkMediaType(){if(this.media instanceof u&&this.isHlsLiveStream&&!(this.media instanceof v)){let e=new v,t=l.getInstanceFields(u),i=0;for(;i<t.length;){let a=t[i];++i,e[a]=s.field(this.media,a);}this.media=e;let a=new o("mediaAfterPlaybackStartMetadata");a.data=e,a.dispatch(this.context);}if(this.media instanceof v&&!this.isHlsLiveStream&&this.video.duration>0){let e=new u,t=l.getInstanceFields(u),i=0;for(;i<t.length;){let a=t[i];++i,e[a]=s.field(this.media,a);}this.media=e;let a=new o("mediaAfterPlaybackStartMetadata");a.data=this.media,a.dispatch(this.context);}}xhrSetupForToHttpsRedirect(e,t){"http://"==i.substr(t,0,7)&&(t="https://"+i.substr(t,7,null)),this.xhrSetupForNetworkActivity(e,t),e.open("GET",t,!0);}xhrSetupForNetworkActivity(e,t){let i=this;e.addEventListener("progress",(function(e){i.emitNetworkActivity(t,e);}));}emitNetworkActivity(e,t){let i=new d("networkActivityUrl");i.data={url:e,loaded:t.loaded},i.dispatch(this.context);}initPlayer(){let e={maxMaxBufferLength:120,maxBufferLength:30,autoStartLoad:!0,lowLatencyMode:!1,capLevelOnFPSDrop:!0,fpsDroppedMonitoringPeriod:1e4,fpsDroppedMonitoringThreshold:.05};if(f.isSamsungSmartTVTizen&&(e.liveSyncDuration=20),Object.prototype.hasOwnProperty.call(this.pluginConfig,"hlsSettings")&&null!=this.pluginConfig.hlsSettings){let t=0,i=s.fields(this.pluginConfig.hlsSettings);for(;t<i.length;){let a=i[t];++t,e[a]=s.field(this.pluginConfig.hlsSettings,a);}}if(Object.prototype.hasOwnProperty.call(this.variables,"hlsSettings")&&null!=this.variables.hlsSettings){let t=0,i=s.fields(this.variables.hlsSettings);for(;t<i.length;){let a=i[t];++t,e[a]=s.field(this.variables.hlsSettings,a);}}if(Object.prototype.hasOwnProperty.call(this.variables,"saveBandwidthMode")&&L.__cast(this.variables.saveBandwidthMode,I)&&(e.capLevelToPlayerSize=!0),null!=this.media){let t=this.getPlaybackStartTime(this.media);null!=t&&(e.startPosition=t),null!=this.media.source&&this.media.source.length>0&&null!=this.media.source[0]&&1==this.media.source[0].customParams.h.hlsjsForceHttpsUse?e.xhrSetup=A(this,this.xhrSetupForToHttpsRedirect):e.xhrSetup=A(this,this.xhrSetupForNetworkActivity),this.media instanceof v&&1==this.media.lowLatencyMode&&(e.lowLatencyMode=!0);}null!=this.player&&this.player.destroy();let t=Object.prototype.hasOwnProperty.call(this.variables,"system73")&&0==this.liveStreamRestartsOnError&&window.BigInt&&window.S73HlsjsWrapper&&!this.isAdvertisement;t&&(this.s73Wrapper=S73HlsjsWrapper(s.field(this.variables,"system73"),{Hls:exports.Hls}),this.s73Wrapper.wrapPlayerConfig(e)),this.player=b.create(e),t&&this.s73Wrapper.wrapPlayer(this.player),this.player.attachMedia(this.video),this.player.on(exports.Hls.Events.LEVEL_LOADED,A(this,this.onHlsjsLevelLoaded)),this.player.on(exports.Hls.Events.LEVEL_SWITCHED,A(this,this.onHlsjsPlaybackBitrateChange)),this.player.on(exports.Hls.Events.MANIFEST_LOADED,A(this,this.onHlsjsManifestLoaded)),this.player.on(exports.Hls.Events.ERROR,A(this,this.onHlsjsError));}onPlayerResetWithMseExtension(){if(null==this.video)return;this.video.removeEventListener("player_reset",A(this,this.onPlayerResetWithMseExtension));let e=this.video;this.video=null,this.attachVideo(e),null!=this.media&&this.play();}attachSubtitlesRenderer(e){this.subtitlesRenderer=e;}attachVideo(e){this.video!=e&&(this.cleanPlayer(),Object.prototype.hasOwnProperty.call(this.variables,"qualitySelectionEnabled")&&(this.isQualitySelectionEnabled=s.field(this.variables,"qualitySelectionEnabled")),this.video=e,this.initPlayer(),this.video.addEventListener("pause",A(this,this.onHlsjsPause)),this.video.addEventListener("play",A(this,this.onHlsjsPlay)),this.video.addEventListener("playing",A(this,this.onHlsjsPlaying)),this.video.addEventListener("timeupdate",A(this,this.onHlsjsTimeupdate)),this.video.addEventListener("durationchange",A(this,this.onHlsjsDurationchange)),this.video.addEventListener("waiting",A(this,this.onHlsjsWaiting)),this.video.addEventListener("ended",A(this,this.onHlsjsEnded)),this.video.addEventListener("seeked",A(this,this.onHlsjsSeeked)),this.video.addEventListener("canplaythrough",A(this,this.onVideoCanplaythrough)),null!=this.video.textTracks&&this.video.textTracks.addEventListener("addtrack",A(this,this.onAddTrack)),this.video.addEventListener("ratechange",A(this,this.onVideoRateChange)),this.checkPlaybackRate(),this.triggerVideoPlaybackRateEvent());}setPlaybackRate(e){this.isAdvertisement||(this.playbackRate=e,this.checkPlaybackRate());}getPlaybackRate(){return this.video.playbackRate}onVideoRateChange(e){this.triggerVideoPlaybackRateEvent();}triggerVideoPlaybackRateEvent(){if(this.isAdvertisement)return;let e=new d("playbackRate");e.data=this.getPlaybackRate(),e.dispatch(this.context);}checkPlaybackRate(){let e;if(this.isAdvertisement)e=!0;else {let t=this.playbackRate;e=isNaN(t);}e||this.getPlaybackRate()==this.playbackRate||(this.video.playbackRate=this.playbackRate);}cleanPlayer(){if(null!=this.s73Wrapper){try{this.s73Wrapper.destroy();}catch(e){}this.s73Wrapper=null;}null!=this.player&&(this.player.detachMedia(),this.player.destroy(),this.player=null);}reset(){}isPaused(){return null==this.video||this.video.paused}onAddTrack(e){let t=this.isAdvertisement?new r("addTrack"):new d("addTrack");t.data={track:e},this.dispatchEvent(t);}onHlsjsPause(e){return this.dispatchEvent(this.isAdvertisement?new r("adPaused"):new d("paused")),this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1,20==this.playbackState&&this.onHlsjsEnded(),null}onHlsjsPlay(e){return this.checkPlaybackRate(),this.dispatchEvent(this.isAdvertisement?new r("adPlaying"):new d("playing")),null}stopLiveStreamRestartTimeoutTimer(){null!=this.liveStreamRestartTimeoutTimer&&(this.liveStreamRestartTimeoutTimer.stop(),this.liveStreamRestartTimeoutTimer=null);}stopLiveStreamRestartDelayTimer(){null!=this.liveStreamRestartDelayTimer&&(this.liveStreamRestartDelayTimer.stop(),this.liveStreamRestartDelayTimer=null);}stopLiveStreamEndingTimeout(){null!=this.liveStreamEndingTimeout&&(this.liveStreamEndingTimeout.stop(),this.liveStreamEndingTimeout=null);}stopLiveEdgeUpdateTimer(){null!=this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer.stop(),this.liveEdgeUpdateTimer=null);}onHlsjsPlaying(e){return this.stopLiveStreamRestartTimeoutTimer(),this.liveStreamRestartsOnError=0,this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1,this.dispatchEvent(this.isAdvertisement?new r("adPlaying"):new d("playing")),null}unfreezeEdgeBrowser(){this.stopUnfreezeEdgeBrowserTimer();let e=this;null!=this.video&&this.video.currentTime>0&&(this.video.currentTime+=.2,this.lastTimeUpdatePostionForEdgeBrowser=null,w.delay((function(){e.video.currentTime+=.2;}),100));}stopUnfreezeEdgeBrowserTimer(){null!=this.unfreezeEdgeBrowserTimer&&(this.unfreezeEdgeBrowserTimer.stop(),this.unfreezeEdgeBrowserTimer=null);}isVideoStalledAtEnd(){return null!=this.video&&!this.isDvr()&&Math.abs(this.video.duration-this.video.currentTime)<.15}triggerVideoCompleteOnVideoStalledAtEnd(){this.video.pause(),this.playbackState=25,this.video.currentTime=0;}triggerVideoCompleteOnVideoStalledAtEndComplete(){this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1,this.onHlsjsEnded(),this.playbackState=0;}onHlsjsTimeupdate(e){if(0==this.video.readyState||25==this.playbackState)return null;this.playbackState=0;let t=this.isDvr();return this.getNowTs(),this.stopUnfreezeEdgeBrowserTimer(),f.isEdge&&null!=this.video&&!this.video.paused&&(this.lastTimeUpdatePostionForEdgeBrowser==this.video.currentTime&&this.lastTimeUpdatePostionForEdgeBrowser>0&&(this.unfreezeEdgeBrowserTimer=w.delay(A(this,this.unfreezeEdgeBrowser),2e3)),this.lastTimeUpdatePostionForEdgeBrowser=this.video.currentTime),!this.isPlaybackNotAllowed||null==this.video||this.video.paused||this.video.seeking||(this.isPlaybackNotAllowed=!1),this.dispatchEvent(this.isAdvertisement?new r("adCurrentTimeChange"):new d("currentTimeChange")),this.isBuffering&&null!=this.video&&!this.video.paused&&!this.video.seeking&&this.video.readyState>=4&&(this.video.playbackRate>0||null==this.video.playbackRate)&&(this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1),t&&null!=this.dvrWindowEndTimeTs&&this.media.mediaPlaybackInfo.currentTime>this.dvrWindowEndTimeTs&&(new n("skinPause").dispatch(this.context),this.onHlsjsEnded()),null}onHlsjsDurationchange(e){if(this.isHlsLiveStream||null!=this.media.duration||(this.media.duration=this.video.duration),null!=this.prePlaybackSeekRelativePosition){let e=this.prePlaybackSeekRelativePosition;this.prePlaybackSeekRelativePosition=null,this.video.duration>0&&Math.abs(this.video.duration-this.media.duration)>2&&(this.prePlaybackHandlingSeeking=!0,this.seek(e*this.video.duration),this.pause());}return this.dispatchEvent(this.isAdvertisement?new r("adDurationChange"):new d("durationChange")),null}onHlsjsWaiting(e){return this.isVideoStalledAtEnd()?(this.triggerVideoCompleteOnVideoStalledAtEnd(),null):(this.isBuffering=!0,this.dispatchEvent(new d("bufferingStart")),null)}onHlsjsPlaybackBitrateChange(e,t){return null!=t&&null!=t.level&&this.updateVideoQualityPlaybackLevel(t.level),null}updateVideoQualityPlaybackLevel(e){this.hlsQualityLevel=e;let t=new o("videoQualityPlaybackLevelChange");t.data=e,t.dispatch(this.context);}triggerCodecsEvent(){if(null!=this.player.levels&&null!=this.player.currentLevel&&this.player.levels.length>=this.player.currentLevel&&null!=this.player.levels[this.player.currentLevel]){let e=this.player.levels[this.player.currentLevel];if(null!=e&&null!=e.audioCodec&&null!=e.videoCodec){let t=new o("codecData");t.data={audioCodec:e.audioCodec,videoCodec:e.videoCodec},t.dispatch(this.context);}}}updateVideoQualityList(){if(!this.isQualitySelectionEnabled||null==this.player.levels||this.player.levels.length<2||this.isAdvertisement)return;let e=new o("videoQualityData");e.data=this.getQualityLevels(),e.dispatch(this.context);let t=new n("videoQualityHasChanged");t.data="-1",t.dispatch(this.context),this.setInitialVideoQualityKbps();}setInitialVideoQualityKbps(){if(!Object.prototype.hasOwnProperty.call(this.variables,"qualityInitialBandwidthKbs"))return;let e=s.field(this.variables,"qualityInitialBandwidthKbs");if(null==e)return;let t=1e3*a.parseInt(e);if(null==t||isNaN(t)||!isFinite(t))return;let i=0;if(t>0){i=-1;let e=this.player.levels,l=0;for(;l<e.length;){let r=e[l],n=l++;if(!Object.prototype.hasOwnProperty.call(r,"bitrate"))continue;let o=s.field(r,"bitrate");if(null==o)continue;let d=a.parseInt(o);null!=d&&!isNaN(d)&&isFinite(d)&&(d<=t&&(i=n));}}-1==i||this.player.startLevel==i&&this.player.nextAutoLevel==i||(this.player.startLevel=this.player.nextAutoLevel=i);}getQualityLevels(){let e="resolution";if(Object.prototype.hasOwnProperty.call(this.variables,"qualityLabelType")&&(e=s.field(this.variables,"qualityLabelType"),e=e.toLowerCase()),"resolution"==e){let t=0,i=this.player.levels;for(;t<i.length;){let s=i[t];if(++t,!(s.width>0&&s.height>0)){e="bitrate";break}}}let t=[];t.push(new y("Auto","-1"));let i=0,l=this.player.levels.length;for(;i<l;){let s=i++,l="resolution"==e?a.string(this.player.levels[s].height)+"p":this.mapBitrateToLabel(this.player.levels[s].bitrate),r=new y(l,null==s?"null":""+s);r.height=this.player.levels[s].height,r.width=this.player.levels[s].width,r.bitrateKbps=this.player.levels[s].bitrate>0?this.player.levels[s].bitrate/1e3:null,t.push(r);}return t.reverse(),t}mapBitrateToLabel(e){return Math.floor(e/1e3)+"k"}onVideoCanplaythrough(){if(this.hasSubtitlesAndAudioInitialized||(this.updateSubtitlesSets(),this.updateAudioSets(),this.triggerCodecsEvent(),this.updateVideoQualityList(),this.hasSubtitlesAndAudioInitialized=!0),null==this.dvrPlaybackStartTs&&this.isDvr()){let e=this.getDVRWindowRangeRaw();null!=e&&(this.dvrPlaybackStartTs=this.getNowTs()-e.end,null!=this.dvrRequestedInitialTimeTs&&this.seek(this.dvrRequestedInitialTimeTs-this.dvrPlaybackStartTs));}}getDVRWindowRangeRaw(){if(null==this.video||null==this.video.duration||this.video.duration<=0||null==this.dvrWindowLength)return null;return {start:this.video.duration-this.dvrWindowLength,end:this.video.duration}}isDvr(){return null!=this.media&&this.media instanceof v}onHlsjsEndingTimeout(){this.onHlsjsEnded();}onHlsjsEnded(e){return this.stopLiveStreamEndingTimeout(),this.media instanceof p&&(this.playbackState=21),this.dispatchEvent(this.isAdvertisement?new r("adComplete"):new d("complete")),null}onHlsjsSeeked(e){return this.prePlaybackHandlingSeeking&&(this.prePlaybackHandlingSeeking=!1,this.play(),this.pause()),25==this.playbackState&&this.triggerVideoCompleteOnVideoStalledAtEndComplete(),this.dispatchEvent(this.isAdvertisement?new r("seekingEnd"):new d("seekingEnd")),this.isPaused()&&(this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1),null}onHlsjsError(e,t){if(this.isAdvertisement&&!this.isInStreamAdvertisement)return this.dispatchEvent(new r("adMediaError"),this.prepareErrorMessage(e)),null;if(10==this.playbackState)return null;if(t&&t.type==exports.Hls.ErrorTypes.OTHER_ERROR)return null;if(t&&t.type==exports.Hls.ErrorTypes.MEDIA_ERROR&&"bufferFullError"==t.details)return null;if(t&&t.type==exports.Hls.ErrorTypes.MEDIA_ERROR&&("bufferNudgeOnStall"==t.details||"bufferStalledError"==t.details))return this.isDvr()?this.hasLiveStreamEnded()&&this.handleLiveStreamEnding():this.isVideoStalledAtEnd()&&this.triggerVideoCompleteOnVideoStalledAtEnd(),null;if(t&&t.type==exports.Hls.ErrorTypes.NETWORK_ERROR&&!t.fatal)return null;if(t&&t.type==exports.Hls.ErrorTypes.MEDIA_ERROR&&!t.fatal)return null;this.stopLiveStreamRestartTimeoutTimer();let i=!0;if(this.media instanceof p){let e=this.hasLiveStreamEnded();!e&&this.liveStreamRestartsOnError>=5&&(this.liveStreamRestartsOnError-=1),e&&(i=!1,this.handleLiveStreamEnding());}if(null!=e&&null!=t&&(console.error("bradmax.player.error: "+e),console.error(t)),i&&this.isDvr()&&this.liveStreamRestartsOnError<5&&!this.media.hasFallbackSources()){i=!1,this.stopLiveStreamRestartDelayTimer(),this.liveStreamRestartDelayTimer=w.delay(A(this,this.handleLivestreamRestart),2e3*(this.liveStreamRestartsOnError+1)),this.playbackState=10,this.isBuffering=!0,new d("bufferingStart").dispatch(this.context);let e={hasplayerError:t,currTry:this.liveStreamRestartsOnError};this.dispatchEvent(this.isAdvertisement?new r("adMediaErrorFallbackTry"):new d("mediaErrorFallbackTry"),e);}return i&&(this.isNetworkConnectionProblem(t)?(this.pause(),this.dispatchEvent(this.isAdvertisement?new r("adConnectionError"):new d("connectionError"),this.prepareErrorMessage(t))):this.dispatchEvent(this.isAdvertisement?new r("adMediaError"):new d("mediaError"),this.prepareErrorMessage(t))),null}prepareErrorMessage(e){let t=this.isNetworkConnectionProblem(e)&&(this.media instanceof p||this.video.currentTime>0||null!=e&&null!=e.response&&e.response.code>=500||null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0),i="";return null!=e&&null!=e.details&&(i=" type: "+a.string(e.details)),null!=e&&null!=e.context&&null!=e.context.url&&(i+="\nurl: "+a.string(e.context.url)),{errObj:e,isTemporaryNetworkIssue:t,message:i}}hasLiveStreamEnded(){if(!(this.media instanceof p))return !1;let e=this.media;return null==e.streamEnd||e.streamEnd.getTime()<(new Date).getTime()}handleLiveStreamEnding(){new n("skinPause").dispatch(this.context),this.playbackState=20,this.stopLiveStreamEndingTimeout(),this.liveStreamEndingTimeout=w.delay(A(this,this.onHlsjsEndingTimeout),500);}isNetworkConnectionProblem(e){return null!=e&&e.type==exports.Hls.ErrorTypes.NETWORK_ERROR&&null!=this.video&&null!=this.media}handleLivestreamRestart(){this.liveStreamRestartsOnError++,this.playbackState=11,this.stopLiveStreamRestartDelayTimer(),this.stopLiveStreamRestartTimeoutTimer();let e=this.video;this.cleanVideoAndPlayer(),this.attachVideo(e),this.play(),this.liveStreamRestartTimeoutTimer=w.delay(A(this,this.onHlsjsLivestreamRestartTimeout),1e4);}onHlsjsLivestreamRestartTimeout(){this.liveStreamRestartsOnError<5?this.handleLivestreamRestart():(this.playbackState=30,this.dispatchEvent(this.isAdvertisement?new r("adMediaError"):new d("mediaError"),{message:"Livestream restart all tries failed."}));}onVideoQualityChange(e){if(null==e||null==e.data||"string"!=typeof e.data||null==this.player||null==this.player.levels||this.player.levels.length<2)return;let t=e.data,i=a.string(this.hlsQualityLevel);if(this.player.autoLevelEnabled&&(i="-1"),this.player.currentLevel>=0&&this.updateVideoQualityPlaybackLevel(this.player.currentLevel),t==i)return;this.hlsQualityLevel=a.parseInt(t),this.player.currentLevel=this.hlsQualityLevel,Object.prototype.hasOwnProperty.call(this.variables,"saveBandwidthMode")&&L.__cast(this.variables.saveBandwidthMode,I)&&(this.player.capLevelToPlayerSize="-1"==t);let s=new n("videoQualityHasChanged");s.data=t,s.dispatch(this.context);}updateAudioSets(){let e=this.player.audioTracks;if(null!=e&&e.length>=this.minAudioTracksForInfo){let t=[],i=0;for(;i<e.length;){let s=e[i];if(++i,null==s.lang||""==s.lang)continue;let l=new m;l.id=a.string(s.id),l.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(s.lang)),null!=l.name&&""!=l.name||(l.name=s.name),null!=l.name&&""!=l.name||(l.name=s.lang),l.languageCode=s.lang,l.isDefault=s.default,t.push(l);}if(t.length>=this.minAudioTracksForInfo){let e=new o("audioData");e.data=t,e.dispatch(this.context);}}}updateSubtitlesSets(){let e=this.player.subtitleTracks;if(null!=e&&e.length>0){let t=[],i=0;for(;i<e.length;){let l=e[i];if(++i,null==l.lang||""==l.lang)continue;let r=new c;r.id=a.string(l.id),r.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(l.lang)),r.languageCode=l.lang,r.preselected=l.autoselect&&s.field(l,"default"),t.push(r);}if(null!=this.variables.subtitles&&t.length>0&&h.preselectSubtitlesSet(this.variables.subtitles,t),t.length>0){let e=new o("subtitleData");e.data=t,e.dispatch(this.context);}}else if(null!=this.video&&null!=this.video.textTracks&&this.video.textTracks.length>0){let e=[],t=0,i=this.video.textTracks;for(;t<i.length;){let s=i[t];if(++t,null==s.language||""==s.language)continue;let a=new c;a.id=null==s.id?"null":""+s.id,a.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(s.language)),a.languageCode=s.language,a.preselected="showing"==s.mode,e.push(a);}if(null!=this.variables.subtitles&&e.length>0&&h.preselectSubtitlesSet(this.variables.subtitles,e),e.length>0){let t=new o("subtitleData");t.data=e,t.dispatch(this.context);}}}onHasplayerKeySessionCreated(e){return new d("drmAuthenticationComplete").dispatch(this.context),null}onSelectSubtitles(e){if(null==e||null==this.player)return;let t=e.data;if(this.player.subtitleTracks.length>0)if(null!=t){let e=a.parseInt(t.id),i=0,s=this.player.subtitleTracks;for(;i<s.length;)if(s[i++].id==e){this.player.subtitleTrack=e;break}}else this.player.subtitleTrack=-1;else if(null!=this.video&&null!=this.video.textTracks&&this.video.textTracks.length>0)if(null!=t){let e=0,i=this.video.textTracks.length;for(;e<i;){let i=this.video.textTracks[e++];i.id==t.id?i.mode="showing":i.mode="disabled";}}else {let e=0,t=this.video.textTracks.length;for(;e<t;){this.video.textTracks[e++].mode="disabled";}}}onSelectAudio(e){if(null==e||null==this.player)return;let t=e.data;if(null!=t){let e=a.parseInt(t.id),i=0,s=this.player.audioTracks;for(;i<s.length;)if(s[i++].id==e){this.player.audioTrack=e;break}}}pause(){f.isEdge&&null!=this.unfreezeEdgeBrowserTimer||this.video.pause();}initSource(){let e=this;null!=this.media&&this.source!=this.media.source[0].url&&(this.setDefaultPlayback(),this.source=this.media.source[0].url,w.delay((function(){e.isBuffering=!0,new d("bufferingStart").dispatch(e.context);}),0));}play(){if(null!=this.video&&this.video.hasAttribute("data-mse-resetting"))this.video.addEventListener("player_reset",A(this,this.onPlayerResetWithMseExtension));else {if(this.initSource(),this.isDvr()){let e=this.getDVRWindowRange();null!=e&&(this.video.currentTime<e.start?this.seek(0):this.video.currentTime>e.end&&this.seek(e.end-e.start));}if(null!=this.video){let e=this.video.play();null!=e&&e.catch(A(this,this.onPlayPromiseError));}}}log(e,t){null==t&&(t="log"),console&&("error"==t?console.error(e):"warn"==t?console.warn(e):console.log(e));}onPlayPromiseError(e){let t=this;null==e||"NotAllowedError"!=e.name&&"AbortError"!=e.name?(this.log("BRADMAX PLAYER NOTICE:\nException occured durring starting player. Details below:\n","error"),this.log(e,"error")):(this.isPlaybackNotAllowed=!0,this.variables.autoplay?this.log("BRADMAX PLAYER NOTICE:\nBrowser doesn't allow for autoplaying video without user interaction.\nPlayer is waiting for user 'play' click. You can autoplay muted video (mute=true).\n\nMode details about browser autoplay policy: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes","warn"):(this.log("BRADMAX PLAYER NOTICE:\nBrowser block starting playing video. Details below:\n","warn"),this.log(e,"warn")),21!=this.playbackState&&20!=this.playbackState&&11!=this.playbackState&&10!=this.playbackState&&w.delay((function(){t.dispatchEvent(t.isAdvertisement?new r("adPaused"):new d("paused")),t.dispatchEvent(new d("bufferingEnd")),t.isBuffering=!1;}),0));}playPause(){this.isPaused()?this.play():this.pause();}setDefaultPlayback(){this.cleanPlayer(),this.initPlayer(),this.player.loadSource(this.media.source[0].url);}getPlaybackStartTime(e){let t=null;return null!=this.dvrWindowStartTimeTs&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<this.getNowTs()&&(t=this.dvrWindowStartTimeTs),null!=e&&null!=e.mediaUserSettings&&null!=e.mediaUserSettings.resumePostion&&(t=e.mediaUserSettings.resumePostion),null!=this.prePlaybackSeekRelativePosition&&null!=e&&e.duration>0&&(t=this.prePlaybackSeekRelativePosition*e.duration),null!=t&&null!=this.dvrWindowStartTimeTs&&t<this.dvrWindowStartTimeTs&&(t=this.dvrWindowStartTimeTs),null!=t&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<t&&(t=this.dvrWindowEndTimeTs),t}seek(e){let t=this.isPaused()&&null==this.source,i=!1,s=this;if(this.isDvr()){e=this.dvrWindowTimeToDvrRelativePlaybackTime(e);let t=this.getDVRWindowRange();if(null!=t){let s=0;null!=this.player&&null!=this.player.bufferController&&null!=this.player.bufferController.details&&this.player.bufferController.details.averagetargetduration>0&&(s=this.player.bufferController.details.averagetargetduration),e>t.end-s?e=t.end-s:e<t.start&&(e=t.start),i=e<=t.start+s;}}else e<0?e=0:null!=this.video&&e>this.video.duration&&(e=this.video.duration),t&&(this.media.duration>0&&(this.prePlaybackSeekRelativePosition=e/this.media.duration,this.prePlaybackHandlingSeeking=!0),this.initSource()),this.isPaused()&&!t&&w.delay((function(){s.isBuffering=!0,new d("bufferingStart").dispatch(s.context);}),0);this.video.currentTime=e,this.dispatchEvent(new d("seekingStart")),null!=this.video&&this.video.paused&&!i&&(this.play(),this.pause());}dvrWindowTimeToDvrRelativePlaybackTime(e){let t=this.getDVRWindowRange();return null==t?e:e+t.start}getDvrWindowEndTimeOffset(){let e=0;if(null!=this.dvrWindowEndTimeTs){let t=this.getDVRWindowRange();null!=t&&this.dvrWindowEndTimeTs<t.end&&(e=t.end-this.dvrWindowEndTimeTs);}return e}getDVRWindowRange(){let e=this.getDVRWindowRangeRaw();return null==e?null:(null!=this.dvrWindowStartTimeTs&&null!=this.dvrPlaybackStartTs&&this.dvrRelatibePlaybackTimeToTs(e.start)<this.dvrWindowStartTimeTs&&(e.start=this.dvrWindowStartTimeTs-this.dvrPlaybackStartTs),null!=this.dvrWindowEndTimeTs&&null!=this.dvrPlaybackStartTs&&this.dvrWindowEndTimeTs<this.dvrRelatibePlaybackTimeToTs(e.end)&&(e.end=this.dvrWindowEndTimeTs-this.dvrPlaybackStartTs),e)}dvrRelativePlaybackTimeToDvrWindowTime(e){let t=this.getDVRWindowRange();return null==t?e:e-t.start}dvrRelatibePlaybackTimeToTs(e){let t=0;return null!=this.dvrPlaybackStartTs&&(t=this.dvrPlaybackStartTs),t+e}getDVRWindowSize(){let e=this.getDVRWindowRange();return null==e?0:e.end-e.start}getNowTs(){return (new Date).getTime()/1e3}selectAudio(e){}selectSubtitles(e){}volume(e){this.video.volume=e;}setData(e){this.media=e,this.hasSubtitlesAndAudioInitialized=!1,this.isHlsLiveStream=!1,this.isPlaybackNotAllowed=!1,this.isBuffering=!1,this.lastTimeUpdatePostionForEdgeBrowser=null,this.prePlaybackHandlingSeeking=!1,this.stopUnfreezeEdgeBrowserTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopLiveEdgeUpdateTimer(),this.hlsQualityLevel=a.parseInt("-1"),null!=this.player&&(this.player.stopLoad(),this.player.destroy(),this.player=null),this.liveStreamRestartsOnError=0,this.dvrPlaybackStartTs=null,this.dvrRequestedInitialTimeTs=null,this.dvrWindowLength=null,this.dvrIsSupported=!1,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowStartTime")?(this.dvrWindowStartTimeTs=s.field(this.variables,"dvrWindowStartTime"),this.getNowTs()<this.dvrWindowStartTimeTs&&(this.dvrWindowStartTimeTs=null),s.deleteField(this.variables,"dvrWindowStartTime")):this.dvrWindowStartTimeTs=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowEndTime")?(this.dvrWindowEndTimeTs=s.field(this.variables,"dvrWindowEndTime"),s.deleteField(this.variables,"dvrWindowEndTime")):this.dvrWindowEndTimeTs=null,1==this.variables.autoplay&&this.play();}playerResize(e){}videoReady(){}onDurationChange(e){}saveBandwidthModeVisibilityChange(e){e?(this.saveBandwidthModeStore={currentLevel:this.player.currentLevel,nextLevel:this.player.nextLevel,nextAutoLevel:this.player.nextAutoLevel,nextLoadLevel:this.player.nextLoadLevel,capLevelToPlayerSize:this.player.capLevelToPlayerSize},this.player.capLevelToPlayerSize=!1,this.player.nextLevel=0,this.player.nextAutoLevel=0,this.player.nextLoadLevel=0):null!=this.saveBandwidthModeStore&&(this.player.nextLevel=this.saveBandwidthModeStore.nextLevel,this.player.nextAutoLevel=this.saveBandwidthModeStore.nextAutoLevel,this.player.nextLoadLevel=this.saveBandwidthModeStore.nextLoadLevel,this.player.currentLevel=this.saveBandwidthModeStore.currentLevel,this.player.capLevelToPlayerSize=this.saveBandwidthModeStore.capLevelToPlayerSize,this.saveBandwidthModeStore=null);}static canPlay(e){return !(!f.isSamsungSmartTVTizen&&"Safari"==f.browserName)&&(!("Microsoft Internet Explorer"==f.browserName&&f.majorVersion<11)&&(null==e.drm&&e.url.toLowerCase().indexOf(".m3u8")>1))}static getInstance(e,t){let i=t?"ad_":"";if(Object.prototype.hasOwnProperty.call(T.instances.h,i+e))return T.instances.h[i+e];{let s=new T(t);return T.instances.h[i+e]=s,s.context=e,s.create(),s}}}e.bs.player.plugin.video.videoPlayer.VideoHlsJs=T,T.__name__="bs.player.plugin.video.videoPlayer.VideoHlsJs",Object.assign(T.prototype,{__class__:T,minAudioTracksForInfo:null,context:null,variables:null,isAdvertisement:null,isInStreamAdvertisement:null,initialAsAdvertisement:null,inStreamAdvertStartPos:null,inStreamAdvertMedia:null,video:null,pluginConfig:null,hasSubtitlesAndAudioInitialized:null,player:null,s73Wrapper:null,media:null,source:null,subtitlesRenderer:null,isQualitySelectionEnabled:null,liveStreamRestartsOnError:null,liveStreamRestartTimeoutTimer:null,liveStreamEndingTimeout:null,liveStreamRestartDelayTimer:null,prePlaybackSeekRelativePosition:null,prePlaybackHandlingSeeking:null,dvrPlaybackStartTs:null,dvrRequestedInitialTimeTs:null,dvrWindowLength:null,dvrIsSupported:null,isHlsLiveStream:null,hlsQualityLevel:null,isPlaybackNotAllowed:null,isBuffering:null,lastTimeUpdatePostionForEdgeBrowser:null,unfreezeEdgeBrowserTimer:null,playbackState:null,liveEdgeUpdateTimer:null,dvrWindowStartTimeTs:null,dvrWindowEndTimeTs:null,playbackRate:null,saveBandwidthModeStore:null});var f=require("bs.util.BrowserTools");class E extends Error{constructor(e,t,i){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=i?i:this;}get_native(){return this.__nativeException}static thrown(e){if(e instanceof E)return e.get_native();if(e instanceof Error)return e;return new P(e)}}E.__name__="haxe.Exception",E.__super__=Error,Object.assign(E.prototype,{__class__:E,__skipStack:null,__nativeException:null,__previousException:null});var w=require("haxe.Timer");class P extends E{constructor(e,t,i){super(String(e),t,i),this.value=e;}}P.__name__="haxe.ValueException",P.__super__=E,Object.assign(P.prototype,{__class__:P,value:null});var k=require("haxe.ds.StringMap");class L{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=L.__nativeClassName(e);return null!=i?L.__resolveNativeClass(i):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return "<function>";case"object":if(e instanceof Array){let i="[";t+="\t";let s=0,a=e.length;for(;s<a;){let a=s++;i+=(a>0?",":"")+L.__string_rec(e[a],t);}return i+="]",i}let i;try{i=e.toString;}catch(e){return "???"}if(null!=i&&i!=Object.toString&&"function"==typeof i){let t=e.toString();if("[object Object]"!=t)return t}let s="{\n";t+="\t";let a=null!=e.hasOwnProperty,l=null;for(l in e)a&&!e.hasOwnProperty(l)||"prototype"!=l&&"__class__"!=l&&"__super__"!=l&&"__interfaces__"!=l&&"__properties__"!=l&&(2!=s.length&&(s+=", \n"),s+=t+l+" : "+L.__string_rec(e[l],t));return s+="\n"+(t=t.substring(1))+"}",s;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let i=e.__interfaces__;if(null!=i&&(null==e.__super__||e.__super__.__interfaces__!=i)){let e=0,s=i.length;for(;e<s;){let s=i[e++];if(s==t||L.__interfLoop(s,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case I:return "boolean"==typeof e;case x:return null!=e;case C:return "number"==typeof e;case R:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(L.__downcastCheck(e,t))return !0}else if("object"==typeof t&&L.__isNativeObj(t)&&e instanceof t)return !0;return t==D&&null!=e.__name__||t==H&&null!=e.__ename__}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&L.__interfLoop(L.getClass(e),t)}static __cast(e,t){if(null==e||L.__instanceof(e,t))return e;throw E.thrown("Cannot cast "+a.string(e)+" to "+a.string(t))}static __nativeClassName(e){let t=L.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=L.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}function A(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:s=e.hx__closures__[i.__id__],null==s&&(s=i.bind(e),e.hx__closures__[i.__id__]=s),s);var s;}L.__name__="js.Boot",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var R={},x={},C=Number,I=Boolean,D={},H={};L.__toStr={}.toString,T.instances=new k,T.__plugfaces__="ICanPlay,INoPlayerPlugin,IVideoPlayer";}(exports,window);
"undefined"!=typeof window&&function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e();}(exports,(function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i});},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=19)}([function(t,e,r){var i;r.d(e,"a",(function(){return i})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached";}(i||(i={}));},function(t,e,r){r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return l}));var i=function(){},a={trace:i,debug:i,log:i,warn:i,info:i,error:i},n=a;function s(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):i}function o(t){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];r.forEach((function(e){n[e]=t[e]?t[e].bind(t):s(e);}));}(t,"debug","log","info","warn","error");try{n.log();}catch(t){n=a;}}else n=a;}var l=a;},function(t,e,r){var i,a;r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return a})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError";}(i||(i={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown";}(a||(a={}));},function(t,e,r){r.d(e,"a",(function(){return i}));var i=Number.isFinite||function(t){return "number"==typeof t&&isFinite(t)};},function(t,e,r){r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return g})),r.d(e,"c",(function(){return v}));var i,a=r(3),n=r(10),s=r(1),o=r(16),l=r(11);function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e);}function h(t,e){return (h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}function c(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo";}(i||(i={}));var f=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[i.AUDIO]=null,e[i.VIDEO]=null,e[i.AUDIOVIDEO]=null,e),this.baseurl=t;}return t.prototype.setByteRange=function(t,e){var r=t.split("@",2),i=[];1===r.length?i[0]=e?e.byteRangeEndOffset:0:i[0]=parseInt(r[1]),i[1]=parseInt(r[0])+i[0],this._byteRange=i;},c(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return !this._url&&this.baseurl&&this.relurl&&(this._url=Object(n.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t;}}]),t}(),g=function(t){function e(e,r){var i;return (i=t.call(this,r)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkey=void 0,i.type=void 0,i.loader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.appendedPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new l.a,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.type=e,i}u(e,t);var r=e.prototype;return r.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},r.setDecryptDataFromLevelKey=function(t,e){var r=t;return "AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((r=o.a.fromURI(t.uri)).method=t.method,r.iv=this.createInitializationVector(e),r.keyFormat="identity"),r},r.setElementaryStreamInfo=function(t,e,r,i,a,n){void 0===n&&(n=!1);var s=this.elementaryStreams,o=s[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,a)):s[t]={startPTS:e,endPTS:r,startDTS:i,endDTS:a,partial:n};},r.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[i.AUDIO]=null,t[i.VIDEO]=null,t[i.AUDIOVIDEO]=null;},c(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&s.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t);}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(a.a)(this.programDateTime))return null;var t=Object(a.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;return !(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),e}(f),v=function(t){function e(e,r,i,a,n){var s;(s=t.call(this,i)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new l.a,s.duration=e.decimalFloatingPoint("DURATION"),s.gap=e.bool("GAP"),s.independent=e.bool("INDEPENDENT"),s.relurl=e.enumeratedString("URI"),s.fragment=r,s.index=a;var o=e.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,n),n&&(s.fragOffset=n.fragOffset+n.duration),s}return u(e,t),c(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return !!(t.audio||t.video||t.audiovideo)}}]),e}(f);},function(t,e,r){r.d(e,"b",(function(){return h})),r.d(e,"g",(function(){return d})),r.d(e,"f",(function(){return c})),r.d(e,"d",(function(){return f})),r.d(e,"c",(function(){return g})),r.d(e,"e",(function(){return p})),r.d(e,"h",(function(){return m})),r.d(e,"a",(function(){return y}));var i=r(8),a=r(4),n=Math.pow(2,32)-1,s=[].push;function o(t){return String.fromCharCode.apply(null,t)}function l(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r}function u(t,e,r){"data"in t&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r;}function h(t,e){var r,i,a,n=[];if(!e.length)return n;"data"in t?(r=t.data,i=t.start,a=t.end):(i=0,a=(r=t).byteLength);for(var u=i;u<a;){var d=l(r,u),c=d>1?u+d:a;if(o(r.subarray(u+4,u+8))===e[0])if(1===e.length)n.push({data:r,start:u+8,end:c});else {var f=h({data:r,start:u+8,end:c},e.slice(1));f.length&&s.apply(n,f);}u=c;}return n}function d(t){var e=h(t,["moov"])[0],r=e?e.end:null,i=h(t,["sidx"]);if(!i||!i[0])return null;var a=[],n=i[0],s=n.data[0],o=0===s?8:16,u=l(n,o);o+=4;o+=0===s?8:16,o+=2;var d=n.end+0,c=function(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r}(n,o);o+=2;for(var f=0;f<c;f++){var g=o,v=l(n,g);g+=4;var p=2147483647&v;if(1===(2147483648&v)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var m=l(n,g);g+=4,a.push({referenceSize:p,subsegmentDuration:m,info:{duration:m/u,start:d,end:d+p-1}}),d+=p,o=g+=4;}return {earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:a,moovEndOffset:r}}function c(t){for(var e=[],r=h(t,["moov","trak"]),i=0;i<r.length;i++){var n=r[i],s=h(n,["tkhd"])[0];if(s){var u=s.data[s.start],d=0===u?12:20,c=l(s,d),f=h(n,["mdia","mdhd"])[0];if(f){var g=l(f,d=0===(u=f.data[f.start])?12:20),v=h(n,["mdia","hdlr"])[0];if(v){var p=o(v.data.subarray(v.start+8,v.start+12)),m={soun:a.a.AUDIO,vide:a.a.VIDEO}[p];if(m){var y=h(n,["mdia","minf","stbl","stsd"])[0],T=void 0;y&&(T=o(y.data.subarray(y.start+12,y.start+16))),e[c]={timescale:g,type:m},e[m]={timescale:g,id:c,codec:T};}}}}}return h(t,["moov","mvex","trex"]).forEach((function(t){var r=l(t,4),i=e[r];i&&(i.default={duration:l(t,12),flags:l(t,20)});})),e}function f(t,e){return h(e,["moof","traf"]).reduce((function(e,r){var i=h(r,["tfdt"])[0],a=i.data[i.start],n=h(r,["tfhd"]).reduce((function(e,r){var n=l(r,4),s=t[n];if(s){var o=l(i,4);1===a&&(o*=Math.pow(2,32),o+=l(i,8));var u=o/(s.timescale||9e4);if(isFinite(u)&&(null===e||u<e))return u}return e}),null);return null!==n&&isFinite(n)&&(null===e||n<e)?n:e}),null)||0}function g(t,e){for(var r=0,i=0,n=0,s=h(t,["moof","traf"]),o=0;o<s.length;o++){var u=s[o],c=h(u,["tfhd"])[0],f=e[l(c,4)];if(f){var g=f.default,p=l(c,0)|(null==g?void 0:g.flags),m=null==g?void 0:g.duration;8&p&&(m=l(c,2&p?12:8));for(var y=f.timescale||9e4,T=h(u,["trun"]),E=0;E<T.length;E++){if(m)r=m*l(T[E],4);else r=v(T[E]);f.type===a.a.VIDEO?i+=r/y:f.type===a.a.AUDIO&&(n+=r/y);}}}if(0===i&&0===n){var b=d(t);if(null!=b&&b.references)return b.references.reduce((function(t,e){return t+e.info.duration||0}),0)}return i||n}function v(t){var e=l(t,0),r=8;1&e&&(r+=4),4&e&&(r+=4);for(var i=0,a=l(t,4),n=0;n<a;n++){if(256&e)i+=l(t,r),r+=4;512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4);}return i}function p(t,e,r){h(e,["moof","traf"]).forEach((function(e){h(e,["tfhd"]).forEach((function(i){var a=l(i,4),s=t[a];if(s){var o=s.timescale||9e4;h(e,["tfdt"]).forEach((function(t){var e=t.data[t.start],i=l(t,4);if(0===e)u(t,4,i-r*o);else {i*=Math.pow(2,32),i+=l(t,8),i-=r*o,i=Math.max(i,0);var a=Math.floor(i/(n+1)),s=Math.floor(i%(n+1));u(t,4,a),u(t,8,s);}}));}}));}));}function m(t){var e={valid:null,remainder:null},r=h(t,["moof"]);if(!r)return e;if(r.length<2)return e.remainder=t,e;var a=r[r.length-1];return e.valid=Object(i.a)(t,0,a.start-8),e.remainder=Object(i.a)(t,a.start-8),e}function y(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}},function(t,e,r){r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return h})),r.d(e,"c",(function(){return c})),r.d(e,"f",(function(){return y}));var i,a=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},n=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s=function(t,e){for(var r=e,i=0;a(t,e);){i+=10,i+=o(t,e+6),n(t,e+10)&&(i+=10),e+=i;}if(i>0)return t.subarray(r,r+i)},o=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},l=function(t,e){return a(t,e)&&o(t,e+6)+10<=t.length-e},u=function(t){for(var e=c(t),r=0;r<e.length;r++){var i=e[r];if(h(i))return m(i)}},h=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},d=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=o(t,4);return {type:e,size:r,data:t.subarray(10,10+r)}},c=function(t){for(var e=0,r=[];a(t,e);){for(var i=o(t,e+6),s=(e+=10)+i;e+8<s;){var l=d(t.subarray(e)),u=f(l);u&&r.push(u),e+=l.size+10;}n(t,e)&&(e+=10);}return r},f=function(t){return "PRIV"===t.type?g(t):"W"===t.type[0]?p(t):v(t)},g=function(t){if(!(t.size<2)){var e=y(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return {key:t.type,info:e,data:r.buffer}}},v=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=y(t.data.subarray(e),!0);e+=r.length+1;var i=y(t.data.subarray(e));return {key:t.type,info:r,data:i}}var a=y(t.data.subarray(1));return {key:t.type,data:a}}},p=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=y(t.data.subarray(e),!0);e+=r.length+1;var i=y(t.data.subarray(e));return {key:t.type,info:r,data:i}}var a=y(t.data);return {key:t.type,data:a}},m=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},y=function(t,e){void 0===e&&(e=!1);var r=T();if(r){var i=r.decode(t);if(e){var a=i.indexOf("\0");return -1!==a?i.substring(0,a):i}return i.replace(/\0/g,"")}for(var n,s,o,l=t.length,u="",h=0;h<l;){if(0===(n=t[h++])&&e)return u;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(n);break;case 12:case 13:s=t[h++],u+=String.fromCharCode((31&n)<<6|63&s);break;case 14:s=t[h++],o=t[h++],u+=String.fromCharCode((15&n)<<12|(63&s)<<6|(63&o)<<0);}}return u};function T(){return i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i}},function(t,e,r){r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return s}));function i(t,e,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var a=t*e*r;return i?Math.round(a):a}function a(t,e,r,a){return void 0===r&&(r=1),void 0===a&&(a=!1),i(t,e,1/r,a)}function n(t,e){return void 0===e&&(e=!1),i(t,1e3,1/9e4,e)}function s(t,e){return void 0===e&&(e=1),i(t,9e4,1/e)}},function(t,e,r){function i(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}r.d(e,"a",(function(){return i}));},function(t,e,r){r.d(e,"c",(function(){return lt})),r.d(e,"d",(function(){return ht})),r.d(e,"a",(function(){return dt})),r.d(e,"b",(function(){return ct}));var i=r(0),a=r(2),n=r(14),s=r(3),o=r(6);var l=r(5),u=r(8),h=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null;}var e=t.prototype;return e.resetInitSegment=function(t,e,r){this._id3Track={type:"id3",id:0,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0};},e.resetTimeStamp=function(){},e.resetContiguity=function(){},e.canParse=function(t,e){return !1},e.appendFrame=function(t,e,r){},e.demux=function(t,e){this.cachedData&&(t=Object(l.a)(this.cachedData,t),this.cachedData=null);var r,i,a=o.b(t,0),n=a?a.length:0,s=this._audioTrack,h=this._id3Track,c=a?o.d(a):void 0,f=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=d(c,e)),a&&a.length>0&&h.samples.push({pts:this.initPTS,dts:this.initPTS,data:a}),i=this.initPTS;n<f;){if(this.canParse(t,n)){var g=this.appendFrame(s,t,n);g?(this.frameIndex++,i=g.sample.pts,r=n+=g.length):n=f;}else o.a(t,n)?(a=o.b(t,n),h.samples.push({pts:i,dts:i,data:a}),r=n+=a.length):n++;if(n===f&&r!==f){var v=Object(u.a)(t,r);this.cachedData?this.cachedData=Object(l.a)(this.cachedData,v):this.cachedData=v;}}return {audioTrack:s,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:h,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.destroy=function(){},t}(),d=function(t,e){return Object(s.a)(t)?90*t:9e4*e},c=h,f=r(1);function g(t,e){return 255===t[e]&&240==(246&t[e+1])}function v(t,e){return 1&t[e+1]?7:9}function p(t,e){return (3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function m(t,e){return e+1<t.length&&g(t,e)}function y(t,e){if(m(t,e)){var r=v(t,e);if(e+r>=t.length)return !1;var i=p(t,e);if(i<=r)return !1;var a=e+i;return a===t.length||m(t,a)}return !1}function T(t,e,r,n,s){if(!t.samplerate){var o=function(t,e,r,n){var s,o,l,u,h=navigator.userAgent.toLowerCase(),d=n,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&e[r+2])>>>6);var g=(60&e[r+2])>>>2;if(!(g>c.length-1))return l=(1&e[r+2])<<2,l|=(192&e[r+3])>>>6,f.b.log("manifest codec:"+n+", ADTS type:"+s+", samplingIndex:"+g),/firefox/i.test(h)?g>=6?(s=5,u=new Array(4),o=g-3):(s=2,u=new Array(2),o=g):-1!==h.indexOf("android")?(s=2,u=new Array(2),o=g):(s=5,u=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&g>=6?o=g-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(g>=6&&1===l||/vivaldi/i.test(h))||!n&&1===l)&&(s=2,u=new Array(2)),o=g)),u[0]=s<<3,u[0]|=(14&g)>>1,u[1]|=(1&g)<<7,u[1]|=l<<3,5===s&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:c[g],channelCount:l,codec:"mp4a.40."+s,manifestCodec:d};t.trigger(i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+g});}(e,r,n,s);if(!o)return;t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,f.b.log("parsed codec:"+t.codec+", rate:"+o.samplerate+", channels:"+o.channelCount);}}function E(t){return 9216e4/t}function b(t,e,r,i,a){var n=function(t,e,r,i,a){var n=t.length,s=v(t,e),o=p(t,e);if((o-=s)>0&&e+s+o<=n)return {headerLength:s,frameLength:o,stamp:r+i*a}}(e,r,i,a,E(t.samplerate));if(n){var s=n.stamp,o=n.headerLength,l=n.frameLength,u={unit:e.subarray(r+o,r+o+l),pts:s,dts:s};return t.samples.push(u),{sample:u,length:l+o}}}function S(t,e){return (S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var L=function(t){var e,r;function i(e,r){var i;return (i=t.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=r,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,S(e,r);var a=i.prototype;return a.resetInitSegment=function(e,r,i){t.prototype.resetInitSegment.call(this,e,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0};},i.probe=function(t){if(!t)return !1;for(var e=(o.b(t,0)||[]).length,r=t.length;e<r;e++)if(y(t,e))return f.b.log("ADTS sync word found !"),!0;return !1},a.canParse=function(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&g(t,e)&&p(t,e)<=t.length-e}(t,e)},a.appendFrame=function(t,e,r){return T(t,this.observer,e,r,t.manifestCodec),b(t,e,r,this.initPTS,this.frameIndex)},i}(c);L.minProbeByteLength=9;var A=L,R=function(){function t(t,e){this.remainderData=null,this.config=void 0,this.config=e;}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.resetContiguity=function(){},t.probe=function(t){return Object(l.b)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.demux=function(t){var e=t,r={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(e=Object(l.a)(this.remainderData,t));var i=Object(l.h)(e);this.remainderData=i.remainder,r.samples=i.valid||new Uint8Array;}else r.samples=e;return {audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:r,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.flush=function(){var t={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:t,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}();R.minProbeByteLength=1024;var D=R,k=null,_=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],I=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],C=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],w=[0,1,1,4];function O(t,e,r,i,a){if(!(r+24>e.length)){var n=x(e,r);if(n&&r+n.frameLength<=e.length){var s=i+a*(9e4*n.samplesPerFrame/n.sampleRate),o={unit:e.subarray(r,r+n.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=n.channelCount,t.samplerate=n.sampleRate,t.samples.push(o),{sample:o,length:n.frameLength}}}}function x(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,a=t[e+2]>>4&15,n=t[e+2]>>2&3;if(1!==r&&0!==a&&15!==a&&3!==n){var s=t[e+2]>>1&1,o=t[e+3]>>6,l=1e3*_[14*(3===r?3-i:3===i?3:4)+a-1],u=I[3*(3===r?0:2===r?1:2)+n],h=3===o?1:2,d=C[r][i],c=w[i],f=8*d*c,g=Math.floor(d*l/u+s)*c;if(null===k){var v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);k=v?parseInt(v[1]):0;}return !!k&&k<=87&&2===i&&l>=224e3&&0===o&&(t[e+3]=128|t[e+3]),{sampleRate:u,channelCount:h,frameLength:g,samplesPerFrame:f}}}function P(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function M(t,e){return e+1<t.length&&P(t,e)}function F(t,e){if(e+1<t.length&&P(t,e)){var r=x(t,e),i=4;null!=r&&r.frameLength&&(i=r.frameLength);var a=e+i;return a===t.length||M(t,a)}return !1}var N=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0;}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");i.set(t.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a;},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t);},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&f.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ());},e.skipEG=function(){this.skipBits(1+this.skipLZ());},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,r=8,i=0;i<t;i++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r;},e.readSPS=function(){var t,e,r,i=0,a=0,n=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),h=this.readBoolean.bind(this),d=this.skipBits.bind(this),c=this.skipEG.bind(this),f=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);o();var v=o();if(l(5),d(3),o(),f(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var p=u();if(3===p&&d(1),f(),f(),d(1),h())for(e=3!==p?8:12,r=0;r<e;r++)h()&&g(r<6?16:64);}f();var m=u();if(0===m)u();else if(1===m)for(d(1),c(),c(),t=u(),r=0;r<t;r++)c();f(),d(1);var y=u(),T=u(),E=l(1);0===E&&d(1),d(1),h()&&(i=u(),a=u(),n=u(),s=u());var b=[1,1];if(h()&&h())switch(o()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[o()<<8|o(),o()<<8|o()];}return {width:Math.ceil(16*(y+1)-2*i-2*a),height:(2-E)*(T+1)*16-(E?2:4)*(n+s),pixelRatio:b}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),U=function(){function t(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new n.a(t,e,{removePKCS7Padding:!1});}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,e);},e.decryptAacSample=function(t,e,r,i){var a=t[e].unit,n=a.subarray(16,a.length-a.length%16),s=n.buffer.slice(n.byteOffset,n.byteOffset+n.length),o=this;this.decryptBuffer(s,(function(n){var s=new Uint8Array(n);a.set(s,16),i||o.decryptAacSamples(t,e+1,r);}));},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,i),!i)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),i=0,a=32;a<=t.length-16;a+=160,i+=16)r.set(t.subarray(a,a+16),i);return r},e.getAvcDecryptedUnit=function(t,e){for(var r=new Uint8Array(e),i=0,a=32;a<=t.length-16;a+=160,i+=16)t.set(r.subarray(i,i+16),a);return t},e.decryptAvcSample=function(t,e,r,i,a,n){var s=q(a.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,(function(o){a.data=l.getAvcDecryptedUnit(s,o),n||l.decryptAvcSamples(t,e,r+1,i);}));},e.decryptAvcSamples=function(t,e,r,i){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void i();for(var a=t[e].units;!(r>=a.length);r++){var n=a[r];if(!(n.data.length<=48||1!==n.type&&5!==n.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,i,n,s),!s)return}}}},t}(),B={video:1,audio:2,id3:3,text:4},G=function(){function t(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=r;}t.probe=function(e){var r=t.syncOffset(e);return !(r<0)&&(r&&f.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},t.syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++;}return -1},t.createTrack=function(t,e){return {container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:B[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=r,this._duration=i;},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,r=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null;},e.demux=function(e,r,n,s){var o;void 0===n&&(n=!1),void 0===s&&(s=!1),n||(this.sampleAes=null);var u=this._avcTrack,h=this._audioTrack,d=this._id3Track,c=u.pid,g=u.pesData,v=h.pid,p=d.pid,m=h.pesData,y=d.pesData,T=!1,E=this.pmtParsed,b=this._pmtId,S=e.length;if(this.remainderData&&(S=(e=Object(l.a)(this.remainderData,e)).length,this.remainderData=null),S<188&&!s)return this.remainderData=e,{audioTrack:h,avcTrack:u,id3Track:d,textTrack:this._txtTrack};var L=Math.max(0,t.syncOffset(e));(S-=(S+L)%188)<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,S,e.buffer.byteLength-S));for(var A=L;A<S;A+=188)if(71===e[A]){var R=!!(64&e[A+1]),D=((31&e[A+1])<<8)+e[A+2],k=void 0;if((48&e[A+3])>>4>1){if((k=A+5+e[A+4])===A+188)continue}else k=A+4;switch(D){case c:R&&(g&&(o=V(g))&&this.parseAVCPES(o,!1),g={data:[],size:0}),g&&(g.data.push(e.subarray(k,A+188)),g.size+=A+188-k);break;case v:R&&(m&&(o=V(m))&&(h.isAAC?this.parseAACPES(o):this.parseMPEGPES(o)),m={data:[],size:0}),m&&(m.data.push(e.subarray(k,A+188)),m.size+=A+188-k);break;case p:R&&(y&&(o=V(y))&&this.parseID3PES(o),y={data:[],size:0}),y&&(y.data.push(e.subarray(k,A+188)),y.size+=A+188-k);break;case 0:R&&(k+=e[k]+1),b=this._pmtId=j(e,k);break;case b:R&&(k+=e[k]+1);var _=H(e,k,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,n);(c=_.avc)>0&&(u.pid=c),(v=_.audio)>0&&(h.pid=v,h.isAAC=_.isAAC),(p=_.id3)>0&&(d.pid=p),T&&!E&&(f.b.log("reparse from beginning"),T=!1,A=L-188),E=this.pmtParsed=!0;break;case 17:case 8191:break;default:T=!0;}}else this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});u.pesData=g,h.pesData=m,d.pesData=y;var I={audioTrack:h,avcTrack:u,id3Track:d,textTrack:this._txtTrack};return s&&this.extractRemainingSamples(I),I},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,r=t.audioTrack,i=t.avcTrack,a=t.id3Track,n=i.pesData,s=r.pesData,o=a.pesData;n&&(e=V(n))?(this.parseAVCPES(e,!0),i.pesData=null):i.pesData=n,s&&(e=V(s))?(r.isAAC?this.parseAACPES(e):this.parseMPEGPES(e),r.pesData=null):(null!=s&&s.size&&f.b.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=s),o&&(e=V(o))?(this.parseID3PES(e),a.pesData=null):a.pesData=o;},e.demuxSampleAes=function(t,e,r){var i=this.demux(t,r,!0,!this.config.progressive),a=this.sampleAes=new U(this.observer,this.config,e);return this.decrypt(i,a)},e.decrypt=function(t,e){return new Promise((function(r){var i=t.audioTrack,a=t.avcTrack;i.samples&&i.isAAC?e.decryptAacSamples(i.samples,0,(function(){a.samples?e.decryptAvcSamples(a.samples,0,0,(function(){r(t);})):r(t);})):a.samples&&e.decryptAvcSamples(a.samples,0,0,(function(){r(t);}));}))},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0;},e.parseAVCPES=function(t,e){var r,i=this,a=this._avcTrack,n=this.parseAVCNALu(t.data),s=this.avcSample,l=!1;t.data=null,s&&n.length&&!a.audFound&&(W(s,a),s=this.avcSample=K(!1,t.pts,t.dts,"")),n.forEach((function(e){switch(e.type){case 1:r=!0,s||(s=i.avcSample=K(!0,t.pts,t.dts,"")),s.frame=!0;var n=e.data;if(l&&n.length>4){var u=new N(n).readSliceType();2!==u&&4!==u&&7!==u&&9!==u||(s.key=!0);}break;case 5:r=!0,s||(s=i.avcSample=K(!0,t.pts,t.dts,"")),s.key=!0,s.frame=!0;break;case 6:r=!0;var h=new N(q(e.data));h.readUByte();for(var d=0,c=0,f=!1,g=0;!f&&h.bytesAvailable>1;){d=0;do{d+=g=h.readUByte();}while(255===g);c=0;do{c+=g=h.readUByte();}while(255===g);if(4===d&&0!==h.bytesAvailable){if(f=!0,181===h.readUByte())if(49===h.readUShort())if(1195456820===h.readUInt())if(3===h.readUByte()){for(var v=h.readUByte(),p=31&v,m=[v,h.readUByte()],y=0;y<p;y++)m.push(h.readUByte()),m.push(h.readUByte()),m.push(h.readUByte());Y(i._txtTrack.samples,{type:3,pts:t.pts,bytes:m});}}else if(5===d&&0!==h.bytesAvailable){if(f=!0,c>16){for(var T=[],E=0;E<16;E++)T.push(h.readUByte().toString(16)),3!==E&&5!==E&&7!==E&&9!==E||T.push("-");for(var b=c-16,S=new Uint8Array(b),L=0;L<b;L++)S[L]=h.readUByte();Y(i._txtTrack.samples,{pts:t.pts,payloadType:d,uuid:T.join(""),userData:Object(o.f)(S),userDataBytes:S});}}else if(c<h.bytesAvailable)for(var A=0;A<c;A++)h.readUByte();}break;case 7:if(r=!0,l=!0,!a.sps){var R=new N(e.data).readSPS();a.width=R.width,a.height=R.height,a.pixelRatio=R.pixelRatio,a.sps=[e.data],a.duration=i._duration;for(var D=e.data.subarray(1,4),k="avc1.",_=0;_<3;_++){var I=D[_].toString(16);I.length<2&&(I="0"+I),k+=I;}a.codec=k;}break;case 8:r=!0,a.pps||(a.pps=[e.data]);break;case 9:r=!1,a.audFound=!0,s&&W(s,a),s=i.avcSample=K(!1,t.pts,t.dts,"");break;case 12:r=!1;break;default:r=!1,s&&(s.debug+="unknown NAL "+e.type+" ");}s&&r&&s.units.push(e);})),e&&s&&(W(s,a),this.avcSample=null);},e.getLastNalUnit=function(){var t,e,r=this.avcSample;if(!r||0===r.units.length){var i=this._avcTrack.samples;r=i[i.length-1];}if(null!==(t=r)&&void 0!==t&&t.units){var a=r.units;e=a[a.length-1];}return e},e.parseAVCNALu=function(t){var e,r,i=t.byteLength,a=this._avcTrack,n=a.naluState||0,s=n,o=[],l=0,u=-1,h=0;for(-1===n&&(u=0,h=31&t[0],n=0,l=1);l<i;)if(e=t[l++],n)if(1!==n)if(e)if(1===e){if(u>=0){var d={data:t.subarray(u,l-n-1),type:h};o.push(d);}else {var c=this.getLastNalUnit();if(c&&(s&&l<=4-s&&c.state&&(c.data=c.data.subarray(0,c.data.byteLength-s)),(r=l-n-1)>0)){var f=new Uint8Array(c.data.byteLength+r);f.set(c.data,0),f.set(t.subarray(0,r),c.data.byteLength),c.data=f;}}l<i?(u=l,h=31&t[l],n=0):n=-1;}else n=0;else n=3;else n=e?0:2;else n=e?0:1;if(u>=0&&n>=0){var g={data:t.subarray(u,i),type:h,state:n};o.push(g);}if(0===o.length){var v=this.getLastNalUnit();if(v){var p=new Uint8Array(v.data.byteLength+t.byteLength);p.set(v.data,0),p.set(t,v.data.byteLength),v.data=p;}}return a.naluState=n,o},e.parseAACPES=function(t){var e,r,n,s,o=this._audioTrack,l=this.aacLastPTS,u=this.aacOverFlow,h=t.data;if(u){var d=new Uint8Array(u.byteLength+h.byteLength);d.set(u,0),d.set(h,u.byteLength),h=d;}for(e=0,r=h.length;e<r-1&&!m(h,e);e++);if(e&&(e<r-1?(n="AAC PES did not start with ADTS header,offset:"+e,s=!1):(n="no ADTS header found in AAC PES",s=!0),f.b.warn("parsing error:"+n),this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:s,reason:n}),s))return;T(o,this.observer,h,e,this.audioCodec);var c,g=0,v=E(o.samplerate);if(void 0!==t.pts)c=t.pts;else {if(null===l)return void f.b.warn("[tsdemuxer]: AAC PES unknown PTS");c=l;}if(u&&null!==l){var p=l+v;Math.abs(p-c)>1&&(f.b.log("[tsdemuxer]: AAC: align PTS for overlapping frames by "+Math.round((p-c)/90)),c=p);}for(var y=null;e<r;){if(m(h,e)){if(e+5<r){var S=b(o,h,e,c,g);if(S){e+=S.length,y=S.sample.pts,g++;continue}}break}e++;}this.aacOverFlow=e<r?h.subarray(e,r):null,this.aacLastPTS=y;},e.parseMPEGPES=function(t){var e=t.data,r=e.length,i=0,a=0,n=t.pts;if(void 0!==n)for(;a<r;)if(M(e,a)){var s=O(this._audioTrack,e,a,n,i);if(!s)break;a+=s.length,i++;}else a++;else f.b.warn("[tsdemuxer]: MPEG PES unknown PTS");},e.parseID3PES=function(t){void 0!==t.pts?this._id3Track.samples.push(t):f.b.warn("[tsdemuxer]: ID3 PES unknown PTS");},t}();function K(t,e,r,i){return {key:t,frame:!1,pts:e,dts:r,units:[],debug:i,length:0}}function j(t,e){return (31&t[e+10])<<8|t[e+11]}function H(t,e,r,i){var a={audio:-1,avc:-1,id3:-1,isAAC:!0},n=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<n;){var s=(31&t[e+1])<<8|t[e+2];switch(t[e]){case 207:if(!i){f.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===a.audio&&(a.audio=s);break;case 21:-1===a.id3&&(a.id3=s);break;case 219:if(!i){f.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===a.avc&&(a.avc=s);break;case 3:case 4:r?-1===a.audio&&(a.audio=s,a.isAAC=!1):f.b.log("MPEG audio found, not supported in this browser");break;case 36:f.b.warn("Unsupported HEVC stream type found");}e+=5+((15&t[e+3])<<8|t[e+4]);}return a}function V(t){var e,r,i,a,n,s=0,o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1);}if(1===((e=o[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;var u=e[7];192&u&&(a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&u?a-(n=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(f.b.warn(Math.round((a-n)/9e4)+"s delta between PTS and DTS, align them"),a=n):n=a);var h=(i=e[8])+9;if(t.size<=h)return null;t.size-=h;for(var d=new Uint8Array(t.size),c=0,g=o.length;c<g;c++){var v=(e=o[c]).byteLength;if(h){if(h>v){h-=v;continue}e=e.subarray(h),v-=h,h=0;}d.set(e,s),s+=v;}return r&&(r-=i+3),{data:d,pts:a,dts:n,len:r}}return null}function W(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var r=e.samples,i=r.length;if(!i)return void e.dropped++;var a=r[i-1];t.pts=a.pts,t.dts=a.dts;}e.samples.push(t);}t.debug.length&&f.b.log(t.pts+"/"+t.dts+":"+t.debug);}function Y(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var i=r-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e);}function q(t){for(var e=t.byteLength,r=[],i=1;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;var a=e-r.length,n=new Uint8Array(a),s=0;for(i=0;i<a;s++,i++)s===r[0]&&(s++,r.shift()),n[i]=t[s];return n}G.minProbeByteLength=188;var X=G;function z(t,e){return (z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){var e,r;function i(){return t.apply(this,arguments)||this}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,z(e,r);var a=i.prototype;return a.resetInitSegment=function(e,r,i){t.prototype.resetInitSegment.call(this,e,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0};},i.probe=function(t){if(!t)return !1;for(var e=(o.b(t,0)||[]).length,r=t.length;e<r;e++)if(F(t,e))return f.b.log("MPEG Audio sync word found !"),!0;return !1},a.canParse=function(t,e){return function(t,e){return P(t,e)&&4<=t.length-e}(t,e)},a.appendFrame=function(t,e,r){if(null!==this.initPTS)return O(t,e,r,this.initPTS,this.frameIndex)},i}(c);Q.minProbeByteLength=4;var $=Q,J=r(15),Z=r(4),tt=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null;}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndDTS=null;},e.resetNextTimestamp=function(){this.lastEndDTS=null;},e.resetInitSegment=function(t,e,r){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(t),this.emitInitSegment=!0;},e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=Object(l.f)(t);e||(e=rt(i.audio,Z.a.AUDIO)),r||(r=rt(i.video,Z.a.VIDEO));var a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:i.audio?a.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:i.video?a.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:f.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=a;},e.remux=function(t,e,r,i,a){var n=this.initPTS,o=this.lastEndDTS,u={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};Object(s.a)(o)||(o=this.lastEndDTS=a||0);var h=e.samples;if(!h||!h.length)return u;var d={initPTS:void 0,timescale:1},c=this.initData;if(c&&c.length||(this.generateInitSegment(h),c=this.initData),!c||!c.length)return f.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1),Object(s.a)(n)||(this.initPTS=d.initPTS=n=et(c,h,o));var g=Object(l.c)(h,c),v=o,p=g+v;Object(l.e)(c,h,n),g>0?this.lastEndDTS=p:(f.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var m=!!c.audio,y=!!c.video,T="";m&&(T+="audio"),y&&(T+="video");var E={data1:h,startPTS:v,startDTS:v,endPTS:p,endDTS:p,type:T,hasAudio:m,hasVideo:y,nb:1,dropped:0};return u.audio="audio"===E.type?E:void 0,u.video="audio"!==E.type?E:void 0,u.text=i,u.id3=r,u.initSegment=d,u},t}(),et=function(t,e,r){return Object(l.d)(t,e)-r};function rt(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:"hvc1"===r?"hvc1.1.c.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||e===Z.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var it,at=tt,nt=r(12);try{it=self.performance.now.bind(self.performance);}catch(t){f.b.debug("Unable to use Performance API on this environment"),it=self.Date.now;}var st=[{demux:X,remux:J.a},{demux:D,remux:at},{demux:A,remux:J.a},{demux:$,remux:J.a}],ot=1024;st.forEach((function(t){var e=t.demux;ot=Math.max(ot,e.minProbeByteLength);}));var lt=function(){function t(t,e,r,i){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new nt.a,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=i;}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset();},e.push=function(t,e,r,i){var a=this,n=r.transmuxing;n.executeStart=it();var s=new Uint8Array(t),o=this.cache,u=this.config,h=this.currentTransmuxState,d=this.transmuxConfig;i&&(this.currentTransmuxState=i);var c=function(t,e){var r=null;t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(r=e);return r}(s,e);if(c&&"AES-128"===c.method){var f=this.getDecrypter();if(!u.enableSoftwareAES)return this.decryptionPromise=f.webCryptoDecrypt(s,c.key.buffer,c.iv.buffer).then((function(t){var e=a.push(t,null,r);return a.decryptionPromise=null,e})),this.decryptionPromise;var g=f.softwareDecrypt(s,c.key.buffer,c.iv.buffer);if(!g)return n.executeEnd=it(),ut(r);s=new Uint8Array(g);}var v=i||h,p=v.contiguous,m=v.discontinuity,y=v.trackSwitch,T=v.accurateTimeOffset,E=v.timeOffset,b=d.audioCodec,S=d.videoCodec,L=d.defaultInitPts,A=d.duration,R=d.initSegmentData;if((m||y)&&this.resetInitSegment(R,b,S,A),m&&this.resetInitialTimestamp(L),p||this.resetContiguity(),this.needsProbing(s,m,y)){if(o.dataLength){var D=o.flush();s=Object(l.a)(D,s);}this.configureTransmuxer(s,d);}var k=this.transmux(s,c,E,T,r),_=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,n.executeEnd=it(),k},e.flush=function(t){var e=this,r=t.transmuxing;r.executeStart=it();var n=this.decrypter,s=this.cache,o=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return e.flush(t)}));var u=[],h=o.timeOffset;if(n){var d=n.flush();d&&u.push(this.push(d,null,t));}var c=s.dataLength;s.reset();var f=this.demuxer,g=this.remuxer;if(!f||!g)return c>=ot&&this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),r.executeEnd=it(),[ut(t)];var v=f.flush(h);return ht(v)?v.then((function(r){return e.flushRemux(u,r,t),u})):(this.flushRemux(u,v,t),u)},e.flushRemux=function(t,e,r){var i=e.audioTrack,a=e.avcTrack,n=e.id3Track,s=e.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,u=o.timeOffset;f.b.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var h=this.remuxer.remux(i,a,n,s,u,l,!0);t.push({remuxResult:h,chunkMeta:r}),r.transmuxing.executeEnd=it();},e.resetInitialTimestamp=function(t){var e=this.demuxer,r=this.remuxer;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t));},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp());},e.resetInitSegment=function(t,e,r,i){var a=this.demuxer,n=this.remuxer;a&&n&&(a.resetInitSegment(e,r,i),n.resetInitSegment(t,e,r));},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0);},e.transmux=function(t,e,r,i,a){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,i,a):this.transmuxUnencrypted(t,r,i,a)},e.transmuxUnencrypted=function(t,e,r,i){var a=this.demuxer.demux(t,e,!1,!this.config.progressive),n=a.audioTrack,s=a.avcTrack,o=a.id3Track,l=a.textTrack;return {remuxResult:this.remuxer.remux(n,s,o,l,e,r,!1),chunkMeta:i}},e.transmuxSampleAes=function(t,e,r,i,a){var n=this;return this.demuxer.demuxSampleAes(t,e,r).then((function(t){return {remuxResult:n.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,r,i,!1),chunkMeta:a}}))},e.configureTransmuxer=function(t,e){for(var r,i=this.config,a=this.observer,n=this.typeSupported,s=this.vendor,o=e.audioCodec,l=e.defaultInitPts,u=e.duration,h=e.initSegmentData,d=e.videoCodec,c=0,g=st.length;c<g;c++)if(st[c].demux.probe(t)){r=st[c];break}r||(f.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),r={demux:D,remux:at});var v=this.demuxer,p=this.remuxer,m=r.remux,y=r.demux;p&&p instanceof m||(this.remuxer=new m(a,i,n,s)),v&&v instanceof y||(this.demuxer=new y(a,i,n),this.probe=y.probe),this.resetInitSegment(h,o,d,u),this.resetInitialTimestamp(l);},e.needsProbing=function(t,e,r){return !this.demuxer||!this.remuxer||e||r},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new n.a(this.observer,this.config)),t},t}();var ut=function(t){return {remuxResult:{},chunkMeta:t}};function ht(t){return "then"in t&&t.then instanceof Function}var dt=function(t,e,r,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=i,this.defaultInitPts=a;},ct=function(t,e,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=a;};},function(t,e,r){var i,a,n,s,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,a=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=o.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var n=o.parseURL(e);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=o.normalizePath(n.path),o.buildURLFromParts(n)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=a.exec(s.path);s.netLoc=l[1],s.path=l[2];}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(u.netLoc=s.netLoc,"/"!==n.path[0]))if(n.path){var h=s.path,d=h.substring(0,h.lastIndexOf("/")+1)+n.path;u.path=o.normalizePath(d);}else u.path=s.path,n.params||(u.params=s.params,n.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(n.path):n.path),o.buildURLFromParts(u)},parseURL:function(t){var e=i.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(s,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=o;},function(t,e,r){r.d(e,"a",(function(){return i}));var i=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0};};},function(t,e,r){r.d(e,"a",(function(){return i}));var i=function(){function t(){this.chunks=[],this.dataLength=0;}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length;},e.flush=function(){var t,e=this.chunks,r=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var r=new Uint8Array(e),i=0,a=0;a<t.length;a++){var n=t[a];r.set(n,i),i+=n.length;}return r}(e,r),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0;},t}();},function(t,e,r){var i=Object.prototype.hasOwnProperty,a="~";function n(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1;}function o(t,e,r,i,n){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,i||t,n),l=a?a+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e];}function u(){this._events=new n,this._eventsCount=0;}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=a?a+t:t,r=this._events[e];if(!r)return [];if(r.fn)return [r.fn];for(var i=0,n=r.length,s=new Array(n);i<n;i++)s[i]=r[i].fn;return s},u.prototype.listenerCount=function(t){var e=a?a+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,i,n,s){var o=a?a+t:t;if(!this._events[o])return !1;var l,u,h=this._events[o],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,i),!0;case 5:return h.fn.call(h.context,e,r,i,n),!0;case 6:return h.fn.call(h.context,e,r,i,n,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l);}else {var c,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),d){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,r);break;case 4:h[u].fn.call(h[u].context,e,r,i);break;default:if(!l)for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];h[u].fn.apply(h[u].context,l);}}return !0},u.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,i){var n=a?a+t:t;if(!this._events[n])return this;if(!e)return l(this,n),this;var s=this._events[n];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||l(this,n);else {for(var o=0,u=[],h=s.length;o<h;o++)(s[o].fn!==e||i&&!s[o].once||r&&s[o].context!==r)&&u.push(s[o]);u.length?this._events[n]=1===u.length?u[0]:u:l(this,n);}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&l(this,e)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=a,u.EventEmitter=u,t.exports=u;},function(t,e,r){r.d(e,"a",(function(){return u}));var i=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e;}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),a=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e;}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),n=r(8);var s=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable();}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),i=0;i<4;i++)r[i]=e.getUint32(4*i);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],a=r[1],n=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],h=o[2],d=o[3],c=new Uint32Array(256),f=0,g=0,v=0;for(v=0;v<256;v++)c[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var p=g^g<<1^g<<2^g<<3^g<<4;p=p>>>8^255&p^99,t[f]=p,e[p]=f;var m=c[f],y=c[m],T=c[y],E=257*c[p]^16843008*p;i[f]=E<<24|E>>>8,a[f]=E<<16|E>>>16,n[f]=E<<8|E>>>24,s[f]=E,E=16843009*T^65537*y^257*m^16843008*f,l[p]=E<<24|E>>>8,u[p]=E<<16|E>>>16,h[p]=E<<8|E>>>24,d[p]=E,f?(f=m^c[c[c[T^m]]],g^=c[c[g]]):f=g=1;}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,i=0;i<e.length&&r;)r=e[i]===this.key[i],i++;if(!r){this.key=e;var a=this.keySize=e.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var n,s,o,l,u=this.ksRows=4*(a+6+1),h=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),c=this.sBox,f=this.rcon,g=this.invSubMix,v=g[0],p=g[1],m=g[2],y=g[3];for(n=0;n<u;n++)n<a?o=h[n]=e[n]:(l=o,n%a==0?(l=c[(l=l<<8|l>>>24)>>>24]<<24|c[l>>>16&255]<<16|c[l>>>8&255]<<8|c[255&l],l^=f[n/a|0]<<24):a>6&&n%a==4&&(l=c[l>>>24]<<24|c[l>>>16&255]<<16|c[l>>>8&255]<<8|c[255&l]),h[n]=o=(h[n-a]^l)>>>0);for(s=0;s<u;s++)n=u-s,l=3&s?h[n]:h[n-4],d[s]=s<4||n<=4?l:v[c[l>>>24]]^p[c[l>>>16&255]]^m[c[l>>>8&255]]^y[c[255&l]],d[s]=d[s]>>>0;}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r){for(var i,a,n,s,o,l,u,h,d,c,f,g,v,p,m=this.keySize+6,y=this.invKeySchedule,T=this.invSBox,E=this.invSubMix,b=E[0],S=E[1],L=E[2],A=E[3],R=this.uint8ArrayToUint32Array_(r),D=R[0],k=R[1],_=R[2],I=R[3],C=new Int32Array(t),w=new Int32Array(C.length),O=this.networkToHostOrderSwap;e<C.length;){for(d=O(C[e]),c=O(C[e+1]),f=O(C[e+2]),g=O(C[e+3]),o=d^y[0],l=g^y[1],u=f^y[2],h=c^y[3],v=4,p=1;p<m;p++)i=b[o>>>24]^S[l>>16&255]^L[u>>8&255]^A[255&h]^y[v],a=b[l>>>24]^S[u>>16&255]^L[h>>8&255]^A[255&o]^y[v+1],n=b[u>>>24]^S[h>>16&255]^L[o>>8&255]^A[255&l]^y[v+2],s=b[h>>>24]^S[o>>16&255]^L[l>>8&255]^A[255&u]^y[v+3],o=i,l=a,u=n,h=s,v+=4;i=T[o>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&h]^y[v],a=T[l>>>24]<<24^T[u>>16&255]<<16^T[h>>8&255]<<8^T[255&o]^y[v+1],n=T[u>>>24]<<24^T[h>>16&255]<<16^T[o>>8&255]<<8^T[255&l]^y[v+2],s=T[h>>>24]<<24^T[o>>16&255]<<16^T[l>>8&255]<<8^T[255&u]^y[v+3],w[e]=O(i^D),w[e+1]=O(s^k),w[e+2]=O(n^_),w[e+3]=O(a^I),D=d,k=c,_=f,I=g,e+=4;}return w.buffer},t}(),o=r(1),l=r(5),u=function(){function t(t,e,r){var i=(void 0===r?{}:r).removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=e,this.removePKCS7Padding=a,a)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle);}catch(t){}null===this.subtle&&(this.config.enableSoftwareAES=!0);}var e=t.prototype;return e.destroy=function(){this.observer=null;},e.isSync=function(){return this.config.enableSoftwareAES},e.flush=function(){var t=this.currentResult;if(t){var e,r,i,a=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(r=(e=a).byteLength,(i=r&&new DataView(e.buffer).getUint8(r-1))?Object(n.a)(e,0,r-i):e):a}this.reset();},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null);},e.decrypt=function(t,e,r,i){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),e,r);var a=this.flush();a&&i(a.buffer);}else this.webCryptoDecrypt(new Uint8Array(t),e,r).then(i);},e.softwareDecrypt=function(t,e,r){var i=this.currentIV,a=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(t=Object(l.a)(o,t),this.remainderData=null);var u=this.getValidChunk(t);if(!u.length)return null;i&&(r=i);var h=this.softwareDecrypter;h||(h=this.softwareDecrypter=new s),h.expandKey(e);var d=a;return this.currentResult=h.decrypt(u.buffer,0,r),this.currentIV=Object(n.a)(u,-16).buffer,d||null},e.webCryptoDecrypt=function(t,e,r){var n=this,s=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new a(s,e)),this.fastAesKey.expandKey().then((function(e){return s?new i(s,r).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))})).catch((function(i){return n.onWebCryptoError(i,t,e,r)}))},e.onWebCryptoError=function(t,e,r,i){return o.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,i)},e.getValidChunk=function(t){var e=t,r=t.length-t.length%16;return r!==t.length&&(e=Object(n.a)(t,0,r),this.remainderData=Object(n.a)(t,r)),e},e.logOnce=function(t){this.logEnabled&&(o.b.log("[decrypter.ts]: "+t),this.logEnabled=!1);},t}();},function(t,e,r){r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return m}));var i=r(3),a=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}(),n=Math.pow(2,32)-1,s=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=n,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,l,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,a));},t.box=function(t){for(var e=8,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var n=i.length,s=n;n--;)e+=i[n].byteLength;var o=new Uint8Array(e);for(o[0]=e>>24&255,o[1]=e>>16&255,o[2]=e>>8&255,o[3]=255&e,o.set(t,4),n=0,e=8;n<s;n++)o.set(i[n],e),e+=i[n].byteLength;return o},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return "audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,r))},t.moov=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,s)},t.sdtp=function(e){var r,i,a=e.samples||[],n=new Uint8Array(4+a.length);for(r=0;r<a.length;r++)i=a[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,n)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,i,a,n=[],s=[];for(r=0;r<e.sps.length;r++)a=(i=e.sps[r]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)a=(i=e.pps[r]).byteLength,s.push(a>>>8&255),s.push(255&a),s=s.concat(Array.prototype.slice.call(i));var o=t.box(t.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(s))),l=e.width,u=e.height,h=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,255&h,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return "audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,a=e.width,s=e.height,o=Math.floor(i/(n+1)),l=Math.floor(i%(n+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,s>>8&255,255&s,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),a=e.id,s=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var i,a,n,s,o,l,u=e.samples||[],h=u.length,d=12+16*h,c=new Uint8Array(d);for(r+=8+d,c.set([0,0,15,1,h>>>24&255,h>>>16&255,h>>>8&255,255&h,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<h;i++)n=(a=u[i]).duration,s=a.size,o=a.flags,l=a.cts,c.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return t.box(t.types.trun,c)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),i=new Uint8Array(t.FTYP.byteLength+r.byteLength);return i.set(t.FTYP),i.set(r,t.FTYP.byteLength),i},t}();s.types=void 0,s.HDLR_TYPES=void 0,s.STTS=void 0,s.STSC=void 0,s.STCO=void 0,s.STSZ=void 0,s.VMHD=void 0,s.SMHD=void 0,s.STSD=void 0,s.FTYP=void 0,s.DINF=void 0;var o=s,l=r(0),u=r(2),h=r(1),d=r(7);function c(){return (c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);}return t}).apply(this,arguments)}var f=null,g=null,v=!1,p=function(){function t(t,e,r,i){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===f){var a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);f=a?parseInt(a[1]):0;}if(null===g){var n=navigator.userAgent.match(/Safari\/(\d+)/i);g=n?parseInt(n[1]):0;}v=!!f&&f<75||!!g&&g<600;}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){h.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t;},e.resetNextTimestamp=function(){h.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1;},e.resetInitSegment=function(){h.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1;},e.getVideoStartPts=function(t){var e=!1,r=t.reduce((function(t,r){var i=r.pts-t;return i<-4294967296?(e=!0,m(t,r.pts)):i>0?t:r.pts}),t[0].pts);return e&&h.b.debug("PTS rollover detected"),r},e.remux=function(t,e,r,i,a,n,s){var o,l,u,d,c,f,g=a,v=a,p=t.pid>-1,y=e.pid>-1,T=t.samples.length>0,E=e.samples.length>1;if((!p||T)&&(!y||E)||this.ISGenerated||s){this.ISGenerated||(u=this.generateIS(t,e,a));var b=this.isVideoContiguous;if(E&&!b&&this.config.forceKeyFrameOnDiscontinuity){var S=e.samples.length,L=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return -1}(e.samples);if(f=!0,L>0){h.b.warn("[mp4-remuxer]: Dropped "+L+" out of "+S+" video samples due to a missing keyframe");var A=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(L),e.dropped+=L,v+=(e.samples[0].pts-A)/(e.timescale||9e4);}else -1===L&&(h.b.warn("[mp4-remuxer]: No keyframe found out of "+S+" video samples"),f=!1);}if(this.ISGenerated){if(T&&E){var R=this.getVideoStartPts(e.samples),D=(m(t.samples[0].pts,R)-R)/e.inputTimeScale;g+=Math.max(0,D),v+=Math.max(0,-D);}if(T){if(t.samplerate||(h.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),delete(u=this.generateIS(t,e,a)).video),l=this.remuxAudio(t,g,this.isAudioContiguous,n,E?v:void 0),E){var k=l?l.endPTS-l.startPTS:0;e.inputTimeScale||(h.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(t,e,a)),o=this.remuxVideo(e,v,b,k);}}else E&&(o=this.remuxVideo(e,v,b,0));o&&void 0!==f&&(o.independent=f);}}return this.ISGenerated&&(r.samples.length&&(c=this.remuxID3(r,a)),i.samples.length&&(d=this.remuxText(i,a))),{audio:l,video:o,initSegment:u,independent:f,text:d,id3:c}},e.generateIS=function(t,e,r){var a,n,s,l=t.samples,u=e.samples,h=this.typeSupported,d={},c=!Object(i.a)(this._initPTS),f="audio/mp4";if(c&&(a=n=1/0),t.config&&l.length&&(t.timescale=t.samplerate,t.isAAC||(h.mpeg?(f="audio/mpeg",t.codec=""):h.mp3&&(t.codec="mp3")),d.audio={id:"audio",container:f,codec:t.codec,initSegment:!t.isAAC&&h.mpeg?new Uint8Array(0):o.initSegment([t]),metadata:{channelCount:t.channelCount}},c&&(s=t.inputTimeScale,a=n=l[0].pts-Math.round(s*r))),e.sps&&e.pps&&u.length&&(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:o.initSegment([e]),metadata:{width:e.width,height:e.height}},c)){s=e.inputTimeScale;var g=this.getVideoStartPts(u),v=Math.round(s*r);n=Math.min(n,m(u[0].dts,g)-v),a=Math.min(a,g-v);}if(Object.keys(d).length)return this.ISGenerated=!0,c&&(this._initPTS=a,this._initDTS=n),{tracks:d,initPTS:a,timescale:s}},e.remuxVideo=function(t,e,r,i){var a,n,s,g=t.inputTimeScale,p=t.samples,T=[],E=p.length,b=this._initPTS,S=this.nextAvcDts,L=8,A=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,D=0,k=!1;r&&null!==S||(S=e*g-(p[0].pts-m(p[0].dts,p[0].pts)));for(var _=0;_<E;_++){var I=p[_];if(I.pts=m(I.pts-b,S),I.dts=m(I.dts-b,S),I.dts>I.pts){D=Math.max(Math.min(D,I.pts-I.dts),-18e3);}I.dts<p[_>0?_-1:_].dts&&(k=!0);}k&&p.sort((function(t,e){var r=t.dts-e.dts,i=t.pts-e.pts;return r||i})),n=p[0].dts,s=p[p.length-1].dts;var C=Math.round((s-n)/(E-1));if(D<0){if(D<-2*C){h.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(d.b)(-C,!0)+" ms");for(var w=D,O=0;O<E;O++)p[O].dts=w=Math.max(w,p[O].pts-C),p[O].pts=Math.max(w,p[O].pts);}else {h.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(d.b)(D,!0)+" ms to overcome this issue");for(var x=0;x<E;x++)p[x].dts=p[x].dts+D;}n=p[0].dts;}if(r){var P=n-S,M=P>C;if(M||P<-1){M?h.b.warn("AVC: "+Object(d.b)(P,!0)+" ms ("+P+"dts) hole between fragments detected, filling it"):h.b.warn("AVC: "+Object(d.b)(-P,!0)+" ms ("+P+"dts) overlapping between fragments detected"),n=S;var F=p[0].pts-P;p[0].dts=n,p[0].pts=F,h.b.log("Video: First PTS/DTS adjusted: "+Object(d.b)(F,!0)+"/"+Object(d.b)(n,!0)+", delta: "+Object(d.b)(P,!0)+" ms");}}v&&(n=Math.max(0,n));for(var N=0,U=0,B=0;B<E;B++){for(var G=p[B],K=G.units,j=K.length,H=0,V=0;V<j;V++)H+=K[V].data.length;U+=H,N+=j,G.length=H,G.dts=Math.max(G.dts,n),G.pts=Math.max(G.pts,G.dts,0),A=Math.min(G.pts,A),R=Math.max(G.pts,R);}s=p[E-1].dts;var W,Y=U+4*N+8;try{W=new Uint8Array(Y);}catch(t){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:u.b.MUX_ERROR,details:u.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:Y,reason:"fail allocating video mdat "+Y})}var q=new DataView(W.buffer);q.setUint32(0,Y),W.set(o.types.mdat,4);for(var X=0;X<E;X++){for(var z=p[X],Q=z.units,$=0,J=0,Z=Q.length;J<Z;J++){var tt=Q[J],et=tt.data,rt=tt.data.byteLength;q.setUint32(L,rt),L+=4,W.set(et,L),L+=rt,$+=4+rt;}if(X<E-1)a=p[X+1].dts-z.dts;else {var it=this.config,at=z.dts-p[X>0?X-1:X].dts;if(it.stretchShortVideoTrack&&null!==this.nextAudioPts){var nt=Math.floor(it.maxBufferHole*g),st=(i?A+i*g:this.nextAudioPts)-z.pts;st>nt?((a=st-at)<0&&(a=at),h.b.log("[mp4-remuxer]: It is approximately "+st/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=at;}else a=at;}var ot=Math.round(z.pts-z.dts);T.push(new y(z.key,a,$,ot));}if(T.length&&f&&f<70){var lt=T[0].flags;lt.dependsOn=2,lt.isNonSync=0;}this.nextAvcDts=S=s+a,this.isVideoContiguous=!0;var ut={data1:o.moof(t.sequenceNumber++,n,c({},t,{samples:T})),data2:W,startPTS:A/g,endPTS:(R+a)/g,startDTS:n/g,endDTS:S/g,type:"video",hasAudio:!1,hasVideo:!0,nb:T.length,dropped:t.dropped};return t.samples=[],t.dropped=0,ut},e.remuxAudio=function(t,e,r,i,n){var s,d=t.inputTimeScale,f=d/(t.samplerate?t.samplerate:d),g=t.isAAC?1024:1152,v=g*f,p=this._initPTS,T=!t.isAAC&&this.typeSupported.mpeg,E=[],b=t.samples,S=T?0:8,L=this.nextAudioPts||-1,A=e*d;if(this.isAudioContiguous=r=r||b.length&&L>0&&(i&&Math.abs(A-L)<9e3||Math.abs(m(b[0].pts-p,A)-L)<20*v),b.forEach((function(t){t.pts=t.dts=m(t.pts-p,A);})),!r||L<0){if(!(b=b.filter((function(t){return t.pts>=0}))).length)return;L=0===n?0:i?Math.max(0,A):b[0].pts;}if(t.isAAC)for(var R=this.config.maxAudioFramesDrift,D=0,k=L;D<b.length;){var _=b[D],I=_.pts,C=I-k,w=Math.abs(1e3*C/d);if(C<=-R*v&&void 0!==n)r||D>0?(h.b.warn("[mp4-remuxer]: Dropping 1 audio frame @ "+(k/d).toFixed(3)+"s due to "+Math.round(w)+" ms overlap."),b.splice(D,1)):(h.b.warn("Audio frame @ "+(I/d).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*C/d)+" ms."),k=I+v,D++);else if(C>=R*v&&w<1e4&&void 0!==n){var O=Math.floor(C/v);k=I-O*v,h.b.warn("[mp4-remuxer]: Injecting "+O+" audio frame @ "+(k/d).toFixed(3)+"s due to "+Math.round(1e3*C/d)+" ms gap.");for(var x=0;x<O;x++){var P=Math.max(k,0);(s=a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(h.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),s=_.unit.subarray()),b.splice(D,0,{unit:s,pts:P,dts:P}),k+=v,D++;}_.pts=_.dts=k,k+=v,D++;}else _.pts=_.dts=k,k+=v,D++;}for(var M,F=null,N=null,U=0,B=b.length;B--;)U+=b[B].unit.byteLength;for(var G=0,K=b.length;G<K;G++){var j=b[G],H=j.unit,V=j.pts;if(null!==N){E[G-1].duration=Math.round((V-N)/f);}else {var W=Math.round(1e3*(V-L)/d),Y=0;if(r&&t.isAAC){if(W>0&&W<1e4)Y=Math.round((V-L)/v),h.b.log("[mp4-remuxer]: "+W+" ms hole between AAC samples detected,filling it"),Y>0&&((s=a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s=H.subarray()),U+=Y*s.length);else if(W<-12){h.b.log("[mp4-remuxer]: drop overlapping AAC sample, expected/parsed/delta:"+(L/d).toFixed(3)+"s/"+(V/d).toFixed(3)+"s/"+-W+"ms"),U-=H.byteLength;continue}V=L;}if(F=V,!(U>0))return;U+=S;try{M=new Uint8Array(U);}catch(t){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:u.b.MUX_ERROR,details:u.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}T||(new DataView(M.buffer).setUint32(0,U),M.set(o.types.mdat,4));for(var q=0;q<Y;q++)(s=a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(h.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating the current frame instead"),s=H.subarray()),M.set(s,S),S+=s.byteLength,E.push(new y(!0,1024,s.byteLength,0));}M.set(H,S);var X=H.byteLength;S+=X,E.push(new y(!0,g,X,0)),N=V;}var z=E.length;if(z){var Q=E[E.length-1];this.nextAudioPts=L=N+f*Q.duration;var $=T?new Uint8Array(0):o.moof(t.sequenceNumber++,F/f,c({},t,{samples:E}));t.samples=[];var J=F/d,Z=L/d,tt={data1:$,data2:M,startPTS:J,endPTS:Z,startDTS:J,endDTS:Z,type:"audio",hasAudio:!0,hasVideo:!1,nb:z};return this.isAudioContiguous=!0,tt}},e.remuxEmptyAudio=function(t,e,r,i){var n=t.inputTimeScale,s=n/(t.samplerate?t.samplerate:n),o=this.nextAudioPts,l=(null!==o?o:i.startDTS*n)+this._initDTS,u=i.endDTS*n+this._initDTS,d=1024*s,c=Math.ceil((u-l)/d),f=a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(h.b.warn("[mp4-remuxer]: remux empty Audio"),f){for(var g=[],v=0;v<c;v++){var p=l+v*d;g.push({unit:f,pts:p,dts:p});}return t.samples=g,this.remuxAudio(t,e,r,!1)}h.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");},e.remuxID3=function(t,e){var r=t.samples.length;if(r){for(var i=t.inputTimeScale,a=this._initPTS,n=this._initDTS,s=0;s<r;s++){var o=t.samples[s];o.pts=m(o.pts-a,e*i)/i,o.dts=m(o.dts-n,e*i)/i;}var l=t.samples;return t.samples=[],{samples:l}}},e.remuxText=function(t,e){var r=t.samples.length;if(r){for(var i=t.inputTimeScale,a=this._initPTS,n=0;n<r;n++){var s=t.samples[n];s.pts=m(s.pts-a,e*i)/i;}t.samples.sort((function(t,e){return t.pts-e.pts}));var o=t.samples;return t.samples=[],{samples:o}}},t}();function m(t,e){var r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}var y=function(t,e,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=i,this.flags=new T(t);},T=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1;};},function(t,e,r){r.d(e,"a",(function(){return n}));var i=r(10);function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}var n=function(){function t(t,e){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=e?Object(i.buildAbsoluteURL)(t,e,{alwaysNormalize:!0}):t;}var e,r;return t.fromURL=function(e,r){return new t(e,r)},t.fromURI=function(e){return new t(e)},e=t,(r=[{key:"uri",get:function(){return this._uri}}])&&a(e.prototype,r),t}();},function(t,e,r){function i(t){var e={};function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i});},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0});},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var i=r(r.s=ENTRY_MODULE);return i.default||i}function a(t){return (t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function n(t,e,i){var n={};n[i]=[];var s=e.toString(),o=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return n;for(var l,u=o[1],h=new RegExp("(\\\\n|\\W)"+a(u)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=h.exec(s);)"dll-reference"!==l[3]&&n[i].push(l[3]);for(h=new RegExp("\\("+a(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=h.exec(s);)t[l[2]]||(n[i].push(l[1]),t[l[2]]=r(l[1]).m),n[l[2]]=n[l[2]]||[],n[l[2]].push(l[4]);for(var d,c=Object.keys(n),f=0;f<c.length;f++)for(var g=0;g<n[c[f]].length;g++)d=n[c[f]][g],isNaN(1*d)||(n[c[f]][g]=1*n[c[f]][g]);return n}function s(t){return Object.keys(t).reduce((function(e,r){return e||t[r].length>0}),!1)}t.exports=function(t,e){e=e||{};var a={main:r.m},o=e.all?{main:Object.keys(a.main)}:function(t,e){for(var r={main:[e]},i={main:[]},a={main:{}};s(r);)for(var o=Object.keys(r),l=0;l<o.length;l++){var u=o[l],h=r[u].pop();if(a[u]=a[u]||{},!a[u][h]&&t[u][h]){a[u][h]=!0,i[u]=i[u]||[],i[u].push(h);for(var d=n(t,t[u][h],u),c=Object.keys(d),f=0;f<c.length;f++)r[c[f]]=r[c[f]]||[],r[c[f]]=r[c[f]].concat(d[c[f]]);}}return i}(a,t),l="";Object.keys(o).filter((function(t){return "main"!==t})).forEach((function(t){for(var e=0;o[t][e];)e++;o[t].push(e),a[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+t+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map((function(e){return JSON.stringify(e)+": "+a[t][e].toString()})).join(",")+"});\n";})),l=l+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map((function(t){return JSON.stringify(t)+": "+a.main[t].toString()})).join(",")+"}))(self);";var u=new window.Blob([l],{type:"text/javascript"});if(e.bare)return u;var h=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(h);return d.objectURL=h,d};},function(t,e,r){r.r(e),r.d(e,"default",(function(){return o}));var i=r(9),a=r(0),n=r(1),s=r(13);function o(t){var e=new s.EventEmitter,r=function(e,r){t.postMessage({event:e,data:r});};e.on(a.a.FRAG_DECRYPTED,r),e.on(a.a.ERROR,r),t.addEventListener("message",(function(a){var s=a.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);t.transmuxer=new i.c(e,s.typeSupported,o,s.vendor),Object(n.a)(o.debug),r("init",null);break;case"configure":t.transmuxer.configure(s.config);break;case"demux":var u=t.transmuxer.push(s.data,s.decryptdata,s.chunkMeta,s.state);Object(i.d)(u)?u.then((function(e){l(t,e);})):l(t,u);break;case"flush":var d=s.chunkMeta,c=t.transmuxer.flush(d);Object(i.d)(c)?c.then((function(e){h(t,e,d);})):h(t,c,d);}}));}function l(t,e){if((r=e.remuxResult).audio||r.video||r.text||r.id3||r.initSegment){var r,i=[],a=e.remuxResult,n=a.audio,s=a.video;n&&u(i,n),s&&u(i,s),t.postMessage({event:"transmuxComplete",data:e},i);}}function u(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer);}function h(t,e,r){e.forEach((function(e){l(t,e);})),t.postMessage({event:"flush",data:r});}},function(t,e,r){r.r(e),r.d(e,"default",(function(){return Yr}));var i=r(10),a=r(3),n=r(0),s=r(2),o=r(1),l=r(5),u=r(4);function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}var d=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.initSegment=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t;}var e,r;return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay;},e=t,(r=[{key:"hasProgramDateTime",get:function(){return !!this.fragments.length&&Object(a.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&h(e.prototype,r),t}(),c=r(16),f=/^(\d+)x(\d+)$/,g=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,v=function(){function t(e){for(var r in "string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r]);}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)r[i]=parseInt(e.slice(2*i,2*i+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var r=this[t];return r?parseFloat(r):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return "YES"===this[t]},e.decimalResolution=function(t){var e=f.exec(this[t]);if(null!==e)return {width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(g.lastIndex=0;null!==(e=g.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i;}return r},t}(),p={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function m(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var y=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,T=/#EXT-X-MEDIA:(.*)/g,E=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),b=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),S=/\.(mp4|m4s|m4v|m4a)$/i;var L,A,R=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];if(i.id===e)return i}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var r=e.shift()+".";return r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).substr(-4)}return t},t.resolve=function(t,e){return i.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var i,a=[],n={},s=!1;for(y.lastIndex=0;null!=(i=y.exec(e));)if(i[1]){var o=new v(i[1]),l={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:t.resolve(i[2],r)},u=o.decimalResolution("RESOLUTION");u&&(l.width=u.width,l.height=u.height),D((o.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),a.push(l);}else if(i[3]){var h=new v(i[3]);h["DATA-ID"]&&(s=!0,n[h["DATA-ID"]]=h);}return {levels:a,sessionData:s?n:null}},t.parseMasterPlaylistMedia=function(e,r,i,a){var n;void 0===a&&(a=[]);var s=[],o=0;for(T.lastIndex=0;null!==(n=T.exec(e));){var l=new v(n[1]);if(l.TYPE===i){var u={attrs:l,bitrate:0,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:i,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?t.resolve(l.URI,r):""};if(a.length){var h=t.findGroup(a,u.groupId)||a[0];k(u,h,"audioCodec"),k(u,h,"textCodec");}s.push(u);}}return s},t.parseLevelPlaylist=function(t,e,r,n,s){var l,h,f,g=new d(e),p=g.fragments,m=0,y=0,T=0,L=0,A=null,R=new u.b(n,e),D=-1;for(E.lastIndex=0,g.m3u8=t;null!==(l=E.exec(t));){var k=l[1];if(k){R.duration=parseFloat(k);var I=(" "+l[2]).slice(1);R.title=I||null,R.tagList.push(I?["INF",k,I]:["INF",k]);}else if(l[3])Object(a.a)(R.duration)&&(R.start=T,f&&(R.levelkey=f),R.sn=m,R.level=r,R.cc=L,R.urlId=s,p.push(R),R.relurl=(" "+l[3]).slice(1),_(R,A),A=R,T+=R.duration,m++,y=0,(R=new u.b(n,e)).start=T,R.sn=m,R.cc=L,R.level=r);else if(l[4]){var C=(" "+l[4]).slice(1);A?R.setByteRange(C,A):R.setByteRange(C);}else if(l[5])R.rawProgramDateTime=(" "+l[5]).slice(1),R.tagList.push(["PROGRAM-DATE-TIME",R.rawProgramDateTime]),-1===D&&(D=p.length);else {if(!(l=l[0].match(b))){o.b.warn("No matches on slow regex match for level playlist!");continue}for(h=1;h<l.length&&void 0===l[h];h++);var w=(" "+l[h]).slice(1),O=(" "+l[h+1]).slice(1),x=l[h+2]?(" "+l[h+2]).slice(1):"";switch(w){case"PLAYLIST-TYPE":g.type=O.toUpperCase();break;case"MEDIA-SEQUENCE":m=g.startSN=parseInt(O);break;case"SKIP":var P=new v(O),M=P.decimalInteger("SKIPPED-SEGMENTS");if(Object(a.a)(M)){g.skippedSegments=M;for(var F=M;F--;)p.unshift(null);m+=M;}var N=P.enumeratedString("RECENTLY-REMOVED-DATERANGES");N&&(g.recentlyRemovedDateranges=N.split("\t"));break;case"TARGETDURATION":g.targetduration=parseFloat(O);break;case"VERSION":g.version=parseInt(O);break;case"EXTM3U":break;case"ENDLIST":g.live=!1;break;case"#":(O||x)&&R.tagList.push(x?[O,x]:[O]);break;case"DIS":L++;case"GAP":R.tagList.push([w]);break;case"BITRATE":R.tagList.push([w,O]);break;case"DISCONTINUITY-SEQ":L=parseInt(O);break;case"KEY":var U,B=new v(O),G=B.enumeratedString("METHOD"),K=B.URI,j=B.hexadecimalInteger("IV"),H=B.enumeratedString("KEYFORMATVERSIONS"),V=B.enumeratedString("KEYID"),W=null!=(U=B.enumeratedString("KEYFORMAT"))?U:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(W)>-1){o.b.warn("Keyformat "+W+" is not supported from the manifest");continue}if("identity"!==W)continue;G&&(f=c.a.fromURL(e,K),K&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(G)>=0&&(f.method=G,f.keyFormat=W,V&&(f.keyID=V),H&&(f.keyFormatVersions=H),f.iv=j));break;case"START":var Y=new v(O).decimalFloatingPoint("TIME-OFFSET");Object(a.a)(Y)&&(g.startTimeOffset=Y);break;case"MAP":var q=new v(O);R.relurl=q.URI,q.BYTERANGE&&R.setByteRange(q.BYTERANGE),R.level=r,R.sn="initSegment",f&&(R.levelkey=f),g.initSegment=R,(R=new u.b(n,e)).rawProgramDateTime=g.initSegment.rawProgramDateTime;break;case"SERVER-CONTROL":var X=new v(O);g.canBlockReload=X.bool("CAN-BLOCK-RELOAD"),g.canSkipUntil=X.optionalFloat("CAN-SKIP-UNTIL",0),g.canSkipDateRanges=g.canSkipUntil>0&&X.bool("CAN-SKIP-DATERANGES"),g.partHoldBack=X.optionalFloat("PART-HOLD-BACK",0),g.holdBack=X.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var z=new v(O);g.partTarget=z.decimalFloatingPoint("PART-TARGET");break;case"PART":var Q=g.partList;Q||(Q=g.partList=[]);var $=y>0?Q[Q.length-1]:void 0,J=y++,Z=new u.c(new v(O),R,e,J,$);Q.push(Z),R.duration+=Z.duration;break;case"PRELOAD-HINT":var tt=new v(O);g.preloadHint=tt;break;case"RENDITION-REPORT":var et=new v(O);g.renditionReports=g.renditionReports||[],g.renditionReports.push(et);break;default:o.b.warn("line parsed but not handled: "+l);}}}A&&!A.relurl?(p.pop(),T-=A.duration,g.partList&&(g.fragmentHint=A)):g.partList&&(_(R,A),R.cc=L,g.fragmentHint=R);var rt=p.length,it=p[0],at=p[rt-1];if((T+=g.skippedSegments*g.targetduration)>0&&rt&&at){g.averagetargetduration=T/rt;var nt=at.sn;g.endSN="initSegment"!==nt?nt:0,it&&(g.startCC=it.cc,g.initSegment||g.fragments.every((function(t){return t.relurl&&(e=t.relurl,S.test(null!=(r=null===(a=i.parseURL(e))||void 0===a?void 0:a.path)?r:""));var e,r,a;}))&&(o.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(R=new u.b(n,e)).relurl=at.relurl,R.level=r,R.sn="initSegment",g.initSegment=R,g.needSidxRanges=!0));}else g.endSN=0,g.startCC=0;return g.fragmentHint&&(T+=g.fragmentHint.duration),g.totalduration=T,g.endCC=L,D>0&&function(t,e){for(var r=t[e],i=e;i--;){var a=t[i];if(!a)return;a.programDateTime=r.programDateTime-1e3*a.duration,r=a;}}(p,D),g},t}();function D(t,e){["video","audio","text"].forEach((function(r){var i=t.filter((function(t){return function(t,e){var r=p[e];return !!r&&!0===r[t.slice(0,4)]}(t,r)}));if(i.length){var a=i.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=a.length>0?a[0]:i[0],t=t.filter((function(t){return -1===i.indexOf(t)}));}})),e.unknownCodecs=t;}function k(t,e,r){var i=e[r];i&&(t[r]=i);}function _(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(a.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null);}function I(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack";}(L||(L={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle";}(A||(A={}));var C=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners();}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(n.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(n.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this);},e.unregisterListeners=function(){var t=this.hls;t.off(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(n.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(n.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this);},e.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,i=e.loader,a=new(r||i)(e);return t.loader=a,this.loaders[t.type]=a,a},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t];},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t);}},e.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders();},e.onManifestLoading=function(t,e){var r=e.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:L.MANIFEST,url:r,deliveryDirectives:null});},e.onLevelLoading=function(t,e){var r=e.id,i=e.level,a=e.url,n=e.deliveryDirectives;this.load({id:r,groupId:null,level:i,responseType:"text",type:L.LEVEL,url:a,deliveryDirectives:n});},e.onAudioTrackLoading=function(t,e){var r=e.id,i=e.groupId,a=e.url,n=e.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:L.AUDIO_TRACK,url:a,deliveryDirectives:n});},e.onSubtitleTrackLoading=function(t,e){var r=e.id,i=e.groupId,a=e.url,n=e.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:L.SUBTITLE_TRACK,url:a,deliveryDirectives:n});},e.load=function(t){var e,r,i,a,n,s,l=this.hls.config,u=this.getInternalLoader(t);if(u){var h=u.context;if(h&&h.url===t.url)return void o.b.trace("[playlist-loader]: playlist request ongoing");o.b.log("[playlist-loader]: aborting previous loader for type: "+t.type),u.abort();}switch(t.type){case L.MANIFEST:r=l.manifestLoadingMaxRetry,i=l.manifestLoadingTimeOut,a=l.manifestLoadingRetryDelay,n=l.manifestLoadingMaxRetryTimeout;break;case L.LEVEL:case L.AUDIO_TRACK:case L.SUBTITLE_TRACK:r=0,i=l.levelLoadingTimeOut;break;default:r=l.levelLoadingMaxRetry,i=l.levelLoadingTimeOut,a=l.levelLoadingRetryDelay,n=l.levelLoadingMaxRetryTimeout;}if((u=this.createInternalLoader(t),null!==(e=t.deliveryDirectives)&&void 0!==e&&e.part)&&(t.type===L.LEVEL&&null!==t.level?s=this.hls.levels[t.level].details:t.type===L.AUDIO_TRACK&&null!==t.id?s=this.hls.audioTracks[t.id].details:t.type===L.SUBTITLE_TRACK&&null!==t.id&&(s=this.hls.subtitleTracks[t.id].details),s)){var d=s.partTarget,c=s.targetduration;d&&c&&(i=Math.min(1e3*Math.max(3*d,.8*c),i));}var f={timeout:i,maxRetry:r,retryDelay:a,maxRetryDelay:n,highWaterMark:0},g={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};u.load(t,f,g);},e.loadsuccess=function(t,e,r,i){if(void 0===i&&(i=null),r.isSidxRequest)return this.handleSidxRequest(t,r),void this.handlePlaylistLoaded(t,e,r,i);this.resetInternalLoader(r.type);var a=t.data;0===a.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,e,r,i):this.handleMasterPlaylist(t,e,r,i)):this.handleManifestParsingError(t,r,"no EXTM3U delimiter",i);},e.loaderror=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!1,t);},e.loadtimeout=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!0);},e.handleMasterPlaylist=function(t,e,r,i){var a=this.hls,s=t.data,l=I(t,r),u=R.parseMasterPlaylist(s,l),h=u.levels,d=u.sessionData;if(h.length){var c=h.map((function(t){return {id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),f=h.map((function(t){return {id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),g=R.parseMasterPlaylistMedia(s,l,"AUDIO",c),p=R.parseMasterPlaylistMedia(s,l,"SUBTITLES",f),m=R.parseMasterPlaylistMedia(s,l,"CLOSED-CAPTIONS");if(g.length)g.some((function(t){return !t.url}))||!h[0].audioCodec||h[0].attrs.AUDIO||(o.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new v({}),bitrate:0,url:""}));a.trigger(n.a.MANIFEST_LOADED,{levels:h,audioTracks:g,subtitles:p,captions:m,url:l,stats:e,networkDetails:i,sessionData:d});}else this.handleManifestParsingError(t,r,"no level found in manifest",i);},e.handleTrackOrLevelPlaylist=function(t,e,r,i){var o=this.hls,l=r.id,u=r.level,h=r.type,d=I(t,r),c=Object(a.a)(l)?l:0,f=Object(a.a)(u)?u:c,g=function(t){switch(t.type){case L.AUDIO_TRACK:return A.AUDIO;case L.SUBTITLE_TRACK:return A.SUBTITLE;default:return A.MAIN}}(r),p=R.parseLevelPlaylist(t.data,d,f,g,c);if(p.fragments.length){if(h===L.MANIFEST){var m={attrs:new v({}),bitrate:0,details:p,name:"",url:d};o.trigger(n.a.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:d,stats:e,networkDetails:i,sessionData:null});}if(e.parsing.end=performance.now(),p.needSidxRanges){var y=p.initSegment.url;this.load({url:y,isSidxRequest:!0,type:h,level:u,levelDetails:p,id:l,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null});}else r.levelDetails=p,this.handlePlaylistLoaded(t,e,r,i);}else o.trigger(n.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0});},e.handleSidxRequest=function(t,e){var r=Object(l.g)(new Uint8Array(t.data));if(r){var i=r.references,a=e.levelDetails;i.forEach((function(t,e){var r=t.info,i=a.fragments[e];0===i.byteRange.length&&i.setByteRange(String(1+r.end-r.start)+"@"+String(r.start));})),a.initSegment.setByteRange(String(r.moovEndOffset)+"@0");}},e.handleManifestParsingError=function(t,e,r,i){this.hls.trigger(n.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:e.type===L.MANIFEST,url:t.url,reason:r,response:t,context:e,networkDetails:i});},e.handleNetworkError=function(t,e,r,i){void 0===r&&(r=!1),o.b.warn("[playlist-loader]: A network "+(r?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var a=s.a.UNKNOWN,l=!1,u=this.getInternalLoader(t);switch(t.type){case L.MANIFEST:a=r?s.a.MANIFEST_LOAD_TIMEOUT:s.a.MANIFEST_LOAD_ERROR,l=!0;break;case L.LEVEL:a=r?s.a.LEVEL_LOAD_TIMEOUT:s.a.LEVEL_LOAD_ERROR,l=!1;break;case L.AUDIO_TRACK:a=r?s.a.AUDIO_TRACK_LOAD_TIMEOUT:s.a.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case L.SUBTITLE_TRACK:a=r?s.a.SUBTITLE_TRACK_LOAD_TIMEOUT:s.a.SUBTITLE_LOAD_ERROR,l=!1;}u&&this.resetInternalLoader(t.type);var h={type:s.b.NETWORK_ERROR,details:a,fatal:l,url:t.url,loader:u,context:t,networkDetails:e};i&&(h.response=i),this.hls.trigger(n.a.ERROR,h);},e.handlePlaylistLoaded=function(t,e,r,i){var a=r.type,s=r.level,o=r.id,l=r.groupId,u=r.loader,h=r.levelDetails,d=r.deliveryDirectives;if(null!=h&&h.targetduration){if(u)switch(h.live&&(u.getCacheAge&&(h.ageHeader=u.getCacheAge()||0),u.getCacheAge&&!isNaN(h.ageHeader)||(h.ageHeader=0)),a){case L.MANIFEST:case L.LEVEL:this.hls.trigger(n.a.LEVEL_LOADED,{details:h,level:s||0,id:o||0,stats:e,networkDetails:i,deliveryDirectives:d});break;case L.AUDIO_TRACK:this.hls.trigger(n.a.AUDIO_TRACK_LOADED,{details:h,id:o||0,groupId:l||"",stats:e,networkDetails:i,deliveryDirectives:d});break;case L.SUBTITLE_TRACK:this.hls.trigger(n.a.SUBTITLE_TRACK_LOADED,{details:h,id:o||0,groupId:l||"",stats:e,networkDetails:i,deliveryDirectives:d});}}else this.handleManifestParsingError(t,r,"invalid target duration",i);},t}(),w=function(){function t(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners();}var e=t.prototype;return e._registerListeners=function(){this.hls.on(n.a.KEY_LOADING,this.onKeyLoading,this);},e._unregisterListeners=function(){this.hls.off(n.a.KEY_LOADING,this.onKeyLoading);},e.destroy=function(){for(var t in this._unregisterListeners(),this.loaders){var e=this.loaders[t];e&&e.destroy();}this.loaders={};},e.onKeyLoading=function(t,e){var r=e.frag,i=r.type,a=this.loaders[i];if(r.decryptdata){var s=r.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;if(a&&(o.b.warn("abort previous key loader for type:"+i),a.abort()),!s)return void o.b.warn("key uri is falsy");var u=l.loader,h=r.loader=this.loaders[i]=new u(l);this.decrypturl=s,this.decryptkey=null;var d={url:s,frag:r,responseType:"arraybuffer"},c={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};h.load(d,c,f);}else this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(n.a.KEY_LOADED,{frag:r}));}else o.b.warn("Missing decryption data on fragment in onKeyLoading");},e.loadsuccess=function(t,e,r){var i=r.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(n.a.KEY_LOADED,{frag:i})):o.b.error("after key load, decryptdata unset");},e.loaderror=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),delete this.loaders[r.type],this.hls.trigger(n.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t});},e.loadtimeout=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),delete this.loaders[r.type],this.hls.trigger(n.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r});},t}();function O(t,e){var r;try{r=new Event("addtrack");}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1);}r.track=t,e.dispatchEvent(r);}function x(t,e){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){o.b.debug("[texttrack-utils]: "+r);var i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i);}"disabled"===r&&(t.mode=r);}function P(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues){for(var r=t.cues.length;r--;)t.removeCue(t.cues[r]);"disabled"===e&&(t.mode=e);}}function M(t,e,r){var i=t.mode;if("disabled"===i&&(t.mode="hidden"),t.cues&&t.cues.length){for(var a=function(t,e,r){var i=[],a=function(t,e){if(e<t[0].startTime)return 0;var r=t.length-1;if(e>t[r].endTime)return -1;var i=0,a=r;for(;i<=a;){var n=Math.floor((a+i)/2);if(e<t[n].startTime)a=n-1;else {if(!(e>t[n].startTime&&i<r))return n;i=n+1;}}return t[i].startTime-e<e-t[a].startTime?i:a}(t,e);if(a>-1)for(var n=a,s=t.length;n<s;n++){var o=t[n];if(o.startTime>=e&&o.endTime<=r)i.push(o);else if(o.startTime>r)return i}return i}(t.cues,e,r),n=0;n<a.length;n++)t.removeCue(a[n]);"disabled"===i&&(t.mode=i);}}var F=r(6),N=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners();}var e=t.prototype;return e.destroy=function(){this._unregisterListeners();},e._registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this);},e._unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this);},e.onMediaAttached=function(t,e){this.media=e.media;},e.onMediaDetaching=function(){this.id3Track&&(P(this.id3Track),this.id3Track=null,this.media=null);},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return O(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var r=e.frag,i=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var a=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,n=0;n<i.length;n++){var s=F.c(i[n].data);if(s){var o=i[n].pts,l=n<i.length-1?i[n+1].pts:r.end;l-o<=0&&(l=o+.25);for(var u=0;u<s.length;u++){var h=s[u];if(!F.e(h)){var d=new a(o,l,"");d.value=h,this.id3Track.addCue(d);}}}}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset,a=e.type;if(!a||"audio"===a){var n=this.id3Track;n&&M(n,r,i);}},t}();function U(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}var B,G=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners();}var e,r,a=t.prototype;return a.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null;},a.registerListeners=function(){this.hls.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(n.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(n.a.ERROR,this.onError,this);},a.unregisterListeners=function(){this.hls.off(n.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(n.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(n.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(n.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(n.a.ERROR,this.onError);},a.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler);},a.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null);},a.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0;},a.onLevelUpdated=function(t,e){var r=e.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler);},a.onError=function(t,e){e.details===s.a.BUFFER_STALLED_ERROR&&(this.stallCount++,o.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"));},a.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var i=this.config,a=i.lowLatencyMode,n=i.maxLiveSyncPlaybackRate;if(a&&1!==n){var s=this.targetLatency;if(null!==s){var o=r-s,l=o<Math.min(this.maxLatency,s+e.targetduration);if(e.live&&l&&o>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,n)),h=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;t.playbackRate=Math.min(u,Math.max(1,h));}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1);}}}}},a.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},a.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},e=t,(r=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,r=t.partHoldBack,i=t.targetduration,a=this.config,n=a.liveSyncDuration,s=a.liveSyncDurationCount,o=a.lowLatencyMode,l=this.hls.userConfig,u=o&&r||e;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==n?n:s*i);var h=i;return u+Math.min(1*this.stallCount,h)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;var i=r.edge,a=t-e-this.edgeStalled,n=i-r.totalduration,s=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(n,a),s)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var r=t.buffered.length;return r?t.buffered.end(r-1):e.edge-this.currentTime}}])&&U(e.prototype,r),t}();function K(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}!function(t){t.No="",t.Yes="YES",t.v2="v2";}(B||(B={}));var j=function(){function t(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r;}return t.prototype.addDirectives=function(t){var e=new self.URL(t),r=e.searchParams;return void 0!==this.msn&&r.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&r.set("_HLS_part",this.part.toString()),this.skip&&r.set("_HLS_skip",this.skip),r.sort(),e.search=r.toString(),e.toString()},t}(),H=function(){function t(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"");}var e,r;return e=t,(r=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e);}}])&&K(e.prototype,r),t}();function V(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r);}}function W(t){var e={};t.forEach((function(t){var r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++;}));}function Y(t,e){var r=e.startPTS;if(Object(a.a)(r)){var i,n=0;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&(i.duration=n);}else if(e.sn>t.sn){t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration;}else e.start=Math.max(t.start-e.duration,0);}function q(t,e,r,i,n,s){i-r<=0&&(o.b.warn("Fragment should have a positive duration",e),i=r+e.duration,s=n+e.duration);var l=r,u=i,h=e.startPTS,d=e.endPTS;if(Object(a.a)(h)){var c=Math.abs(h-r);Object(a.a)(e.deltaPTS)?e.deltaPTS=Math.max(c,e.deltaPTS):e.deltaPTS=c,l=Math.max(r,h),r=Math.min(r,h),n=Math.min(n,e.startDTS),u=Math.min(i,d),i=Math.max(i,d),s=Math.max(s,e.endDTS);}e.duration=i-r;var f=r-e.start;e.appendedPTS=i,e.start=e.startPTS=r,e.maxStartPTS=l,e.startDTS=n,e.endPTS=i,e.minEndPTS=u,e.endDTS=s;var g,v=e.sn;if(!t||v<t.startSN||v>t.endSN)return 0;var p=v-t.startSN,m=t.fragments;for(m[p]=e,g=p;g>0;g--)Y(m[g],m[g-1]);for(g=p;g<m.length-1;g++)Y(m[g],m[g+1]);return t.fragmentHint&&Y(m[m.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,f}function X(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment),t.fragmentHint&&delete t.fragmentHint.endPTS;var r,i=0;if(function(t,e,r){for(var i=e.skippedSegments,a=Math.max(t.startSN,e.startSN)-e.startSN,n=(t.fragmentHint?1:0)+(i?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,u=a;u<=n;u++){var h=l[s+u],d=o[u];i&&!d&&u<i&&(d=e.fragments[u]=h),h&&d&&r(h,d);}}(t,e,(function(t,n){t.relurl&&(i=t.cc-n.cc),Object(a.a)(t.startPTS)&&Object(a.a)(t.endPTS)&&(n.start=n.startPTS=t.startPTS,n.startDTS=t.startDTS,n.appendedPTS=t.appendedPTS,n.maxStartPTS=t.maxStartPTS,n.endPTS=t.endPTS,n.endDTS=t.endDTS,n.minEndPTS=t.minEndPTS,n.duration=t.endPTS-t.startPTS,n.duration&&(r=n),e.PTSKnown=e.alignedSliding=!0),n.elementaryStreams=t.elementaryStreams,n.loader=t.loader,n.stats=t.stats,n.urlId=t.urlId;})),e.skippedSegments&&(e.deltaUpdateFailed=e.fragments.some((function(t){return !t})),e.deltaUpdateFailed)){o.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var n=e.skippedSegments;n--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc;}var s=e.fragments;if(i){o.b.warn("discontinuity sliding from playlist, take drift into account");for(var l=0;l<s.length;l++)s[l].cc+=i;}e.skippedSegments&&(e.initSegment||(e.initSegment=t.initSegment),e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e)for(var i=0,a=0,n=t.length;a<=n;a++){var s=t[a],o=e[a+i];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?r(s,o):i--;}}(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats;})),r?q(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):z(t,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var u=e.advancedDateTime;if(e.advanced&&u){var h=e.edge;e.driftStart||(e.driftStartTime=u,e.driftStart=h),e.driftEndTime=u,e.driftEnd=h;}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;}function z(t,e){var r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments,a=e.fragments;if(!(r<0||r>=i.length)){var n=i[r].start;if(n){for(var s=e.skippedSegments;s<a.length;s++)a[s].start+=n;e.fragmentHint&&(e.fragmentHint.start+=n);}}}var Q=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.b.log.bind(o.b,e+":"),this.warn=o.b.warn.bind(o.b,e+":"),this.hls=t;}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null;},e.onError=function(t,e){e.fatal&&e.type===s.b.NETWORK_ERROR&&this.clearTimer();},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1;},e.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist();},e.stopLoad=function(){this.canLoad=!1,this.clearTimer();},e.switchParams=function(t,e){var r=null==e?void 0:e.renditionReports;if(r)for(var i=0;i<r.length;i++){var n=r[i],s=""+n.URI;if(s===t.substr(-s.length)){var o=parseInt(n["LAST-MSN"]),l=parseInt(n["LAST-PART"]);if(e&&this.hls.config.lowLatencyMode){var u=Math.min(e.age-e.partTarget,e.targetduration);void 0!==l&&u>e.partTarget&&(l+=1);}if(Object(a.a)(o))return new j(o,Object(a.a)(l)?l:void 0,B.No)}}},e.loadPlaylist=function(t){},e.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},e.playlistLoaded=function(t,e,r){var i=this,a=e.details,n=e.stats,s=n.loading.end?Math.max(0,self.performance.now()-n.loading.end):0;if(a.advancedDateTime=Date.now()-s,a.live||null!=r&&r.live){if(a.reloaded(r),r&&this.log("live playlist "+t+" "+(a.advanced?"REFRESHED "+a.lastPartSn+"-"+a.lastPartIndex:"MISSED")),r&&a.fragments.length>0&&X(r,a),!this.canLoad||!a.live)return;var o=void 0,l=void 0;if(a.canBlockReload&&a.endSN&&a.advanced){var u=this.hls.config.lowLatencyMode,h=a.lastPartIndex;u?(o=-1!==h?a.lastPartSn:a.endSN+1,l=-1!==h?h+1:void 0):(o=-1!==h?a.lastPartSn+1:a.endSN+1,l=-1!==h?0:void 0);var d=a.age,c=d+a.ageHeader,f=Math.min(c-a.partTarget,1.5*a.targetduration);if(f>0){if(r&&f>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+f+" with playlist age: "+a.age),f=0;else {var g=Math.floor(f/a.targetduration);if(o+=g,void 0!==l)l+=Math.round(f%a.targetduration/a.partTarget);this.log("CDN Tune-in age: "+a.ageHeader+"s last advanced "+d.toFixed(2)+"s goal: "+f+" skip sn "+g+" to part "+l);}a.tuneInGoal=f;}var v=this.getDeliveryDirectives(a,e.deliveryDirectives,o,l);return void this.loadPlaylist(v)}var p=function(t,e){var r,i=1e3*t.levelTargetDuration,a=i/2,n=t.age,s=n>0&&n<3*i,o=e.loading.end-e.loading.start,l=t.availabilityDelay;if(!1===t.updated)if(s){var u=333*t.misses;r=Math.max(Math.min(a,2*o),u),t.availabilityDelay=(t.availabilityDelay||0)+r;}else r=a;else s?(l=Math.min(l||i/2,n),t.availabilityDelay=l,r=l+i-n):r=i-o;return Math.round(r)}(a,n);this.log("reload live playlist "+t+" in "+Math.round(p)+" ms");var m=this.getDeliveryDirectives(a,e.deliveryDirectives,o,l);this.timer=self.setTimeout((function(){return i.loadPlaylist(m)}),p);}else this.clearTimer();},e.getDeliveryDirectives=function(t,e,r,i){var a=function(t,e){var r=t.canSkipUntil,i=t.canSkipDateRanges,a=t.endSN;return r&&(void 0!==e?e-a:0)<r?i?B.v2:B.Yes:B.No}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,i=e.part,a=B.No),new j(r,i,a)},e.retryLoadingOrFail=function(t){var e,r=this,i=this.hls.config,a=this.retryCount<i.levelLoadingMaxRetry;if(a)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(e=t.context)&&void 0!==e&&e.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else {var n=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return r.loadPlaylist()}),n),this.warn("retry playlist loading #"+this.retryCount+" in "+n+' ms after "'+t.details+'"');}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return a},t}();function $(){return ($=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);}return t}).apply(this,arguments)}function J(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}function Z(t,e){return (Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt,et=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),rt=function(t){var e,r;function i(e){var r;return (r=t.call(this,e,"[level-controller]")||this)._levels=[],r._firstLevel=-1,r._startLevel=void 0,r.currentLevelIndex=-1,r.manualLevelIndex=-1,r.onParsedComplete=void 0,r._registerListeners(),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,Z(e,r);var a,o,u=i.prototype;return u._registerListeners=function(){var t=this.hls;t.on(n.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(n.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(n.a.FRAG_LOADED,this.onFragLoaded,this),t.on(n.a.ERROR,this.onError,this);},u._unregisterListeners=function(){var t=this.hls;t.off(n.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(n.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(n.a.FRAG_LOADED,this.onFragLoaded,this),t.off(n.a.ERROR,this.onError,this);},u.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this);},u.startLoad=function(){this._levels.forEach((function(t){t.loadError=0;})),t.prototype.startLoad.call(this);},u.onManifestLoaded=function(t,e){var r,i,a=[],o=[],l=[],u={},h=!1,d=!1,c=!1;if(e.levels.forEach((function(t){var e=t.attrs;h=h||!(!t.width||!t.height),d=d||!!t.videoCodec,c=c||!!t.audioCodec,et&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(i=u[t.bitrate])?i.url.push(t.url):(i=new H(t),u[t.bitrate]=i,a.push(i)),e&&(e.AUDIO&&V(i,"audio",e.AUDIO),e.SUBTITLES&&V(i,"text",e.SUBTITLES));})),(h||d)&&c&&(a=a.filter((function(t){var e=t.videoCodec,r=t.width,i=t.height;return !!e||!(!r||!i)}))),a=a.filter((function(t){var e=t.audioCodec,r=t.videoCodec;return (!e||m(e,"audio"))&&(!r||m(r,"video"))})),e.audioTracks&&W(o=e.audioTracks.filter((function(t){return !t.audioCodec||m(t.audioCodec,"audio")}))),e.subtitles&&W(l=e.subtitles),a.length>0){r=a[0].bitrate,a.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=a;for(var f=0;f<a.length;f++)if(a[f].bitrate===r){this._firstLevel=f,this.log("manifest loaded, "+a.length+" level(s) found, first bitrate: "+r);break}var g=c&&!d,v={levels:a,audioTracks:o,subtitleTracks:l,firstLevel:this._firstLevel,stats:e.stats,audio:c,video:d,altAudio:!g&&o.some((function(t){return !!t.url}))};this.hls.trigger(n.a.MANIFEST_PARSED,v),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition);}else this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,reason:"no level with compatible codecs found in manifest"});},u.onError=function(e,r){if(t.prototype.onError.call(this,e,r),!r.fatal){var i=r.context,a=this._levels[this.currentLevelIndex];if(i&&(i.type===L.AUDIO_TRACK&&a.audioGroupIds&&i.groupId===a.audioGroupIds[a.urlId]||i.type===L.SUBTITLE_TRACK&&a.textGroupIds&&i.groupId===a.textGroupIds[a.urlId]))this.redundantFailover(this.currentLevelIndex);else {var n,o=!1,l=!0;switch(r.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:if(r.frag){var u=this._levels[r.frag.level];u?(u.fragmentError++,u.fragmentError>this.hls.config.fragLoadingMaxRetry&&(n=r.frag.level)):n=r.frag.level;}break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(l=!1),n=i.level),o=!0;break;case s.a.REMUX_ALLOC_ERROR:n=r.level,o=!0;}void 0!==n&&this.recoverLevel(r,n,o,l);}}},u.recoverLevel=function(t,e,r,i){var a=t.details,n=this._levels[e];if(n.loadError++,r){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0;}if(i){var s=n.url.length;if(s>1&&n.loadError<s)t.levelRetry=!0,this.redundantFailover(e);else if(-1===this.manualLevelIndex){var o=0===e?this._levels.length-1:e-1;this.currentLevelIndex!==o&&0===this._levels[o].loadError&&(this.warn(a+": switch to "+o),t.levelRetry=!0,this.hls.nextAutoLevel=o);}}},u.redundantFailover=function(t){var e=this._levels[t],r=e.url.length;if(r>1){var i=(e.urlId+1)%r;this.warn("Switching to redundant URL-id "+i),this._levels.forEach((function(t){t.urlId=i;})),this.level=t;}},u.onFragLoaded=function(t,e){var r=e.frag;if(void 0!==r&&r.type===A.MAIN){var i=this._levels[r.level];void 0!==i&&(i.fragmentError=0,i.loadError=0);}},u.onLevelLoaded=function(t,e){var r,i,a=e.level,n=e.details,s=this._levels[a];if(!s)return this.warn("Invalid level index "+a),void(null!==(i=e.deliveryDirectives)&&void 0!==i&&i.skip&&(n.deltaUpdateFailed=!0));a===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0,this.retryCount=0),this.playlistLoaded(a,e,s.details)):null!==(r=e.deliveryDirectives)&&void 0!==r&&r.skip&&(n.deltaUpdateFailed=!0);},u.onAudioTrackSwitched=function(t,e){var r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var i=-1,a=this.hls.audioTracks[e.id].groupId,n=0;n<r.audioGroupIds.length;n++)if(r.audioGroupIds[n]===a){i=n;break}i!==r.urlId&&(r.urlId=i,this.startLoad());}},u.loadPlaylist=function(t){var e=this.currentLevelIndex,r=this._levels[e];if(this.canLoad&&r&&r.url.length>0){var i=r.urlId,a=r.url[i];if(t)try{a=t.addDirectives(a);}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t);}this.log("Attempt loading level index "+e+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+i+" "+a),this.clearTimer(),this.hls.trigger(n.a.LEVEL_LOADING,{url:a,level:e,id:i,deliveryDirectives:t||null});}},u.removeLevel=function(t,e){var r=function(t,r){return r!==e},i=this._levels.filter((function(i,a){return a!==t||i.url.length>1&&void 0!==e&&(i.url=i.url.filter(r),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(r)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(r)),i.urlId=0,!0)})).map((function(t,e){var r=t.details;return null!=r&&r.fragments&&r.fragments.forEach((function(t){t.level=e;})),t}));this._levels=i,this.hls.trigger(n.a.LEVELS_UPDATED,{levels:i});},a=i,(o=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e,r=this._levels;if(0!==r.length&&(this.currentLevelIndex!==t||null===(e=r[t])||void 0===e||!e.details)){if(t<0||t>=r.length){var i=t<0;if(this.hls.trigger(n.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.LEVEL_SWITCH_ERROR,level:t,fatal:i,reason:"invalid level idx"}),i)return;t=Math.min(t,r.length-1);}this.clearTimer();var a=this.currentLevelIndex,o=r[a],l=r[t];this.log("switching to level "+t+" from "+a),this.currentLevelIndex=t;var u=$({},l,{level:t,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete u._urlId,this.hls.trigger(n.a.LEVEL_SWITCHING,u);var h=l.details;if(!h||h.live){var d=this.switchParams(l.uri,null==o?void 0:o.details);this.loadPlaylist(d);}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t);}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t;}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t;}},{key:"nextLoadLevel",get:function(){return -1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t);}}])&&J(a.prototype,o),i}(Q);!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK";}(tt||(tt={}));var it=function(){function t(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners();}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(n.a.BUFFER_APPENDED,this.onBufferAppended,this),t.on(n.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(n.a.FRAG_LOADED,this.onFragLoaded,this);},e._unregisterListeners=function(){var t=this.hls;t.off(n.a.BUFFER_APPENDED,this.onBufferAppended,this),t.off(n.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(n.a.FRAG_LOADED,this.onFragLoaded,this);},e.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null;},e.getAppendedFrag=function(t,e){if(e===A.MAIN){var r=this.activeFragment,i=this.activeParts;if(!r)return null;if(i)for(var a=i.length;a--;){var n=i[a],s=n?n.end:r.appendedPTS;if(n.start<=t&&void 0!==s&&t<=s)return a>9&&(this.activeParts=i.slice(a-9)),n}else if(r.start<=t&&void 0!==r.appendedPTS&&t<=r.appendedPTS)return r}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var r=this.fragments,i=Object.keys(r),a=i.length;a--;){var n=r[i[a]];if((null==n?void 0:n.body.type)===e&&n.buffered){var s=n.body;if(s.start<=t&&t<=s.end)return s}}return null},e.detectEvictedFragments=function(t,e){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a&&a.buffered){var n=a.range[t];n&&n.time.some((function(t){var i=!r.isTimeBuffered(t.startPTS,t.endPTS,e);return i&&r.removeFragment(a.body),i}));}}));},e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,i=t.frag,a=t.part;if(r&&"initSegment"!==i.sn){var n=nt(i),s=this.fragments[n];s&&(Object.keys(r).forEach((function(t){var n=i.elementaryStreams[t];if(n){var o=r[t],l=null!==a||!0===n.partial;s.range[t]=e.getBufferedTimes(i,a,l,o);}})),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body));}},e.getBufferedTimes=function(t,e,r,i){for(var a={time:[],partial:r},n=e?e.start:t.start,s=e?e.end:t.end,o=t.minEndPTS||s,l=t.maxStartPTS||n,u=0;u<i.length;u++){var h=i.start(u)-this.bufferPadding,d=i.end(u)+this.bufferPadding;if(l>=h&&o<=d){a.time.push({startPTS:Math.max(n,i.start(u)),endPTS:Math.min(s,i.end(u))});break}if(n<d&&s>h)a.partial=!0,a.time.push({startPTS:Math.max(n,i.start(u)),endPTS:Math.min(s,i.end(u))});else if(s<=h)break}return a},e.getPartialFragment=function(t){var e,r,i,a=null,n=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(l){var u=o[l];u&&at(u)&&(r=u.body.start-s,i=u.body.end+s,t>=r&&t<=i&&(e=Math.min(t-r,i-t),n<=e&&(a=u.body,n=e)));})),a},e.getState=function(t){var e=nt(t),r=this.fragments[e];return r?r.buffered?at(r)?tt.PARTIAL:tt.OK:r.backtrack?tt.BACKTRACKED:tt.APPENDING:tt.NOT_LOADED},e.backtrack=function(t,e){var r=nt(t),i=this.fragments[r];if(!i||i.backtrack)return null;var a=i.backtrack=e||i.loaded;return i.loaded=null,a},e.getBacktrackData=function(t){var e=nt(t),r=this.fragments[e];if(r){var i,a=r.backtrack;if(null!=a&&null!==(i=a.payload)&&void 0!==i&&i.byteLength)return a;this.removeFragment(t);}return null},e.isTimeBuffered=function(t,e,r){for(var i,a,n=0;n<r.length;n++){if(i=r.start(n)-this.bufferPadding,a=r.end(n)+this.bufferPadding,t>=i&&e<=a)return !0;if(e<=i)return !1}return !1},e.onFragLoaded=function(t,e){var r=e.frag,i=e.part;if("initSegment"!==r.sn&&!r.bitrateTest&&!i){var a=nt(r);this.fragments[a]={body:r,loaded:e,backtrack:null,buffered:!1,range:Object.create(null)};}},e.onBufferAppended=function(t,e){var r=this,i=e.frag,a=e.part,n=e.timeRanges;if(i.type===A.MAIN)if(this.activeFragment=i,a){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(a);}else this.activeParts=null;this.timeRanges=n,Object.keys(n).forEach((function(t){var e=n[t];if(r.detectEvictedFragments(t,e),!a)for(var s=0;s<e.length;s++)i.appendedPTS=Math.max(e.end(s),i.appendedPTS||0);}));},e.onFragBuffered=function(t,e){this.detectPartialFragments(e);},e.hasFragment=function(t){var e=nt(t);return !!this.fragments[e]},e.removeFragment=function(t){var e=nt(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[e];},e.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null;},t}();function at(t){var e,r;return t.buffered&&((null===(e=t.range.video)||void 0===e?void 0:e.partial)||(null===(r=t.range.audio)||void 0===r?void 0:r.partial))}function nt(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var st=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this);}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed();},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval();},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return !!this._tickInterval},e.hasNextTick=function(){return !!this._tickTimer},e.setInterval=function(t){return !this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return !!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return !!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0);},e.doTick=function(){},t}(),ot={length:0,start:function(){return 0},end:function(){return 0}},lt=function(){function t(){}return t.isBuffered=function(e,r){try{if(e)for(var i=t.getBuffered(e),a=0;a<i.length;a++)if(r>=i.start(a)&&r<=i.end(a))return !0}catch(t){}return !1},t.bufferInfo=function(e,r,i){try{if(e){var a,n=t.getBuffered(e),s=[];for(a=0;a<n.length;a++)s.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(s,r,i)}}catch(t){}return {len:0,start:r,end:r,nextStart:void 0}},t.bufferedInfo=function(t,e,r){t.sort((function(t,e){var r=t.start-e.start;return r||e.end-t.end}));var i=[];if(r)for(var a=0;a<t.length;a++){var n=i.length;if(n){var s=i[n-1].end;t[a].start-s<r?t[a].end>s&&(i[n-1].end=t[a].end):i.push(t[a]);}else i.push(t[a]);}else i=t;for(var o,l=0,u=e,h=e,d=0;d<i.length;d++){var c=i[d].start,f=i[d].end;if(e+r>=c&&e<f)u=c,l=(h=f)-e;else if(e+r<c){o=c;break}}return {len:l,start:u||0,end:h||0,nextStart:o}},t.getBuffered=function(t){try{return t.buffered}catch(t){return o.b.log("failed to get media.buffered",t),ot}},t}(),ut=function(t,e,r,i,a,n){void 0===i&&(i=0),void 0===a&&(a=-1),void 0===n&&(n=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=i,this.part=a,this.partial=n;};function ht(t,e){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration;}}function dt(t,e){for(var r=e.fragments,i=0,a=r.length;i<a;i++)ht(r[i],t);e.fragmentHint&&ht(e.fragmentHint,t),e.alignedSliding=!0;}function ct(t,e,r){e&&(!function(t,e,r){if(function(t,e,r){return !(!e.details||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){var i=function(t,e){var r=t.fragments,i=e.fragments;if(i.length&&r.length){var a=function(t,e){for(var r=null,i=0,a=t.length;i<a;i++){var n=t[i];if(n&&n.cc===e){r=n;break}}return r}(r,i[0].cc);if(a&&(!a||a.startPTS))return a;o.b.log("No frag in previous level to align on");}else o.b.log("No fragments to align");}(r.details,e);i&&Object(a.a)(i.start)&&(o.b.log("Adjusting PTS using last level due to CC increase within current level "+e.url),dt(i.start,e));}}(t,r,e),!r.alignedSliding&&e.details&&ft(r,e.details),r.alignedSliding||!e.details||r.skippedSegments||z(e.details,r));}function ft(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime,i=t.fragments[0].programDateTime,n=(i-r)/1e3+e.fragments[0].start;n&&Object(a.a)(n)&&(o.b.log("Adjusting PTS using programDateTime delta "+(i-r)+"ms, sliding:"+n.toFixed(3)+" "+t.url+" "),dt(n,t));}}var gt={search:function(t,e){for(var r=0,i=t.length-1,a=null,n=null;r<=i;){var s=e(n=t[a=(r+i)/2|0]);if(s>0)r=a+1;else {if(!(s<0))return n;i=a-1;}}return null}};function vt(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!Object(a.a)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<t.length;++i){var n=t[i];if(yt(e,r,n))return n}return null}function pt(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var a=null;if(t?a=e[t.sn-e[0].sn+1]:0===r&&0===e[0].start&&(a=e[0]),a&&0===mt(r,i,a))return a;var n=gt.search(e,mt.bind(null,r,i));return n||a}function mt(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=t?1:r.start-i>t&&r.start?-1:0}function yt(t,e,r){var i=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return (r.endProgramDateTime||0)-i>t}function Tt(t){var e="function"==typeof Map?new Map:void 0;return (Tt=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i);}function i(){return Et(t,arguments,Lt(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),St(i,t)})(t)}function Et(t,e,r){return (Et=bt()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return r&&St(a,r.prototype),a}).apply(null,arguments)}function bt(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}function St(t,e){return (St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t){return (Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var At=Math.pow(2,17),Rt=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t;}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null);},e.abort=function(){this.loader&&this.loader.abort();},e.load=function(t,e){var r=this,i=t.url;if(!i)return Promise.reject(new kt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var a=this.config,n=a.fLoader,o=a.loader;return new Promise((function(i,l){r.loader&&r.loader.destroy();var u=r.loader=t.loader=n?new n(a):new o(a),h=Dt(t),d={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:At};t.stats=u.stats,u.load(h,d,{onSuccess:function(e,a,n,s){r.resetLoader(t,u),i({frag:t,part:null,payload:e.data,networkDetails:s});},onError:function(e,i,a){r.resetLoader(t,u),l(new kt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e,networkDetails:a}));},onAbort:function(e,i,a){r.resetLoader(t,u),l(new kt({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:a}));},onTimeout:function(e,i,a){r.resetLoader(t,u),l(new kt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:a}));},onProgress:function(r,i,a,n){e&&e({frag:t,part:null,payload:a,networkDetails:n});}});}))},e.loadPart=function(t,e,r){var i=this;this.abort();var a=this.config,n=a.fLoader,o=a.loader;return new Promise((function(l,u){i.loader&&i.loader.destroy();var h=i.loader=t.loader=n?new n(a):new o(a),d=Dt(t,e),c={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:At};e.stats=h.stats,h.load(d,c,{onSuccess:function(a,n,s,o){i.resetLoader(t,h),i.updateStatsFromPart(t,e);var u={frag:t,part:e,payload:a.data,networkDetails:o};r(u),l(u);},onError:function(r,a,n){i.resetLoader(t,h),u(new kt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:r,networkDetails:n}));},onAbort:function(r,a,n){t.stats.aborted=e.stats.aborted,i.resetLoader(t,h),u(new kt({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,networkDetails:n}));},onTimeout:function(r,a,n){i.resetLoader(t,h),u(new kt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,networkDetails:n}));}});}))},e.updateStatsFromPart=function(t,e){var r=t.stats,i=e.stats,a=i.total;if(r.loaded+=i.loaded,a){var n=Math.round(t.duration/e.duration),s=Math.min(Math.round(r.loaded/a),n),o=(n-s)*Math.round(r.loaded/s);r.total=r.loaded+o;}else r.total=Math.max(r.loaded,r.total);var l=r.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end;},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy();},t}();function Dt(t,e){void 0===e&&(e=null);var r=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:r.url,rangeStart:0,rangeEnd:0},n=r.byteRangeStartOffset,s=r.byteRangeEndOffset;return Object(a.a)(n)&&Object(a.a)(s)&&(i.rangeStart=n,i.rangeEnd=s),i}var kt=function(t){var e,r;function i(e){for(var r,i=arguments.length,a=new Array(i>1?i-1:0),n=1;n<i;n++)a[n-1]=arguments[n];return (r=t.call.apply(t,[this].concat(a))||this).data=void 0,r.data=e,r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,St(e,r),i}(Tt(Error)),_t=r(14),It={toString:function(t){for(var e="",r=t.length,i=0;i<r;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}};function Ct(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}function wt(t,e){return (wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ot="STOPPED",xt="IDLE",Pt="KEY_LOADING",Mt="FRAG_LOADING",Ft="FRAG_LOADING_WAITING_RETRY",Nt="WAITING_TRACK",Ut="PARSING",Bt="PARSED",Gt="BACKTRACKING",Kt="ENDED",jt="ERROR",Ht="WAITING_INIT_PTS",Vt="WAITING_LEVEL",Wt=function(t){var e,r;function i(e,r,i){var a;return (a=t.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=Ot,a.media=void 0,a.mediaBuffer=void 0,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.loadedmetadata=!1,a.fragLoadError=0,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.logPrefix=i,a.log=o.b.log.bind(o.b,i+":"),a.warn=o.b.warn.bind(o.b,i+":"),a.hls=e,a.fragmentLoader=new Rt(e.config),a.fragmentTracker=r,a.config=e.config,a.decrypter=new _t.a(e,e.config),e.on(n.a.KEY_LOADED,a.onKeyLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,wt(e,r);var u,h,c=i.prototype;return c.doTick=function(){this.onTickEnd();},c.onTickEnd=function(){},c.startLoad=function(t){},c.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ot;},c._streamEnded=function(t,e){var r=this.fragCurrent,i=this.fragmentTracker;if(!e.live&&r&&r.sn===e.endSN&&!t.nextStart){var a=i.getState(r);return a===tt.PARTIAL||a===tt.OK}return !1},c.onMediaAttached=function(t,e){var r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===Ot&&this.startLoad(i.startPosition);},c.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad();},c.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,r=this.media,i=this.mediaBuffer,n=this.state,s=r?r.currentTime:0,o=lt.bufferInfo(i||r,s,t.maxBufferHole);if(this.log("media seeking to "+(Object(a.a)(s)?s.toFixed(3):s)+", state: "+n),n===Kt)this.resetLoadingState();else if(e&&!o.len){var l=t.maxFragLookUpTolerance,u=e.start-l,h=e.start+e.duration+l;(s<u||s>h)&&(e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.resetLoadingState());}r&&(this.lastCurrentTime=s),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=s),this.tick();},c.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0;},c.onKeyLoaded=function(t,e){if(this.state===Pt&&this.levels){this.state=xt;var r=this.levels[e.frag.level].details;r&&this.loadFragment(e.frag,r,e.frag.start);}},c.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this);},c.onHandlerDestroyed=function(){this.state=Ot,this.hls.off(n.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this);},c.loadFragment=function(t,e,r){this._loadFragForPlayback(t,e,r);},c._loadFragForPlayback=function(t,e,r){var i=this;this._doFragLoad(t,e,r,(function(e){if(i.fragContextChanged(t))return i.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void i.fragmentTracker.removeFragment(t);t.stats.chunkCount++,i._handleFragmentLoadProgress(e);})).then((function(e){if(e){i.fragLoadError=0;var r=i.state;if(!i.fragContextChanged(t))return "payload"in e&&(i.log("Loaded fragment "+t.sn+" of level "+t.level),i.hls.trigger(n.a.FRAG_LOADED,e),i.state===Gt)?(i.fragmentTracker.backtrack(t,e),void i.resetFragmentLoading(t)):void i._handleFragmentLoadComplete(e);(r===Mt||r===Gt||!i.fragCurrent&&r===Ut)&&(i.fragmentTracker.removeFragment(t),i.state=xt);}})).catch((function(e){i.warn(e),i.resetFragmentLoading(t);}));},c.flushMainBuffer=function(t,e,r){void 0===r&&(r=null);var i={startOffset:t,endOffset:e,type:r};this.fragLoadError=0,this.hls.trigger(n.a.BUFFER_FLUSHING,i);},c._loadInitSegment=function(t){var e=this;this._doFragLoad(t).then((function(r){if(!r||e.fragContextChanged(t)||!e.levels)throw new Error("init load aborted");return r})).then((function(r){var i=e.hls,a=r.payload,s=t.decryptdata;if(a&&a.byteLength>0&&s&&s.key&&s.iv&&"AES-128"===s.method){var o=self.performance.now();return e.decrypter.webCryptoDecrypt(new Uint8Array(a),s.key.buffer,s.iv.buffer).then((function(e){var a=self.performance.now();return i.trigger(n.a.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:o,tdecrypt:a}}),r.payload=e,r}))}return r})).then((function(r){var i=e.fragCurrent,a=e.hls,s=e.levels;if(!s)throw new Error("init load aborted, missing levels");var o=s[t.level].details.initSegment,l=t.stats;e.state=xt,e.fragLoadError=0,o.data=new Uint8Array(r.payload),l.parsing.start=l.buffering.start=self.performance.now(),l.parsing.end=l.buffering.end=self.performance.now(),r.frag===i&&a.trigger(n.a.FRAG_BUFFERED,{stats:l,frag:i,part:null,id:t.type}),e.tick();})).catch((function(r){e.warn(r),e.resetFragmentLoading(t);}));},c.fragContextChanged=function(t){var e=this.fragCurrent;return !t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},c.fragBufferedComplete=function(t,e){var r=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+It.toString(lt.getBuffered(r))),this.state=xt,this.tick();},c._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var r=t.frag,i=t.part,a=t.partsLoaded,n=!a||0===a.length||a.some((function(t){return !t})),s=new ut(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!n);e.flush(s);}},c._handleFragmentLoadProgress=function(t){},c._doFragLoad=function(t,e,r,i){var s=this;if(void 0===r&&(r=null),!this.levels)throw new Error("frag load aborted, missing levels");if(r=Math.max(t.start,r||0),this.config.lowLatencyMode&&e){var o=e.partList;if(o&&i){r>t.end&&e.fragmentHint&&(t=e.fragmentHint);var l=this.getNextPart(o,t,r);if(l>-1){var u=o[l];return this.log("Loading part sn: "+t.sn+" p: "+u.index+" cc: "+t.cc+" of playlist ["+e.startSN+"-"+e.endSN+"] parts [0-"+l+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=Mt,this.hls.trigger(n.a.FRAG_LOADING,{frag:t,part:o[l],targetBufferTime:r}),this.doFragPartsLoad(t,o,l,i).catch((function(t){return s.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(o,r))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(e?"of ["+e.startSN+"-"+e.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),Object(a.a)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Mt,this.hls.trigger(n.a.FRAG_LOADING,{frag:t,targetBufferTime:r}),this.fragmentLoader.load(t,i).catch((function(t){return s.handleFragLoadError(t)}))},c.doFragPartsLoad=function(t,e,r,i){var a=this;return new Promise((function(s,o){var l=[];!function r(u){var h=e[u];a.fragmentLoader.loadPart(t,h,i).then((function(i){l[h.index]=i;var o=i.part;a.hls.trigger(n.a.FRAG_LOADED,i);var d=e[u+1];if(!d||d.fragment!==t)return s({frag:t,part:o,partsLoaded:l});r(u+1);})).catch(o);}(r);}))},c.handleFragLoadError=function(t){var e=t.data;return e&&e.details===s.a.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(n.a.ERROR,e),null},c._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===Ut){var r=e.frag,i=e.part,a=e.level,n=self.performance.now();r.stats.parsing.end=n,i&&(i.stats.parsing.end=n),this.updateLevelTiming(r,i,a,t.partial);}else this.fragCurrent||(this.state=xt);},c.getCurrentContext=function(t){var e=this.levels,r=t.level,i=t.sn,a=t.part;if(!e||!e[r])return this.warn("Levels object was unset while buffering fragment "+i+" of level "+r+". The current chunk will not be buffered."),null;var n=e[r],s=a>-1?function(t,e,r){if(!t||!t.details)return null;var i=t.details.partList;if(i)for(var a=i.length;a--;){var n=i[a];if(n.index===r&&n.fragment.sn===e)return n}return null}(n,i,a):null,o=s?s.fragment:function(t,e){if(!t||!t.details)return null;var r=t.details,i=r.fragments[e-r.startSN];return i||((i=r.fragmentHint)&&i.sn===e?i:null)}(n,i);return o?{frag:o,part:s,level:n}:null},c.bufferFragmentData=function(t,e,r,i){if(t&&this.state===Ut){var a=t.data1,s=t.data2,o=a;if(a&&s&&(o=Object(l.a)(a,s)),o&&o.length){var u={type:t.type,frag:e,part:r,chunkMeta:i,parent:e.type,data:o};this.hls.trigger(n.a.BUFFER_APPENDING,u),t.dropped&&t.independent&&!r&&this.flushBufferGap(e);}}},c.flushBufferGap=function(t){var e=this.media;if(e)if(lt.isBuffered(e,e.currentTime)){var r=e.currentTime,i=lt.bufferInfo(e,r,0),a=t.duration,n=Math.min(2*this.config.maxFragLookUpTolerance,.25*a),s=Math.max(Math.min(t.start-n,i.end-n),r+n);t.start-s>n&&this.flushMainBuffer(s,t.start);}else this.flushMainBuffer(0,t.start);},c.reduceMaxBufferLength=function(t){var e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},c.getNextFragment=function(t,e){var r=e.fragments,i=r.length;if(!i)return null;var a,n=this.config,s=r[0].start;if(!e.initSegment||e.initSegment.data||this.bitrateTest)if(e.live){var o=n.initialLiveManifestSize;if(i<o)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+o+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(a=this.getInitialLiveFragment(e,r),this.startPosition=a?this.hls.liveSyncPosition||a.start:t);}else t<=s&&(a=r[0]);else a=e.initSegment;if(!a){var l=n.lowLatencyMode?e.partEnd:e.fragmentEnd;a=this.getFragmentAtPosition(t,l,e);}return a},c.getNextPart=function(t,e,r){for(var i=-1,a=!1,n=!0,s=0,o=t.length;s<o;s++){var l=t[s];if(n=n&&!l.independent,i>-1&&r<l.start)break;var u=l.loaded;!u&&(a||l.independent||n)&&l.fragment===e&&(i=s),a=u;}return i},c.loadedEndOfParts=function(t,e){var r=t[t.length-1];return r&&e>r.start&&r.loaded},c.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,i=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),i=vt(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var a=r.sn+1;if(a>=t.startSN&&a<=t.endSN){var n=e[a-t.startSN];r.cc===n.cc&&(i=n,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn));}i||(i=function(t,e){return gt.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(e,r.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn);}}else {var s=this.hls.liveSyncPosition;null!==s&&(i=this.getFragmentAtPosition(s,this.bitrateTest?t.fragmentEnd:t.edge,t));}return i},c.getFragmentAtPosition=function(t,e,r){var i,a=this.config,n=this.fragPrevious,s=r.fragments,o=r.endSN,l=r.fragmentHint,u=a.maxFragLookUpTolerance,h=!!(a.lowLatencyMode&&r.partList&&l);(h&&l&&!this.bitrateTest&&(s=s.concat(l),o=l.sn),t<e)?i=pt(n,s,t,t>e-u?0:u):i=s[s.length-1];if(i){var d=i.sn-r.startSN,c=n&&i.level===n.level,f=s[d+1];if(this.fragmentTracker.getState(i)===tt.BACKTRACKED){i=null;for(var g=d;s[g]&&this.fragmentTracker.getState(s[g])===tt.BACKTRACKED;)i=n?s[g--]:s[--g];i||(i=f);}else n&&i.sn===n.sn&&!h&&c&&(i.sn<o&&this.fragmentTracker.getState(f)!==tt.OK?(this.log("SN "+i.sn+" just loaded, load next one: "+f.sn),i=f):i=null);}return i},c.synchronizeToLiveEdge=function(t){var e=this.config,r=this.media;if(r){var i=this.hls.liveSyncPosition,a=r.currentTime,n=t.fragments[0].start,s=t.edge,o=a>=n-e.maxFragLookUpTolerance&&a<=s;if(null!==i&&r.duration>i&&(a<i||!o)){var l=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!o&&r.readyState<4||a<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn("Playback: "+a.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+i.toFixed(3)),r.currentTime=i));}}},c.alignPlaylists=function(t,e){var r=this.levels,i=this.levelLastLoaded,n=null!==i?r[i]:null,s=0;return e&&t.fragments.length>0?(s=t.fragments[0].start,t.alignedSliding&&Object(a.a)(s)?this.log("Live playlist sliding:"+s.toFixed(3)):s||(this.warn("["+this.constructor.name+"] Live playlist - outdated PTS, unknown sliding"),ct(this.fragPrevious,n,t))):(this.log("Live playlist - first load, unknown sliding"),ct(this.fragPrevious,n,t)),s},c.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},c.setStartPosition=function(t,e){var r=this.startPosition;if(-1===this.startPosition||-1===this.lastCurrentTime){var i=t.startTimeOffset;Object(a.a)(i)?(i<0&&(this.log("Negative start time offset "+i+", count from end of last fragment"),i=e+t.totalduration+i),this.log("Start time offset found in playlist, adjust startPosition to "+i),this.startPosition=r=i):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r;}this.nextLoadPosition=r;},c.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},c.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t));},c.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=xt);},c.onFragmentOrKeyLoadError=function(t,e){if(!e.fatal){var r=e.frag;if(r&&r.type===t){this.fragCurrent;var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(r.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+t+" "+r.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=Ft;}else e.levelRetry?(t===A.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=xt):(o.b.error(e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.stopLoad(),this.state=jt);}}},c.afterBufferFlushed=function(t,e){if(t){var r=lt.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,r),this.state===Kt&&this.resetLoadingState();}},c.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=xt;},c.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition;}return !1},c.updateLevelTiming=function(t,e,r,i){var a=this,s=r.details;Object.keys(t.elementaryStreams).reduce((function(e,o){var l=t.elementaryStreams[o];if(l){var u=l.endPTS-l.startPTS;if(u<=0)return a.warn("Could not parse fragment "+t.sn+" "+o+" duration reliably ("+u+") resetting transmuxer to fallback to playlist timing"),a.resetTransmuxer(),e||!1;var h=i?0:q(s,t,l.startPTS,l.endPTS,l.startDTS,l.endDTS);return a.hls.trigger(n.a.LEVEL_PTS_UPDATED,{details:s,level:r,drift:h,type:o,frag:t,start:l.startPTS,end:l.endPTS}),!0}return e}),!1)?(this.state=Bt,this.hls.trigger(n.a.FRAG_PARSED,{frag:t,part:e})):this.resetLoadingState();},c.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null);},u=i,(h=[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t));}}])&&Ct(u.prototype,h),i}(st);function Yt(){return self.MediaSource||self.WebKitMediaSource}function qt(){return self.SourceBuffer||self.WebKitSourceBuffer}var Xt=r(17),zt=r(9),Qt=r(13),$t=Yt()||{isTypeSupported:function(){return !1}},Jt=function(){function t(t,e,r,i){var a=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=e,this.onTransmuxComplete=r,this.onFlush=i;var l=t.config,u=function(e,r){(r=r||{}).frag=a.frag,r.id=a.id,t.trigger(e,r);};this.observer=new Qt.EventEmitter,this.observer.on(n.a.FRAG_DECRYPTED,u),this.observer.on(n.a.ERROR,u);var h={mp4:$t.isTypeSupported("video/mp4"),mpeg:$t.isTypeSupported("audio/mpeg"),mp3:$t.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){var c;o.b.log("demuxing in webworker");try{c=this.worker=Xt(18),this.onwmsg=this.onWorkerMessage.bind(this),c.addEventListener("message",this.onwmsg),c.onerror=function(e){t.trigger(n.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")});},c.postMessage({cmd:"init",typeSupported:h,vendor:d,id:e,config:JSON.stringify(l)});}catch(t){o.b.warn("Error in worker:",t),o.b.error("Error while initializing DemuxerWorker, fallback to inline"),c&&self.URL.revokeObjectURL(c.objectURL),this.transmuxer=new zt.c(this.observer,h,l,d),this.worker=null;}}else this.transmuxer=new zt.c(this.observer,h,l,d);}var e=t.prototype;return e.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else {var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null);}var r=this.observer;r&&r.removeAllListeners(),this.observer=null;},e.push=function(t,e,r,i,a,n,s,l,u,h){var d=this;u.transmuxing.start=self.performance.now();var c=this.transmuxer,f=this.worker,g=n?n.start:a.start,v=a.decryptdata,p=this.frag,m=!(p&&a.cc===p.cc),y=!(p&&u.level===p.level),T=p?u.sn-p.sn:-1,E=this.part?u.part-this.part.index:1,b=!y&&(1===T||0===T&&1===E),S=self.performance.now();(y||T||0===a.stats.parsing.start)&&(a.stats.parsing.start=S),!n||!E&&b||(n.stats.parsing.start=S);var L=new zt.b(m,b,l,y,g);if(!b||m){o.b.log("[transmuxer-interface, "+a.type+"]: Starting new transmux session for sn: "+u.sn+" p: "+u.part+" level: "+u.level+" id: "+u.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+y+"\n        contiguous: "+b+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+g);var A=new zt.a(r,i,e,s,h);this.configureTransmuxer(A);}if(this.frag=a,this.part=n,f)f.postMessage({cmd:"demux",data:t,decryptdata:v,chunkMeta:u,state:L},t instanceof ArrayBuffer?[t]:[]);else if(c){var R=c.push(t,v,u,L);Object(zt.d)(R)?R.then((function(t){d.handleTransmuxComplete(t);})):this.handleTransmuxComplete(R);}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var r=this.transmuxer,i=this.worker;if(i)i.postMessage({cmd:"flush",chunkMeta:t});else if(r){var a=r.flush(t);Object(zt.d)(a)?a.then((function(r){e.handleFlushResult(r,t);})):this.handleFlushResult(a,t);}},e.handleFlushResult=function(t,e){var r=this;t.forEach((function(t){r.handleTransmuxComplete(t);})),this.onFlush(e);},e.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data);}},e.configureTransmuxer=function(t){var e=this.worker,r=this.transmuxer;e?e.postMessage({cmd:"configure",config:t}):r&&r.configure(t);},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t);},t}(),Zt=function(){function t(t,e,r,i){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=i;}var e=t.prototype;return e.destroy=function(){this.hls=this.fragmentTracker=this.media=null;},e.poll=function(t){var e=this.config,r=this.media,i=this.stalled,a=r.currentTime,n=r.seeking,s=this.seeking&&!n,l=!this.seeking&&n;if(this.seeking=n,a===t){if((l||s)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&lt.getBuffered(r).length){var u=lt.bufferInfo(r,a,0),h=u.len>0,d=u.nextStart||0;if(h||d){if(n){var c=u.len>2,f=!d||d-a>2&&!this.fragmentTracker.getPartialFragment(a);if(c||f)return;this.moved=!1;}if(!this.moved&&null!==this.stalled){var g,v=Math.max(d,u.start||0)-a,p=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,m=(null==p||null===(g=p.details)||void 0===g?void 0:g.live)?2*p.details.targetduration:2;if(v>0&&v<=m)return void this._trySkipBufferHole(null)}var y=self.performance.now();if(null!==i){var T=y-i;!n&&T>=250&&this._reportStall(u.len);var E=lt.bufferInfo(r,a,e.maxBufferHole);this._tryFixBufferStall(E,T);}else this.stalled=y;}}}else if(this.moved=!0,null!==i){if(this.stallReported){var b=self.performance.now()-i;o.b.warn("playback not stuck anymore @"+a+", after "+Math.round(b)+"ms"),this.stallReported=!1;}this.stalled=null,this.nudgeRetry=0;}},e._tryFixBufferStall=function(t,e){var r=this.config,i=this.fragmentTracker,a=this.media.currentTime,n=i.getPartialFragment(a);if(n&&this._trySkipBufferHole(n))return;t.len>r.maxBufferHole&&e>1e3*r.highBufferWatchdogPeriod&&(o.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer());},e._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,o.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}));},e._trySkipBufferHole=function(t){for(var e=this.config,r=this.hls,i=this.media,a=i.currentTime,l=0,u=lt.getBuffered(i),h=0;h<u.length;h++){var d=u.start(h);if(a+e.maxBufferHole>=l&&a<d){var c=Math.max(d+.05,i.currentTime+.1);return o.b.warn("skipping hole, adjusting currentTime from "+a+" to "+c),this.moved=!0,this.stalled=null,i.currentTime=c,t&&r.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+c,frag:t}),c}l=u.end(h);}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,i=r.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<t.nudgeMaxRetry){var l=i+a*t.nudgeOffset;o.b.warn("Nudging 'currentTime' from "+i+" to "+l),r.currentTime=l,e.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_NUDGE_ON_STALL,fatal:!1});}else o.b.error("Playhead still not moving while enough data buffered @"+i+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!0});},t}();function te(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}function ee(t,e){return (ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var re=function(t){var e,r;function i(e,r){var i;return (i=t.call(this,e,r,"[stream-controller]")||this).audioCodecSwap=!1,i.gapController=null,i.level=-1,i._forceStartLoad=!1,i.altAudio=!1,i.audioOnly=!1,i.fragPlaying=null,i.onvplaying=null,i.onvseeked=null,i.fragLastKbps=0,i.stalled=!1,i.audioCodecSwitch=!1,i.videoBuffer=null,i._registerListeners(),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,ee(e,r);var l,h,c=i.prototype;return c._registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(n.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(n.a.ERROR,this.onError,this),t.on(n.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(n.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(n.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(n.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(n.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(n.a.FRAG_BUFFERED,this.onFragBuffered,this);},c._unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(n.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(n.a.ERROR,this.onError,this),t.off(n.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(n.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(n.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(n.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(n.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(n.a.FRAG_BUFFERED,this.onFragBuffered,this);},c.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching();},c.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(r.config.testBandwidth?(i=0,this.bitrateTest=!0):i=r.nextAutoLevel),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1;}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=xt,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick();}else this._forceStartLoad=!0,this.state=Ot;},c.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this);},c.doTick=function(){switch(this.state){case xt:this.doTickIdle();break;case Vt:var t,e=this.levels,r=this.level,i=null==e||null===(t=e[r])||void 0===t?void 0:t.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=xt;break}break;case Ft:var a,n=self.performance.now(),s=this.retryDate;(!s||n>=s||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=xt);}this.onTickEnd();},c.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged();},c.doTickIdle=function(){var t,e,r=this.hls,i=this.levelLastLoaded,s=this.levels,o=this.media,l=r.config,u=r.nextLoadLevel;if(null!==i&&(o||!this.startFragRequested&&l.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&s&&s[u]){var h=s[u];this.level=r.nextLoadLevel=u;var d=h.details;if(!d||this.state===Vt||d.live&&this.levelLastLoaded!==u)this.state=Vt;else {var c=this.getLoadPosition();if(Object(a.a)(c)){var f=d.initSegment,g=0;if(!f||f.data||this.bitrateTest){var v,p=h.maxBitrate;v=p?Math.max(8*l.maxBufferSize/p,l.maxBufferLength):l.maxBufferLength,v=Math.min(v,l.maxMaxBufferLength);var m=c<l.maxBufferHole?Math.max(2,l.maxBufferHole):l.maxBufferHole,y=lt.bufferInfo(this.mediaBuffer?this.mediaBuffer:o,c,m);if(y.len>=v)return;if(this._streamEnded(y,d)){var T={};return this.altAudio&&(T.type="video"),this.hls.trigger(n.a.BUFFER_EOS,T),void(this.state=Kt)}if(g=y.end,(f=this.getNextFragment(g,d))&&this.fragmentTracker.getState(f)===tt.OK&&this.nextLoadPosition>g&&(f=this.getNextFragment(this.nextLoadPosition,d)),!f)return}"identity"!==(null===(t=f.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=f.decryptdata)&&void 0!==e&&e.key?this.loadFragment(f,d,g):(this.log("Loading key for "+f.sn+" of ["+d.startSN+"-"+d.endSN+"], level "+u),this.loadKey(f));}}}},c.loadKey=function(t){this.state=Pt,this.hls.trigger(n.a.KEY_LOADING,{frag:t});},c.loadFragment=function(e,r,i){var a,n=this.fragmentTracker.getState(e);if(this.fragCurrent=e,n===tt.BACKTRACKED){var s=this.fragmentTracker.getBacktrackData(e);if(s)return this._handleFragmentLoadProgress(s),void this._handleFragmentLoadComplete(s);n=tt.NOT_LOADED;}n===tt.NOT_LOADED||n===tt.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i)):n===tt.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(a=this.media)||void 0===a?void 0:a.buffered.length)&&this.fragmentTracker.removeAllFragments();},c.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,A.MAIN);return e&&"fragment"in e?e.fragment:e},c.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,A.MAIN)},c.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},c.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY);},c.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var r,i=this.getAppendedFrag(e.currentTime);if(i&&i.start>1&&this.flushMainBuffer(0,i.start-1),!e.paused&&t){var a=t[this.hls.nextLoadLevel],n=this.fragLastKbps;r=n&&this.fragCurrent?this.fragCurrent.duration*a.maxBitrate/(1e3*n)+1:0;}else r=0;var s=this.getBufferedFrag(e.currentTime+r);if(s){var o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();var l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,h=Math.max(s.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(h,Number.POSITIVE_INFINITY);}}}},c.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.nextLoadPosition=this.getLoadPosition();},c.flushMainBuffer=function(e,r){t.prototype.flushMainBuffer.call(this,e,r,this.altAudio?"video":null);},c.onMediaAttached=function(e,r){t.prototype.onMediaAttached.call(this,e,r);var i=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new Zt(this.config,i,this.fragmentTracker,this.hls);},c.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this);},c.onMediaPlaying=function(){this.tick();},c.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;Object(a.a)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick();},c.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(n.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null;},c.onManifestParsed=function(t,e){var r,i,a,n=!1,s=!1;e.levels.forEach((function(t){(r=t.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(n=!0),-1!==r.indexOf("mp4a.40.5")&&(s=!0));})),this.audioCodecSwitch=n&&s&&!("function"==typeof(null==(a=qt())||null===(i=a.prototype)||void 0===i?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;},c.onLevelLoading=function(t,e){var r=this.levels;if(r&&this.state===xt){var i=r[e.level];(!i.details||i.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(i.details))&&(this.state=Vt);}},c.onLevelLoaded=function(t,e){var r,i=this.levels,a=e.level,s=e.details,o=s.totalduration;if(i){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+o);var l=this.fragCurrent;!l||this.state!==Mt&&this.state!==Ft||l.level!==e.level&&l.loader&&(this.state=xt,l.loader.abort());var u=i[a],h=0;if(s.live||null!==(r=u.details)&&void 0!==r&&r.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;h=this.alignPlaylists(s,u.details);}if(u.details=s,this.levelLastLoaded=a,this.hls.trigger(n.a.LEVEL_UPDATED,{details:s,level:a}),this.state===Vt){if(this.waitForCdnTuneIn(s))return;this.state=xt;}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,h),this.tick();}else this.warn("Levels were reset while loading level "+a);},c._handleFragmentLoadProgress=function(t){var e,r=t.frag,i=t.part,a=t.payload,n=this.levels;if(n){var s=n[r.level],o=s.details;if(o){var l=s.videoCodec,u=o.PTSKnown||!o.live,h=null===(e=o.initSegment)||void 0===e?void 0:e.data,d=this._getAudioCodec(s),c=this.transmuxer=this.transmuxer||new Jt(this.hls,A.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,g=-1!==f,v=new ut(r.level,r.sn,r.stats.chunkCount,a.byteLength,f,g),p=this.initPTS[r.cc];c.push(a,h,d,l,r,i,o.totalduration,u,v,p);}else this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset");}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered");},c.onAudioTrackSwitching=function(t,e){var r=this.altAudio,i=!!e.url,a=e.id;if(!i){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;null!=s&&s.loader&&(this.log("Switching to main audio track, cancel main fragment load"),s.loader.abort()),this.resetTransmuxer(),this.resetLoadingState();}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;r&&o.trigger(n.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(n.a.AUDIO_TRACK_SWITCHED,{id:a});}},c.onAudioTrackSwitched=function(t,e){var r=e.id,i=!!this.hls.audioTracks[r].url;if(i){var a=this.videoBuffer;a&&this.mediaBuffer!==a&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=a);}this.altAudio=i,this.tick();},c.onBufferCreated=function(t,e){var r,i,a=e.tracks,n=!1;for(var s in a){var o=a[s];if("main"===o.id){if(i=s,r=o,"video"===s){var l=a[s];l&&(this.videoBuffer=l.buffer);}}else n=!0;}n&&r?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media;},c.onFragBuffered=function(t,e){var r=e.frag,i=e.part;if(!r||r.type===A.MAIN){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Bt&&(this.state=xt));var a=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i);}},c.onError=function(t,e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(A.MAIN,e);break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:this.state!==jt&&(e.fatal?(this.warn(""+e.details),this.state=jt):e.levelRetry||this.state!==Vt||(this.state=xt));break;case s.a.BUFFER_FULL_ERROR:if("main"===e.parent&&(this.state===Ut||this.state===Bt))!!this.media&&lt.isBuffered(this.media,this.media.currentTime)&&lt.isBuffered(this.media,this.media.currentTime+.5)?(this.reduceMaxBufferLength(),this.state=xt):(this.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.immediateLevelSwitch());}},c.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){var r=lt.getBuffered(t);!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this.seekToStartPos()):e.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime;}},c.onFragLoadEmergencyAborted=function(){this.state=xt,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick();},c.onBufferFlushed=function(t,e){var r=e.type;if(r!==u.a.AUDIO||this.audioOnly&&!this.altAudio){var i=(r===u.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,r);}},c.onLevelsUpdated=function(t,e){this.levels=e.levels;},c.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap;},c.seekToStartPos=function(){var t=this.media,e=t.currentTime,r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void o.b.log("could not seek to "+r+", already seeking at "+e);var i=lt.getBuffered(t),a=(i.length?i.start(0):0)-r;a>0&&a<this.config.maxBufferHole&&(o.b.log("adjusting start position by "+a+" to match buffer start"),r+=a,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+e),t.currentTime=r;}},c._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},c._loadBitrateTestFrag=function(t){var e=this;this._doFragLoad(t).then((function(r){var i=e.hls;if(r&&!i.nextLoadLevel&&!e.fragContextChanged(t)){e.fragLoadError=0,e.state=xt,e.startFragRequested=!1,e.bitrateTest=!1;var a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(n.a.FRAG_LOADED,r);}}));},c._handleTransmuxComplete=function(t){var e,r="main",i=this.hls,s=t.remuxResult,o=t.chunkMeta,l=this.getCurrentContext(o);if(!l)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(o.level);var h=l.frag,d=l.part,c=l.level,f=s.video,g=s.text,v=s.id3,p=s.initSegment,m=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(h)){if(this.state=Ut,p){p.tracks&&(this._bufferInitSegment(c,p.tracks,h,o),i.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{frag:h,id:r,tracks:p.tracks}));var y=p.initPTS,T=p.timescale;Object(a.a)(y)&&(this.initPTS[h.cc]=y,i.trigger(n.a.INIT_PTS_FOUND,{frag:h,id:r,initPTS:y,timescale:T}));}if(f&&!1!==s.independent){if(c.details){var E=f.startPTS,b=f.endPTS,S=f.startDTS,L=f.endDTS;if(d)d.elementaryStreams[f.type]={startPTS:E,endPTS:b,startDTS:S,endDTS:L};else if(f.dropped&&f.independent){if(this.getLoadPosition()+this.config.maxBufferHole<E)return void this.backtrack(h);h.setElementaryStreamInfo(f.type,h.start,b,h.start,L,!0);}h.setElementaryStreamInfo(f.type,E,b,S,L),this.bufferFragmentData(f,h,d,o);}}else if(!1===s.independent)return void this.backtrack(h);if(m){var A=m.startPTS,R=m.endPTS,D=m.startDTS,k=m.endDTS;d&&(d.elementaryStreams[u.a.AUDIO]={startPTS:A,endPTS:R,startDTS:D,endDTS:k}),h.setElementaryStreamInfo(u.a.AUDIO,A,R,D,k),this.bufferFragmentData(m,h,d,o);}if(null!=v&&null!==(e=v.samples)&&void 0!==e&&e.length){var _={frag:h,id:r,samples:v.samples};i.trigger(n.a.FRAG_PARSING_METADATA,_);}if(g){var I={frag:h,id:r,samples:g.samples};i.trigger(n.a.FRAG_PARSING_USERDATA,I);}}},c._bufferInitSegment=function(t,e,r,i){var a=this;if(this.state===Ut){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var s=e.audio,o=e.video,l=e.audiovideo;if(s){var u=t.audioCodec,h=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===h.indexOf("firefox")&&(u="mp4a.40.5")),-1!==h.indexOf("android")&&"audio/mpeg"!==s.container&&(u="mp4a.40.2",this.log("Android: force audio codec to "+u)),t.audioCodec&&t.audioCodec!==u&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+u+'"'),s.levelCodec=u,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(u||"")+"/"+(t.audioCodec||"")+"/"+s.codec+"]");}o&&(o.levelCodec=t.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+o.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(n.a.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var s=e[t].initSegment;null!=s&&s.byteLength&&a.hls.trigger(n.a.BUFFER_APPENDING,{type:t,data:s,frag:r,part:null,chunkMeta:i,parent:r.type});})),this.tick();}},c.backtrack=function(t){this.resetTransmuxer(),this.flushBufferGap(t);var e=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,e?this.resetFragmentLoading(t):this.state=Gt;},c.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var r=t.currentTime;if(lt.isBuffered(t,r)?e=this.getAppendedFrag(r):lt.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){var i=this.fragPlaying,a=e.level;i&&e.sn===i.sn&&i.level===a&&e.urlId===i.urlId||(this.hls.trigger(n.a.FRAG_CHANGED,{frag:e}),i&&i.level===a||this.hls.trigger(n.a.LEVEL_SWITCHED,{level:a}),this.fragPlaying=e);}}},l=i,(h=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);if(e)return e.level}return -1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&te(l.prototype,h),i}(Wt),ie=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r;}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t;},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}(),ae=function(){function t(t,e,r){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ie(t),this.fast_=new ie(e);}var e=t.prototype;return e.update=function(t,e){var r=this.slow_,i=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new ie(t,r.getEstimate(),r.getTotalWeight())),this.fast_.halfLife!==e&&(this.fast_=new ie(e,i.getEstimate(),i.getTotalWeight()));},e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,i=8*e/r;this.fast_.sample(r,i),this.slow_.sample(r,i);},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function ne(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}var se=function(){function t(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new ae(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners();}var e,r,l=t.prototype;return l.registerListeners=function(){var t=this.hls;t.on(n.a.FRAG_LOADING,this.onFragLoading,this),t.on(n.a.FRAG_LOADED,this.onFragLoaded,this),t.on(n.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(n.a.ERROR,this.onError,this);},l.unregisterListeners=function(){var t=this.hls;t.off(n.a.FRAG_LOADING,this.onFragLoading,this),t.off(n.a.FRAG_LOADED,this.onFragLoaded,this),t.off(n.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(n.a.ERROR,this.onError,this);},l.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null;},l.onFragLoading=function(t,e){var r,i=e.frag;i.type===A.MAIN&&(this.timer||(this.fragCurrent=i,this.partCurrent=null!=(r=e.part)?r:null,this.timer=self.setInterval(this.onCheck,100)));},l.onLevelLoaded=function(t,e){var r=this.hls.config;e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD);},l._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,i=r.autoLevelEnabled,s=r.config,l=r.media;if(t&&l){var u=e?e.stats:t.stats,h=e?e.duration:t.duration;if(u.aborted)return o.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!l.paused&&l.playbackRate&&l.readyState){var d=performance.now()-u.loading.start,c=Math.abs(l.playbackRate);if(!(d<=500*h/c)){var f=r.levels,g=r.minAutoLevel,v=f[t.level],p=u.total||Math.max(u.loaded,Math.round(h*v.maxBitrate/8)),m=Math.max(1,u.bwEstimate?u.bwEstimate/8:1e3*u.loaded/d),y=(p-u.loaded)/m,T=l.currentTime,E=(lt.bufferInfo(l,T,s.maxBufferHole).end-T)/c;if(!(E>=2*h/c||y<=E)){var b,S=Number.POSITIVE_INFINITY;for(b=t.level-1;b>g;b--){if((S=h*f[b].maxBitrate/(6.4*m))<E)break}if(!(S>=y)){var L=this.bwEstimator.getEstimate();o.b.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+b+"\n      Current BW estimate: "+(Object(a.a)(L)?(L/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+y.toFixed(3)+" s\n      Estimated load time for the next fragment: "+S.toFixed(3)+" s\n      Time to underbuffer: "+E.toFixed(3)+" s"),r.nextLoadLevel=b,this.bwEstimator.sample(d,u.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),r.trigger(n.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:u});}}}}}},l.onFragLoaded=function(t,e){var r=e.frag,i=e.part;if(r.type===A.MAIN&&Object(a.a)(r.sn)){var s=i?i.stats:r.stats,o=i?i.duration:r.duration;if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[r.level],u=(l.loaded?l.loaded.bytes:0)+s.loaded,h=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:u,duration:h},l.realBitrate=Math.round(8*u/h);}if(r.bitrateTest){var d={stats:s,frag:r,part:i,id:r.type};this.onFragBuffered(n.a.FRAG_BUFFERED,d),r.bitrateTest=!1;}}},l.onFragBuffered=function(t,e){var r=e.frag,i=e.part,a=i?i.stats:r.stats;if(!a.aborted&&r.type===A.MAIN&&"initSegment"!==r.sn){var n=a.parsing.end-a.loading.start;this.bwEstimator.sample(n,a.loaded),a.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0;}},l.onError=function(t,e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:this.clearTimer();}},l.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0;},l.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,i=r.maxAutoLevel,a=r.config,n=r.minAutoLevel,s=r.media,l=e?e.duration:t?t.duration:0,u=s?s.currentTime:0,h=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,c=(lt.bufferInfo(s,u,a.maxBufferHole).end-u)/h,f=this.findBestLevel(d,n,i,c,a.abrBandWidthFactor,a.abrBandWidthUpFactor);if(f>=0)return f;o.b.trace((c?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var g=l?Math.min(l,a.maxStarvationDelay):a.maxStarvationDelay,v=a.abrBandWidthFactor,p=a.abrBandWidthUpFactor;if(!c){var m=this.bitrateTestDelay;if(m)g=(l?Math.min(l,a.maxLoadingDelay):a.maxLoadingDelay)-m,o.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),v=p=1;}return f=this.findBestLevel(d,n,i,c+g,v,p),Math.max(f,0)},l.findBestLevel=function(t,e,r,i,a,n){for(var s,l=this.fragCurrent,u=this.partCurrent,h=this.lastLoadedFragLevel,d=this.hls.levels,c=d[h],f=!(null==c||null===(s=c.details)||void 0===s||!s.live),g=null==c?void 0:c.codecSet,v=u?u.duration:l?l.duration:0,p=r;p>=e;p--){var m=d[p];if(m&&(!g||m.codecSet===g)){var y=m.details,T=(u?null==y?void 0:y.partTarget:null==y?void 0:y.averagetargetduration)||v,E=void 0;E=p<=h?a*t:n*t;var b=d[p].maxBitrate,S=b*T/E;if(o.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+p+"/"+Math.round(E)+"/"+b+"/"+T+"/"+i+"/"+S),E>b&&(!S||f&&!this.bitrateTestDelay||S<i))return p}}return -1},e=t,(r=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this.getNextABRAutoLevel();return -1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t;}}])&&ne(e.prototype,r),t}(),oe=r(12);function le(){return (le=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);}return t}).apply(this,arguments)}function ue(t,e){return (ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var he=function(t){var e,r;function i(e,r){var i;return (i=t.call(this,e,r,"[audio-stream-controller]")||this).videoBuffer=null,i.videoTrackCC=-1,i.waitingVideoCC=-1,i.audioSwitch=!1,i.trackId=-1,i.waitingData=null,i.mainDetails=null,i._registerListeners(),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,ue(e,r);var l=i.prototype;return l.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null;},l._registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(n.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(n.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(n.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(n.a.ERROR,this.onError,this),t.on(n.a.BUFFER_RESET,this.onBufferReset,this),t.on(n.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(n.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(n.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(n.a.FRAG_BUFFERED,this.onFragBuffered,this);},l._unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(n.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(n.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(n.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(n.a.ERROR,this.onError,this),t.off(n.a.BUFFER_RESET,this.onBufferReset,this),t.off(n.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(n.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(n.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(n.a.FRAG_BUFFERED,this.onFragBuffered,this);},l.onInitPtsFound=function(t,e){var r=e.frag,i=e.id,a=e.initPTS;if("main"===i){var n=r.cc;this.initPTS[r.cc]=a,this.log("InitPTS for cc: "+n+" found from main: "+a),this.videoTrackCC=n,this.state===Ht&&this.tick();}},l.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=Ot);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=xt):(this.loadedmetadata=!1,this.state=Nt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick();},l.doTick=function(){switch(this.state){case xt:this.doTickIdle();break;case Nt:var e,r=this.levels,i=this.trackId,a=null==r||null===(e=r[i])||void 0===e?void 0:e.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=Ht;}break;case Ft:var n,s=performance.now(),l=this.retryDate;(!l||s>=l||null!==(n=this.media)&&void 0!==n&&n.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=xt);break;case Ht:var u=this.waitingData;if(u){var h=u.frag,d=u.part,c=u.cache,f=u.complete;if(void 0!==this.initPTS[h.cc]){this.waitingData=null,this.state=Mt;var g={frag:h,part:d,payload:c.flush(),networkDetails:null};this._handleFragmentLoadProgress(g),f&&t.prototype._handleFragmentLoadComplete.call(this,g);}else if(this.videoTrackCC!==this.waitingVideoCC)o.b.log("Waiting fragment cc ("+h.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else {var v=lt.bufferInfo(this.mediaBuffer,this.media.currentTime,this.config.maxBufferHole);mt(v.end,this.config.maxFragLookUpTolerance,h)<0&&(o.b.log("Waiting fragment cc ("+h.cc+") @ "+h.start+" cancelled because another fragment at "+v.end+" is needed"),this.clearWaitingFragment());}}else this.state=xt;}this.onTickEnd();},l.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=xt);},l.onTickEnd=function(){var t=this.media;if(t&&t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime;}},l.doTickIdle=function(){var t,e,r=this.hls,i=this.levels,s=this.media,o=this.trackId,l=r.config;if(i&&i[o]&&(s||!this.startFragRequested&&l.startFragPrefetch)){var u=this.getLoadPosition();if(Object(a.a)(u)){var h=i[o].details;if(!h||h.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(h))this.state=Nt;else {var d=h.initSegment,c=0;if(!d||d.data){var f=this.mediaBuffer?this.mediaBuffer:this.media,g=this.videoBuffer?this.videoBuffer:this.media,v=u<l.maxBufferHole?Math.max(2,l.maxBufferHole):l.maxBufferHole,p=lt.bufferInfo(f,u,v),m=lt.bufferInfo(g,u,v),y=p.len,T=Math.min(l.maxBufferLength,l.maxMaxBufferLength),E=Math.max(T,m.len),b=this.audioSwitch;if(y>=E&&!b)return;if(!b&&this._streamEnded(p,h))return r.trigger(n.a.BUFFER_EOS,{type:"audio"}),void(this.state=Kt);var S=h.fragments[0].start;if(c=p.end,b&&(c=u,h.PTSKnown&&u<S&&(p.end>S||p.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=S+.05)),!(d=this.getNextFragment(c,h)))return}"identity"!==(null===(t=d.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=d.decryptdata)&&void 0!==e&&e.key?this.loadFragment(d,h,c):(this.log("Loading key for "+d.sn+" of ["+h.startSN+" ,"+h.endSN+"],track "+o),this.state=Pt,r.trigger(n.a.KEY_LOADING,{frag:d}));}}}},l.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this);},l.onAudioTracksUpdated=function(t,e){var r=e.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(t){return new H(t)}));},l.onAudioTrackSwitching=function(t,e){var r=!!e.url;this.trackId=e.id;var i=this.fragCurrent;null!=i&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.audioSwitch=!0,this.state=xt):this.state=Ot,this.tick();},l.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0;},l.onLevelLoaded=function(t,e){if(null===this.mainDetails){var r=this.mainDetails=e.details,i=this.levelLastLoaded;if(null!==i&&this.levels&&-1===this.startPosition&&r.live){var a=this.levels[i];if(!a.details||!a.details.fragments[0])return;ft(a.details,r),this.setStartPosition(a.details,a.details.fragments[0].start);}}},l.onAudioTrackLoaded=function(t,e){var r,i=this.levels,a=e.details,n=e.id;if(i){this.log("Track "+n+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var s=i[n],o=0;if(a.live||null!==(r=s.details)&&void 0!==r&&r.live){var l;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed)return;!s.details&&null!==(l=this.mainDetails)&&void 0!==l&&l.hasProgramDateTime&&a.hasProgramDateTime?(ft(a,this.mainDetails),o=a.fragments[0].start):o=this.alignPlaylists(a,s.details);}s.details=a,this.levelLastLoaded=n,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(s.details,o),this.state!==Nt||this.waitForCdnTuneIn(a)||(this.state=xt),this.tick();}else this.warn("Audio tracks were reset while loading level "+n);},l._handleFragmentLoadProgress=function(t){var e,r=t.frag,i=t.part,a=t.payload,n=this.config,s=this.trackId,l=this.levels;if(l){var u=l[s],h=u.details,d=n.defaultAudioCodec||u.audioCodec||"mp4a.40.2",c=this.transmuxer;c||(c=this.transmuxer=new Jt(this.hls,A.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var f=this.initPTS[r.cc],g=null===(e=h.initSegment)||void 0===e?void 0:e.data;if(void 0!==f){var v=i?i.index:-1,p=-1!==v,m=new ut(r.level,r.sn,r.stats.chunkCount,a.byteLength,v,p);c.push(a,g,d,"",r,i,h.totalduration,!1,m,f);}else {o.b.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+h.startSN+" ,"+h.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:r,part:i,cache:new oe.a,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=Ht;}}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered");},l._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e);},l.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1;},l.onBufferCreated=function(t,e){var r=e.tracks.audio;r&&(this.mediaBuffer=r.buffer),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer);},l.onFragBuffered=function(t,e){var r=e.frag,i=e.part;r.type===A.AUDIO&&(this.fragContextChanged(r)?this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==r.sn&&(this.fragPrevious=r,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(n.a.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(r,i)));},l.onError=function(e,r){switch(r.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(A.AUDIO,r);break;case s.a.AUDIO_TRACK_LOAD_ERROR:case s.a.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==jt&&this.state!==Ot&&(this.state=r.fatal?jt:xt,this.warn(r.details+" while loading frag, switching to "+this.state+" state"));break;case s.a.BUFFER_FULL_ERROR:if("audio"===r.parent&&(this.state===Ut||this.state===Bt)){var i=this.mediaBuffer,a=this.media.currentTime;i&&lt.isBuffered(i,a)&&lt.isBuffered(i,a+.5)?(this.reduceMaxBufferLength(),this.state=xt):(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));}}},l.onBufferFlushed=function(t,e){var r=e.type;if(r===u.a.AUDIO){var i=this.mediaBuffer?this.mediaBuffer:this.media;this.afterBufferFlushed(i,r);}},l._handleTransmuxComplete=function(t){var e,r="audio",i=this.hls,a=t.remuxResult,s=t.chunkMeta,o=this.getCurrentContext(s);if(!o)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var l=o.frag,h=o.part,d=a.audio,c=a.text,f=a.id3,g=a.initSegment;if(!this.fragContextChanged(l)){if(this.state=Ut,this.audioSwitch&&d&&this.completeAudioSwitch(),null!=g&&g.tracks&&(this._bufferInitSegment(g.tracks,l,s),i.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:r,tracks:g.tracks})),d){var v=d.startPTS,p=d.endPTS,m=d.startDTS,y=d.endDTS;h&&(h.elementaryStreams[u.a.AUDIO]={startPTS:v,endPTS:p,startDTS:m,endDTS:y}),l.setElementaryStreamInfo(u.a.AUDIO,v,p,m,y),this.bufferFragmentData(d,l,h,s);}if(null!=f&&null!==(e=f.samples)&&void 0!==e&&e.length){var T=le({frag:l,id:r},f);i.trigger(n.a.FRAG_PARSING_METADATA,T);}if(c){var E=le({frag:l,id:r},c);i.trigger(n.a.FRAG_PARSING_USERDATA,E);}}},l._bufferInitSegment=function(t,e,r){if(this.state===Ut){t.video&&delete t.video;var i=t.audio;if(i){i.levelCodec=i.codec,i.id="audio",this.log("Init audio buffer, container:"+i.container+", codecs[parsed]=["+i.codec+"]"),this.hls.trigger(n.a.BUFFER_CODECS,t);var a=i.initSegment;if(null!=a&&a.byteLength){var s={type:"audio",frag:e,part:null,chunkMeta:r,parent:e.type,data:a};this.hls.trigger(n.a.BUFFER_APPENDING,s);}this.tick();}}},l.loadFragment=function(e,r,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,(this.audioSwitch||n===tt.NOT_LOADED||n===tt.PARTIAL)&&("initSegment"===e.sn?this._loadInitSegment(e):r.live&&!Object(a.a)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=Ht):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i)));},l.completeAudioSwitch=function(){var e=this.hls,r=this.media,i=this.trackId;r&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(n.a.AUDIO_TRACK_SWITCHED,{id:i});},i}(Wt);function de(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}function ce(t,e){return (ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fe=function(t){var e,r;function i(e){var r;return (r=t.call(this,e,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.trackName="",r.selectDefaultTrack=!0,r.registerListeners(),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,ce(e,r);var a,o,u=i.prototype;return u.registerListeners=function(){var t=this.hls;t.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(n.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(n.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(n.a.ERROR,this.onError,this);},u.unregisterListeners=function(){var t=this.hls;t.off(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(n.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(n.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(n.a.ERROR,this.onError,this);},u.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,t.prototype.destroy.call(this);},u.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0;},u.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[];},u.onAudioTrackLoaded=function(t,e){var r=e.id,i=e.details,a=this.tracksInGroup[r];if(a){var n=a.details;a.details=e.details,this.log("audioTrack "+r+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,e,n));}else this.warn("Invalid audio track id "+r);},u.onLevelLoading=function(t,e){this.switchLevel(e.level);},u.onLevelSwitching=function(t,e){this.switchLevel(e.level);},u.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var r=e.audioGroupIds[e.urlId];if(this.groupId!==r){this.groupId=r;var i=this.tracks.filter((function(t){return !r||t.groupId===r}));this.selectDefaultTrack&&!i.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var a={audioTracks:i};this.log("Updating audio tracks, "+i.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(n.a.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack();}}},u.onError=function(e,r){t.prototype.onError.call(this,e,r),!r.fatal&&r.context&&r.context.type===L.AUDIO_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r);},u.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else {this.clearTimer();var r=e[this.trackId];this.log("Now switching to audio-track index "+t);var i=e[t],a=i.id,s=i.groupId,o=void 0===s?"":s,l=i.name,u=i.type,h=i.url;if(this.trackId=t,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(n.a.AUDIO_TRACK_SWITCHING,{id:a,groupId:o,name:l,type:u,url:h}),!i.details||i.details.live){var d=this.switchParams(i.url,null==r?void 0:r.details);this.loadPlaylist(d);}}},u.selectInitialTrack=function(){this.tracksInGroup;var t=this.trackName,e=this.findTrackId(t)||this.findTrackId();-1!==e?this.setAudioTrack(e):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}));},u.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var i=e[r];if((!this.selectDefaultTrack||i.default)&&(!t||t===i.name))return i.id}return -1},u.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var r=e.id,i=e.groupId,a=e.url;if(t)try{a=t.addDirectives(a);}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t);}this.log("loading audio-track playlist for id: "+r),this.clearTimer(),this.hls.trigger(n.a.AUDIO_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:t||null});}},a=i,(o=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t);}}])&&de(a.prototype,o),i}(Q);function ge(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}function ve(t,e){return (ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){var e,r;function i(e,r){var i;return (i=t.call(this,e,r,"[subtitle-stream-controller]")||this).levels=[],i.currentTrackId=-1,i.tracksBuffered=void 0,i.config=e.config,i.fragCurrent=null,i.fragPrevious=null,i.media=null,i.mediaBuffer=null,i.state=Ot,i.tracksBuffered=[],i._registerListeners(),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,ve(e,r);var a,s,u=i.prototype;return u._registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.ERROR,this.onError,this),t.on(n.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(n.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(n.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(n.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this);},u._unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.ERROR,this.onError,this),t.off(n.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(n.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(n.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(n.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this);},u.startLoad=function(){this.stopLoad(),this.state=xt;var t=this.levels[this.currentTrackId];null!=t&&t.details&&(this.setInterval(500),this.tick());},u.onHandlerDestroyed=function(){this.state=Ot,this._unregisterListeners(),t.prototype.onHandlerDestroyed.call(this);},u.onSubtitleFragProcessed=function(t,e){var r=e.frag,i=e.success;if(this.fragPrevious=r,this.state=xt,i){var a=this.tracksBuffered[this.currentTrackId];if(a){for(var n,s=r.start,o=0;o<a.length;o++)if(s>=a[o].start&&s<=a[o].end){n=a[o];break}var l=r.start+r.duration;n?n.end=l:(n={start:s,end:l},a.push(n));}}},u.onMediaAttached=function(t,e){var r=e.media;this.media=r,this.state=xt;},u.onMediaDetaching=function(){var t=this;this.media&&(this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.currentTrackId=-1,this.levels.forEach((function(e){t.tracksBuffered[e.id]=[];})),this.media=null,this.mediaBuffer=null,this.state=Ot);},u.onError=function(t,e){var r,i=e.frag;i&&i.type===A.SUBTITLE&&(null!==(r=this.fragCurrent)&&void 0!==r&&r.loader&&this.fragCurrent.loader.abort(),this.state=xt);},u.onSubtitleTracksUpdated=function(t,e){var r=this,i=e.subtitleTracks;this.tracksBuffered=[],this.levels=i.map((function(t){return new H(t)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(t){r.tracksBuffered[t.id]=[];})),this.mediaBuffer=null;},u.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!=r&&r.details?(this.mediaBuffer=this.mediaBufferTimeRanges,this.setInterval(500)):this.mediaBuffer=null;}else this.clearInterval();},u.onSubtitleTrackLoaded=function(t,e){var r,i=e.id,a=e.details,n=this.currentTrackId,s=this.levels;if(s.length&&a){var o=s[n];if(!(i>=s.length||i!==n)&&o){if(this.mediaBuffer=this.mediaBufferTimeRanges,a.live||null!==(r=o.details)&&void 0!==r&&r.live){if(a.deltaUpdateFailed)return;this.alignPlaylists(a,o.details);}o.details=a,this.levelLastLoaded=i,this.setInterval(500);}}},u._handleFragmentLoadComplete=function(t){var e=t.frag,r=t.payload,i=e.decryptdata,a=this.hls;if(!this.fragContextChanged(e)&&r&&r.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var s=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).then((function(t){var r=performance.now();a.trigger(n.a.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:s,tdecrypt:r}});}));}},u.doTick=function(){if(this.media){if(this.state===xt){var t,e=this.config,r=this.currentTrackId,i=this.fragmentTracker,a=this.media,s=this.levels;if(!s.length||!s[r]||!s[r].details)return;var l=e.maxBufferHole,u=e.maxFragLookUpTolerance,h=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=lt.bufferedInfo(this.mediaBufferTimeRanges,a.currentTime,l),c=d.end;if(d.len>h)return;var f,g=s[r].details,v=g.fragments,p=v.length,m=v[p-1].start+v[p-1].duration,y=this.fragPrevious;c<m?(y&&g.hasProgramDateTime&&(f=vt(v,y.endProgramDateTime,u)),f||(f=pt(y,v,c,u))):f=v[p-1],null!==(t=f)&&void 0!==t&&t.encrypted?(o.b.log("Loading key for "+f.sn),this.state=Pt,this.hls.trigger(n.a.KEY_LOADING,{frag:f})):f&&i.getState(f)===tt.NOT_LOADED&&this.loadFragment(f,g,c);}}else this.state=xt;},u.loadFragment=function(e,r,i){this.fragCurrent=e,t.prototype.loadFragment.call(this,e,r,i);},u.stopLoad=function(){this.fragPrevious=null,t.prototype.stopLoad.call(this);},a=i,(s=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&ge(a.prototype,s),i}(Wt);function me(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}function ye(t,e){return (ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Te(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];"subtitles"===i.kind&&i.label&&e.push(t[r]);}return e}var Ee,be=function(t){var e,r;function i(e){var r;return (r=t.call(this,e,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r.subtitleDisplay=!0,r.registerListeners(),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,ye(e,r);var a,s,l=i.prototype;return l.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=null,t.prototype.destroy.call(this);},l.registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(n.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(n.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(n.a.ERROR,this.onError,this);},l.unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(n.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(n.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(n.a.ERROR,this.onError,this);},l.onMediaAttached=function(t,e){var r=this;this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?(self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval((function(){r.trackChangeListener();}),500)):this.media.textTracks.addEventListener("change",this.trackChangeListener));},l.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?self.clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Te(this.media.textTracks).forEach((function(t){P(t);})),this.subtitleTrack=-1,this.media=null);},l.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0;},l.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks;},l.onSubtitleTrackLoaded=function(t,e){var r=e.id,i=e.details,a=this.trackId,n=this.tracksInGroup[a];if(n){var s=n.details;n.details=e.details,this.log("subtitle track "+r+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,e,s));}else this.warn("Invalid subtitle track id "+r);},l.onLevelLoading=function(t,e){this.switchLevel(e.level);},l.onLevelSwitching=function(t,e){this.switchLevel(e.level);},l.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var r=e.textGroupIds[e.urlId];if(this.groupId!==r){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.findTrackId(null==i?void 0:i.name)||this.findTrackId(),s=this.tracks.filter((function(t){return !r||t.groupId===r}));this.groupId=r,this.tracksInGroup=s;var o={subtitleTracks:s};this.log("Updating subtitle tracks, "+s.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(n.a.SUBTITLE_TRACKS_UPDATED,o),-1!==a&&this.setSubtitleTrack(a,i);}}},l.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var i=e[r];if((!this.selectDefaultTrack||i.default)&&(!t||t===i.name))return i.id}return -1},l.onError=function(e,r){t.prototype.onError.call(this,e,r),!r.fatal&&r.context&&r.context.type===L.SUBTITLE_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r);},l.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var r=e.id,i=e.groupId,a=e.url;if(t)try{a=t.addDirectives(a);}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t);}this.log("Loading subtitle playlist for id "+r),this.hls.trigger(n.a.SUBTITLE_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:t||null});}},l.toggleTrackModes=function(t){var e=this,r=this.media,i=this.subtitleDisplay,a=this.trackId;if(r){var n=Te(r.textTracks),s=n.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(n).forEach((function(t){t.mode="disabled";}));else {var o=s[a];o&&(o.mode="disabled");}var l=s[t];l&&(l.mode=i?"showing":"hidden");}},l.setSubtitleTrack=function(t,e){var r,i=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!==(r=i[t])&&void 0!==r&&r.details)||t<-1||t>=i.length)){this.clearTimer();var a=i[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,a){var s=a.id,o=a.groupId,l=void 0===o?"":o,u=a.name,h=a.type,d=a.url;this.hls.trigger(n.a.SUBTITLE_TRACK_SWITCH,{id:s,groupId:l,name:u,type:h,url:d});var c=this.switchParams(a.url,null==e?void 0:e.details);this.loadPlaylist(c);}else this.hls.trigger(n.a.SUBTITLE_TRACK_SWITCH,{id:t});}}else this.queuedDefaultTrack=t;},l.onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=Te(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack=t;}},a=i,(s=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e);}}])&&me(a.prototype,s),i}(Q),Se=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t;}var e=t.prototype;return e.append=function(t,e){var r=this.queues[e];r.push(t),1===r.length&&this.buffers[e]&&this.executeNext(e);},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e);},e.appendBlocker=function(t){var e,r=new Promise((function(t){e=t;})),i={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,t),r},e.executeNext=function(t){var e=this.buffers,r=this.queues,i=e[t],a=r[t];if(a.length){var n=a[0];try{n.execute();}catch(t){o.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),n.onError(t),i&&i.updating||a.shift();}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t);},e.current=function(t){return this.queues[t][0]},t}(),Le=Yt(),Ae=/([ha]vc.)(?:\.[^.,]+)+/,Re=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.hls,r=e.media,i=e.mediaSource;o.b.log("[buffer-controller]: Media source opened"),r&&(e.updateMediaElementDuration(),t.trigger(n.a.MEDIA_ATTACHED,{media:r})),i&&i.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks();},this._onMediaSourceClose=function(){o.b.log("[buffer-controller]: Media source closed");},this._onMediaSourceEnded=function(){o.b.log("[buffer-controller]: Media source ended");},this.hls=t,this._initSourceBuffer(),this.registerListeners();}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null;},e.registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(n.a.BUFFER_RESET,this.onBufferReset,this),t.on(n.a.BUFFER_APPENDING,this.onBufferAppending,this),t.on(n.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(n.a.BUFFER_EOS,this.onBufferEos,this),t.on(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(n.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(n.a.FRAG_PARSED,this.onFragParsed,this),t.on(n.a.FRAG_CHANGED,this.onFragChanged,this);},e.unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(n.a.BUFFER_RESET,this.onBufferReset,this),t.off(n.a.BUFFER_APPENDING,this.onBufferAppending,this),t.off(n.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(n.a.BUFFER_EOS,this.onBufferEos,this),t.off(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(n.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(n.a.FRAG_PARSED,this.onFragParsed,this),t.off(n.a.FRAG_CHANGED,this.onFragChanged,this);},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Se(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]};},e.onManifestParsed=function(t,e){var r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.details=null,o.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected");},e.onMediaAttaching=function(t,e){var r=this.media=e.media;if(r&&Le){var i=this.mediaSource=new Le;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(i),this._objectUrl=r.src;}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(o.b.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream();}catch(t){o.b.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream");}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):o.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={};}this.hls.trigger(n.a.MEDIA_DETACHED,void 0);},e.onBufferReset=function(){var t=this,e=this.sourceBuffer;this.getSourceBufferTypes().forEach((function(r){var i=e[r];try{i&&(t.removeBufferListeners(r),t.mediaSource&&t.mediaSource.removeSourceBuffer(i),e[r]=void 0);}catch(t){o.b.warn("[buffer-controller]: Failed to reset the "+r+" buffer",t);}})),this._initSourceBuffer();},e.onBufferCodecs=function(t,e){var r=this,i=Object.keys(this.sourceBuffer).length;Object.keys(e).forEach((function(t){if(i){var a=r.tracks[t];if(a&&"function"==typeof a.buffer.changeType){var n=e[t],s=n.codec,o=n.levelCodec,l=n.container;if((a.levelCodec||a.codec).replace(Ae,"$1")!==(o||s).replace(Ae,"$1")){var u=l+";codecs="+(o||s);r.appendChangeType(t,u);}}}else r.pendingTracks[t]=e[t];})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks());},e.appendChangeType=function(t,e){var r=this,i=this.operationQueue,a={execute:function(){var a=r.sourceBuffer[t];a&&(o.b.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),a.changeType(e)),i.shiftAndExecuteNext(t);},onStart:function(){},onComplete:function(){},onError:function(e){o.b.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e);}};i.append(a,t);},e.onBufferAppending=function(t,e){var r=this,i=this.hls,a=this.operationQueue,l=this.tracks,u=e.data,h=e.type,d=e.frag,c=e.part,f=e.chunkMeta,g=f.buffering[h],v=self.performance.now();g.start=v;var p=d.stats.buffering,m=c?c.stats.buffering:null;0===p.start&&(p.start=v),m&&0===m.start&&(m.start=v);var y=l.audio,T="audio"===h&&1===f.id&&"audio/mpeg"===(null==y?void 0:y.container),E={execute:function(){if(g.executeStart=self.performance.now(),T){var t=r.sourceBuffer[h];if(t){var e=d.start-t.timestampOffset;Math.abs(e)>=.1&&(o.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+e+") sn: "+d.sn+")"),t.timestampOffset=d.start);}}r.appendExecutor(u,h);},onStart:function(){},onComplete:function(){var t=self.performance.now();g.executeEnd=g.end=t,0===p.first&&(p.first=t),m&&0===m.first&&(m.first=t);var e=r.sourceBuffer,i={};for(var a in e)i[a]=lt.getBuffered(e[a]);r.appendError=0,r.hls.trigger(n.a.BUFFER_APPENDED,{type:h,frag:d,part:c,chunkMeta:f,parent:d.type,timeRanges:i});},onError:function(t){o.b.error("[buffer-controller]: Error encountered while trying to append to the "+h+" SourceBuffer",t);var e={type:s.b.MEDIA_ERROR,parent:d.type,details:s.a.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=s.a.BUFFER_FULL_ERROR:(r.appendError++,e.details=s.a.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(o.b.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),i.trigger(n.a.ERROR,e);}};a.append(E,h);},e.onBufferFlushing=function(t,e){var r=this,i=this.operationQueue,a=function(t){return {execute:r.removeExecutor.bind(r,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(n.a.BUFFER_FLUSHED,{type:t});},onError:function(e){o.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e);}}};e.type?i.append(a(e.type),e.type):(i.append(a("audio"),"audio"),i.append(a("video"),"video"));},e.onFragParsed=function(t,e){var r=this,i=e.frag,a=e.part,s=[],l=a?a.elementaryStreams:i.elementaryStreams;l[u.a.AUDIOVIDEO]?s.push("audiovideo"):(l[u.a.AUDIO]&&s.push("audio"),l[u.a.VIDEO]&&s.push("video"));0===s.length&&o.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var t=self.performance.now();i.stats.buffering.end=t,a&&(a.stats.buffering.end=t);var e=a?a.stats:i.stats;r.hls.trigger(n.a.FRAG_BUFFERED,{frag:i,part:a,stats:e,id:i.type});}),s);},e.onFragChanged=function(t,e){this.flushBackBuffer();},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,i){var a=r.sourceBuffer[i];return e.type&&e.type!==i||a&&!a.ended&&(a.ended=!0,o.b.log("[buffer-controller]: "+i+" sourceBuffer now EOS")),t&&!(a&&!a.ended)}),!0)&&this.blockBuffers((function(){var t=r.mediaSource;t&&"open"===t.readyState&&t.endOfStream();}));},e.onLevelUpdated=function(t,e){var r=e.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration());},e.flushBackBuffer=function(){var t=this.hls,e=this.details,r=this.media,i=this.sourceBuffer;if(r&&null!==e){var s=this.getSourceBufferTypes();if(s.length){var o=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(a.a)(o)&&!(o<0)){var l=r.currentTime,u=e.levelTargetDuration,h=Math.max(o,u),d=Math.floor(l/u)*u-h;s.forEach((function(r){var a=i[r];if(a){var s=lt.getBuffered(a);s.length>0&&d>s.start(0)&&(t.trigger(n.a.BACK_BUFFER_REACHED,{bufferEnd:d}),e.live&&t.trigger(n.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d}),t.trigger(n.a.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:r}));}}));}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,i=this.mediaSource,n=t.fragments[0].start+t.totalduration,s=r.duration,l=Object(a.a)(i.duration)?i.duration:0;t.live&&e.config.liveDurationInfinity?(o.b.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(t)):(n>l&&n>s||!Object(a.a)(s))&&(o.b.log("[buffer-controller]: Updating Media Source duration to "+n.toFixed(3)),i.duration=n);}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var i=Math.max(0,r[0].start),a=Math.max(i,i+t.totalduration);e.setLiveSeekableRange(i,a);}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,r=this.pendingTracks,i=Object.keys(r).length;if(i&&!t||2===i){this.createSourceBuffers(r),this.pendingTracks={};var a=Object.keys(this.sourceBuffer);if(0===a.length)return void this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(t){e.executeNext(t);}));}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");var i=0;for(var a in t)if(!e[a]){var l=t[a];if(!l)throw Error("source buffer exists for track "+a+", however track does not");var u=l.levelCodec||l.codec,h=l.container+";codecs="+u;o.b.log("[buffer-controller]: creating sourceBuffer("+h+")");try{var d=e[a]=r.addSourceBuffer(h),c=a;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.tracks[a]={buffer:d,codec:u,container:l.container,levelCodec:l.levelCodec,id:l.id},i++;}catch(t){o.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:h});}}i&&this.hls.trigger(n.a.BUFFER_CREATED,{tracks:this.tracks});},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart();},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t);},e._onSBUpdateError=function(t,e){o.b.error("[buffer-controller]: "+t+" SourceBuffer error",e),this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1});var r=this.operationQueue.current(t);r&&r.onError(e);},e.removeExecutor=function(t,e,r){var i=this.media,n=this.mediaSource,s=this.operationQueue,l=this.sourceBuffer[t];if(!i||!n||!l)return o.b.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(t);var u=Object(a.a)(i.duration)?i.duration:1/0,h=Object(a.a)(n.duration)?n.duration:1/0,d=Math.max(0,e),c=Math.min(r,u,h);c>d?(o.b.log("[buffer-controller]: Removing ["+d+","+c+"] from the "+t+" SourceBuffer"),l.remove(d,c)):s.shiftAndExecuteNext(t);},e.appendExecutor=function(t,e){var r=this.operationQueue,i=this.sourceBuffer[e];if(!i)return o.b.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);i.ended=!1,i.appendBuffer(t);},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return o.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var i=this.operationQueue,a=e.map((function(t){return i.appendBlocker(t)}));Promise.all(a).then((function(){t(),e.forEach((function(t){var e=r.sourceBuffer[t];e&&e.updating||i.shiftAndExecuteNext(t);}));}));},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,r){var i=this.sourceBuffer[t];if(i){var a=r.bind(this,t);this.listeners[t].push({event:e,listener:a}),i.addEventListener(e,a);}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener);}));},t}(),De={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ke=function(t){var e=t;return De.hasOwnProperty(t)&&(e=De[t]),String.fromCharCode(e)},_e={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ie={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ce={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},we={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Oe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA";}(Ee||(Ee={}));var xe=function(){function t(){this.time=null,this.verboseLevel=Ee.ERROR;}return t.prototype.log=function(t,e){this.verboseLevel>=t&&o.b.log(this.time+" ["+t+"] "+e);},t}(),Pe=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},Me=function(){function t(t,e,r,i,a){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=i||"black",this.flash=a||!1;}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1;},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(this[i]=t[i]);}},e.isDefault=function(){return "white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash;},e.toString=function(){return "color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Fe=function(){function t(t,e,r,i,a,n){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Me(e,r,i,a,n);}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset();},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e);},e.setPenState=function(t){this.penState.copy(t);},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState);},e.isEmpty=function(){return " "===this.uchar&&this.penState.isDefault()},t}(),Ne=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new Fe);this.logger=t,this.pos=0,this.currPenState=new Me;}var e=t.prototype;return e.equals=function(t){for(var e=!0,r=0;r<100;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e]);},e.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(Ee.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(Ee.DEBUG,"Too large cursor position "+this.pos),this.pos=100);},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e);},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState);},e.insertChar=function(t){t>=144&&this.backSpace();var e=ke(t);this.pos>=100?this.logger.log(Ee.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1));},e.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset();},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset();},e.clearToEndOfRow=function(){this.clearFromPos(this.pos);},e.getTextString=function(){for(var t=[],e=!0,r=0;r<100;r++){var i=this.chars[r].uchar;" "!==i&&(e=!1),t.push(i);}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState);},t}(),Ue=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new Ne(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset();}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14;},e.equals=function(t){for(var e=!0,r=0;r<15;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e]);},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace();},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow();},e.insertChar=function(t){this.rows[this.currRow].insertChar(t);},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t);},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t);},e.setCursor=function(t){this.logger.log(Ee.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t);},e.setPAC=function(t){this.logger.log(Ee.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<15;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var n=a.rows[i].cueStartTime,s=this.logger.time;if(n&&null!==s&&n<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(a.rows[i+o]);}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,h=Math.max(u-1,0);l.setCursor(t.indent),t.color=l.chars[h].penState.foreground;}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d);},e.setBkgData=function(t){this.logger.log(Ee.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32);},e.setRollUpRows=function(t){this.nrRollUpRows=t;},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(Ee.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(Ee.INFO,"Rolling up");}else this.logger.log(Ee.DEBUG,"roll_up but nrRollUpRows not set yet");},e.getDisplayText=function(t){t=t||!1;for(var e=[],r="",i=-1,a=0;a<15;a++){var n=this.rows[a].getTextString();n&&(i=a+1,t?e.push("Row "+i+": '"+n+"'"):e.push(n.trim()));}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},e.getTextAndFormat=function(){return this.rows},t}(),Be=function(){function t(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Ue(r),this.nonDisplayedMemory=new Ue(r),this.lastOutputScreen=new Ue(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r;}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null;},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t;},e.setPAC=function(t){this.writeScreen.setPAC(t);},e.setBkgData=function(t){this.writeScreen.setBkgData(t);},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(Ee.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t);},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Ee.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(Ee.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate());},e.ccRCL=function(){this.logger.log(Ee.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON");},e.ccBS=function(){this.logger.log(Ee.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate());},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(Ee.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate();},e.ccRU=function(t){this.logger.log(Ee.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t);},e.ccFON=function(){this.logger.log(Ee.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0});},e.ccRDC=function(){this.logger.log(Ee.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON");},e.ccTR=function(){this.logger.log(Ee.INFO,"TR"),this.setMode("MODE_TEXT");},e.ccRTD=function(){this.logger.log(Ee.INFO,"RTD"),this.setMode("MODE_TEXT");},e.ccEDM=function(){this.logger.log(Ee.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0);},e.ccCR=function(){this.logger.log(Ee.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0);},e.ccENM=function(){this.logger.log(Ee.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset();},e.ccEOC=function(){if(this.logger.log(Ee.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Ee.TEXT,"DISP: "+this.displayedMemory.getDisplayText());}this.outputDataUpdate(!0);},e.ccTO=function(t){this.logger.log(Ee.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t);},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else {var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r];}this.logger.log(Ee.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e);},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory));},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t));},t}();function Ge(t,e,r){r.a=t,r.b=e;}function Ke(t,e,r){return r.a===t&&r.b===e}var je=function(){function t(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new xe;this.channels=[null,new Be(t,e,i),new Be(t+1,r,i)],this.cmdHistory={a:null,b:null},this.logger=i;}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e);},e.addData=function(t,e){var r,i,a,n=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(i=127&e[s],a=127&e[s+1],0!==i||0!==a){if(this.logger.log(Ee.DATA,"["+Pe([e[s],e[s+1]])+"] -> ("+Pe([i,a])+")"),(r=this.parseCmd(i,a))||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r&&(n=this.parseChars(i,a))){var o=this.currentChannel;if(o&&o>0)this.channels[o].insertChars(n);else this.logger.log(Ee.WARNING,"No channel found yet. TEXT-MODE?");}r||n||this.logger.log(Ee.WARNING,"Couldn't parse cleaned data "+Pe([i,a])+" orig: "+Pe([e[s],e[s+1]]));}},e.parseCmd=function(t,e){var r=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47)&&!((23===t||31===t)&&e>=33&&e<=35))return !1;if(Ke(t,e,r))return Ge(null,null,r),this.logger.log(Ee.DEBUG,"Repeated command ("+Pe([t,e])+") is dropped"),!0;var i=20===t||21===t||23===t?1:2,a=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?a.ccRCL():33===e?a.ccBS():34===e?a.ccAOF():35===e?a.ccAON():36===e?a.ccDER():37===e?a.ccRU(2):38===e?a.ccRU(3):39===e?a.ccRU(4):40===e?a.ccFON():41===e?a.ccRDC():42===e?a.ccTR():43===e?a.ccRTD():44===e?a.ccEDM():45===e?a.ccCR():46===e?a.ccENM():47===e&&a.ccEOC():a.ccTO(e-32),Ge(t,e,r),this.currentChannel=i,!0},e.parseMidrow=function(t,e){var r=0;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currentChannel)return this.logger.log(Ee.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[r];return !!i&&(i.ccMIDROW(e),this.logger.log(Ee.DEBUG,"MIDROW ("+Pe([t,e])+")"),!0)}return !1},e.parsePAC=function(t,e){var r,i=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127)&&!((16===t||24===t)&&e>=64&&e<=95))return !1;if(Ke(t,e,i))return Ge(null,null,i),!0;var a=t<=23?1:2;r=e>=64&&e<=95?1===a?_e[t]:Ce[t]:1===a?Ie[t]:we[t];var n=this.channels[a];return !!n&&(n.setPAC(this.interpretPAC(r,e)),Ge(t,e,i),this.currentChannel=a,!0)},e.interpretPAC=function(t,e){var r,i={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},e.parseChars=function(t,e){var r,i,a=null,n=null;(t>=25?(r=2,n=t-8):(r=1,n=t),n>=17&&n<=19)?(i=17===n?e+80:18===n?e+112:e+144,this.logger.log(Ee.INFO,"Special char '"+ke(i)+"' in channel "+r),a=[i]):t>=32&&t<=127&&(a=0===e?[t]:[t,e]);if(a){var s=Pe(a);this.logger.log(Ee.DEBUG,"Char codes =  "+s.join(",")),Ge(t,e,this.cmdHistory);}return a},e.parseBackgroundAttributes=function(t,e){var r;if(!((16===t||24===t)&&e>=32&&e<=47)&&!((23===t||31===t)&&e>=45&&e<=47))return !1;var i={};16===t||24===t?(r=Math.floor((e-32)/2),i.background=Oe[r],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0));var a=t<=23?1:2;return this.channels[a].setBkgData(i),Ge(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset();}this.cmdHistory={a:null,b:null};},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var r=this.channels[e];r&&r.cueSplitAtTime(t);}},t}(),He=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e;}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null);},e.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName);},e.reset=function(){this.cueRanges=[];},t}(),Ve=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function r(t,e){if("string"!=typeof e)return !1;if(!Array.isArray(t))return !1;var r=e.toLowerCase();return !!~t.indexOf(r)&&r}function i(t){return r(e,t)}function a(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var s in n)t[s]=n[s];}return t}function n(e,n,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var u="",h=!1,d=e,c=n,f=s,g=null,v="",p=!0,m="auto",y="start",T=50,E="middle",b=50,S="middle";Object.defineProperty(o,"id",a({},l,{get:function(){return u},set:function(t){u=""+t;}})),Object.defineProperty(o,"pauseOnExit",a({},l,{get:function(){return h},set:function(t){h=!!t;}})),Object.defineProperty(o,"startTime",a({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"endTime",a({},l,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"text",a({},l,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"region",a({},l,{get:function(){return g},set:function(t){g=t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"vertical",a({},l,{get:function(){return v},set:function(e){var i=function(e){return r(t,e)}(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");v=i,this.hasBeenReset=!0;}})),Object.defineProperty(o,"snapToLines",a({},l,{get:function(){return p},set:function(t){p=!!t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"line",a({},l,{get:function(){return m},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"lineAlign",a({},l,{get:function(){return y},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"position",a({},l,{get:function(){return T},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");T=t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"positionAlign",a({},l,{get:function(){return E},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");E=e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"size",a({},l,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");b=t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"align",a({},l,{get:function(){return S},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");S=e,this.hasBeenReset=!0;}})),o.displayState=void 0;}return n.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},n}(),We=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return "";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function Ye(t){function e(t,e,r,i){return 3600*(0|t)+60*(0|e)+(0|r)+parseFloat(i||0)}var r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}var qe=function(){function t(){this.values=Object.create(null);}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e);},e.get=function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,r){for(var i=0;i<r.length;++i)if(e===r[i]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10));},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var r=parseFloat(e);if(r>=0&&r<=100)return this.set(t,r),!0}return !1},t}();function Xe(t,e,r,i){var a=i?t.split(i):[t];for(var n in a)if("string"==typeof a[n]){var s=a[n].split(r);if(2===s.length)e(s[0],s[1]);}}var ze=new Ve(0,0,""),Qe="middle"===ze.align?"middle":"center";function $e(t,e,r){var i=t;function a(){var e=Ye(t);if(null===e)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function n(){t=t.replace(/^\s+/,"");}if(n(),e.startTime=a(),n(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),n(),e.endTime=a(),n(),function(t,e){var i=new qe;Xe(t,(function(t,e){var a;switch(t){case"region":for(var n=r.length-1;n>=0;n--)if(r[n].id===e){i.set(t,r[n].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":a=e.split(","),i.integer(t,a[0]),i.percent(t,a[0])&&i.set("snapToLines",!1),i.alt(t,a[0],["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",Qe,"end"]);break;case"position":a=e.split(","),i.percent(t,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",Qe,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",Qe,"end","left","right"]);}}),/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");var a=i.get("line","auto");"auto"===a&&-1===ze.line&&(a=-1),e.line=a,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",Qe);var n=i.get("position","auto");"auto"===n&&50===ze.position&&(n="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=n;}(t,e);}function Je(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var Ze=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new We,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0;}var e=t.prototype;return e.parse=function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=Je(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var i=t.substr(0,r);return "\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.substr(r),i}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var i="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var a=(i=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER";}for(var n=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(n?n=!1:i=r(),e.state){case"HEADER":/:/.test(i)?Xe(i,(function(t,e){}),/:/):i||(e.state="ID");continue;case"NOTE":i||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){e.state="NOTE";break}if(!i)continue;if(e.cue=new Ve(0,0,""),e.state="CUE",-1===i.indexOf("--\x3e")){e.cue.id=i;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{$e(i,e.cue,e.regionList);}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(n=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=i;continue;case"BADCUE":i||(e.state="ID");}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE";}return this},e.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){this.onparsingerror&&this.onparsingerror(t);}return this.onflush&&this.onflush(),this},t}(),tr=r(7),er=r(15),rr=/\r\n|\n\r|\n|\r/g,ir=function(t,e,r){return void 0===r&&(r=0),t.substr(r,e.length)===e},ar=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return (e>>>0).toString()};function nr(t,e,r){return ar(t.toString())+ar(e.toString())+ar(r)}function sr(t,e,r,i,n,s,o,l){var u,h=new Ze,d=Object(F.f)(new Uint8Array(t)).trim().replace(rr,"\n").split("\n"),c=[],f=Object(tr.a)(e,r),g="00:00.000",v=0,p=0,m=!0,y=!1;h.oncue=function(t){var e=i[n],r=i.ccOffset,a=(v-f)/9e4;if(null!=e&&e.new&&(void 0!==p?r=i.ccOffset=e.start:function(t,e,r){var i=t[e],a=t[i.prevCC];if(!a||!a.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;null!==(n=a)&&void 0!==n&&n.new;){var n;t.ccOffset+=i.start-a.start,i.new=!1,a=t[(i=a).prevCC];}t.presentationOffset=r;}(i,n,a)),a&&(r=a-i.presentationOffset),y){var o=t.endTime-t.startTime,l=Object(er.b)(9e4*(t.startTime+r-p),9e4*s)/9e4;t.startTime=l,t.endTime=l+o;}var u=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(u)),t.id||(t.id=nr(t.startTime,t.endTime,u)),t.endTime>0&&c.push(t);},h.onparsingerror=function(t){u=t;},h.onflush=function(){u?l(u):o(c);},d.forEach((function(t){if(m){if(ir(t,"X-TIMESTAMP-MAP=")){m=!1,y=!0,t.substr(16).split(",").forEach((function(t){ir(t,"LOCAL:")?g=t.substr(6):ir(t,"MPEGTS:")&&(v=parseInt(t.substr(7)));}));try{p=function(t){var e=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),n=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(a.a)(e)&&Object(a.a)(r)&&Object(a.a)(i)&&Object(a.a)(n)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*r,e+=6e4*i,e+=36e5*n}(g)/1e3;}catch(t){y=!1,u=t;}return}""===t&&(m=!1);}h.parse(t+"\n");})),h.flush();}function or(){return (or=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);}return t}).apply(this,arguments)}var lr=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ur=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,hr={left:"start",center:"center",right:"end",start:"start",end:"end"};function dr(t,e,r,i,a){var n=Object(l.b)(new Uint8Array(t),["mdat"]);if(0!==n.length){var s=n[0],o=Object(F.f)(new Uint8Array(t,s.start,s.end-s.start)),u=Object(tr.c)(e,1,r);try{i(function(t,e){var r=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(i).reduce((function(t,e){return t[e]=r.getAttribute("ttp:"+e)||i[e],t}),{}),n="preserve"!==r.getAttribute("xml:space"),s=fr(cr(r,"styling","style")),o=fr(cr(r,"layout","region")),l=cr(r,"body","[begin]");return [].map.call(l,(function(t){var r=function t(e,r){return [].slice.call(e.childNodes).reduce((function(e,i,a){var n;return "br"===i.nodeName&&a?e+"\n":null!==(n=i.childNodes)&&void 0!==n&&n.length?t(i,r):r?e+i.textContent.trim().replace(/\s+/g," "):e+i.textContent}),"")}(t,n);if(!r||!t.hasAttribute("begin"))return null;var i=pr(t.getAttribute("begin"),a),l=pr(t.getAttribute("dur"),a),u=pr(t.getAttribute("end"),a);if(null===i)throw vr(t);if(null===u){if(null===l)throw vr(t);u=i+l;}var h=new Ve(i-e,u-e,r);h.id=nr(h.startTime,h.endTime,h.text);var d=o[t.getAttribute("region")],c=s[t.getAttribute("style")];h.position=10,h.size=80;var f=function(t,e){var r="http://www.w3.org/ns/ttml#styling";return ["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(i,a){var n=gr(e,r,a)||gr(t,r,a);return n&&(i[a]=n),i}),{})}(d,c),g=f.textAlign;if(g){var v=hr[g];v&&(h.lineAlign=v),h.align=g;}return or(h,f),h})).filter((function(t){return null!==t}))}(o,u));}catch(t){a(t);}}else a(new Error("Could not parse IMSC1 mdat"));}function cr(t,e,r){var i=t.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(r)):[]}function fr(t){return t.reduce((function(t,e){var r=e.getAttribute("xml:id");return r&&(t[r]=e),t}),{})}function gr(t,e,r){return t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function vr(t){return new Error("Could not parse ttml timestamp "+t)}function pr(t,e){if(!t)return null;var r=Ye(t);return null===r&&(lr.test(t)?r=function(t,e){var r=lr.exec(t),i=(0|r[4])+(0|r[5])/e.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+i/e.frameRate}(t,e):ur.test(t)&&(r=function(t,e){var r=ur.exec(t),i=Number(r[1]);switch(r[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}(t,e))),r}var mr=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new He(this,"textTrack1"),r=new He(this,"textTrack2"),i=new He(this,"textTrack3"),a=new He(this,"textTrack4");this.cea608Parser1=new je(1,e,r),this.cea608Parser2=new je(3,i,a);}t.on(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(n.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(n.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(n.a.FRAG_LOADING,this.onFragLoading,this),t.on(n.a.FRAG_LOADED,this.onFragLoaded,this),t.on(n.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(n.a.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(n.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(n.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this);}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(n.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(n.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(n.a.FRAG_LOADING,this.onFragLoading,this),t.off(n.a.FRAG_LOADED,this.onFragLoaded,this),t.off(n.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(n.a.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(n.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(n.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null;},e.addCues=function(t,e,r,i,a){for(var s,o,l,u,h=!1,d=a.length;d--;){var c=a[d],f=(s=c[0],o=c[1],l=e,u=r,Math.min(o,u)-Math.max(s,l));if(f>=0&&(c[0]=Math.min(c[0],e),c[1]=Math.max(c[1],r),h=!0,f/(r-e)>.5))return}if(h||a.push([e,r]),this.config.renderTextTracksNatively){var g=this.captionsTracks[t];this.Cues.newCue(g,e,r,i);}else {var v=this.Cues.newCue(null,e,r,i);this.hls.trigger(n.a.CUES_PARSED,{type:"captions",cues:v,track:t});}},e.onInitPtsFound=function(t,e){var r=this,i=e.frag,a=e.id,s=e.initPTS,o=e.timescale,l=this.unparsedVttFrags;"main"===a&&(this.initPTS[i.cc]=s,this.timescale[i.cc]=o),l.length&&(this.unparsedVttFrags=[],l.forEach((function(t){r.onFragLoaded(n.a.FRAG_LOADED,t);})));},e.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var i=e.textTracks[r];if(i[t])return i}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t);},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,r=this.captionsTracks,i=this.media,a=e[t],n=a.label,s=a.languageCode,o=this.getExistingTrack(t);if(o)r[t]=o,P(r[t]),O(r[t],i);else {var l=this.createTextTrack("captions",n,s);l&&(l[t]=!0,r[t]=l);}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(n.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]});}}},e.createTextTrack=function(t,e,r){var i=this.media;if(i)return i.addTextTrack(t,e,r)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks();},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){P(t[e]),delete t[e];})),this.nonNativeCaptionsTracks={};},e.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset());},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)P(e[r]);}},e.onSubtitleTracksUpdated=function(t,e){var r=this;this.textTracks=[];var i=e.subtitleTracks||[],a=i.some((function(t){return "stpp.ttml.im1t"===t.textCodec}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var s=this.tracks&&i&&this.tracks.length===i.length;if(this.tracks=i||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,e){var i;if(e<o.length){for(var a=null,n=0;n<o.length;n++)if(yr(o[n],t)){a=o[n];break}a&&(i=a);}i?P(i):(i=r.createTextTrack("subtitles",t.name,t.lang))&&(i.mode="disabled"),i&&(i.groupId=t.groupId,r.textTracks.push(i));}));}else if(!s&&this.tracks&&this.tracks.length){var l=this.tracks.map((function(t){return {label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(n.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l});}}},e.onManifestLoaded=function(t,e){var r=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var i="textTrack"+e[1],a=r.captionsProperties[i];a&&(a.label=t.name,t.lang&&(a.languageCode=t.lang),a.media=t);}}));},e.onFragLoading=function(t,e){var r=this.cea608Parser1,i=this.cea608Parser2,a=this.lastSn;if(this.enabled&&r&&i&&e.frag.type===A.MAIN){var n=e.frag.sn;n!==a+1&&(r.reset(),i.reset()),this.lastSn=n;}},e.onFragLoaded=function(t,e){var r=e.frag,i=e.payload,s=this.initPTS,o=this.unparsedVttFrags;if(r.type===A.SUBTITLE)if(i.byteLength){if(!Object(a.a)(s[r.cc]))return o.push(e),void(s.length&&this.hls.trigger(n.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Missing initial subtitle PTS")}));var l=r.decryptdata;if(null==l||null==l.key||"AES-128"!==l.method){var u=this.tracks[r.level],h=this.vttCCs;h[r.cc]||(h[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),u&&"stpp.ttml.im1t"===u.textCodec?this._parseIMSC1(r,i):this._parseVTTs(r,i,h);}}else this.hls.trigger(n.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")});},e._parseIMSC1=function(t,e){var r=this,i=this.hls;dr(e,this.initPTS[t.cc],this.timescale[t.cc],(function(e){r._appendCues(e,t.level),i.trigger(n.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t});}),(function(e){o.b.log("Failed to parse IMSC1: "+e),i.trigger(n.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e});}));},e._parseVTTs=function(t,e,r){var i=this,a=this.hls;sr(e,this.initPTS[t.cc],this.timescale[t.cc],r,t.cc,t.start,(function(e){i._appendCues(e,t.level),a.trigger(n.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t});}),(function(r){i._fallbackToIMSC1(t,e),o.b.log("Failed to parse VTT cue: "+r),a.trigger(n.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:r});}));},e._fallbackToIMSC1=function(t,e){var r=this,i=this.tracks[t.level];i.textCodec||dr(e,this.initPTS[t.cc],this.timescale[t.cc],(function(){i.textCodec="stpp.ttml.im1t",r._parseIMSC1(t,e);}),(function(){i.textCodec="wvtt";}));},e._appendCues=function(t,e){var r=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[e];if("disabled"===i.mode)return;t.forEach((function(t){return x(i,t)}));}else {var a=this.tracks[e].default?"default":"subtitles"+e;r.trigger(n.a.CUES_PARSED,{type:"subtitles",cues:t,track:a});}},e.onFragDecrypted=function(t,e){var r=e.frag;if(r.type===A.SUBTITLE){if(!Object(a.a)(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(e);this.onFragLoaded(n.a.FRAG_LOADED,e);}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={};},e.onFragParsingUserdata=function(t,e){var r=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&r&&i)for(var a=0;a<e.samples.length;a++){var n=e.samples[a].bytes;if(n){var s=this.extractCea608Data(n);r.addData(e.samples[a].pts,s[0]),i.addData(e.samples[a].pts,s[1]);}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset,a=e.type;if(!a||"video"===a){var n=this.media;if(!n||n.currentTime<i)return;var s=this.captionsTracks;Object.keys(s).forEach((function(t){return M(s[t],r,i)}));}},e.extractCea608Data=function(t){for(var e=31&t[0],r=2,i=[[],[]],a=0;a<e;a++){var n=t[r++],s=127&t[r++],o=127&t[r++],l=3&n;0===s&&0===o||0!=(4&n)&&(0!==l&&1!==l||(i[l].push(s),i[l].push(o)));}return i},t}();function yr(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function Tr(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}var Er,br=function(){function t(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners();}var e,r,i,a=t.prototype;return a.setStreamController=function(t){this.streamController=t;},a.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null;},a.registerListeners=function(){var t=this.hls;t.on(n.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(n.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this);},a.unregisterListener=function(){var t=this.hls;t.off(n.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(n.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this);},a.onFpsDropLevelCapping=function(e,r){t.isLevelAllowed(r.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(r.droppedLevel);},a.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null;},a.onManifestParsed=function(t,e){var r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping();},a.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping();},a.onMediaDetaching=function(){this.stopCapping();},a.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping;}}},a.getMaxLevel=function(e){var r=this,i=this.hls.levels;if(!i.length)return -1;var a=i.filter((function(i,a){return t.isLevelAllowed(a,r.restrictedLevels)&&a<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(a,this.mediaWidth,this.mediaHeight)},a.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize());},a.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0);},a.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0);}return this.clientRect=e,e},t.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},t.getMaxLevelByMediaSize=function(t,e,r){if(!t||!t.length)return -1;for(var i,a,n=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=e||o.height>=r)&&(i=o,!(a=t[s+1])||i.width!==a.width||i.height!==a.height)){n=s;break}}return n},e=t,i=[{key:"contentScaleFactor",get:function(){var t=1;try{t=self.devicePixelRatio;}catch(t){}return t}}],(r=[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}])&&Tr(e.prototype,r),i&&Tr(e,i),t}(),Sr=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners();}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t;},e.registerListeners=function(){this.hls.on(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this);},e.unregisterListeners=function(){this.hls.off(n.a.MEDIA_ATTACHING,this.onMediaAttaching);},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null;},e.onMediaAttaching=function(t,e){var r=this.hls.config;if(r.capLevelOnFPSDrop){var i=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod);}},e.checkFPS=function(t,e,r){var i=performance.now();if(e){if(this.lastTime){var a=i-this.lastTime,s=r-this.lastDroppedFrames,l=e-this.lastDecodedFrames,u=1e3*s/a,h=this.hls;if(h.trigger(n.a.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:r}),u>0&&s>h.config.fpsDroppedMonitoringThreshold*l){var d=h.currentLevel;o.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===h.autoLevelCapping||h.autoLevelCapping>=d)&&(d-=1,h.trigger(n.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:h.currentLevel}),h.autoLevelCapping=d,this.streamController.nextLevelSwitch());}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e;}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames);}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount);},t}();!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready";}(Er||(Er={}));var Lr="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Ar(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}var Rr=function(){function t(t){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=t,this._config=t.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners();}var e,r,a=t.prototype;return a.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null;},a._registerListeners=function(){this.hls.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(n.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this);},a._unregisterListeners=function(){this.hls.off(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(n.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this);},a.getLicenseServerUrl=function(t){switch(t){case Er.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},a._attemptKeySystemAccess=function(t,e,r){var i=this,a=function(t,e,r,i){switch(t){case Er.WIDEVINE:return function(t,e,r){var i={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){i.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:r.audioRobustness||""});})),e.forEach((function(t){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:r.videoRobustness||""});})),[i]}(e,r,i);default:throw new Error("Unknown key-system: "+t)}}(t,e,r,this._drmSystemOptions);o.b.log("Requesting encrypted media key-system access");var n=this.requestMediaKeySystemAccess(t,a);this.mediaKeysPromise=n.then((function(e){return i._onMediaKeySystemAccessObtained(t,e)})),n.catch((function(e){o.b.error('Failed to obtain key-system "'+t+'" access:',e);}));},a._onMediaKeySystemAccessObtained=function(t,e){var r=this;o.b.log('Access for key-system "'+t+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(i);var a=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return i.mediaKeys=e,o.b.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated(),e}));return a.catch((function(t){o.b.error("Failed to create media-keys:",t);})),a},a._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession));}));},a._onNewMediaKeySession=function(t){var e=this;o.b.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(r){e._onKeySessionMessage(t,r.message);}),!1);},a._onKeySessionMessage=function(t,e){o.b.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){o.b.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e);}));},a.onMediaEncrypted=function(t){var e=this;if(o.b.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return o.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_KEYS,fatal:!0});var r=function(r){e._media&&(e._attemptSetMediaKeys(r),e._generateRequestWithPreferredKeySession(t.initDataType,t.initData));};this.mediaKeysPromise.then(r).catch(r);},a._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return o.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_KEYS,fatal:!0});o.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0;}},a._generateRequestWithPreferredKeySession=function(t,e){var r=this,i=this._mediaKeysList[0];if(!i)return o.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(i.mediaKeysSessionInitialized)o.b.warn("Key-Session already initialized but requested again");else {var a=i.mediaKeysSession;if(!a)return o.b.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return o.b.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});o.b.log('Generating key-session request for "'+t+'" init data type'),i.mediaKeysSessionInitialized=!0,a.generateRequest(t,e).then((function(){o.b.debug("Key-session generation succeeded");})).catch((function(t){o.b.error("Error generating key-session request:",t),r.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_SESSION,fatal:!1});}));}},a._createLicenseXhr=function(t,e,r){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,r);var a=this._licenseXhrSetup;if(a)try{a.call(this.hls,i,t),a=void 0;}catch(t){o.b.error(t);}try{i.readyState||i.open("POST",t,!0),a&&a.call(this.hls,i,t);}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return i},a._onLicenseRequestReadyStageChange=function(t,e,r,i){switch(t.readyState){case 4:if(200===t.status){this._requestLicenseFailureCount=0,o.b.log("License request succeeded");var a=t.response,l=this._licenseResponseCallback;if(l)try{a=l.call(this.hls,t,e);}catch(t){o.b.error(t);}i(a);}else {if(o.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var u=3-this._requestLicenseFailureCount+1;o.b.warn("Retrying license request, "+u+" attempts left"),this._requestLicense(r,i);}}},a._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case Er.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},a._requestLicense=function(t,e){o.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return o.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(r.mediaKeySystemDomain),a=this._createLicenseXhr(i,t,e);o.b.log("Sending license request to URL: "+i);var l=this._generateLicenseRequestChallenge(r,t);a.send(l);}catch(t){o.b.error("Failure requesting DRM license: "+t),this.hls.trigger(n.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});}},a.onMediaAttached=function(t,e){if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",this._onMediaEncrypted);}},a.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})));},a.onManifestParsed=function(t,e){if(this._emeEnabled){var r=e.levels.map((function(t){return t.audioCodec})).filter((function(t){return !!t})),i=e.levels.map((function(t){return t.videoCodec})).filter((function(t){return !!t}));this._attemptKeySystemAccess(Er.WIDEVINE,r,i);}},e=t,(r=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Ar(e.prototype,r),t}(),Dr=r(11),kr=/^age:\s*[\d.]+\s*$/m,_r=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new Dr.a,this.retryDelay=0;}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null;},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()));},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader);},e.load=function(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.retryDelay=e.retryDelay,this.loadInternal();},e.loadInternal=function(){var t=this.config,e=this.context;if(t){var r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;var a=this.xhrSetup;try{if(a)try{a(r,e.url);}catch(t){r.open("GET",e.url,!0),a(r,e.url);}r.readyState||r.open("GET",e.url,!0);}catch(t){return void this.callbacks.onError({code:r.status,text:t.message},e,r)}e.rangeEnd&&r.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=e.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),r.send();}},e.readystatechange=function(){var t=this.context,e=this.loader,r=this.stats;if(t&&e){var i=e.readyState,a=this.config;if(!r.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start)),4===i){e.onreadystatechange=null,e.onprogress=null;var n=e.status;if(n>=200&&n<300){var s,l;if(r.loading.end=Math.max(self.performance.now(),r.loading.first),l="arraybuffer"===t.responseType?(s=e.response).byteLength:(s=e.responseText).length,r.loaded=r.total=l,!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(r,t,s,e),!this.callbacks)return;var h={url:e.responseURL,data:s};this.callbacks.onSuccess(h,r,t,e);}else r.retry>=a.maxRetry||n>=400&&n<499?(o.b.error(n+" while loading "+t.url),this.callbacks.onError({code:n,text:e.statusText},t,e)):(o.b.warn(n+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++);}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout);}},e.loadtimeout=function(){o.b.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader));},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);},e.getCacheAge=function(){var t=null;if(this.loader&&kr.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null;}return t},t}();function Ir(t){var e="function"==typeof Map?new Map:void 0;return (Ir=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i);}function i(){return Cr(t,arguments,xr(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Or(i,t)})(t)}function Cr(t,e,r){return (Cr=wr()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return r&&Or(a,r.prototype),a}).apply(null,arguments)}function wr(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}function Or(t,e){return (Or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xr(t){return (xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pr=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||Mr,this.controller=new self.AbortController,this.stats=new Dr.a;}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal();},e.abortInternal=function(){this.stats.aborted=!0,this.controller.abort();},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response);},e.load=function(t,e,r){var i=this,n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();var s=function(t,e){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:e};t.rangeEnd&&(r.headers=new self.Headers({Range:"bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)}));return r}(t,this.controller.signal),o=r.onProgress,l="arraybuffer"===t.responseType,u=l?"byteLength":"length";this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(n,t,i.response);}),e.timeout),self.fetch(this.request).then((function(r){if(i.response=i.loader=r,!r.ok){var s=r.status,u=r.statusText;throw new Fr(u||"fetch, bad network response",s,r)}return n.loading.first=Math.max(self.performance.now(),n.loading.start),n.total=parseInt(r.headers.get("Content-Length")||"0"),o&&Object(a.a)(e.highWaterMark)?i.loadProgressively(r,n,t,e.highWaterMark,o):l?r.arrayBuffer():r.text()})).then((function(s){var l=i.response;self.clearTimeout(i.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first),n.loaded=n.total=s[u];var h={url:l.url,data:s};o&&!Object(a.a)(e.highWaterMark)&&o(n,t,s,l),r.onSuccess(h,n,t,l);})).catch((function(e){if(self.clearTimeout(i.requestTimeout),!n.aborted){var a=e.code||0;r.onError({code:a,text:e.message},t,e.details);}}));},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null;}return t},e.loadProgressively=function(t,e,r,i,a){void 0===i&&(i=0);var n=new oe.a,s=t.body.getReader();return function o(){return s.read().then((function(s){if(s.done)return n.dataLength&&a(e,r,n.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return e.loaded+=u,u<i||n.dataLength?(n.push(l),n.dataLength>=i&&a(e,r,n.flush(),t)):a(e,r,l,t),o()})).catch((function(){return Promise.reject()}))}()},t}();function Mr(t,e){return new self.Request(t.url,e)}var Fr=function(t){var e,r;function i(e,r,i){var a;return (a=t.call(this,e)||this).code=void 0,a.details=void 0,a.code=r,a.details=i,a}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,Or(e,r),i}(Ir(Error)),Nr=Pr,Ur=/\s/;function Br(){return (Br=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);}return t}).apply(this,arguments)}function Gr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i);}return r}function Kr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gr(Object(r),!0).forEach((function(e){jr(t,e,r[e]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e));}));}return t}function jr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Hr=Kr(Kr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:_r,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:se,bufferController:Re,capLevelController:br,fpsController:Sr,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Lr,testBandwidth:!0,progressive:!1,lowLatencyMode:!0},{cueHandler:{newCue:function(t,e,r,i){for(var a,n,s,o,l,u=[],h=self.VTTCue||self.TextTrackCue,d=0;d<i.rows.length;d++)if(s=!0,o=0,l="",!(a=i.rows[d]).isEmpty()){for(var c=0;c<a.chars.length;c++)Ur.test(a.chars[c].uchar)&&s?o++:(l+=a.chars[c].uchar,s=!1);a.cueStartTime=e,e===r&&(r+=1e-4),o>=16?o--:o++;var f=Je(l.trim()),g=nr(e,r,f);t&&t.cues&&t.cues.getCueById(g)||((n=new h(e,r,f)).id=g,n.line=d+1,n.align="left",n.position=10+Math.min(80,10*Math.floor(8*o/32)),u.push(n));}return t&&u.length&&(u.sort((function(t,e){return "auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),u.forEach((function(e){return x(t,e)}))),u}},enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:pe,subtitleTrackController:be,timelineController:mr,audioStreamController:he,audioTrackController:fe,emeController:Rr});function Vr(t){var e=t.loader;e!==Nr&&e!==_r?(o.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return !1}()&&(t.loader=Nr,t.progressive=!0,t.enableSoftwareAES=!0,o.b.log("[config]: Progressive streaming enabled, using FetchLoader"));}function Wr(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}var Yr=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Qt.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this._media=null,this.url=null;var r=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Br({},t,e)}(t.DefaultConfig,e);this.userConfig=e,Object(o.a)(r.debug),this._autoLevelCapping=-1,r.progressive&&Vr(r);var i=r.abrController,a=r.bufferController,n=r.capLevelController,s=r.fpsController,l=this.abrController=new i(this),u=this.bufferController=new a(this),h=this.capLevelController=new n(this),d=new s(this),c=new C(this),f=new w(this),g=new N(this),v=this.levelController=new rt(this),p=new it(this),m=this.streamController=new re(this,p);h.setStreamController(m),d.setStreamController(m);var y=[v,m];this.networkControllers=y;var T=[c,f,l,u,h,d,g,p];this.audioTrackController=this.createController(r.audioTrackController,null,y),this.createController(r.audioStreamController,p,y),this.subtitleTrackController=this.createController(r.subtitleTrackController,null,y),this.createController(r.subtitleStreamController,p,y),this.createController(r.timelineController,null,T),this.emeController=this.createController(r.emeController,null,T),this.latencyController=this.createController(G,null,T),this.coreComponents=T;}t.isSupported=function(){return function(){var t=Yt();if(!t)return !1;var e=qt(),r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return !!r&&!!i}()};var e,r,a,l=t.prototype;return l.createController=function(t,e,r){if(t){var i=e?new t(this,e):new t(this);return r&&r.push(i),i}return null},l.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r);},l.once=function(t,e,r){void 0===r&&(r=this),this._emitter.once(t,e,r);},l.removeAllListeners=function(t){this._emitter.removeAllListeners(t);},l.off=function(t,e,r,i){void 0===r&&(r=this),this._emitter.off(t,e,r,i);},l.listeners=function(t){return this._emitter.listeners(t)},l.emit=function(t,e,r){return this._emitter.emit(t,e,r)},l.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){o.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(n.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e});}return !1},l.listenerCount=function(t){return this._emitter.listenerCount(t)},l.destroy=function(){o.b.log("destroy"),this.trigger(n.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0;},l.attachMedia=function(t){o.b.log("attachMedia"),this._media=t,this.trigger(n.a.MEDIA_ATTACHING,{media:t});},l.detachMedia=function(){o.b.log("detachMedia"),this.trigger(n.a.MEDIA_DETACHING,void 0),this._media=null;},l.loadSource=function(t){this.stopLoad();var e=this.media,r=this.url,a=this.url=i.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});o.b.log("loadSource:"+a),e&&r&&r!==a&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(n.a.MANIFEST_LOADING,{url:t});},l.startLoad=function(t){void 0===t&&(t=-1),o.b.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t);}));},l.stopLoad=function(){o.b.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad();}));},l.swapAudioCodec=function(){o.b.log("swapAudioCodec"),this.streamController.swapAudioCodec();},l.recoverMediaError=function(){o.b.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t);},l.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e);},e=t,a=[{key:"version",get:function(){return "1.0.1"}},{key:"Events",get:function(){return n.a}},{key:"ErrorTypes",get:function(){return s.b}},{key:"ErrorDetails",get:function(){return s.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Hr},set:function(e){t.defaultConfig=e;}}],(r=[{key:"levels",get:function(){var t=this.levelController.levels;return t||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){o.b.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch();}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){o.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch();}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){o.b.log("set loadLevel:"+t),this.levelController.manualLevel=t;}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t;}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){o.b.log("set firstLevel:"+t),this.levelController.firstLevel=t;}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){o.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t;}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e);}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(o.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t);}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return -1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var r=t.length,i=0;i<r;i++)if(t[i].maxBitrate>e)return i;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return -1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t);}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t);}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t);}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return !!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t);}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t;}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&Wr(e.prototype,r),a&&Wr(e,a),t}();Yr.defaultConfig=void 0;}]).default}));
!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.video=e.bs.player.plugin.video||{},e.bs.player.plugin.video.videoPlayer=e.bs.player.plugin.video.videoPlayer||{},Math.__name__="Math";var i=require("haxe.Reflect");class s{static string(e){return I.__string_rec(e,"")}static parseInt(e){let t=parseInt(e);return isNaN(t)?null:t}}s.__name__="Std";class a{static getInstanceFields(e){let t=[];for(;null!=e;){let i=0,s=Object.getOwnPropertyNames(e.prototype);for(;i<s.length;){let e=s[i];switch(++i,e){case"__class__":case"__properties__":case"constructor":break;default:-1==t.indexOf(e)&&t.push(e);}}e=e.__super__;}return t}}a.__name__="Type";var r=require("bs.player.core.events.AdEvent"),n=require("bs.player.core.events.ControlEvent"),l=require("bs.player.core.events.DataProviderEvent"),o=require("bs.player.core.events.VideoEvent"),h=require("bs.player.core.manager.I18NHelper"),d=require("bs.player.core.model.Media"),u=require("bs.player.core.model.Live"),c=require("bs.player.core.model.LiveStream"),m=require("bs.player.core.model.SubtitlesSet"),p=require("bs.player.core.model.AudioSet"),g=require("bs.player.core.model.VideoQualityEventData");class v{}v.__name__="bs.player.core.model.DrmCustomLicenseServerHandler",v.__isInterface__=!0,Object.assign(v.prototype,{__class__:v,initContext:null,customWidevineLicenseRequestHandler:null,customPlayReadyLicenseRequestHandler:null,getLastError:null,clearCertCache:null});class y{constructor(){this.pluginName="";let e=I.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,t)?i.field(s,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}y.__name__="bs.player.core.plugin.PluginBase",Object.assign(y.prototype,{__class__:y,uid:null,context:null,className:null,pluginConfig:null,variables:null,eventHub:null,parentDisplay:null,display:null,player:null,pluginName:null});var S=require("bs.player.core.plugin.VideoPlayerUtil");class f{constructor(e){this.saveBandwidthModeStore=null,this.hideVideoTag=!1,this.playbackRate=1,this.initialAsAdvertisement=!1,this.isInStreamAdvertisement=!1,this.isAdvertisement=!1,this.minAudioTracksForInfo=2,null==f.instances.h[(e?"ad_":"")+this.context]&&(this.pluginConfig=S.readPluginConfig(this),this.isAdvertisement=e,this.initialAsAdvertisement=e,this.initialBandwidthSafetyFactor=null,this.isInStreamAdvertisement=!1,this.playbackRateMetter=new k(b.isSmartTV()?3:2),this.seekingOverVideoGapMeter=new w(4),this.playerWrapper=null,this.startTimeStatus=0,this.hasDashJsInitializedSource=!1,this.hasDashJsInitializedManifest=!1,this.hasAudioInitialized=!1,this.hasSubtitlesInitialized=!1,this.hasCodecInfoInitialized=!1,this.hasQualityInfoInitialized=!1,this.isQualitySelectionEnabled=!0,this.hasSeekingStartTriggeded=!1,this.hasProtectionData=!1,this.isBuffering=!1,this.shouldBePlaying=!1,this.isPlaybackNotAllowed=!1,this.hasPlaybackSuccStarted=!1,this.drmLicenseCheckStatus=0,this.liveStreamNowOffset=null,this.liveStreamNowOffsetLastUpdate=0,this.videoRestartsOnError=0,this.prePlaybackSeekRelativePosition=null,this.seekingStartDate=null,this.seekDebouncerTimer=null,this.seekingTargetPos=null,this.seekingTargetTs=null,this.lastDvrWindowStart=null,this.lastDvrWindowEnd=null,this.currentTime=null,this.playbackRateMetter.reset(),this.audioSetWaitingForSelection=null,this.subtitlesSetWaitingForSelection=null,this.seekingAvgTime=6,this.scte35PendingEvents=[],this.saveBandwidthModeStore=null);}create(){n.add(this.context,"selectSubtitles",A(this,this.onSelectSubtitles)),n.add(this.context,"selectAudio",A(this,this.onSelectAudio)),n.add(this.context,"requestVideoQualityChange",A(this,this.onVideoQualityChange)),r.add(this.context,"adInStreamPlaying",A(this,this.onAdInStreamPlaying)),r.add(this.context,"adInStreamPlayingSilent",A(this,this.onAdInStreamPlaying)),r.add(this.context,"adInStreamEnd",A(this,this.onAdInStreamEnd)),r.add(this.context,"adInStreamEndSilent",A(this,this.onAdInStreamEnd)),r.add(this.context,"adInStreamClipPlaying",A(this,this.onAdClipInStreamPlaying)),r.add(this.context,"adInStreamClipPlayingSilent",A(this,this.onAdClipInStreamPlaying)),r.add(this.context,"adInStreamClipEnd",A(this,this.onAdClipInStreamEnd)),r.add(this.context,"adInStreamClipEndSilent",A(this,this.onAdClipInStreamEnd)),r.add(this.context,"adInStreamAdsBreaksInfo",A(this,this.onAdInStreamBreaksInfo));}destroy(){n.remove(this.context,"selectSubtitles",A(this,this.onSelectSubtitles)),n.remove(this.context,"selectAudio",A(this,this.onSelectAudio)),n.remove(this.context,"requestVideoQualityChange",A(this,this.onVideoQualityChange)),r.remove(this.context,"adInStreamPlaying",A(this,this.onAdInStreamPlaying)),r.remove(this.context,"adInStreamPlayingSilent",A(this,this.onAdInStreamPlaying)),r.remove(this.context,"adInStreamEnd",A(this,this.onAdInStreamEnd)),r.remove(this.context,"adInStreamEndSilent",A(this,this.onAdInStreamEnd)),r.remove(this.context,"adInStreamClipPlaying",A(this,this.onAdClipInStreamPlaying)),r.remove(this.context,"adInStreamClipPlayingSilent",A(this,this.onAdClipInStreamPlaying)),r.remove(this.context,"adInStreamClipEnd",A(this,this.onAdClipInStreamEnd)),r.remove(this.context,"adInStreamClipEndSilent",A(this,this.onAdClipInStreamEnd)),r.remove(this.context,"adInStreamAdsBreaksInfo",A(this,this.onAdInStreamBreaksInfo)),this.cleanVideoAndPlayer(),this.media=null,this.startTimeStatus=0,this.hasDashJsInitializedSource=null,this.hasDashJsInitializedManifest=null,this.hasAudioInitialized=null,this.hasSubtitlesInitialized=null,this.hasCodecInfoInitialized=null,this.hasQualityInfoInitialized=null,this.liveStreamNowOffset=null,this.liveStreamNowOffsetLastUpdate=0,this.videoRestartsOnError=0,this.hasSeekingStartTriggeded=!1,this.hasProtectionData=!1,this.isBuffering=!1,this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopDrmLiceseCheckCleanupTimer(),this.stopLiveEdgeUpdateTimer(),this.stopStreamCompleteWatchdogTimer(),this.stopStreamBufferingWatchdogTimer(),this.shouldBePlaying=!1,this.isPlaybackNotAllowed=!1,this.hasPlaybackSuccStarted=!1,this.drmLicenseCheckStatus=0,this.audioSetWaitingForSelection=null,this.subtitlesSetWaitingForSelection=null,this.seekingStartDate=null,this.stopSeekDebouncerTimer(),this.lastDvrWindowStart=null,this.lastDvrWindowEnd=null,this.currentTime=null,this.playbackRateMetter.reset(),this.adBreaksInfo=null;}cleanVideoAndPlayer(){if(this.hasProtectionData=!1,this.stopDrmLiceseCheckCleanupTimer(),null!=this.player)try{this.hasDashJsInitializedSource&&this.player.pause(),this.player.reset();}catch(e){}null!=this.video&&(this.video.setAttribute("src",""),this.video.load(),this.hideVideoTag=!1,null!=this.video&&(this.video.style.display="block",this.video.style.opacity="1",this.video.style.visibility="visible"),this.video.muted=this.initialVideoIsMuted),this.cleanPlayer(),this.player=null,this.video=null,this.playerWrapper=null,this.source=null,this.audioSetWaitingForSelection=null,this.subtitlesSetWaitingForSelection=null,this.hasPlaybackSuccStarted=!1,this.saveBandwidthModeStore=null;}showHideVideoTag(e){null==e&&(e=!0),null!=this.video&&(this.video.style.display=e?"block":"none",this.video.style.opacity=e?"1":"0",this.video.style.visibility=e?"visible":"hidden");}stopSeekDebouncerTimer(){null!=this.seekDebouncerTimer&&(this.seekDebouncerTimer.stop(),this.seekDebouncerTimer=null);}onAdInStreamPlaying(e){this.isAdvertisement=!0,this.isInStreamAdvertisement=!0;let t=this.getAdsInStreamMaxQualityScalingRatio();if(null!=t){let e=this.player.getSettings();null!=e&&null!=e.streaming&&null!=e.streaming.abr&&null!=e.streaming.abr.bandwidthSafetyFactor&&(this.initialBandwidthSafetyFactor=e.streaming.abr.bandwidthSafetyFactor),null==this.initialBandwidthSafetyFactor&&(this.initialBandwidthSafetyFactor=.9),e.streaming.abr.bandwidthSafetyFactor=this.initialBandwidthSafetyFactor*t,this.player.updateSettings(e);}}getAdsInStreamMaxQualityScalingRatio(){let e=null;return Object.prototype.hasOwnProperty.call(this.pluginConfig,"daiAdsMaxQualityScalingRatio")&&null!=i.field(this.pluginConfig,"daiAdsMaxQualityScalingRatio")&&(e=i.field(this.pluginConfig,"daiAdsMaxQualityScalingRatio")),e}onAdInStreamEnd(e){if(this.isAdvertisement=this.initialAsAdvertisement,this.isInStreamAdvertisement=!1,null!=this.getAdsInStreamMaxQualityScalingRatio()&&null!=this.initialBandwidthSafetyFactor){let e=this.player.getSettings();e.streaming.abr.bandwidthSafetyFactor=this.initialBandwidthSafetyFactor,this.player.updateSettings(e);}}onAdClipInStreamPlaying(e){null!=this.video&&null!=this.media&&(this.inStreamAdvertStartPos=this.video.currentTime,null!=e.data&&e.data.adStartTime>=0&&(this.inStreamAdvertStartPos=e.data.adStartTime),this.inStreamAdvertMedia=null,null!=e&&null!=e.data&&(this.inStreamAdvertMedia=e.data.media));}onAdClipInStreamEnd(e){this.inStreamAdvertStartPos=null,this.inStreamAdvertMedia=null;}onAdInStreamBreaksInfo(e){null!=e&&null!=e.data&&(this.adBreaksInfo=e.data);}updateMediaPlaybackInfo(){if(null!=this.media&&this.hasAudioInitialized){let e=this.media instanceof u;if(this.media.mediaPlaybackInfo.currentTime=this.currentTime,e&&(this.video.currentTime>86400&&null==this.seekingTargetTs?this.media.mediaPlaybackInfo.currentTime=this.video.currentTime:this.seekingTargetTs>0?this.media.mediaPlaybackInfo.currentTime=this.seekingTargetTs:this.media.mediaPlaybackInfo.currentTime=this.dvrWindowRelativeTimeToTs(this.currentTime)),this.media.mediaPlaybackInfo.isPlaying=!this.video.paused,this.media.mediaPlaybackInfo.currentTotalBitrateKpbs=this.getCurrentTotalBitrateKbps(),this.media.mediaPlaybackInfo.playbackRate=this.getPlaybackRate(),this.playbackRateMetter.setCurrentTime(this.media.mediaPlaybackInfo.currentTime,null,this.video.paused),e){let e=this.media,t=this.getDVRWindowRange();t.end<t.start&&(t=this.getSeekableRange(),this.media.mediaPlaybackInfo.currentTime=this.video.currentTime),e.dvrWindowLength=t.end-t.start,e.dvrWindowLiveEdge=t.end;}}}dispatchEvent(e,t){let i=0,s=null,a=this.currentTime;null!=this.video&&(i=this.video.duration,s=this.video.currentSrc,!isNaN(i)&&null!=i||null==this.media||(i=this.media.duration),this.updateMediaPlaybackInfo(),null!=this.media&&this.hasAudioInitialized&&this.media instanceof u&&(i=this.media.dvrWindowLength,null!=this.dvrWindowStartTimeTs&&null!=this.dvrWindowEndTimeTs&&(i=this.dvrWindowEndTimeTs-this.dvrWindowStartTimeTs))),this.isInStreamAdvertisement&&this.inStreamAdvertStartPos>=0&&(a=this.video.currentTime-this.inStreamAdvertStartPos,null!=this.inStreamAdvertMedia&&(i=this.inStreamAdvertMedia.duration),a>i&&(a=i),0==this.video.currentTime&&a<0&&(a=i,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.currentTime=this.inStreamAdvertStartPos+i)),a<0&&this.currentTime-this.inStreamAdvertStartPos>=0&&(a=this.currentTime-this.inStreamAdvertStartPos)),null!=this.media&&null!=this.media.mediaPlaybackInfo&&this.scte35PendingEvents.length>0&&this.processPendingScte35Events(),e.data={duration:i,currentTime:a,source:s,media:this.media,additionalData:t},this.isPlaybackNotAllowed&&(null==e.data.additionalData&&(e.data.additionalData={}),e.data.additionalData.isPlaybackNotAllowed=!0);let r=this.getThroughput();null!=r&&(null==e.data.additionalData&&(e.data.additionalData={}),e.data.additionalData.throughput=r),e.dispatch(this.context);}attachSubtitlesRenderer(e){this.subtitlesRenderer=e;}attachVideo(e){if(this.video==e&&!this.hasProtectionData)return;null==this.playerWrapper&&(this.playerWrapper=new T),this.cleanPlayer(),Object.prototype.hasOwnProperty.call(this.variables,"qualitySelectionEnabled")&&(this.isQualitySelectionEnabled=i.field(this.variables,"qualitySelectionEnabled")),this.video=e,null!=this.video&&1==this.video.muted&&1!=this.initialVideoIsMuted&&(this.initialVideoIsMuted=!0);let t={streaming:{fastSwitchEnabled:!b.isSmartTV(),lowLatencyEnabled:!1,lastMediaSettingsCachingInfo:{enabled:!1}}};Object.prototype.hasOwnProperty.call(this.variables,"saveBandwidthMode")&&I.__cast(this.variables.saveBandwidthMode,M)&&(t.streaming.abr={limitBitrateByPortal:!0,usePixelRatioInLimitBitrateByPortal:!0});let s=this.getQualityInitialBandwidthKbs();null!=s&&!isNaN(s)&&isFinite(s)&&(t.streaming.abr={initialBitrate:{video:s}}),this.player=this.playerWrapper.getMediaPlayer(),Object.prototype.hasOwnProperty.call(this.variables,"system73")&&0==this.videoRestartsOnError&&window.BigInt&&window.S73DashjsWrapper&&!this.isAdvertisement&&(this.s73Wrapper=S73DashjsWrapper(i.field(this.variables,"system73"),{dashjs:window.bradmax.dashjs}),this.s73Wrapper.wrapPlayer(this.player));let a=this;if(this.player.extend("RequestModifier",(function(){return {modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return Object.prototype.hasOwnProperty.call(e,"addEventListener")&&i.isFunction(A(e,e.addEventListener))&&e.addEventListener("progress",(function(e){a.emitNetworkActivity(e);})),e}}}),!1),this.player.initialize(e),this.initSubtitlesPlaceholder(),this.player.updateSettings(t),Object.prototype.hasOwnProperty.call(this.pluginConfig,"dashSettings")&&null!=i.field(this.pluginConfig,"dashSettings")){let e=i.field(this.pluginConfig,"dashSettings");try{if(null!=i.field(e,"lowEndDevicesSettings")){let t=i.field(e,"lowEndDevicesSettings");if(i.deleteField(e,"lowEndDevicesSettings"),t.enableForJsHeapSizeLowerThan>0){window.performance.memory.jsHeapSizeLimit<t.enableForJsHeapSizeLowerThan&&null!=t.settings&&(e=t.settings);}}}catch(e){let t=_.caught(e).unwrap();console.error(t);}this.player.updateSettings(e);}this.updateAutoSwitchQuality(!0),this.player.setProtectionData(null),this.player.on("metricAdded",A(this,this.onDashJsMetricAdded)),this.player.on("qualityChangeRequested",A(this,this.onDashJsQualityChangeRequested)),this.player.on("public_keySessionCreated",A(this,this.onDashJsKeySessionCreated)),this.player.on("error",A(this,this.onDashJsError)),this.player.on("playbackStarted",A(this,this.onDashJsPlaybackStarted)),this.player.on("playbackNotAllowed",A(this,this.onDashJsPlaybackNotAllowed)),this.player.on("public_licenseRequestComplete",A(this,this.onDashJsLicenseRequestComplete)),this.player.on("inbandEvents",A(this,this.onScte35InbandEvents)),this.player.on("gapCausedInternalSeek",A(this,this.onSeekingOverVideoGap)),this.player.on("gapCausedSeekToPeriodEnd",A(this,this.onSeekingOverVideoGap)),this.video.addEventListener("pause",A(this,this.onDashJsPause)),this.video.addEventListener("play",A(this,this.onDashJsPlay)),this.video.addEventListener("playing",A(this,this.onDashJsPlaying)),this.video.addEventListener("timeupdate",A(this,this.onDashJsTimeupdate)),this.video.addEventListener("durationchange",A(this,this.onDashJsDurationchange)),this.video.addEventListener("waiting",A(this,this.onDashJsWaiting)),this.video.addEventListener("ended",A(this,this.onDashJsEnded)),this.video.addEventListener("seeked",A(this,this.onDashJsSeeked)),null!=this.video.textTracks&&this.video.textTracks.addEventListener("addtrack",A(this,this.onAddTrack)),this.video.addEventListener("ratechange",A(this,this.onVideoRateChange)),this.checkPlaybackRate(),this.triggerVideoPlaybackRateEvent();}setPlaybackRate(e){this.isAdvertisement||(this.playbackRate=e,this.checkPlaybackRate());}getPlaybackRate(){return null==this.player?1:this.player.getPlaybackRate()}onVideoRateChange(e){this.triggerVideoPlaybackRateEvent();}triggerVideoPlaybackRateEvent(){if(this.isAdvertisement)return;let e=new o("playbackRate");e.data=this.getPlaybackRate(),e.dispatch(this.context);}checkPlaybackRate(){let e;if(this.isAdvertisement)e=!0;else {let t=this.playbackRate;e=isNaN(t);}e||this.getPlaybackRate()==this.playbackRate||this.player.setPlaybackRate(this.playbackRate);}emitNetworkActivity(e){let t=new o("networkActivityUrl");t.data={url:i.field(e.target,"responseURL"),loaded:e.loaded},t.dispatch(this.context);}cleanPlayer(){if(null!=this.s73Wrapper){try{this.s73Wrapper.destroy();}catch(e){}this.s73Wrapper=null;}null!=this.video&&(this.video.removeEventListener("pause",A(this,this.onDashJsPause)),this.video.removeEventListener("play",A(this,this.onDashJsPlay)),this.video.removeEventListener("playing",A(this,this.onDashJsPlaying)),this.video.removeEventListener("timeupdate",A(this,this.onDashJsTimeupdate)),this.video.removeEventListener("durationchange",A(this,this.onDashJsDurationchange)),this.video.removeEventListener("waiting",A(this,this.onDashJsWaiting)),this.video.removeEventListener("ended",A(this,this.onDashJsEnded)),this.video.removeEventListener("seeked",A(this,this.onDashJsSeeked)),null!=this.video.textTracks&&this.video.textTracks.removeEventListener("addtrack",A(this,this.onAddTrack)),this.video.removeEventListener("ratechange",A(this,this.onVideoRateChange))),null!=this.player&&(this.player.off("metricAdded",A(this,this.onDashJsMetricAdded)),this.player.off("qualityChangeRequested",A(this,this.onDashJsQualityChangeRequested)),this.player.off("public_keySessionCreated",A(this,this.onDashJsKeySessionCreated)),this.player.off("error",A(this,this.onDashJsError)),this.player.off("playbackStarted",A(this,this.onDashJsPlaybackStarted)),this.player.off("playbackNotAllowed",A(this,this.onDashJsPlaybackNotAllowed)),this.player.off("public_licenseRequestComplete",A(this,this.onDashJsLicenseRequestComplete)),this.player.off("inbandEvents",A(this,this.onScte35InbandEvents)),this.player.off("gapCausedInternalSeek",A(this,this.onSeekingOverVideoGap)),this.player.off("gapCausedSeekToPeriodEnd",A(this,this.onSeekingOverVideoGap)),this.reset(),this.player=null,this.video=null);}isPaused(){return null==this.video||this.video.paused}onDashJsPause(e){return null==this.seekDebouncerTimer&&this.dispatchEvent(this.isAdvertisement?new r("adPaused"):new o("paused")),this.media instanceof u||null==this.video||this.video.currentTime>0&&Math.abs(this.video.currentTime-this.video.duration)<.5&&(this.streamCompleteWatchdogTimer=E.delay(A(this,this.onStreamCompleteWatchdogTimeout),1e3)),null}onDashJsPlay(e){return this.isFirefoxStillDecodingAfterBuffering()||(this.checkPlaybackRate(),this.dispatchEvent(this.isAdvertisement?new r("adPlaying"):new o("playing"))),null}isFirefoxStillDecodingAfterBuffering(){return "Firefox"==b.browserName&&null!=this.video&&0==this.video.playbackRate}onDashJsPlaying(e){this.hasSeekingStartTriggeded&&this.onDashJsSeeked({dashFakeEventFix:!0});let t=b.isSmartTV()&&!this.playbackRateMetter.isPlayingNormal(!0);return this.isFirefoxStillDecodingAfterBuffering()||t?(this.firefoxDrmDecodeLagTimerTs=this.getNowTs(),this.shouldBufferingBeVisible()&&(this.dispatchEvent(new o("bufferingStart")),this.isBuffering=!0)):(null!=this.firefoxDrmDecodeLagTimerTs&&(this.firefoxDrmDecodeLag=this.getNowTs()-this.firefoxDrmDecodeLagTimerTs,this.firefoxDrmDecodeLagTimerTs=null),this.dispatchEvent(this.isAdvertisement?new r("adPlaying"):new o("playing"))),this.initializePlaybackStartTimeIfNeeded(),this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopStreamBufferingWatchdogTimer(),!this.isFirefoxStillDecodingAfterBuffering()&&this.isBuffering&&!t&&null!=this.video&&(this.video.playbackRate>0||null==this.video.playbackRate)&&(this.dispatchEvent(new o("bufferingEnd")),this.isBuffering=!1),null}initializePlaybackStartTimeIfNeeded(){if(0==this.startTimeStatus&&null!=this.video){let e=this.media instanceof u?4:1;if(b.isSmartTV()&&!b.isSamsungSmartTVTizen&&(e=4),this.video.readyState>=e){this.startTimeStatus=1,this.onDashJsDurationchange({});let e=this.getPlaybackStartTime(this.media),t=e;e>0&&this.hasDashJsInitializedSource?(this.media instanceof u&&(e=this.normalizeDvrTime(e),t=this.dvrTimestampToRelativeTime(e),t<=this.getLiveMinimalInitialOffsetForOldestPart()&&(t="Firefox"==b.browserName&&null!=this.firefoxDrmDecodeLag?1.25*this.firefoxDrmDecodeLag+this.getLiveMinimalInitialOffsetForOldestPart():this.getLiveMinimalInitialOffsetForOldestPart(),e=this.dvrWindowRelativeTimeToTs(t))),t<this.video.duration?(this.currentTime=t,this.updateMediaPlaybackInfo(),this.performPlayerSeek(e,!1)):(this.startTimeStatus=2,this.onStartTimeInitFinalized(),console.warn("Warning: Start time is ignored. Start time for video got invalid value (startTime: "+e+", duration:"+this.video.duration+")."))):(this.startTimeStatus=2,this.onStartTimeInitFinalized());}}if(null!=this.prePlaybackSeekRelativePosition&&this.video.readyState>=1){let e=this.prePlaybackSeekRelativePosition;this.prePlaybackSeekRelativePosition=null,this.video.duration>0&&Math.abs(this.video.duration-this.media.duration)>2&&(this.seek(e*this.video.duration),this.pause());}}onStartTimeInitFinalized(){this.media instanceof u&&null!=this.video&&!this.video.paused&&!this.shouldBePlaying&&this.player.pause();}onDashJsTimeupdate(e){let t=this.media instanceof u,i=null!=this.dvrWindowStartTimeTs||null!=this.dvrWindowEndTimeTs,s=this.getNowTs();if(this.playbackRateMetter.isPlayingNormal()&&this.lastRestartTs>0&&s-this.lastRestartTs>30&&(this.videoRestartsOnError=0),this.stopDrmLiceseCheckCleanupTimer(),this.stopStreamBufferingWatchdogTimer(),b.isSamsungSmartTVTizen&&this.initializePlaybackStartTimeIfNeeded(),!this.hasPlaybackSuccStarted&&null!=this.video&&this.video.readyState>=4&&this.currentTime>0&&(this.hasPlaybackSuccStarted=!0,this.selectAudioAndSubtitlesAfterInitialization()),t&&!i&&null==this.liveStreamNowOffset){let e=this.getDVRWindowRange();null==e||e.end<=0||(this.liveStreamNowOffset=s-e.end,null==this.dvrWindowStartTimeTs&&null==this.dvrWindowEndTimeTs&&0<this.liveStreamNowOffset&&this.liveStreamNowOffset<.025*(e.end-e.start)&&(this.liveStreamNowOffset=0),this.liveStreamNowOffsetLastUpdate=s);}if(t&&i&&s-this.liveStreamNowOffsetLastUpdate>1){let e=this.getDVRWindowRange();null==e||e.end<=0||(this.liveStreamNowOffset=s-e.end,null==this.dvrWindowStartTimeTs&&null==this.dvrWindowEndTimeTs&&0<this.liveStreamNowOffset&&this.liveStreamNowOffset<.025*(e.end-e.start)&&(this.liveStreamNowOffset=0),this.liveStreamNowOffsetLastUpdate=s);}if(t&&null==this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer=new E(1e3),this.liveEdgeUpdateTimer.run=A(this,this.onLiveEdgeUpdate),this.seekableInitialRange=this.getSeekableRange()),!this.isPlaybackNotAllowed||this.isBuffering||null==this.video||this.video.paused||this.video.seeking||(this.isPlaybackNotAllowed=!1),2==this.startTimeStatus&&this.video.playbackRate>0&&1==this.hideVideoTag){this.hideVideoTag=!1,null!=this.video&&(this.video.style.display="block",this.video.style.opacity="1",this.video.style.visibility="visible");let e=!1,t=this.video.paused;try{this.video.muted=this.initialVideoIsMuted;let i=!this.initialVideoIsMuted&&this.video.muted!=this.initialVideoIsMuted,s=!t&&this.video.paused;e=i||s;}catch(t){e=!0;}e&&this.onDashJsPlaybackNotAllowed({});}if(this.video.currentTime<=.1||null==this.video.currentTime){if(this.lastGapEnd>0&&Math.abs(this.currentTime-this.lastGapEnd)<3)return null;let e=!1;try{let t=0,i=this.video.buffered.length;for(;t<i;){let i=t++;this.video.buffered.start(i)<=0&&0<=this.video.buffered.end(i)&&(e=!0);}}catch(e){}if(!e)return null}if(null==this.seekDebouncerTimer){let e=this.video.currentTime;if(t&&(e=this.dvrWindowRelativeTimeFromTs(e)),null!=this.seekingTargetPos&&this.video.currentTime<this.seekingTargetPos&&this.seekingTargetPos-10<this.video.currentTime)return null;if(null!=this.currentTime&&null!=e&&e<this.currentTime&&e<=.1)return null;this.seekingTargetPos=null,this.currentTime=e,this.updateMediaPlaybackInfo();}return 2==this.startTimeStatus&&this.dispatchEvent(this.isAdvertisement?new r("adCurrentTimeChange"):new o("currentTimeChange")),this.isBuffering&&null!=this.video&&!this.video.paused&&!this.video.seeking&&this.video.readyState>=4&&this.playbackRateMetter.isPlayingNormal()&&(this.video.playbackRate>0||null==this.video.playbackRate)&&(this.dispatchEvent(new o("bufferingEnd")),this.isBuffering=!1),t&&null!=this.dvrWindowEndTimeTs&&2==this.startTimeStatus&&this.media.mediaPlaybackInfo.currentTime>this.dvrWindowEndTimeTs&&(new n("skinPause").dispatch(this.context),this.stopStreamCompleteWatchdogTimer(),this.dispatchEvent(this.isAdvertisement?new r("adComplete"):new o("complete"))),null}processPendingScte35Events(){let e=0,t=0,i=this.scte35PendingEvents;for(;t<i.length;){let s=i[t];if(++t,s.calculatedPresentationTime<=this.media.mediaPlaybackInfo.currentTime){let t=new l("scte35Tag");t.data=s,t.dispatch(this.context),++e;}}if(e>0){let e=[],t=0,i=this.scte35PendingEvents;for(;t<i.length;){let s=i[t];++t,s.calculatedPresentationTime>this.media.mediaPlaybackInfo.currentTime&&e.push(s);}this.scte35PendingEvents=e;}}updateLastStreamNowOffsetParam(e){let t=this.getDVRWindowRange();null==t||t.end<=0||(this.liveStreamNowOffset=e-t.end,null==this.dvrWindowStartTimeTs&&null==this.dvrWindowEndTimeTs&&0<this.liveStreamNowOffset&&this.liveStreamNowOffset<.025*(t.end-t.start)&&(this.liveStreamNowOffset=0),this.liveStreamNowOffsetLastUpdate=e);}onDashJsDurationchange(e){if(this.initializePlaybackStartTimeIfNeeded(),this.media instanceof d&&!(this.media instanceof u)&&this.video.duration==1/0){let e=new u,t=a.getInstanceFields(d),s=0;for(;s<t.length;){let a=t[s];++s,e[a]=i.field(this.media,a);}this.media=e;let r=new l("mediaAfterPlaybackStartMetadata");r.data=e,r.dispatch(this.context);}if(this.media instanceof u&&this.video.duration!=1/0&&this.video.duration>0){let e=new d,t=a.getInstanceFields(d),s=0;for(;s<t.length;){let a=t[s];++s,e[a]=i.field(this.media,a);}this.media=e;let r=new l("mediaAfterPlaybackStartMetadata");r.data=this.media,r.dispatch(this.context);}return this.media.duration=this.video.duration,this.dispatchEvent(this.isAdvertisement?new r("adDurationChange"):new o("durationChange")),null}onDashJsWaiting(e){return this.androidVideoBufferFix(),this.shouldBufferingBeVisible()&&(this.dispatchEvent(new o("bufferingStart")),this.isBuffering=!0),this.stopStreamBufferingWatchdogTimer(),this.streamBufferingWatchdogTimer=E.delay(A(this,this.onStreamBufferingWatchdogTimeout),22e3),null}androidVideoBufferFix(){b.isAndroid&&"Chrome"==b.browserName&&null!=this.video&&(this.video.style.transform="rotate(0.1deg)");}shouldBufferingBeVisible(){let e=null!=this.getAdsInStreamMaxQualityScalingRatio(),t=!1;try{if(e&&null!=this.player&&null!=this.player.getActiveStream()&&null!=this.video){let e=this.player.getActiveStream().getProcessors(),i=0;for(;i<e.length;){let s=e[i++].getBuffer().getBuffer().buffered;if(null==s)continue;let a=0,r=s.length;for(;a<r;)Math.abs(this.video.currentTime-s.end(a++))<.5&&(t=!0);}null!=this.lastGapEnd&&Math.abs(this.video.currentTime-this.lastGapEnd)<.5&&(t=!0);}}catch(e){}return !this.isInStreamAdvertisement&&!t||!e}onAddTrack(e){let t=this.isAdvertisement?new r("addTrack"):new o("addTrack");t.data={track:e},t.dispatch(this.context);}onScte35InbandEvents(e){if(null!=e&&null!=e.events&&e.events.length>0){let t=e.events,i=0;for(;i<t.length;){let e=t[i];++i,e.calculatedPresentationTime>0&&this.scte35PendingEvents.push(e);}}}onSeekingOverVideoGap(e){if(null!=e&&e.seekTime>0&&(this.lastGapEnd=e.seekTime),this.seekingOverVideoGapMeter.add(),this.seekingOverVideoGapMeter.getLoad()>4){let e=this.currentTime+3;this.media.duration>0&&!(this.media instanceof u)||(this.player.pause(),this.handleVideoRestart()),this.seek(e);}if(null!=e&&e.duration>10){let e=this.currentTime+1;this.player.pause(),this.media.mediaUserSettings.resumePostion=e,this.handleVideoRestart();}}onDashJsEnded(e){return this.stopStreamCompleteWatchdogTimer(),this.dispatchEvent(this.isAdvertisement?new r("adComplete"):new o("complete")),null}onDashJsSeeked(e){this.androidVideoBufferFix(),this.hasSeekingStartTriggeded=!1,1==this.startTimeStatus&&(this.startTimeStatus=2,this.onStartTimeInitFinalized(),this.shouldBePlaying&&this.play());let t=0;if(null!=this.seekingStartDate&&(t=((new Date).getTime()-this.seekingStartDate.getTime())/1e3,this.seekingAvgTime<t?this.seekingAvgTime=t:this.seekingAvgTime=.5*this.seekingAvgTime+.5*t),this.media instanceof u){let e=this.getDVRWindowRange(),t=this.getSeekableRange();if(null!=this.seekableInitialRange&&Math.abs(this.seekableInitialRange.start-t.start)>1&&!this.isDVRRecordedForStartOver(t)&&this.video.currentTime<e.start)return this.seek(3*this.getLiveMinimalInitialOffsetForOldestPart()),null}return this.dispatchEvent(this.isAdvertisement?new r("seekingEnd"):new o("seekingEnd"),Object.prototype.hasOwnProperty.call(e,"dashFakeEventFix")?{dashFakeEventFix:!0}:null),this.stopStreamBufferingWatchdogTimer(),this.seekingTargetTs=null,!this.shouldBePlaying&&this.isBuffering&&(this.dispatchEvent(new o("bufferingEnd")),this.isBuffering=!1,this.dispatchEvent(this.isAdvertisement?new r("adPaused"):new o("paused"))),null}getLiveMinimalInitialOffsetForOldestPart(){return null!=this.dvrWindowStartTimeTs?0:1.5*this.seekingAvgTime}onDashJsPlaybackStarted(e){return this.shouldBePlaying||this.pause(),null}onDashJsPlaybackNotAllowed(e){return this.log("BRADMAX PLAYER NOTICE:\nBrowser doesn't allow for autoplaying video without user interaction.\nPlayer is waiting for user 'play' click. You can autoplay muted video (mute=true).\n\nMode details about browser autoplay policy: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes","warn"),this.isPlaybackNotAllowed=!0,null!=this.player&&this.player.pause(),this.dispatchEvent(this.isAdvertisement?new r("adCurrentTimeChange"):new o("currentTimeChange")),this.dispatchEvent(this.isAdvertisement?new r("adPaused"):new o("paused")),this.shouldBePlaying=!1,null}onDashJsError(e){if(this.isAdvertisement&&!this.isInStreamAdvertisement)return this.dispatchEvent(new r("adMediaError"),this.prepareErrorMessage(e)),null;if(!(null==e||null!=e.data||null!=this.video.getAttribute("src")&&""!=this.video.getAttribute("src")||this.hasProtectionData||this.isNetworkConnectionProblem(e)))return null;if(null!=this.video&&(this.hideVideoTag=!1,null!=this.video&&(this.video.style.display="block",this.video.style.opacity="1",this.video.style.visibility="visible"),this.video.muted=this.initialVideoIsMuted),null!=e&&null!=e.error&&null!=e.error.message){let t="bradmax.player.error: "+s.string(e.error.message);console.error(t),console.error(e);}let t=!0,i=this.media instanceof u,a=b.isAndroid&&"Chrome"==b.browserName&&null!=e&&null!=e.error&&(112==e.error.code||113==e.error.code)&&"MediaKeys"in window||"WebKitMediaKeys"in window||"MSMediaKeys"in window&&null!=this.media&&null!=this.media.drmCustomLicenseServerHandler,n=null!=e&&null!=e.error&&null!=e.error.message&&-1!=e.error.message.indexOf("DRM err"),l=i&&this.media.hasFallbackSources(),h=!a&&(!n||b.isSamsungSmartTVTizen)&&!l&&(i||Object.prototype.hasOwnProperty.call(this.media.customParams.h,"maxRestartsNumOnPlaybackError")),d=this;if(h&&this.videoRestartsOnError<this.getLimitOfRestarts()){t=!1;let s=i?5e3:0;this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopDrmLiceseCheckCleanupTimer(),this.stopStreamCompleteWatchdogTimer(),this.stopStreamBufferingWatchdogTimer(),this.liveStreamRestartDelayTimer=E.delay((function(){i||null==d.media||null==d.media.mediaUserSettings||(d.media.mediaUserSettings.resumePostion=d.currentTime),d.handleVideoRestart();let t={dashError:e.data,currTry:d.videoRestartsOnError};d.dispatchEvent(d.isAdvertisement?new r("adMediaErrorFallbackTry"):new o("mediaErrorFallbackTry"),t);}),s);}if(t)if(this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopDrmLiceseCheckCleanupTimer(),this.stopStreamCompleteWatchdogTimer(),this.stopStreamBufferingWatchdogTimer(),a)this.dispatchEvent(new o("drmModuleCrush"),this.prepareErrorMessage(e)),this.reset();else if(null!=this.media&&null!=this.media.drmCustomLicenseServerHandler&&null!=this.media.drmCustomLicenseServerHandler.getLastError())this.dispatchEvent(new o("drmAuthenticationError"),this.prepareErrorMessage(this.media.drmCustomLicenseServerHandler.getLastError())),this.reset();else if(n)if(l){let t=this.prepareErrorMessage(e);t.isTemporaryNetworkIssue=!0,this.dispatchEvent(this.isAdvertisement?new r("adMediaError"):new o("loadError"),t),this.reset();}else this.dispatchEvent(new o("drmAuthenticationError"),this.prepareErrorMessage(e)),this.reset();else if(this.isNetworkConnectionProblem(e))if(this.hasPlaybackSuccStarted){this.dispatchEvent(this.isAdvertisement?new r("adConnectionError"):new o("connectionError"),this.prepareErrorMessage(e));try{null!=this.player&&this.player.pause();}catch(e){}}else {let t=this.prepareErrorMessage(e);t.isTemporaryNetworkIssue=!1,this.dispatchEvent(this.isAdvertisement?new r("adMediaError"):new o("loadError"),t),this.reset();}else this.dispatchEvent(this.isAdvertisement?new r("adMediaError"):new o("mediaError"),this.prepareErrorMessage(e)),this.reset();return null}prepareErrorMessage(e){let t=this.isNetworkConnectionProblem(e)&&(this.media instanceof c||this.video.currentTime>0||null!=e&&null!=e.error&&null!=e.error.data&&null!=e.error.data.response&&e.error.data.response.status>=500||null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0),i="";return null!=e&&null!=e.error&&null!=e.error.message&&(i=""+s.string(e.error.message)),{errObj:e,isTemporaryNetworkIssue:t,message:i}}isNetworkConnectionProblem(e){return null!=e&&null!=e.error&&25<=e.error.code&&e.error.code<=29}handleVideoRestart(){this.videoRestartsOnError++,this.lastRestartTs=this.getNowTs(),null!=this.media&&null!=this.media.drmCustomLicenseServerHandler&&this.media.drmCustomLicenseServerHandler.clearCertCache(),this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopStreamBufferingWatchdogTimer(),this.playbackRateMetter.reset(),this.startTimeStatus=0;let e=this.video;this.cleanVideoAndPlayer(),this.attachVideo(e),null!=this.subtitlesSelected&&(this.subtitlesSetWaitingForSelection=this.subtitlesSelected),this.play(),this.media instanceof u&&(this.liveStreamRestartTimeoutTimer=E.delay(A(this,this.onDashJsLivestreamRestartTimeout),5e3*(1+(this.videoRestartsOnError-1)/4)|0));}onDashJsLivestreamRestartTimeout(){this.videoRestartsOnError<this.getLimitOfRestarts()?this.handleVideoRestart():this.dispatchEvent(this.isAdvertisement?new r("adConnectionError"):new o("connectionError"),{message:"Livestream restart all tries failed.",isTemporaryNetworkIssue:!0});}getLimitOfRestarts(){return null!=this.media&&null!=this.media.drmCustomLicenseServerHandler&&null!=this.media.drmCustomLicenseServerHandler.getLastError()?1:null!=this.media&&null!=this.media.customParams&&Object.prototype.hasOwnProperty.call(this.media.customParams.h,"maxRestartsNumOnPlaybackError")&&this.media.customParams.h.maxRestartsNumOnPlaybackError>0?this.media.customParams.h.maxRestartsNumOnPlaybackError:5}onDashJsMetricAdded(e){if(null!=e&&null!=e.metric){if("ManifestUpdate"==e.metric&&(this.hasDashJsInitializedManifest=!0),!this.hasAudioInitialized&&this.hasDashJsInitializedManifest&&"SchedulingInfo"==e.metric){let e=this.player.getTracksFor("video"),t=this.player.getTracksFor("audio");null!=e&&e.length>0&&null!=t&&t.length>0&&(this.hasAudioInitialized=!0,this.updateAudioSets());}if(!this.hasSubtitlesInitialized&&null!=this.video.textTracks&&this.video.textTracks.length>0&&(this.hasSubtitlesInitialized=!0,this.updateSubtitlesSets()),!this.hasCodecInfoInitialized&&"RepSwitchList"==e.metric){let e=this.player.getCurrentTrackFor("video"),t=this.player.getCurrentTrackFor("audio");if(null!=e&&Object.prototype.hasOwnProperty.call(e,"codec")&&null!=t&&Object.prototype.hasOwnProperty.call(t,"codec")){let i=new l("codecData"),s=function(e){let t=e.split(";"),i=0;for(;i<t.length;){let e=t[i];if(++i,0==e.indexOf("codecs")){let t=e.split("=");if(t.length>0)return t[1].split('"').join("")}}return ""};i.data={videoCodec:s(e.codec),audioCodec:s(t.codec)},i.dispatch(this.context),this.hasCodecInfoInitialized=!0;}}if(this.isQualitySelectionEnabled&&!this.hasQualityInfoInitialized&&"RepSwitchList"==e.metric){let e=this.player.getBitrateInfoListFor("video");if(null!=e&&e.length>1){this.hasQualityInfoInitialized=!0;let e=new l("videoQualityData");e.data=this.getQualityLevels(),e.dispatch(this.context);let t=this.player.getQualityFor("video");if(null!=t){let e=new l("videoQualityPlaybackLevelChange");e.data=t,e.dispatch(this.context);}let i=new n("videoQualityHasChanged"),s=this.getQualityInitialBandwidthKbs();null!=s&&!isNaN(s)&&isFinite(s)?i.data=t:i.data="-1",i.dispatch(this.context);}}}return null}onDashJsQualityChangeRequested(e){if(this.hasQualityInfoInitialized&&null!=e&&"video"==e.mediaType&&null!=e.newQuality){let t=new l("videoQualityPlaybackLevelChange");t.data=e.newQuality,t.dispatch(this.context);}return null}onDashJsLicenseRequestComplete(e){this.stopDrmLiceseCheckCleanupTimer(),this.drmLicenseCheckStatus=1,this.shouldBePlaying&&this.startDrmLiceseCheckCleanupTimer();}startDrmLiceseCheckCleanupTimer(){this.stopDrmLiceseCheckCleanupTimer();let e=2e4;Object.prototype.hasOwnProperty.call(this.pluginConfig,"DRM_LICENSE_CHECK_MECHANISM_TIMEOUT")&&null!=i.field(this.pluginConfig,"DRM_LICENSE_CHECK_MECHANISM_TIMEOUT")&&(e=i.field(this.pluginConfig,"DRM_LICENSE_CHECK_MECHANISM_TIMEOUT")),this.drmLicenseCheckMechanismTimeoutTimer=E.delay(A(this,this.onDashJsLicenseKeyCheckTimeout),e);}stopDrmLiceseCheckCleanupTimer(){1==this.drmLicenseCheckStatus&&this.hasPlaybackSuccStarted&&(this.drmLicenseCheckStatus=2),null!=this.drmLicenseCheckMechanismTimeoutTimer&&(this.drmLicenseCheckMechanismTimeoutTimer.stop(),this.drmLicenseCheckMechanismTimeoutTimer=null);}stopLiveStreamRestartTimeoutTimer(){null!=this.liveStreamRestartTimeoutTimer&&(this.liveStreamRestartTimeoutTimer.stop(),this.liveStreamRestartTimeoutTimer=null);}stopStreamCompleteWatchdogTimer(){null!=this.streamCompleteWatchdogTimer&&(this.streamCompleteWatchdogTimer.stop(),this.streamCompleteWatchdogTimer=null);}onStreamCompleteWatchdogTimeout(){this.stopStreamCompleteWatchdogTimer(),this.dispatchEvent(this.isAdvertisement?new r("adComplete"):new o("complete"));}stopStreamBufferingWatchdogTimer(){null!=this.streamBufferingWatchdogTimer&&(this.streamBufferingWatchdogTimer.stop(),this.streamBufferingWatchdogTimer=null);}onStreamBufferingWatchdogTimeout(){this.stopStreamBufferingWatchdogTimer(),null!=this.media&&null!=this.media.mediaUserSettings&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaUserSettings.resumePostion=this.media.mediaPlaybackInfo.currentTime+.1),this.handleVideoRestart();}stopLiveStreamRestartDelayTimer(){null!=this.liveStreamRestartDelayTimer&&(this.liveStreamRestartDelayTimer.stop(),this.liveStreamRestartDelayTimer=null);}stopLiveEdgeUpdateTimer(){null!=this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer.stop(),this.liveEdgeUpdateTimer=null);}onLiveEdgeUpdate(){null!=this.player&&this.hasDashJsInitializedSource&&!this.shouldBePlaying&&this.onDashJsTimeupdate({});}onDashJsLicenseKeyCheckTimeout(){this.stopDrmLiceseCheckCleanupTimer(),this.onDashJsError({data:{message:"DRM error. Cannot decode video with provided license key. License key is invalid."},error:{message:"DRM error. Cannot decode video with provided license key. License key is invalid."}});}getQualityLevels(){let e="resolution";Object.prototype.hasOwnProperty.call(this.variables,"qualityLabelType")&&(e=i.field(this.variables,"qualityLabelType"),e=e.toLowerCase());let t=this.player.getBitrateInfoListFor("video");if(null==t&&(t=[]),"resolution"==e){let i=0;for(;i<t.length;){let s=t[i];if(++i,0==s.width||0==s.height){e="bitrate";break}}}let a=[];a.push(new g("Auto","-1"));let r=0,n=t.length;for(;r<n;){let i=r++,n=new g("resolution"==e?s.string(t[i].height)+"p":this.mapBitrateToLabel(t[i].bitrate),null==i?"null":""+i);n.height=t[i].height,n.width=t[i].width,n.bitrateKbps=t[i].bitrate>0?t[i].bitrate/1e3:null,a.push(n);}return a.reverse(),a}mapBitrateToLabel(e){return Math.floor(e/1e3)+"k"}getCurrentTotalBitrateKbps(){if(null==this.player)return null;try{let e=this.player.getQualityFor("video"),t=this.player.getBitrateInfoListFor("video"),i=this.player.getQualityFor("audio"),s=this.player.getBitrateInfoListFor("audio");if(null==t||null==s||null==e||null==i||e<0||t.length<=e||i<0||s.length<=i)return null;let a=t[e].bitrate+s[i].bitrate;return a=Math.round(a/1e3),a}catch(e){return null}}getQualityInitialBandwidthKbs(){if(Object.prototype.hasOwnProperty.call(this.variables,"qualityInitialBandwidthKbs")){let e=i.field(this.variables,"qualityInitialBandwidthKbs");if(null!=e)return s.parseInt(e)}return null}isAutoSwitchQualityEnabled(){if(null==this.player.getSettings()||null==this.player.getSettings().streaming)return !1;let e=this.player.getSettings().streaming.abr;return null!=e&&null!=e.autoSwitchBitrate&&null!=e.autoSwitchBitrate.video&&1==e.autoSwitchBitrate.video}updateAutoSwitchQuality(e){let t=this.player.getSettings();t.streaming.abr.autoSwitchBitrate={video:e,audio:e},this.player.updateSettings(t);}onVideoQualityChange(e){if(null==e||null==e.data||"string"!=typeof e.data||null==this.player)return;let t=e.data,i="-1";if(this.isAutoSwitchQualityEnabled()||(i=s.string(this.player.getQualityFor("video"))),t==i)return;let a="-1"==t;if(a)this.updateAutoSwitchQuality(!0);else {let e=s.parseInt(t);this.updateAutoSwitchQuality(!1),this.player.setQualityFor("video",e);let i=this.player.getBitrateInfoListFor("video"),a=this.player.getBitrateInfoListFor("audio");null!=i&&null!=a&&a.length>1&&i.length>0&&this.player.setQualityFor("audio",Math.floor(a.length*e/i.length));}if(Object.prototype.hasOwnProperty.call(this.variables,"saveBandwidthMode")&&I.__cast(this.variables.saveBandwidthMode,M)){let e=this.player.getSettings();e.streaming.abr.limitBitrateByPortal=a,e.streaming.abr.usePixelRatioInLimitBitrateByPortal=a,this.player.updateSettings(e);}let r=new n("videoQualityHasChanged");r.data=t,r.dispatch(this.context);}onDashJsKeySessionCreated(e){return new o("drmAuthenticationComplete").dispatch(this.context),null}updateSubtitlesSets(){if(null!=this.video.textTracks&&this.video.textTracks.length>0){let e=[],t=0,i=this.video.textTracks;for(;t<i.length;){let s=i[t];if(++t,null==s.language||""==s.language)continue;let a=new m;a.id=null==e.length?"null":""+e.length,a.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(s.language)),null!=a.name&&""!=a.name||(a.name=s.language),a.languageCode=s.language,e.push(a);}if(null!=this.variables.subtitles&&e.length>0&&h.preselectSubtitlesSet(this.variables.subtitles,e),e.length>0){let t=new l("subtitleData");t.data=e,t.dispatch(this.context);}}}onSelectSubtitles(e){null!=e&&null!=this.video&&(this.hasPlaybackSuccStarted?this.performSubtitlesSelection(e.data):this.subtitlesSetWaitingForSelection=e.data);}performSubtitlesSelection(e){if(this.subtitlesSelected=null,null!=e){this.player.enableText(!0);let t=0,i=this.video.textTracks.length;for(;t<i;){let i=t++;(null==i?"null":""+i)==e.id&&(this.subtitlesSelected=e,this.player.setTextTrack(i));}}else this.player.enableText(!1);}initSubtitlesPlaceholder(){let e=this.video.parentElement.getElementsByClassName("htmlSubtitlesPlaceholder"),t=null;if(0==e.length){t=window.document.createElement("div"),t.setAttribute("class","htmlSubtitlesPlaceholder"),t.setAttribute("style","height: 100%;left: 0px;position: absolute;top: 0px;width: 100%;");let e=this.video.parentElement.childNodes,i=e.length-1,s=0,a=e.length;for(;s<a;){let t=s++;if(e.item(t)==this.video){i=t;break}}i<e.length-1?this.video.parentElement.insertBefore(t,e[i+1]):this.video.parentElement.appendChild(t);}else t=e.item(0),t.innerHTML="";this.player.getTTMLRenderingDiv()!=t&&this.player.attachTTMLRenderingDiv(t);}updateAudioSets(){let e=this.player.getTracksFor("audio"),t=!0;if(Object.prototype.hasOwnProperty.call(this.variables,"languageCodeDuplicationRemoval")&&(t=i.field(this.variables,"languageCodeDuplicationRemoval")),null!=e&&e.length>=this.minAudioTracksForInfo){let i=this.player.getCurrentTrackFor("audio"),s=[];if(null!=i){let t=0,a=e.length;for(;t<a;){let i=t++;s.push({track:e[i],tId:i});}s.sort((function(e,t){return (t.track.id==i.id?1:0)-(e.track.id==i.id?1:0)}));}let a=[],r=Object.create(null),n=0;for(;n<s.length;){let e=s[n];++n;let i=e.track,l=e.tId;if(!i.lang)continue;if(t&&Object.prototype.hasOwnProperty.call(r,i.lang))continue;let o=new p;o.id=null==l?"null":""+l,o.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(i.lang)),null!=o.name&&""!=o.name||(o.name=i.lang),o.languageCode=i.lang,a.push(o),r[i.lang]=!0;}if(a.length>=this.minAudioTracksForInfo){let e=new l("audioData");e.data=a,e.dispatch(this.context);}}}onSelectAudio(e){null!=e&&null!=this.player&&(this.hasPlaybackSuccStarted?this.performAudioSelection(e.data):this.audioSetWaitingForSelection=e.data);}performAudioSelection(e){if(null!=e&&null!=e.id&&""!=e.id){let t=this.player.getTracksFor("audio");this.player.setCurrentTrack(t[s.parseInt(e.id)]);}}selectAudioAndSubtitlesAfterInitialization(){null!=this.audioSetWaitingForSelection&&(this.performAudioSelection(this.audioSetWaitingForSelection),this.audioSetWaitingForSelection=null),null!=this.subtitlesSetWaitingForSelection&&(this.performSubtitlesSelection(this.subtitlesSetWaitingForSelection),this.subtitlesSetWaitingForSelection=null);}reset(){if(null!=this.player){this.hasProtectionData=!1,this.stopDrmLiceseCheckCleanupTimer(),this.stopLiveEdgeUpdateTimer();try{this.player.reset();}catch(e){}this.hasPlaybackSuccStarted=!1;}}pause(){null==this.player||!this.hasDashJsInitializedSource||this.media instanceof u&&2!=this.startTimeStatus||this.player.pause(),this.stopDrmLiceseCheckCleanupTimer(),this.shouldBePlaying=!1;}initSource(){if(null==this.media||null==this.media.source||0==this.media.source.length)return void this.dispatchEvent(this.isAdvertisement?new r("adMediaError"):new o("mediaError"),{message:"No video could be played. All video with fallback sources has failed."});let e=this;if(this.source!=this.media.source[0].url){null!=this.source&&this.reset();let t=this.media.source[0];if(null!=t.drm&&"playready"==t.drm.selectedDrmSystem)this.setPlayReadyDrmSupportPlayback();else if(null!=t.drm&&"widevine"==t.drm.selectedDrmSystem)this.setWidevineDrmSupportPlayback();else switch(b.browserName){case"Chrome":case"EdgeChromium":case"Firefox":case"Opera":this.setWidevineDrmSupportPlayback();break;case"Edge":case"Microsoft Internet Explorer":this.setPlayReadyDrmSupportPlayback();break;default:this.setDefaultPlayback();}this.source=this.media.source[0].url,E.delay((function(){new o("bufferingStart").dispatch(e.context),e.isBuffering=!0;}),0);}}play(){if(2!=this.startTimeStatus&&null!=this.video&&(this.hideVideoTag=!0,null!=this.video&&(this.video.style.display="none",this.video.style.opacity="0",this.video.style.visibility="hidden"),this.video.muted=!0),this.initSource(),null!=this.player){if(1==this.drmLicenseCheckStatus&&this.startDrmLiceseCheckCleanupTimer(),this.media instanceof u){let e=this.getDVRWindowRange();this.video.currentTime<e.start?this.seek(0):this.video.currentTime>e.end&&this.seek(e.end-e.start);}try{this.hasDashJsInitializedSource&&this.player.play(),this.shouldBePlaying=!0;}catch(e){let t=_.caught(e).unwrap();this.onDashJsError({data:t,error:{message:s.string(t)}});}}}getMediaSource(e,t){let i=t;null==t&&(i=[".mpd"]);let s=0;for(;s<e.length;){let t=e[s];++s;let a=0;for(;a<i.length;)if(-1!=t.url.toLowerCase().indexOf(i[a++]))return t}null==t&&(i=[".ism/manifest",".isml/manifest"]);let a=0;for(;a<e.length;){let t=e[a];++a;let s=0;for(;s<i.length;)if(-1!=t.url.toLowerCase().indexOf(i[s++]))return t}return null}playPause(){this.isPaused()?this.play():this.pause();}setDefaultPlayback(){this.attachPlayerSourceUrl(this.media.source[0].url);}attachPlayerSourceUrl(e){if(null!=this.media&&this.media instanceof u&&1==this.media.lowLatencyMode){let e=this.player.getSettings();e.streaming.lowLatencyEnabled=!0,this.player.updateSettings(e);}this.player.attachSource(e),this.player.isReady()||this.player.attachView(this.video),this.hasDashJsInitializedSource=!0;}getPlaybackStartTime(e){let t=null;return null!=this.dvrWindowStartTimeTs&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<this.getNowTs()&&(t=this.dvrWindowStartTimeTs),null!=e&&null!=e.mediaUserSettings&&null!=e.mediaUserSettings.resumePostion&&(t=e.mediaUserSettings.resumePostion),null!=this.prePlaybackSeekRelativePosition&&null!=e&&e.duration>0&&(t=this.prePlaybackSeekRelativePosition*e.duration),null!=t&&null!=this.dvrWindowStartTimeTs&&t<this.dvrWindowStartTimeTs&&(t=this.dvrWindowStartTimeTs),null!=t&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<t&&(t=this.dvrWindowEndTimeTs),t}setWidevineDrmSupportPlayback(){let e=this.getMediaSource(this.media.source),t=null,i=null,s=null,a=null;if(null!=e){try{a=e.drm.provider;}catch(e){}try{t=e.customParams.h.laUrl,i=e.customParams.h.laCertHex;}catch(e){console.log("plugins/VideoDashJs/src/bs/player/plugin/video/videoPlayer/VideoDashJs.hx:2371:",_.caught(e).unwrap());}try{null==t&&(t=e.drm.widevine.laUrl);}catch(e){}try{null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.customData&&(s=e.drm.widevine.customData);}catch(e){console.log("plugins/VideoDashJs/src/bs/player/plugin/video/videoPlayer/VideoDashJs.hx:2384:",_.caught(e).unwrap());}if(null!=this.media.drmCustomLicenseServerHandler)this.media.drmCustomLicenseServerHandler.initContext(this.media,e,this.variables),this.hasProtectionData=!0,this.player.setProtectionData({"com.widevine.alpha":{customData:"B2C99B73-CA41-4003-84A3AA16CE92B304",customLicenseRequestHandler:(R=this.media.drmCustomLicenseServerHandler,A(R,R.customWidevineLicenseRequestHandler)),audioRobustness:null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.audioRobustness?e.drm.widevine.audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.videoRobustness?e.drm.widevine.videoRobustness:"SW_SECURE_CRYPTO"}}),this.attachPlayerSourceUrl(e.url);else if(null!=t){let r={laURL:t,customData:"B2C99B73-CA41-4003-84A3AA16CE92B304",canGeneratePsshBox:!0,audioRobustness:null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.audioRobustness?e.drm.widevine.audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.videoRobustness?e.drm.widevine.videoRobustness:"SW_SECURE_CRYPTO"};null!=s&&"keyos"==a.toLowerCase()&&(r.httpRequestHeaders={"x-keyos-authorization":s}),null!=i&&(r.laCertHex=i),this.hasProtectionData=!0,this.player.setProtectionData({"com.widevine.alpha":r}),this.attachPlayerSourceUrl(e.url);}else this.attachPlayerSourceUrl(e.url);}else this.onDashJsError({data:{message:"Cannot play defined media. Invalid media source."}});}setPlayReadyDrmSupportPlayback(){let e=this.getMediaSource(this.media.source),t=null,i=null;try{t=e.drm.provider;}catch(e){}let a=null;try{a=e.customParams.h.laUrl,a=this.variables.xmmapi.playReadyLicenseServerURL+("?"+s.string(e.customParams.h.drmParams)+"&userId="+this.variables.xmmapi.userId+"&device=web&platform=web");}catch(e){}try{null==a&&(a=e.drm.playready.laUrl);}catch(e){}try{i=e.drm.playready.customData;}catch(e){}if(null!=this.media.drmCustomLicenseServerHandler)this.media.drmCustomLicenseServerHandler.initContext(this.media,e,this.variables),this.hasProtectionData=!0,this.player.setProtectionData({"com.microsoft.playready":{customLicenseRequestHandler:(R=this.media.drmCustomLicenseServerHandler,A(R,R.customPlayReadyLicenseRequestHandler)),audioRobustness:null!=e.drm&&null!=e.drm.playready&&null!=e.drm.playready.audioRobustness?e.drm.playready.audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:null!=e.drm&&null!=e.drm.playready&&null!=e.drm.playready.videoRobustness?e.drm.playready.videoRobustness:"SW_SECURE_CRYPTO"}}),this.attachPlayerSourceUrl(e.url);else if(null!=a){let e={laURL:a,canGeneratePsshBox:!0};null!=i&&"keyos"==t.toLowerCase()&&(e.httpRequestHeaders={"x-keyos-authorization":i}),this.player.setProtectionData({"com.microsoft.playready":e}),this.attachPlayerSourceUrl(this.media.source[0].url);}else this.attachPlayerSourceUrl(this.media.source[0].url);}seek(e){let t=this.isPaused()&&null==this.source;this.androidVideoBufferFix(),this.seekingTargetTs=null;let i=this.media instanceof u;if(i){if(e=this.dvrWindowRelativeTimeToTs(e),e=this.normalizeDvrTime(e),this.media.mediaPlaybackInfo.currentTime=e,e>0&&(this.seekingTargetTs=e),(e=this.dvrWindowRelativeTimeFromTs(e))<this.getLiveMinimalInitialOffsetForOldestPart()&&(e=this.getLiveMinimalInitialOffsetForOldestPart()),2!=this.startTimeStatus&&!t)return;t&&this.initSource();}else e<0?e=0:null!=this.video&&e>this.video.duration&&(e=this.video.duration),e>this.video.duration-1&&(e=this.video.duration-1),t&&(this.media.duration>0&&(this.prePlaybackSeekRelativePosition=e/this.media.duration),this.initSource());let s=this;this.isPaused()&&!t&&E.delay((function(){new o("bufferingStart").dispatch(s.context),s.isBuffering=!0;}),0),this.currentTime=e,b.isSmartTV()&&(this.seekingTargetPos=i?this.dvrWindowRelativeTimeToTs(e):e),this.player.pause(),this.hasSeekingStartTriggeded=!0,this.dispatchEvent(this.isAdvertisement?new r("seekingStart"):new o("seekingStart")),this.seekingStartDate=new Date,this.dispatchEvent(this.isAdvertisement?new r("adCurrentTimeChange"):new o("currentTimeChange")),null==this.seekDebouncerTimer?this.dispatchEvent(new o("seekingStart")):this.seekDebouncerTimer.stop(),this.seekDebouncerTimer=E.delay(A(this,this.onSeekingDebouncerTimout),this.getSeekingDebouncerTimeout());}onSeekingDebouncerTimout(){if(null!=this.seekingTargetTs)this.performPlayerSeek(this.seekingTargetTs),this.seekingTargetTs=null;else {let e=this.currentTime;this.media instanceof u&&(e=this.dvrWindowRelativeTimeToTs(e),e=this.normalizeDvrTime(e)),this.performPlayerSeek(e);}this.stopSeekDebouncerTimer();}getSeekingDebouncerTimeout(){let e=500;return b.isSmartTV()&&(e=1e3),e}performPlayerSeek(e,t){if(null==t&&(t=!0),!this.hasDashJsInitializedSource||null==this.video)return;this.androidVideoBufferFix();let i=this;0==this.video.readyState&&this.videoRestartsOnError<this.getLimitOfRestarts()&&E.delay((function(){i.performPlayerSeek(e,t);}),100);let s=this.getSeekableRange(),a=this.media instanceof u,r=e;if(a&&(r=this.normalizeDvrTime(r),r=this.dvrWindowRelativeTimeFromTs(r),r<this.getLiveMinimalInitialOffsetForOldestPart()&&(r=this.getLiveMinimalInitialOffsetForOldestPart())),a){let e=this.player.getSettings().streaming.liveDelay;null==e&&(e=0),r>s.end-1.2*e&&(r=s.end-1.2*e);}if(this.shouldBePlaying&&t&&this.player.play(),0==this.currentTime&&0==r&&(r=.1,null!=this.adBreaksInfo))return null!=this.media&&null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0&&(this.media.mediaUserSettings.resumePostion=0),void this.handleVideoRestart();this.player.seek(r);}dvrWindowRelativeTimeFromTs(e){let t=this.player.getDashMetrics().getCurrentDVRInfo(),i=0;return null!=t&&null!=t.range&&null!=t.time&&(i=e-t.range.start),i<0&&(i=0),i}dvrWindowRelativeTimeToTs(e){let t=this.player.getDashMetrics().getCurrentDVRInfo(),i=0;return null!=t&&null!=t.range&&null!=t.time&&(i=t.range.start+e),i}normalizeDvrTime(e){let t=this.getDVRWindowRange();return e>t.end?e=t.end:e<t.start&&(e=t.start),e}dvrTimestampToRelativeTime(e){return e-this.getDVRWindowRange().start}getDvrWindowEndTimeOffset(){let e=0;if(null!=this.dvrWindowEndTimeTs){let t=this.getDVRWindowRange();this.dvrWindowEndTimeTs<t.end&&(e=t.end-this.dvrWindowEndTimeTs);}return e}getDVRWindowRange(){let e=this.getSeekableRange();return null!=this.dvrWindowStartTimeTs&&e.start<this.dvrWindowStartTimeTs&&!this.isDVRRecordedForStartOver(e)&&(e.start=this.dvrWindowStartTimeTs),null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<e.end&&(e.end=this.dvrWindowEndTimeTs),e}isDVRRecordedForStartOver(e){return 0==e.start&&e.end-e.start<86400}getDashStreamPeriodsNum(){let e=0;if(null!=this.player&&this.player.getActiveStream()&&this.player.getActiveStream().getProcessors()&&this.player.getActiveStream().getProcessors()[0]&&this.player.getActiveStream().getProcessors()[0].getRepresentationController()&&this.player.getActiveStream().getProcessors()[0].getRepresentationController().getCurrentRepresentation()){let t=this.player.getActiveStream().getProcessors()[0].getRepresentationController().getCurrentRepresentation();t&&t.adaptation&&t.adaptation.period&&t.adaptation.period.mpd&&t.adaptation.period.mpd.manifest&&t.adaptation.period.mpd.manifest.Period_asArray&&(e=t.adaptation.period.mpd.manifest.Period_asArray.length);}return e}getSeekableRange(){if(null!=this.player){let e=this.player.getDashMetrics().getCurrentDVRInfo();if(null!=e&&null!=e.range){let t={start:e.range.start,end:e.range.end};if(this.media instanceof u){let i=this.player.getDVRSeekOffset(864e5);i>0&&i>e.range.start&&(t.end=i),this.getDashStreamPeriodsNum()>1&&this.liveStreamNowOffset>0&&(t.end=this.getNowTs()-this.liveStreamNowOffset),t.end<this.media.mediaPlaybackInfo.currentTime&&(t.end=this.media.mediaPlaybackInfo.currentTime);}return this.lastDvrWindowStart=t.start,this.lastDvrWindowEnd=t.end,t}if(null!=this.lastDvrWindowEnd&&null!=this.lastDvrWindowStart)return {start:this.lastDvrWindowStart,end:this.lastDvrWindowEnd}}return null!=this.video&&null==this.video.seekable&&0==this.video.seekable.length?{start:this.video.seekable.start(0),end:this.video.seekable.end(0)}:{start:0,end:0}}getDVRWindowSize(){let e=this.getDVRWindowRange();return e.end-e.start}getNowTs(){return (new Date).getTime()/1e3}selectAudio(e){}selectSubtitles(e){}volume(e){this.initialVideoIsMuted=e<=0,null!=this.player&&this.hasDashJsInitializedSource?this.player.setVolume(e):this.video.volume=e;}setData(e){this.media=e,this.startTimeStatus=0,this.hasDashJsInitializedSource=!1,this.hasDashJsInitializedManifest=!1,this.hasAudioInitialized=!1,this.hasSubtitlesInitialized=!1,this.hasCodecInfoInitialized=!1,this.hasQualityInfoInitialized=!1,this.hasSeekingStartTriggeded=!1,this.hasProtectionData=!1,this.isBuffering=!1,this.shouldBePlaying=!1,this.isPlaybackNotAllowed=!1,this.initialVideoIsMuted=!1,null!=this.video&&(this.initialVideoIsMuted=this.video.muted),this.hasPlaybackSuccStarted=!1,this.drmLicenseCheckStatus=0,this.liveStreamNowOffset=null,this.liveStreamNowOffsetLastUpdate=0,this.videoRestartsOnError=0,this.seekingStartDate=null,this.seekingTargetPos=null,this.seekingTargetTs=null,this.stopSeekDebouncerTimer(),this.lastDvrWindowStart=null,this.lastDvrWindowEnd=null,this.currentTime=null,this.playbackRateMetter.reset(),this.adBreaksInfo=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowStartTime")?(this.dvrWindowStartTimeTs=i.field(this.variables,"dvrWindowStartTime"),this.getNowTs()<this.dvrWindowStartTimeTs&&(this.dvrWindowStartTimeTs=null),i.deleteField(this.variables,"dvrWindowStartTime")):this.dvrWindowStartTimeTs=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowEndTime")?(this.dvrWindowEndTimeTs=i.field(this.variables,"dvrWindowEndTime"),i.deleteField(this.variables,"dvrWindowEndTime")):this.dvrWindowEndTimeTs=null,1==this.variables.autoplay&&this.play();}log(e,t){null==t&&(t="log"),console&&("error"==t?console.error(e):"warn"==t?console.warn(e):console.log(e));}playerResize(e){}videoReady(){}onDurationChange(e){}saveBandwidthModeVisibilityChange(e){if(null!=this.player)if(e){let e=this.player.getSettings();this.saveBandwidthModeStore={level:this.player.getQualityFor("video"),trackSwitchMode:e.streaming.abr.trackSwitchMode,maxRepresentationRatio:e.streaming.abr.maxRepresentationRatio,autoSwitchBitrate:e.streaming.abr.autoSwitchBitrate},e.streaming.abr.trackSwitchMode={video:"alwaysReplace"},e.streaming.abr.maxRepresentationRatio={video:0},e.streaming.abr.autoSwitchBitrate={video:!1},this.player.updateSettings(e),this.player.setQualityFor("video",0);}else if(null!=this.saveBandwidthModeStore){let e=this.player.getSettings();e.streaming.abr.trackSwitchMode=this.saveBandwidthModeStore.trackSwitchMode,e.streaming.abr.maxRepresentationRatio=this.saveBandwidthModeStore.maxRepresentationRatio,e.streaming.abr.autoSwitchBitrate=this.saveBandwidthModeStore.autoSwitchBitrate,this.player.updateSettings(e),this.player.setQualityFor("video",this.saveBandwidthModeStore.level),this.saveBandwidthModeStore=null;}}getThroughput(){if(null!=this.player){return 1e3*(this.player.getAverageThroughput("video")+this.player.getAverageThroughput("audio"))}return null}static canPlay(e){return !("Microsoft Internet Explorer"==b.browserName&&b.majorVersion<11)&&(0!=b.isMediaSourceExtensionSupported()&&(e.url.toLowerCase().indexOf(".ism/manifest")>1||e.url.toLowerCase().indexOf(".isml/manifest")>1||e.url.toLowerCase().indexOf(".mpd")>1))}static getInstance(e,t){let i=t?"ad_":"";if(Object.prototype.hasOwnProperty.call(f.instances.h,i+e))return f.instances.h[i+e];{let s=new f(t);return f.instances.h[i+e]=s,s.context=e,s.create(),s}}}e.bs.player.plugin.video.videoPlayer.VideoDashJs=f,f.__name__="bs.player.plugin.video.videoPlayer.VideoDashJs",Object.assign(f.prototype,{__class__:f,minAudioTracksForInfo:null,context:null,variables:null,isAdvertisement:null,isInStreamAdvertisement:null,inStreamAdvertStartPos:null,initialAsAdvertisement:null,initialBandwidthSafetyFactor:null,inStreamAdvertMedia:null,adBreaksInfo:null,video:null,pluginConfig:null,playerWrapper:null,player:null,s73Wrapper:null,media:null,source:null,currentTime:null,playbackRateMetter:null,subtitlesRenderer:null,startTimeStatus:null,hasPlaybackSuccStarted:null,firefoxDrmDecodeLagTimerTs:null,firefoxDrmDecodeLag:null,initialVideoIsMuted:null,hasDashJsInitializedSource:null,hasDashJsInitializedManifest:null,hasAudioInitialized:null,hasSubtitlesInitialized:null,hasQualityInfoInitialized:null,isQualitySelectionEnabled:null,hasCodecInfoInitialized:null,hasSeekingStartTriggeded:null,hasProtectionData:null,isBuffering:null,drmLicenseCheckMechanismTimeoutTimer:null,drmLicenseCheckStatus:null,shouldBePlaying:null,isPlaybackNotAllowed:null,liveStreamNowOffset:null,liveStreamNowOffsetLastUpdate:null,videoRestartsOnError:null,lastRestartTs:null,liveStreamRestartTimeoutTimer:null,liveStreamRestartDelayTimer:null,streamCompleteWatchdogTimer:null,streamBufferingWatchdogTimer:null,prePlaybackSeekRelativePosition:null,seekingStartDate:null,seekingTargetPos:null,seekingTargetTs:null,seekingAvgTime:null,seekDebouncerTimer:null,seekableInitialRange:null,lastDvrWindowStart:null,lastDvrWindowEnd:null,liveEdgeUpdateTimer:null,dvrWindowStartTimeTs:null,dvrWindowEndTimeTs:null,audioSetWaitingForSelection:null,subtitlesSetWaitingForSelection:null,subtitlesSelected:null,scte35PendingEvents:null,lastGapEnd:null,seekingOverVideoGapMeter:null,playbackRate:null,hideVideoTag:null,saveBandwidthModeStore:null});class T{constructor(){}getMediaPlayer(){return exports.dashjs.MediaPlayer().create()}}T.__name__="bs.player.plugin.video.wrapper.DashJsWrapper",Object.assign(T.prototype,{__class__:T});var b=require("bs.util.BrowserTools");class w{constructor(e,t){this.reset(t),this.avgPeriod=e;}add(e){e=this.initNowTs(e),this.load=this.getLoadForTime(e)+1,this.lastEventTs=e;}getLoadForTime(e){return this.load*Math.exp(-(e-this.lastEventTs)/this.avgPeriod)}initNowTs(e){return null==e&&(e=(new Date).getTime()/1e3),e}getLoad(e){return this.getLoadForTime(this.initNowTs(e))}reset(e){this.lastEventTs=this.initNowTs(e),this.load=0;}}w.__name__="bs.util.EventLoadMeter",Object.assign(w.prototype,{__class__:w,load:null,lastEventTs:null,avgPeriod:null});class k{constructor(e,t){null==t&&(t=2),null==e&&(e=2),this.expectedSamplesPerSec=t,this.playbackPosition=[],this.sampleTime=[];let i=0;for(;i<e;)++i,this.playbackPosition.push(null),this.sampleTime.push(null);this.lastSamplePos=0;}setCurrentTime(e,t,i){null==i&&(i=!1),null==t&&(t=(new Date).getTime()/1e3),t-this.sampleTime[this.lastSamplePos]<.05||i||(this.lastSamplePos=(this.lastSamplePos+1)%this.playbackPosition.length,this.playbackPosition[this.lastSamplePos]=e,this.sampleTime[this.lastSamplePos]=t);}reset(){let e=0,t=this.playbackPosition.length;for(;e<t;){let t=e++;this.playbackPosition[t]=null,this.sampleTime[t]=null;}this.lastSamplePos=0;}getPlaybackRate(e){null==e&&(e=!1);let t=this.lastSamplePos,i=(t+1)%this.playbackPosition.length,s=this.sampleTime[t],a=this.sampleTime[i],r=s-a;return null==r||0==r||null==s||null==a?null:r>1.5*(this.playbackPosition.length-1)/this.expectedSamplesPerSec&&!e?1:(this.playbackPosition[t]-this.playbackPosition[i])/r}isPlayingNormal(e){null==e&&(e=!1);let t=this.getPlaybackRate(e);return .5<t&&t<1.5}}k.__name__="bs.util.PlaybackRateMetter",Object.assign(k.prototype,{__class__:k,playbackPosition:null,sampleTime:null,lastSamplePos:null,expectedSamplesPerSec:null});class _ extends Error{constructor(e,t,i){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=i?i:this;}unwrap(){return this.__nativeException}get_native(){return this.__nativeException}static caught(e){return e instanceof _?e:e instanceof Error?new _(e.message,null,e):new D(e,null,e)}static thrown(e){if(e instanceof _)return e.get_native();if(e instanceof Error)return e;return new D(e)}}_.__name__="haxe.Exception",_.__super__=Error,Object.assign(_.prototype,{__class__:_,__skipStack:null,__nativeException:null,__previousException:null});var E=require("haxe.Timer");class D extends _{constructor(e,t,i){super(String(e),t,i),this.value=e;}unwrap(){return this.value}}D.__name__="haxe.ValueException",D.__super__=_,Object.assign(D.prototype,{__class__:D,value:null});var R,C=require("haxe.ds.StringMap");class I{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=I.__nativeClassName(e);return null!=i?I.__resolveNativeClass(i):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return "<function>";case"object":if(e instanceof Array){let i="[";t+="\t";let s=0,a=e.length;for(;s<a;){let a=s++;i+=(a>0?",":"")+I.__string_rec(e[a],t);}return i+="]",i}let i;try{i=e.toString;}catch(e){return "???"}if(null!=i&&i!=Object.toString&&"function"==typeof i){let t=e.toString();if("[object Object]"!=t)return t}let s="{\n";t+="\t";let a=null!=e.hasOwnProperty,r=null;for(r in e)a&&!e.hasOwnProperty(r)||"prototype"!=r&&"__class__"!=r&&"__super__"!=r&&"__interfaces__"!=r&&"__properties__"!=r&&(2!=s.length&&(s+=", \n"),s+=t+r+" : "+I.__string_rec(e[r],t));return s+="\n"+(t=t.substring(1))+"}",s;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let i=e.__interfaces__;if(null!=i&&(null==e.__super__||e.__super__.__interfaces__!=i)){let e=0,s=i.length;for(;e<s;){let s=i[e++];if(s==t||I.__interfLoop(s,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case M:return "boolean"==typeof e;case W:return null!=e;case O:return "number"==typeof e;case L:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(I.__downcastCheck(e,t))return !0}else if("object"==typeof t&&I.__isNativeObj(t)&&e instanceof t)return !0;return t==x&&null!=e.__name__||t==B&&null!=e.__ename__}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&I.__interfLoop(I.getClass(e),t)}static __cast(e,t){if(null==e||I.__instanceof(e,t))return e;throw _.thrown("Cannot cast "+s.string(e)+" to "+s.string(t))}static __nativeClassName(e){let t=I.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=I.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}function A(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:s=e.hx__closures__[i.__id__],null==s&&(s=i.bind(e),e.hx__closures__[i.__id__]=s),s);var s;}I.__name__="js.Boot",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var L={},W={},O=Number,M=Boolean,x={},B={};I.__toStr={}.toString,f.instances=new C,f.__plugfaces__="ICanPlay,INoPlayerPlugin,IVideoPlayer";}(exports,window);
(function(window) {
var orgdash = window.dashjs;
var dashjs = { skipAutoCreate: true };
window.dashjs = dashjs;

/*! v3.1.2-0054d7eb, 2020-07-24T09:05:25Z */
!function a(o,s,u){function l(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return l(o[t][1][e]||e)},i,i.exports,a,o,s,u);}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){var o,u,r,i={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r));}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&e[n++])<<12),r|=(63&e[n++])<<6),r|=63&e[n++]),t.push(String.fromCharCode(r));}return t.join("")}},l={};function d(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push(o.charAt(63&i));}return 2==e.length-t?(i=(e[t]<<16)+(e[t+1]<<8),n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push("=")):1==e.length-t&&(i=e[t]<<16,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push("==")),n.join("")}function f(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(u[e.charCodeAt(t)]<<18)+(u[e.charCodeAt(t+1)]<<12)+(u[e.charCodeAt(t+2)]<<6)+u[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4;}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n}o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),r={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},l.decodeArray=function(e){var t=f(e);return new Uint8Array(t)},l.encodeASCII=function(e){var t=r.encode(e);return d(t)},l.decodeASCII=function(e){var t=f(e);return r.decode(t)},l.encode=function(e){var t=i.encode(e);return d(t)},l.decode=function(e){var t=f(e);return i.decode(t)},void 0!==n&&(n.decode=l.decode,n.decodeArray=l.decodeArray,n.encode=l.encode,n.encodeASCII=l.encodeASCII);},{}],2:[function(e,t,n){!function(e){function s(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)}function u(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function o(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1;}var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],h={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e;},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t);}};o.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1;},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r]);}},isDefault:function(){return "white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash;},toString:function(){return "color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};function t(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new o(t,n,r,i,a);}t.prototype={reset:function(){this.uchar=" ",this.penState.reset();},setChar:function(e,t){this.uchar=e,this.penState.copy(t);},setPenState:function(e){this.penState.copy(e);},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState);},isEmpty:function(){return " "===this.uchar&&this.penState.isDefault()}};function r(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new o;}r.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t]);},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(h.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(h.log("ERROR","Too large cursor position "+this.pos),this.pos=32);},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t);},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState);},insertChar:function(e){144<=e&&this.backSpace();var t=s(e);32<=this.pos?h.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1));},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset();},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset();},clearToEndOfRow:function(){this.clearFromPos(this.pos);},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r);}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState);}};function i(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new r);this.currRow=14,this.nrRollUpRows=null,this.reset();}i.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14;},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t]);},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace();},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow();},insertChar:function(e){this.rows[this.currRow].insertChar(e);},setPen:function(e){this.rows[this.currRow].setPenStyles(e);},moveCursor:function(e){this.rows[this.currRow].moveCursor(e);},setCursor:function(e){h.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e);},setPAC:function(e){h.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n,r,i=this.rows[this.currRow];null!==e.indent&&(n=e.indent,r=Math.max(n-1,0),i.setCursor(e.indent),e.color=i.chars[r].penState.foreground);var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a);},setBkgData:function(e){h.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32);},setRollUpRows:function(e){this.nrRollUpRows=e;},rollUp:function(){var e,t;null!==this.nrRollUpRows?(h.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(t=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,t),h.log("INFO","Rolling up")):h.log("DEBUG","roll_up but nrRollUpRows not set yet");},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+': "'+a+'"'):t.push(a.trim()));}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};function p(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new i,this.nonDisplayedMemory=new i,this.lastOutputScreen=new i,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null;}p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null;},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e;},setPAC:function(e){this.writeScreen.setPAC(e);},setBkgData:function(e){this.writeScreen.setBkgData(e);},setMode:function(e){e!==this.mode&&(this.mode=e,h.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e);},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";h.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(h.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate());},cc_RCL:function(){h.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON");},cc_BS:function(){h.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate());},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){h.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate();},cc_RU:function(e){h.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e);},cc_FON:function(){h.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0});},cc_RDC:function(){h.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON");},cc_TR:function(){h.log("INFO","TR"),this.setMode("MODE_TEXT");},cc_RTD:function(){h.log("INFO","RTD"),this.setMode("MODE_TEXT");},cc_EDM:function(){h.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate();},cc_CR:function(){h.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate();},cc_ENM:function(){h.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset();},cc_EOC:function(){var e;h.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,h.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate();},cc_TO:function(e){h.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e);},cc_MIDROW:function(e){var t,n={flash:!1};n.underline=e%2==1,n.italics=46<=e,n.italics?n.foreground="white":(t=Math.floor(e/2)-16,n.foreground=["white","green","blue","cyan","red","yellow","magenta"][t]),h.log("INFO","MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n);},outputDataUpdate:function(){var e=h.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory));},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e));}};function g(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0};}g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t);},addData:function(e,t){var n,r=!1;this.lastTime=e,h.setTime(e);for(var i=0;i<t.length;i+=2){var a=127&t[i],o=127&t[i+1];16<=a&&a<=31&&a===this.lastCmdA&&o===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,h.log("DEBUG","Repeated command ("+u([a,o])+") is dropped")):0!=a||0!=o?(h.log("DATA","["+u([t[i],t[i+1]])+"] -> ("+u([a,o])+")"),(n=(n=(n=(n=this.parseCmd(a,o))||this.parseMidrow(a,o))||this.parsePAC(a,o))||this.parseBackgroundAttributes(a,o))||(r=this.parseChars(a,o))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(r):h.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:r?this.dataCounters.char+=2:(this.dataCounters.other+=2,h.log("WARNING","Couldn't parse cleaned data "+u([a,o])+" orig: "+u([t[i],t[i+1]])))):this.dataCounters.padding+=2;}},parseCmd:function(e,t){var n=null;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return !1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return h.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),h.log("DEBUG","MIDROW ("+u([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return !1},parsePAC:function(e,t){var n,r=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return !1;n=e<=23?1:2,r=64<=t&&t<=95?1==n?a[e]:d[e]:1==n?l[e]:f[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e},n=95<t?t-96:t-64;return r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var n,r,i=null,a=null,o=null;return 17<=(o=25<=e?(i=2,e-8):(i=1,e))&&o<=19?(n=t,n=17===o?t+80:18===o?t+112:t+144,h.log("INFO","Special char '"+s(n)+"' in channel "+i),a=[n],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(a=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),a&&(r=u(a),h.log("DEBUG","Char codes =  "+r.join(","))),a},parseBackgroundAttributes:function(e,t){var n,r,i;return ((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=c[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null;},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e);}};e.logger=h,e.PenState=o,e.CaptionScreen=i,e.Cea608Parser=g,e.findCea608Nalus=function(e,t,n){for(var r=0,i=t,a=[];i<t+n;){if(r=e.getUint32(i),6===(31&e.getUint8(i+4)))for(var o=i+5,s=-1;o<i+4+r-1;){s=0;for(var u=255;255===u;)s+=u=e.getUint8(o),o++;for(var l=0,u=255;255===u;)l+=u=e.getUint8(o),o++;!function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s}(s,l,e,o)||a.push([o,l]),o+=l;}i+=r+4;}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&l)+(127&d)!=0&&(0==u?(r[0].push(l),r[0].push(d)):1==u&&(r[1].push(l),r[1].push(d)));}return r};}(void 0===n?(void 0).cea608parser={}:n);},{}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(A){A=A||{},function(){void 0===A.escapeMode&&(A.escapeMode=!0);void 0===A.attributePrefix&&(A.attributePrefix="_");A.arrayAccessForm=A.arrayAccessForm||"none",A.emptyNodeForm=A.emptyNodeForm||"text",void 0===A.enableToStringFunc&&(A.enableToStringFunc=!0);A.arrayAccessFormPaths=A.arrayAccessFormPaths||[],void 0===A.skipEmptyTextNodesForObj&&(A.skipEmptyTextNodesForObj=!0);void 0===A.stripWhitespaces&&(A.stripWhitespaces=!0);A.datetimeAccessFormPaths=A.datetimeAccessFormPaths||[],void 0===A.useDoubleQuotes&&(A.useDoubleQuotes=!1);A.xmlElementsFilter=A.xmlElementsFilter||[],A.jsonPropertiesFilter=A.jsonPropertiesFilter||[],void 0===A.keepCData&&(A.keepCData=!1);void 0===A.ignoreRoot&&(A.ignoreRoot=!1);}();var I={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function R(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function u(e){return "string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function b(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function D(e,t,n){switch(A.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]];}!(e[t]instanceof Array)&&0<A.arrayAccessFormPaths.length&&b(A.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]]);}function M(e){var t,n=e.split(/[-T:+Z]/g),r=new Date(n[0],n[1]-1,n[2]),i=n[5].split(".");return r.setHours(n[3],n[4],i[0]),1<i.length&&r.setMilliseconds(i[1]),n[6]&&n[7]?(t=60*n[6]+Number(n[7]),t=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*t:t),r.setMinutes(r.getMinutes()-t-r.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))),r}function N(e,t){if(e.nodeType==I.DOCUMENT_NODE){for(var n=new Object,r=e.childNodes,i=0;i<r.length;i++){(o=r[i]).nodeType==I.ELEMENT_NODE&&(A.ignoreRoot?n=N(o):(n={})[d=R(o)]=N(o));}return n}if(e.nodeType==I.ELEMENT_NODE){(n=new Object).__cnt=0;for(var a=[],r=e.childNodes,i=0;i<r.length;i++){var o,s,u,l,d=R(o=r[i]);o.nodeType!=I.COMMENT_NODE&&(s=t+"."+d,v=n,y=o.nodeType,T=d,S=s,y==I.ELEMENT_NODE&&0<A.xmlElementsFilter.length&&!b(A.xmlElementsFilter,v,T,S)||(n.__cnt++,null==n[d]?(u=N(o,s),"#text"==d&&!/[^\s]/.test(u)||((l={})[d]=u,a.push(l)),n[d]=u,D(n,d,s)):(null!=n[d]&&(n[d]instanceof Array||(n[d]=[n[d]],D(n,d,s))),u=N(o,s),"#text"==d&&!/[^\s]/.test(u)||((l={})[d]=u,a.push(l)),n[d][n[d].length]=u)));}n.__children=a;for(var f=R(e),c=0;c<e.attributes.length;c++){var h=e.attributes[c];n.__cnt++;for(var p=h.value,g=0,_=A.matchers.length;g<_;g++){var E=A.matchers[g];E.test(h,f)&&(p=E.converter(h.value));}n[A.attributePrefix+h.name]=p;}var m=e.prefix;return null!=m&&""!=m&&(n.__cnt++,n.__prefix=m),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),A.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==A.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<A.datetimeAccessFormPaths.length){var r=n.split(".#")[0];return b(A.datetimeAccessFormPaths,e,t,r)?M(e):e}return e}(n.__text,d,t+"."+d)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==A.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==A.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||A.keepCData?1<n.__cnt&&null!=n.__text&&A.skipEmptyTextNodesForObj&&(A.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!A.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return (null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}if(e.nodeType==I.TEXT_NODE||e.nodeType==I.CDATA_SECTION_NODE)return e.nodeValue;var v,y,T,S;}function l(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var o=n[a],s=e[o];A.escapeMode&&(s=u(s)),i+=" "+o.substr(A.attributePrefix.length)+"=",A.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'";}return i+=r?"/>":">"}function d(e,t){return "</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function f(e,t){return "property"==A.arrayAccessForm&&(n=t.toString(),r="_asArray",-1!==n.indexOf(r,n.length-r.length))||0==t.toString().indexOf(A.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function;var n,r;}function c(e){var t=0;if(e instanceof Object)for(var n in e)f(e,n)||t++;return t}function h(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(A.attributePrefix)&&t.push(n);return t}function p(e){var t,n,r="";return e instanceof Object?r+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(A.escapeMode?n+=u(t.__text):n+=t.__text),n):null!=e&&(A.escapeMode?r+=u(e):r+=e),r}function g(e,t){return ""===e?t:e+"."+t}function _(e,t){var n,r,i,a,o,s="";if(0<c(e))for(var u in e){f(e,u)||""!=t&&(i=e,o=g(t,a=u),0!=A.jsonPropertiesFilter.length&&""!=o&&!b(A.jsonPropertiesFilter,i,a,o))||(r=h(n=e[u]),null==n||null==n?s+=l(n,u,r,!0):n instanceof Object?n instanceof Array?s+=function(e,t,n,r){var i="";if(0==e.length)i+=l(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=l(e[a],t,h(e[a]),!1),i+=_(e[a],g(r,t)),i+=d(e[a],t);return i}(n,u,r,t):n instanceof Date?(s+=l(n,u,r,!1),s+=n.toISOString(),s+=d(n,u)):0<c(n)||null!=n.__text||null!=n.__cdata?(s+=l(n,u,r,!1),s+=_(n,g(t,u)),s+=d(n,u)):s+=l(n,u,r,!0):(s+=l(n,u,r,!1),s+=p(n),s+=d(n,u)));}return s+=p(e)}this.parseXmlString=function(e){var t;window.ActiveXObject||window;if(void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null);}catch(e){t=null;}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return "string"==typeof e?M(e):e},this.xml2json=function(e){return N(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return _(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return "1.2.0"};},t.exports=n.default;},{}],4:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(5),a=r(e(124)),o=r(e(161)),s=r(e(102)),u=r(e(45));dashjs.Protection=o.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=u.default,n.default=dashjs,n.MediaPlayer=i.MediaPlayer,n.Protection=o.default,n.MetricsReporting=a.default,n.MediaPlayerFactory=s.default,n.Debug=u.default;},{102:102,124:124,161:161,45:45,5:5}],5:[function(u,e,l){(function(e){function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(l,"__esModule",{value:!0});var n=t(u(100)),r=t(u(47)),i=t(u(45)),a=u(50),o="undefined"!=typeof window&&window||e,s=o.dashjs;(s=s||(o.dashjs={})).MediaPlayer=n.default,s.FactoryMaker=r.default,s.Debug=i.default,s.Version=(0, a.getVersionString)(),l.default=s,l.MediaPlayer=n.default,l.FactoryMaker=r.default,l.Debug=i.default;}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{100:100,45:45,47:47,50:50}],6:[function(e,t,n){n.byteLength=function(e){var t=f(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=f(e),r=n[0],i=n[1],a=new d(function(e,t){return 3*(e+t)/4-t}(r,i)),o=0,s=0<i?r-4:r,u=0;u<s;u+=4)t=l[e.charCodeAt(u)]<<18|l[e.charCodeAt(u+1)]<<12|l[e.charCodeAt(u+2)]<<6|l[e.charCodeAt(u+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;2===i&&(t=l[e.charCodeAt(u)]<<2|l[e.charCodeAt(u+1)]>>4,a[o++]=255&t);1===i&&(t=l[e.charCodeAt(u)]<<10|l[e.charCodeAt(u+1)]<<4|l[e.charCodeAt(u+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t);return a},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],a=0,o=n-r;a<o;a+=16383)i.push(function(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(r));return i.join("")}(e,a,o<a+16383?o:a+16383));1==r?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)s[i]=r[i],l[r.charCodeAt(i)]=i;function f(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return -1===n&&(n=t),[n,n===t?0:4-n%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;},{}],7:[function(e,t,n){},{}],8:[function(e,t,n){var s=e(6),a=e(13);n.Buffer=f,n.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},n.INSPECT_MAX_BYTES=50;var r=2147483647;function o(e){if(r<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=f.prototype,t}function f(e,t,n){if("number"!=typeof e)return i(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function i(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=f.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return f.from(r,t,n);var i=function(e){if(f.isBuffer(e)){var t=0|c(e.length),n=o(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return "number"!=typeof e.length||w(e.length)?o(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),o(e<0?0:0|c(e))}function d(e){for(var t=e.length<0?0:0|c(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function c(e){if(r<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function h(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(i)return r?-1:M(e).length;t=(""+t).toLowerCase(),i=!0;}}function p(e,t,n){var r,i,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return "";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return "";if((n>>>=0)<=(t>>>=0))return "";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",a=t;a<n;++a)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[a]);return i}(this,t,n);case"utf8":case"utf-8":return y(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,a=n,0===(i=t)&&a===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0;}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r;}function _(e,t,n,r,i){if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),w(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return -1;n=e.length-1;}else if(n<0){if(!i)return -1;n=0;}if("string"==typeof t&&(t=f.from(t,r)),f.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,i){var a=1,o=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;o/=a=2,s/=2,n/=2;}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i)for(var l=-1,d=n;d<o;d++)if(u(e,d)===u(t,-1===l?0:d-l)){if(-1===l&&(l=d),d-l+1===s)return l*a}else -1!==l&&(d-=d-l),l=-1;else for(o<n+s&&(n=o-s),d=n;0<=d;d--){for(var f=!0,c=0;c<s;c++)if(u(e,d+c)!==u(t,c)){f=!1;break}if(f)return d}return -1}function m(e,t,n,r){return C(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n,r){return C(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function y(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],d=null,f=239<l?4:223<l?3:191<l?2:1;if(i+f<=n)switch(f){case 1:l<128&&(d=l);break;case 2:128==(192&(a=e[i+1]))&&127<(u=(31&l)<<6|63&a)&&(d=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(u=(15&l)<<12|(63&a)<<6|63&o)&&(u<55296||57343<u)&&(d=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)&&u<1114112&&(d=u);}null===d?(d=65533,f=1):65535<d&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=f;}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}n.kMaxLength=r,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return !1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=i,f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(e,t,n){return i=t,a=n,u(r=e),r<=0||void 0===i?o(r):"string"==typeof a?o(r).fill(i,a):o(r).fill(i);var r,i,a;},f.allocUnsafe=l,f.allocUnsafeSlow=l,f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),O(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=f.allocUnsafe(t),r=0,i=0;i<e.length;++i){var a=e[i];if(O(a,Uint8Array)&&(a=f.from(a)),!f.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length;}return n},f.byteLength=h,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?y(this,0,e):p.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f.prototype.compare=function(e,t,n,r,i){if(O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return -1;if(n<=t)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){a=u[d],o=l[d];break}return a<o?-1:o<a?1:0},f.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},f.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},f.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},f.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else {if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var a,o,s,u,l,d,f=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;(!r||i<(r=Number(r)))&&(r=i);var a=t.length;a/2<r&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(w(s))return o;e[n+o]=s;}return o}(this,e,t,n);case"utf8":case"utf-8":return l=t,d=n,C(M(e,(u=this).length-l),u,l,d);case"ascii":return m(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return a=this,o=t,s=n,C(N(e),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,n);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0;}},f.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,n,r,i,a){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function b(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,8),a.write(e,t,n,r,52,8),n+8}f.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=f.prototype,r},f.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},f.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},f.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return (i*=128)<=r&&(r-=Math.pow(2,8*t)),r},f.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=t,i=1,a=this[e+--r];0<r&&(i*=256);)a+=this[e+--r]*i;return (i*=128)<=a&&(a-=Math.pow(2,8*t)),a},f.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),a.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),a.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),a.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),a.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},f.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+n},f.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,n,r){var i;e=+e,t>>>=0,r||A(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},f.prototype.writeIntBE=function(e,t,n,r){var i;e=+e,t>>>=0,r||A(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var a=n-1,o=1,s=0;for(this[t+a]=255&e;0<=--a&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},f.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},f.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},f.prototype.writeDoubleLE=function(e,t,n){return b(this,e,t,!0,n)},f.prototype.writeDoubleBE=function(e,t,n){return b(this,e,t,!1,n)},f.prototype.copy=function(e,t,n,r){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;0<=a;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},f.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===r&&i<128||"latin1"===r)&&(e=i));}else "number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else {var o=f.isBuffer(e)?e:f.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s];}return this};var D=/[^+/0-9A-Za-z-_]/g;function M(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&a.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320);}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,n<128){if(--t<0)break;a.push(n);}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128);}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128);}else {if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128);}}return a}function N(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return "";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function w(e){return e!=e}},{13:13,6:6}],9:[function(e,t,n){var i={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxProcessors[e]=t);},createFile:function(){return new a},createBox:function(e,t,n){var r=o.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var r=i.createBox(e,t,n);return r.version=0,r.flags=0,r},Utils:{}};i.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?a=(31&a)<<6:(a<240?a=(15&a)<<12:(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12),a|=(63&e.getUint8(i++))<<6),a|=63&e.getUint8(i++)),r.push(String.fromCharCode(a));}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r));}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else {if("string"==typeof n)r=n;else {if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type;}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t);}else e.boxes.push(t);},void 0!==n&&(n.parseBuffer=i.parseBuffer,n.addBoxProcessor=i.addBoxProcessor,n.createFile=i.createFile,n.createBox=i.createBox,n.createFullBox=i.createFullBox,n.Utils=i.Utils),i.Cursor=function(e){this.offset=void 0===e?0:e;};var a=function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e));};a.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if(void 0===e.type)break;this.boxes.push(e);}return this},a._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[r],e,t,n);}},a.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},a.prototype.append=function(e,t){i.Utils.appendBox(this,e,t);};var o=function(){this._cursor=new i.Cursor;};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e]);},o.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i]);},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24);},o.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r]);},o.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i]);},o.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t]);},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength();},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return -1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return -1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(4+n),t=r*Math.pow(2,32)+i;}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(2+i));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(4+i),r=t*Math.pow(2,32)+n;}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r);}return t},o.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t);}return e},o.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<t){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?i.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else {switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size);}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData());}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24);},o.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this));},o.prototype.append=function(e,t){i.Utils.appendBox(this,e,t);},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size);}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(4+n,i);}this._cursor.offset+=e>>3;}else this.size+=e>>3;},o.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(2+i,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(4+i,r);}this._cursor.offset+=e>>3;}else this.size+=e>>3;},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n));},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0);}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r);},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length;}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length);}else this.size+=e.length;},o.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length;},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n);}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1);},o.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count);},o.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16);});},o.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1);},o.prototype._boxProcessors.free=o.prototype._boxProcessors.skip=function(){this._procField("data","data",-1);},o.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32);},o.prototype._boxProcessors.ftyp=o.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4);},o.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1);},o.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1);},o.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16);},o.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32);},o.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32);},o.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32);},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1);},o.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32);},o.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8");},o.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8);},o.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1);},o.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8);},o.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap);});},o.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16);},o.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24);});});},o.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count);},o.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32);});});},o.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8);},o.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32);},o.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32);},o.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1));});},o.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32);},o.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32);},o.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32);});},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1);},o.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8");},o.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16);},o.prototype._boxProcessors.vttC=function(){this._procField("config","utf8");},o.prototype._boxProcessors.vtte=function(){};},{}],10:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return "boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return "number"==typeof e},n.isString=function(e){return "string"==typeof e},n.isSymbol=function(e){return "symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return "[object RegExp]"===t(e)},n.isObject=function(e){return "object"==typeof e&&null!==e},n.isDate=function(e){return "[object Date]"===t(e)},n.isError=function(e){return "[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return "function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer;}).call(this,{isBuffer:e(22)});},{22:22}],11:[function(e,t,n){var u=Object.create||function(e){function t(){}return t.prototype=e,new t},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},a=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,s=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),i=0===l.x;}catch(e){i=!1;}function d(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,a,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return (i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=u(null),e._eventsCount=0),a?("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),a.warned||(s=d(e))&&0<s&&a.length>s&&(a.warned=!0,(o=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",o.name,o.message))):(a=i[t]=n,++e._eventsCount),e}function c(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e);}}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=a.call(c,r);return i.listener=n,r.wrapFn=i}function p(e,t,n){var r=e._events;if(!r)return [];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):_(i,i.length):[]}function g(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function _(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e;}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return d(this)},r.prototype.emit=function(e,t,n,r){var i,a,o,s,u="error"===e,l=this._events;if(l)u=u&&null==l.error;else if(!u)return !1;if(u){if(1<arguments.length&&(i=t),i instanceof Error)throw i;var d=new Error('Unhandled "error" event. ('+i+")");throw d.context=i,d}if(!(a=l[e]))return !1;var f,c="function"==typeof a;switch(f=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=_(e,r),a=0;a<r;++a)i[a].call(n);}(a,c,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=_(e,i),o=0;o<i;++o)a[o].call(n,r);}(a,c,this,t);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=_(e,a),s=0;s<a;++s)o[s].call(n,r,i);}(a,c,this,t,n);break;case 4:!function(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=_(e,o),u=0;u<o;++u)s[u].call(n,r,i,a);}(a,c,this,t,n,r);break;default:for(o=new Array(f-1),s=1;s<f;s++)o[s-1]=arguments[s];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=_(e,i),o=0;o<i;++o)a[o].apply(n,r);}(a,c,this,o);}return !0},r.prototype.on=r.prototype.addListener=function(e,t){return f(this,e,t,!1)},r.prototype.prependListener=function(e,t){return f(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=u(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop();}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t);}return this},r.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=u(null):delete n[e]),this;if(0===arguments.length){for(var r,i=o(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},r.prototype.listeners=function(e){return p(this,e,!0)},r.prototype.rawListeners=function(e){return p(this,e,!1)},r.listenerCount=function(e,t){return "function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},r.prototype.listenerCount=g,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};},{}],12:[function(e,t,n){var h=Array.isArray,p=Object.keys,g=Object.prototype.hasOwnProperty;t.exports=function e(t,n){if(t===n)return !0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,i,a=h(t),o=h(n);if(a&&o){if((f=t.length)!=n.length)return !1;for(r=f;0!=r--;)if(!e(t[r],n[r]))return !1;return !0}if(a!=o)return !1;var s=t instanceof Date,u=n instanceof Date;if(s!=u)return !1;if(s&&u)return t.getTime()==n.getTime();var l=t instanceof RegExp,d=n instanceof RegExp;if(l!=d)return !1;if(l&&d)return t.toString()==n.toString();var f,c=p(t);if((f=c.length)!==p(n).length)return !1;for(r=f;0!=r--;)if(!g.call(n,c[r]))return !1;for(r=f;0!=r--;)if(!e(t[i=c[r]],n[i]))return !1;return !0}return t!=t&&n!=n};},{}],13:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,d=-7,f=n?i-1:0,c=n?-1:1,h=e[t+f];for(f+=c,a=h&(1<<-d)-1,h>>=-d,d+=s;0<d;a=256*a+e[t+f],f+=c,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;0<d;o=256*o+e[t+f],f+=c,d-=8);if(0===a)a=1-l;else {if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l;}return (h?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,d=(1<<l)-1,f=d>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),2<=(t+=1<=o+f?c/u:c*Math.pow(2,1-f))*u&&(o++,u/=2),d<=o+f?(s=0,o=d):1<=o+f?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));8<=i;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;0<l;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*g;};},{}],14:[function(e,t,n){function d(e,t,n,r){var i=r&&"seq"===r.timeContainer,a=0;r&&(a=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+a:a;var o=t.begin,s=null;for(var u in t.sets)d(e,t.sets[u],s,t),o="seq"===t.timeContainer?t.sets[u].end:Math.max(o,t.sets[u].end),s=t.sets[u];if("contents"in t)for(var l in t.contents)d(e,t.contents[l],s,t),o="seq"===t.timeContainer?t.contents[l].end:Math.max(o,t.contents[l].end),s=t.contents[l];else o=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,a+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=a+t.explicit_end:t.end=o,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t);}function y(e){this.node=e;}function T(){this.events=[],this.head=null,this.body=null;}function S(){this.styling=null,this.layout=null;}function A(){this.styles={};}function I(){this.id=null,this.styleAttrs=null,this.styleRefs=null;}function R(){this.regions={};}function r(e){this.kind=e;}function i(e){this.id=e;}function a(e){this.regionID=e;}function o(e){this.styleAttrs=e;}function s(e){this.sets=e;}function u(e){this.contents=e;}function l(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n;}function b(){r.call(this,"body");}function D(){r.call(this,"div");}function M(){r.call(this,"p");}function N(){r.call(this,"span");}function f(){r.call(this,"span");}function C(){r.call(this,"br");}function O(){}function w(){}function c(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function h(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function p(e,t){var n={};if(null!==e)for(var r in e.attributes){var i,a=e.attributes[r].uri+" "+e.attributes[r].local,o=B.byQName[a];void 0!==o&&(null!==(i=o.parse(e.attributes[r].value))?(n[a]=i,o===B.byName.zIndex&&m(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):L(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[r].value));}return n}function g(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function _(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function E(e,t,n,r){for(var i=t.length-1;0<=i;i--){var a=t[i];a in e.styles?P(e.styles[a].styleAttrs,n):L(r,"Non-existant style id referenced");}}function P(e,t){for(var n in e)n in t||(t[n]=e[n]);}function m(e,t){if(e&&e.warn&&e.warn(t))throw t}function L(e,t){if(e&&e.error&&e.error(t))throw t}function x(e,t){throw e&&e.fatal&&e.fatal(t),t}function v(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else {if(!(t<a))return {found:!0,index:n};i=n-1;}}return {found:!1,index:r}}var F,U,k,B,G;F=void 0===n?this.imscDoc={}:n,U="undefined"==typeof sax?e(40):sax,k="undefined"==typeof imscNames?e(18):imscNames,B="undefined"==typeof imscStyles?e(19):imscStyles,G="undefined"==typeof imscUtils?e(20):imscUtils,F.fromXML=function(e,h,p){var t=U.parser(!0,{xmlns:!0}),g=[],_=[],E=[],m=0,v=null;t.onclosetag=function(e){if(g[0]instanceof A)for(var t in g[0].styles)!function e(t,n,r){for(;0<n.styleRefs.length;){var i=n.styleRefs.pop();i in t.styles?(e(t,t.styles[i],r),P(t.styles[i].styleAttrs,n.styleAttrs)):L(r,"Non-existant style id referenced");}}(g[0],g[0].styles[t],h);else if(g[0]instanceof M||g[0]instanceof N){if(1<g[0].contents.length){for(var n=[g[0].contents[0]],r=1;r<g[0].contents.length;r++)g[0].contents[r]instanceof f&&n[n.length-1]instanceof f?n[n.length-1].text+=g[0].contents[r].text:n.push(g[0].contents[r]);g[0].contents=n;}g[0]instanceof N&&1===g[0].contents.length&&g[0].contents[0]instanceof f&&(g[0].text=g[0].contents[0].text,delete g[0].contents);}else g[0]instanceof y&&(g[0].node.uri===k.ns_tt&&"metadata"===g[0].node.local?m--:0<m&&p&&"onCloseTag"in p&&p.onCloseTag());E.shift(),_.shift(),g.shift();},t.ontext=function(e){var t;void 0===g[0]||(g[0]instanceof N||g[0]instanceof M?((t=new f).initFromText(v,g[0],e,E[0],h),g[0].contents.push(t)):g[0]instanceof y&&0<m&&p&&"onText"in p&&p.onText(e));},t.onopentag=function(e){var t=e.attributes["xml:space"];t?E.unshift(t.value):0===E.length?E.unshift("default"):E.unshift(E[0]);var n,r,i,a,o,s,u,l,d=e.attributes["xml:lang"];if(d?_.unshift(d.value):0===_.length?_.unshift(""):_.unshift(_[0]),e.uri===k.ns_tt?"tt"===e.local?(null!==v&&x(h,"Two <tt> elements at ("+this.line+","+this.column+")"),(v=new T).initFromNode(e,h),g.unshift(v)):"head"===e.local?(g[0]instanceof T||x(h,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==v.head&&x("Second <head> element at ("+this.line+","+this.column+")"),v.head=new S,g.unshift(v.head)):"styling"===e.local?(g[0]instanceof S||x(h,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==v.head.styling&&x("Second <styling> element at ("+this.line+","+this.column+")"),v.head.styling=new A,g.unshift(v.head.styling)):"style"===e.local?g[0]instanceof A?((n=new I).initFromNode(e,h),n.id?v.head.styling.styles[n.id]=n:L(h,"<style> element missing @id attribute"),g.unshift(n)):g[0]instanceof O?((n=new I).initFromNode(e,h),P(n.styleAttrs,g[0].styleAttrs),g.unshift(n)):x(h,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")"):"layout"===e.local?(g[0]instanceof S||x(h,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==v.head.layout&&x(h,"Second <layout> element at "+this.line+","+this.column+")"),v.head.layout=new R,g.unshift(v.head.layout)):"region"===e.local?(g[0]instanceof R||x(h,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(r=new O).initFromNode(v,e,h),!r.id||r.id in v.head.layout.regions?L(h,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):v.head.layout.regions[r.id]=r,g.unshift(r)):"body"===e.local?(g[0]instanceof T||x(h,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==v.body&&x(h,"Second <body> element at "+this.line+","+this.column+")"),(i=new b).initFromNode(v,e,h),v.body=i,g.unshift(i)):"div"===e.local?(g[0]instanceof D||g[0]instanceof b||x(h,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(a=new D).initFromNode(v,g[0],e,h),g[0].contents.push(a),g.unshift(a)):"p"===e.local?(g[0]instanceof D||x(h,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(o=new M).initFromNode(v,g[0],e,h),g[0].contents.push(o),g.unshift(o)):"span"===e.local?(g[0]instanceof N||g[0]instanceof M||x(h,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(s=new N).initFromNode(v,g[0],e,E[0],h),g[0].contents.push(s),g.unshift(s)):"br"===e.local?(g[0]instanceof N||g[0]instanceof M||x(h,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(u=new C).initFromNode(v,g[0],e,h),g[0].contents.push(u),g.unshift(u)):"set"===e.local?(g[0]instanceof N||g[0]instanceof M||g[0]instanceof D||g[0]instanceof b||g[0]instanceof O||g[0]instanceof C||x(h,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(l=new w).initFromNode(v,g[0],e,h),g[0].sets.push(l),g.unshift(l)):g.unshift(new y(e)):g.unshift(new y(e)),g[0]instanceof y)if(e.uri===k.ns_tt&&"metadata"===e.local)m++;else if(0<m&&p&&"onOpenTag"in p){var f=[];for(var c in e.attributes)f[e.attributes[c].uri+" "+e.attributes[c].local]={uri:e.attributes[c].uri,local:e.attributes[c].local,value:e.attributes[c].value};p.onOpenTag(e.uri,e.local,f);}},t.write(e).close(),null!==v.head?delete v.head.styling:v.head=new S,null===v.head.layout&&(v.head.layout=new R);var n,r=!1;for(var i in v.head.layout.regions){r=!0;break}for(var a in r||(n=O.prototype.createDefaultRegion(),v.head.layout.regions[n.id]=n),v.head.layout.regions)d(v,v.head.layout.regions[a],null,null);return v.body&&d(v,v.body,null,null),v},T.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var n=g(e,k.ns_ttp,"cellResolution"),r=15,i=32;{var a;null!==n&&(null!==(a=/(\d+) (\d+)/.exec(n))?(i=parseInt(a[1]),r=parseInt(a[2])):m(t,"Malformed cellResolution value (using initial value instead)"));}return {w:i,h:r}}(e,t);var n=function(e,t){var n,r=g(e,k.ns_ttp,"frameRate"),i=30;{null!==r&&(null!==(n=/(\d+)/.exec(r))?i=parseInt(n[1]):m(t,"Malformed frame rate attribute (using initial value instead)"));}var a=g(e,k.ns_ttp,"frameRateMultiplier"),o=1;{null!==a&&(null!==(n=/(\d+) (\d+)/.exec(a))?o=parseInt(n[1])/parseInt(n[2]):m(t,"Malformed frame rate multiplier attribute (using initial value instead)"));}var s=o*i,u=1,l=g(e,k.ns_ttp,"tickRate");{null===l?null!==r&&(u=s):null!==(n=/(\d+)/.exec(l))?u=parseInt(n[1]):m(t,"Malformed tick rate attribute (using initial value instead)");}return {effectiveFrameRate:s,tickRate:u}}(e,t);this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var n=g(e,k.ns_ittp,"aspectRatio"),r=null;{var i,a,o;null!==n&&(null!==(i=/(\d+) (\d+)/.exec(n))?(a=parseInt(i[1]),o=parseInt(i[2]),0!==a&&0!==o?r=a/o:L(t,"Illegal aspectRatio values (ignoring)")):L(t,"Malformed aspectRatio attribute (ignoring)"));}return r}(e,t);var r=g(e,k.ns_ttp,"timeBase");null!==r&&"media"!==r&&x(t,"Unsupported time base");var i=function(e,t){var n=g(e,k.ns_tts,"extent");if(null===n)return null;var r=n.split(" ");if(2!==r.length)return m(t,"Malformed extent (ignoring)"),null;var i=G.parseLength(r[0]),a=G.parseLength(r[1]);return a&&i?{h:a,w:i}:(m(t,"Malformed extent values (ignoring)"),null)}(e,t);null===i?this.pxDimensions={h:480,w:640}:("px"===i.h.unit&&"px"===i.w.unit||x(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:i.h.value,w:i.w.value});},T.prototype._registerEvent=function(e){var t,n;e.end<=e.begin||((t=v(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY&&((n=v(this.events,e.end)).found||this.events.splice(n.index,0,e.end)));},T.prototype.getMediaTimeRange=function(){return [this.events[0],this.events[this.events.length-1]]},T.prototype.getMediaTimeEvents=function(){return this.events},I.prototype.initFromNode=function(e,t){this.id=c(e),this.styleAttrs=p(e,t),this.styleRefs=h(e);},i.prototype.initFromNode=function(e,t,n,r){this.id=c(n);},a.prototype.initFromNode=function(e,t,n,r){var i;this.regionID=(i=n)&&"region"in i.attributes?i.attributes.region.value:"";},o.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=p(n,r),null!==e.head&&null!==e.head.styling&&E(e.head.styling,h(n),this.styleAttrs,r);},s.prototype.initFromNode=function(e,t,n,r){this.sets=[];},u.prototype.initFromNode=function(e,t,n,r){this.contents=[];},l.prototype.initFromNode=function(e,t,n,r){var i,a,o,s=function(e,t,n){var r=null;t&&"begin"in t.attributes&&null===(r=_(e.tickRate,e.effectiveFrameRate,t.attributes.begin.value))&&m(n,"Malformed begin value "+t.attributes.begin.value+" (using 0)");var i=null;t&&"dur"in t.attributes&&null===(i=_(e.tickRate,e.effectiveFrameRate,t.attributes.dur.value))&&m(n,"Malformed dur value "+t.attributes.dur.value+" (ignoring)");var a=null;t&&"end"in t.attributes&&null===(a=_(e.tickRate,e.effectiveFrameRate,t.attributes.end.value))&&m(n,"Malformed end value (ignoring)");return {explicit_begin:r,explicit_end:a,explicit_dur:i}}(e,n,r);this.explicit_begin=s.explicit_begin,this.explicit_end=s.explicit_end,this.explicit_dur=s.explicit_dur,this.timeContainer=(a=r,(o=(i=n)&&"timeContainer"in i.attributes?i.attributes.timeContainer.value:null)&&"par"!==o?"seq"===o?"seq":(L(a,"Illegal value of timeContainer (assuming 'par')"),"par"):"par");},b.prototype.initFromNode=function(e,t,n){o.prototype.initFromNode.call(this,e,null,t,n),l.prototype.initFromNode.call(this,e,null,t,n),s.prototype.initFromNode.call(this,e,null,t,n),a.prototype.initFromNode.call(this,e,null,t,n),u.prototype.initFromNode.call(this,e,null,t,n);},D.prototype.initFromNode=function(e,t,n,r){o.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),s.prototype.initFromNode.call(this,e,t,n,r),a.prototype.initFromNode.call(this,e,t,n,r),u.prototype.initFromNode.call(this,e,t,n,r);},M.prototype.initFromNode=function(e,t,n,r){o.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),s.prototype.initFromNode.call(this,e,t,n,r),a.prototype.initFromNode.call(this,e,t,n,r),u.prototype.initFromNode.call(this,e,t,n,r);},N.prototype.initFromNode=function(e,t,n,r,i){o.prototype.initFromNode.call(this,e,t,n,i),l.prototype.initFromNode.call(this,e,t,n,i),s.prototype.initFromNode.call(this,e,t,n,i),a.prototype.initFromNode.call(this,e,t,n,i),u.prototype.initFromNode.call(this,e,t,n,i),this.space=r;},f.prototype.initFromText=function(e,t,n,r,i){l.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r;},C.prototype.initFromNode=function(e,t,n,r){a.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r);},O.prototype.createDefaultRegion=function(){var e=new O;return i.call(e,""),o.call(e,{}),s.call(e,[]),l.call(e,0,Number.POSITIVE_INFINITY,null),e},O.prototype.initFromNode=function(e,t,n){i.prototype.initFromNode.call(this,e,null,t,n),o.prototype.initFromNode.call(this,e,null,t,n),l.prototype.initFromNode.call(this,e,null,t,n),s.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&E(e.head.styling,h(t),this.styleAttrs,n);},w.prototype.initFromNode=function(e,t,n,r){l.prototype.initFromNode.call(this,e,t,n,r);var i=p(n,r);for(var a in this.qname=null,this.value=null,i){if(this.qname){L(r,"More than one style specified on set");break}this.qname=a,this.value=i[a];}};},{18:18,19:19,20:20,40:40}],15:[function(e,t,n){!function(e,R){function b(e,t,n){for(var r in e){var i=e[r].elements.length,a=e[r].elements[e[r].start_elem],o=e[r].elements[e[r].end_elem],s=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=u):"rl"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=u):"tb"===n.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=s,a.node.style.marginTop=u),"lr"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=u):"rl"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=u):"tb"===n.ipd&&(o.node.style.borderBottomColor=o.bgcolor||"#00000000",o.node.style.borderBottomStyle="solid",o.node.style.borderBottomWidth=s,o.node.style.marginBottom=u));}}function D(e){for(var t=0;t<e.length-1;t++){var n,r,i=e[t].elements.length;0!==i&&!1===e[t].br&&(n=document.createElement("br"),(r=e[t].elements[i-1].node).parentElement.insertBefore(n,r.nextSibling));}}function M(e,t,n,r){for(var i=Math.sign(n-t),a=0;a<=e.length;a++){var o,s,u=0===a?t:a===e.length?n:(e[a].before+e[a-1].after)/2;if(0<a)for(var l=0;l<e[a-1].elements.length;l++)null!==e[a-1].elements[l].bgcolor&&i*((s=e[a-1].elements[l]).after-u)<0&&(o=Math.ceil(Math.abs(u-s.after))+"px",s.node.style.backgroundColor=s.bgcolor,"lr"===r.bpd?s.node.style.paddingRight=o:"rl"===r.bpd?s.node.style.paddingLeft=o:"tb"===r.bpd&&(s.node.style.paddingBottom=o));if(a<e.length)for(var d=0;d<e[a].elements.length;d++)null!==(s=e[a].elements[d]).bgcolor&&0<i*(s.before-u)&&(o=Math.ceil(Math.abs(s.before-u))+"px",s.node.style.backgroundColor=s.bgcolor,"lr"===r.bpd?s.node.style.paddingLeft=o:"rl"===r.bpd?s.node.style.paddingRight=o:"tb"===r.bpd&&(s.node.style.paddingTop=o));}}function N(e,t){this.id=e,this.plist=t;}function C(e,t){var n={before:null,after:null,start:null,end:null};return "tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function O(e,t,n,r){var i,a,o,s,u=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName){var l=t.getBoundingClientRect();if(0===l.height||0===l.width)return;var d,f,c=C(l,e);0!==n.length&&(i=c.before,a=c.after,o=n[n.length-1].before,s=n[n.length-1].after,a<s&&o<i||s<=a&&i<=o)?(d=Math.sign(c.after-c.before),f=Math.sign(c.end-c.start),d*(c.before-n[n.length-1].before)<0&&(n[n.length-1].before=c.before),0<d*(c.after-n[n.length-1].after)&&(n[n.length-1].after=c.after),f*(c.start-n[n.length-1].start)<0&&(n[n.length-1].start=c.start,n[n.length-1].start_elem=n[n.length-1].elements.length),0<f*(c.end-n[n.length-1].end)&&(n[n.length-1].end=c.end,n[n.length-1].end_elem=n[n.length-1].elements.length)):n.push({before:c.before,after:c.after,start:c.start,end:c.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1}),n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:u,before:c.before,after:c.after});}else "br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var h=t.firstChild;h;)h.nodeType===Node.ELEMENT_NODE&&O(e,h,n,u),h=h.nextSibling;}function t(e,t){this.qname=e,this.map=t;}e.render=function(e,t,n,r,i,a,o,s,u){var l,d=r||t.clientHeight,f=i||t.clientWidth;null!==e.aspectRatio&&(f<(l=d*e.aspectRatio)?d=Math.round(f/e.aspectRatio):f=l);var c=document.createElement("div");c.style.position="relative",c.style.width=f+"px",c.style.height=d+"px",c.style.margin="auto",c.style.top=0,c.style.bottom=0,c.style.left=0,c.style.right=0,c.style.zIndex=0;var h={h:d,w:f,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:o,previousISDState:s,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var p in t.appendChild(c),e.contents)!function e(t,n,r){var i;"region"===r.kind?(i=document.createElement("div")).style.position="absolute":"body"===r.kind||"div"===r.kind?i=document.createElement("div"):"p"===r.kind?i=document.createElement("p"):"span"===r.kind?i=document.createElement("span"):"br"===r.kind&&(i=document.createElement("br"));if(!i)return void P(t.errorHandler,"Error processing ISD element kind: "+r.kind);i.style.margin="0";for(var a in w){var o=w[a],s=r.styleAttrs[o.qname];void 0!==s&&null!==o.map&&o.map(t,i,r,s);}var u=i;{var l;"region"===r.kind&&("lrtb"===(l=r.styleAttrs[R.byName.writingMode.qname])||"lr"===l?(t.ipd="lr",t.bpd="tb"):"rltb"===l||"rl"===l?(t.ipd="rl",t.bpd="tb"):"tblr"===l?(t.ipd="tb",t.bpd="lr"):"tbrl"!==l&&"tb"!==l||(t.ipd="tb",t.bpd="rl"));}var d=r.styleAttrs[R.byName.linePadding.qname];{var f;d&&0<d&&(f=Math.ceil(d*t.h)+"px","tb"===t.bpd?(u.style.paddingLeft=f,u.style.paddingRight=f):(u.style.paddingTop=f,u.style.paddingBottom=f),t.lp=d);}var c=r.styleAttrs[R.byName.multiRowAlign.qname];{var h;c&&"auto"!==c&&((h=document.createElement("span")).style.display="inline-block",h.style.textAlign=c,i.appendChild(h),u=h,t.mra=c);}r.styleAttrs[R.byName.fillLineGap.qname]&&(t.flg=!0);if("span"===r.kind&&r.text)if(t.lp||t.mra||t.flg)for(var p="",g=0;g<r.text.length;g++){p+=r.text.charAt(g);var _,E=r.text.charCodeAt(g);(E<55296||56319<E||g===r.text.length)&&((_=document.createElement("span")).textContent=p,i.appendChild(_),p="");}else i.textContent=r.text;n.appendChild(i);for(var m in r.contents)e(t,u,r.contents[m]);var v=[];{var y;(t.lp||t.mra||t.flg)&&"p"===r.kind&&(O(t,u,v,null),t.mra&&(D(v),t.mra=null),t.lp&&(b(v,t.lp*t.h,t),t.lp=null),t.flg&&(y=C(u.getBoundingClientRect(),t),M(v,y.before,y.after,t),t.flg=null));}{var T,S,A,I;"region"===r.kind&&(O(t,u,v),"tb"===t.bpd&&t.enableRollUp&&0<r.contents.length&&"after"===r.styleAttrs[R.byName.displayAlign.qname]&&(T=""===r.id?"_":r.id,S=new N(T,v),t.currentISDState[S.id]=S,t.previousISDState&&S.id in t.previousISDState&&0<t.previousISDState[S.id].plist.length&&1<S.plist.length&&S.plist[S.plist.length-2].text===t.previousISDState[S.id].plist[t.previousISDState[S.id].plist.length-1].text&&(A=i.firstElementChild,I=S.plist[S.plist.length-1].after-S.plist[S.plist.length-1].before,A.style.bottom="-"+I+"px",A.style.transition="transform 0.4s",A.style.position="relative",A.style.transform="translateY(-"+I+"px)")));}}(h,c,e.contents[p]);return h.currentISDState};var w=[new t("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")");}),new t("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")";}),new t("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r;}),new t("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new t("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end");}),new t("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,a=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(i=(o[0]+o[2])*e.h,a=(o[1]+o[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-a+"px";}),new t("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[a]?i.push("serif"):i.push(r[a]);t.style.fontFamily=i.join(",");}),new t("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r*e.h+"px";}),new t("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r;}),new t("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r;}),new t("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px";}),new t("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r;}),new t("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px";}),new t("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r;}),new t("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ");}),new t("http://www.w3.org/ns/ttml#styling showBackground",null),new t("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,r){var i=n.styleAttrs[R.byName.direction.qname],a="start"===r?"rtl"===i?"right":"left":"end"===r?"rtl"===i?"left":"right":r;t.style.textAlign=a;}),new t("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through");}),new t("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px";}),new t("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){var i="bidiOverride"===r?"bidi-override":r;t.style.unicodeBidi=i;}),new t("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r;}),new t("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap";}),new t("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl");}),new t("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r;}),new t("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,r){var i,a;null!==e.imgResolver&&null!==r&&(i=document.createElement("img"),(a=e.imgResolver(r,i))&&(i.src=a),i.height=e.regionH,i.width=e.regionW,t.appendChild(i));}),new t("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden");})],n={};for(var r in w)n[w[r].qname]=w[r];function P(e,t){if(e&&e.error&&e.error(t))throw t}}(void 0===n?this.imscHTML={}:n,("undefined"==typeof imscNames&&e(18),"undefined"==typeof imscStyles?e(19):imscStyles));},{18:18,19:19}],16:[function(e,t,n){function F(e,t){if("contents"in e)for(var n in e.contents)F(e.contents[n],t);else t.push(e);}function U(e){if("br"!==e.kind){if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)U(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}}function s(e){this.contents=[],this.aspectRatio=e.aspectRatio;}function k(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space);}function B(e,t){if(e&&e.error&&e.error(t))throw t}var r,G;r=void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames&&e(18),G="undefined"==typeof imscStyles?e(19):imscStyles,r.generateISD=function(e,t,n){var r=new s(e),i={};for(var a in e.head.layout.regions){var o=function e(t,n,r,i,a,o,s,u,l){if(n<s.begin||n>=s.end)return null;var d="regionID"in s&&""!==s.regionID?s.regionID:o;if(null!==a&&d!==r.id&&(!("contents"in s)||"contents"in s&&0===s.contents.length||""!==d))return null;var f=new k(s);for(var c in s.sets)n<s.sets[c].begin||n>=s.sets[c].end||(f.styleAttrs[s.sets[c].qname]=s.sets[c].value);var h={};for(var p in f.styleAttrs){var g;h[p]=!0,p!==G.byName.writingMode.qname||G.byName.direction.qname in f.styleAttrs||("lrtb"===(g=f.styleAttrs[p])||"lr"===g?f.styleAttrs[G.byName.direction.qname]="ltr":"rltb"!==g&&"rl"!==g||(f.styleAttrs[G.byName.direction.qname]="rtl"));}if(null!==a)for(var _ in G.all){var E,m,v,y=G.all[_];y.qname===G.byName.textDecoration.qname?(E=a.styleAttrs[y.qname],m=f.styleAttrs[y.qname],v=[],void 0===m?v=E:-1===m.indexOf("none")?((-1===m.indexOf("noUnderline")&&-1!==E.indexOf("underline")||-1!==m.indexOf("underline"))&&v.push("underline"),(-1===m.indexOf("noLineThrough")&&-1!==E.indexOf("lineThrough")||-1!==m.indexOf("lineThrough"))&&v.push("lineThrough"),(-1===m.indexOf("noOverline")&&-1!==E.indexOf("overline")||-1!==m.indexOf("overline"))&&v.push("overline")):v.push("none"),f.styleAttrs[y.qname]=v):y.inherit&&y.qname in a.styleAttrs&&!(y.qname in f.styleAttrs)&&(f.styleAttrs[y.qname]=a.styleAttrs[y.qname]);}for(var T in G.all){var S=G.all[T];S.qname in f.styleAttrs||("region"===f.kind||!1===S.inherit&&null!==S.initial)&&(f.styleAttrs[S.qname]=S.parse(S.initial),h[S.qname]=!0);}for(var A in G.all){var I,R=G.all[A];R.qname in h&&null!==R.compute&&(null!==(I=R.compute(t,a,f,f.styleAttrs[R.qname],l))?f.styleAttrs[R.qname]=I:B(u,"Style '"+R.qname+"' on element '"+f.kind+"' cannot be computed"));}if("none"===f.styleAttrs[G.byName.display.qname])return null;var b;null===a?b=null===i?[]:[i]:"contents"in s&&(b=s.contents);for(var D in b){var M=e(t,n,r,i,f,d,b[D],u,l);null!==M&&f.contents.push(M.element);}for(var N in f.styleAttrs){var C=G.byQName[N];-1===C.applies.indexOf(f.kind)&&delete f.styleAttrs[N];}{var O;"span"===f.kind&&f.text&&"default"===f.space&&(O=f.text.replace(/\s+/g," "),f.text=O);}if("p"===f.kind){var w=[];F(f,w);for(var P=0,L="after_br",x=0;;)if("after_br"===L)P>=w.length||"br"===w[P].kind?(L="before_br",x=P,P--):("preserve"!==w[P].space&&(w[P].text=w[P].text.replace(/^\s+/g,"")),0<w[P].text.length?(L="looking_br",P++):w.splice(P,1));else if("before_br"===L)if(P<0||"br"===w[P].kind){if(L="after_br",(P=x+1)>=w.length)break}else if("preserve"!==w[P].space&&(w[P].text=w[P].text.replace(/\s+$/g,"")),0<w[P].text.length){if(L="after_br",(P=x+1)>=w.length)break}else w.splice(P,1),P--;else P>=w.length||"br"===w[P].kind?(L="before_br",x=P,P--):P++;U(f);}if("div"===f.kind&&G.byName.backgroundImage.qname in f.styleAttrs||"br"===f.kind||"contents"in f&&0<f.contents.length||"span"===f.kind&&null!==f.text||"region"===f.kind&&"always"===f.styleAttrs[G.byName.showBackground.qname])return {region_id:d,element:f};return null}(e,t,e.head.layout.regions[a],e.body,null,"",e.head.layout.regions[a],n,i);null!==o&&r.contents.push(o.element);}return r};},{18:18,19:19}],17:[function(e,t,n){n.generateISD=e(16).generateISD,n.fromXML=e(14).fromXML,n.renderHTML=e(15).render;},{14:14,15:15,16:16}],18:[function(e,t,n){var r;(r=void 0===n?this.imscNames={}:n).ns_tt="http://www.w3.org/ns/ttml",r.ns_tts="http://www.w3.org/ns/ttml#styling",r.ns_ttp="http://www.w3.org/ns/ttml#parameter",r.ns_xml="http://www.w3.org/XML/1998/namespace",r.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",r.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",r.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",r.ns_ebutts="urn:ebu:tt:style";},{}],19:[function(e,t,n){!function(l,e,a){function t(e,t,n,r,i,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=o,this.compute=s;}for(var n in l.all=[new t(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new t(e.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new t(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new t(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),r=a.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,n,r,i){var a,o;if("auto"===r)a=1;else if("%"===r.h.unit)a=r.h.value/100;else {if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h;}if("auto"===r)o=1;else if("%"===r.w.unit)o=r.w.value/100;else {if("px"!==r.w.unit)return null;o=r.w.value/e.pxDimensions.w;}return {h:a,w:o}}),new t(e.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n},null),new t(e.ns_tts,"fontSize","1c",["span"],!0,!0,a.parseLength,function(e,t,n,r,i){var a;if("%"===r.unit)a=null!==t?t.styleAttrs[l.byName.fontSize.qname]*r.value/100:r.value/100/e.cellResolution.h;else if("em"===r.unit)a=null!==t?t.styleAttrs[l.byName.fontSize.qname]*r.value:r.value/e.cellResolution.h;else if("c"===r.unit)a=r.value/e.cellResolution.h;else {if("px"!==r.unit)return null;a=r.value/e.pxDimensions.h;}return a}),new t(e.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return "normal"===e?e:a.parseLength(e)},function(e,t,n,r,i){var a;if("normal"===r)a=r;else if("%"===r.unit)a=n.styleAttrs[l.byName.fontSize.qname]*r.value/100;else if("em"===r.unit)a=n.styleAttrs[l.byName.fontSize.qname]*r.value;else if("c"===r.unit)a=r.value/e.cellResolution.h;else {if("px"!==r.unit)return null;a=r.value/e.pxDimensions.h;}return a}),new t(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new t(e.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),r=a.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,n,r,i){var a,o;if("auto"===r)a=0;else if("%"===r.h.unit)a=r.h.value/100;else {if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h;}if("auto"===r)o=0;else if("%"===r.w.unit)o=r.w.value/100;else {if("px"!==r.w.unit)return null;o=r.w.value/e.pxDimensions.w;}return {h:a,w:o}}),new t(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;var n=[];for(var r in t){var i=a.parseLength(t[r]);if(!i)return null;n.push(i);}return n},function(e,t,n,r,i){var a;if(1===r.length)a=[r[0],r[0],r[0],r[0]];else if(2===r.length)a=[r[0],r[1],r[0],r[1]];else if(3===r.length)a=[r[0],r[1],r[2],r[1]];else {if(4!==r.length)return null;a=[r[0],r[1],r[2],r[3]];}var o=n.styleAttrs[l.byName.writingMode.qname];if("lrtb"===o||"lr"===o)a=[a[0],a[3],a[2],a[1]];else if("rltb"===o||"rl"===o)a=[a[0],a[1],a[2],a[3]];else if("tblr"===o)a=[a[3],a[0],a[1],a[2]];else {if("tbrl"!==o&&"tb"!==o)return null;a=[a[3],a[2],a[1],a[0]];}var s=[];for(var u in a)if(0===a[u].value)s[u]=0;else if("%"===a[u].unit)s[u]="0"===u||"2"===u?n.styleAttrs[l.byName.extent.qname].h*a[u].value/100:n.styleAttrs[l.byName.extent.qname].w*a[u].value/100;else if("em"===a[u].unit)s[u]=n.styleAttrs[l.byName.fontSize.qname]*a[u].value;else if("c"===a[u].unit)s[u]=a[u].value/e.cellResolution.h;else {if("px"!==a[u].unit)return null;s[u]="0"===u||"2"===u?a[u].value/e.pxDimensions.h:a[u].value/e.pxDimensions.w;}return s}),new t(e.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r,i){return "left"===r?"start":"right"===r?"end":r}),new t(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new t(e.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||2<n.length)return null;var r=a.parseColor(n[0]);if(null!==(t.color=r)&&n.shift(),1!==n.length)return null;var i=a.parseLength(n[0]);return i?(t.thickness=i,t):null},function(e,t,n,r,i){if("none"===r)return r;var a={};if(null===r.color?a.color=n.styleAttrs[l.byName.color.qname]:a.color=r.color,"%"===r.thickness.unit)a.thickness=n.styleAttrs[l.byName.fontSize.qname]*r.thickness.value/100;else if("em"===r.thickness.unit)a.thickness=n.styleAttrs[l.byName.fontSize.qname]*r.thickness.value;else if("c"===r.thickness.unit)a.thickness=r.thickness.value/e.cellResolution.h;else {if("px"!==r.thickness.unit)return null;a.thickness=r.thickness.value/e.pxDimensions.h;}return a}),new t(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new t(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return "auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new t(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,function(e,t,n,r,i){return "c"===r.unit?r.value/e.cellResolution.h:null}),new t(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new t(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new t(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return "true"===e},null),new t(e.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return "true"===e},null)],l.byQName={},l.all)l.byQName[l.all[n].qname]=l.all[n];for(var r in l.byName={},l.all)l.byName[l.all[r].name]=l.all[r];}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(18):imscNames,"undefined"==typeof imscUtils?e(20):imscUtils);},{18:18,20:20}],20:[function(e,t,n){!function(e){var i=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,a=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,s={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var t,n=null,r=s[e.toLowerCase()];return void 0!==r?n=r:null!==(t=i.exec(e))?n=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),void 0!==t[4]?parseInt(t[4],16):255]:null!==(t=a.exec(e))?n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]:null!==(t=o.exec(e))&&(n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]),n};var r=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=r.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n};}(void 0===n?this.imscUtils={}:n);},{}],21:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e;};},{}],22:[function(e,t,n){function r(e){return !!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t;};},{}],23:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return "[object Array]"==r.call(e)};},{}],24:[function(e,t,n){(function(s){!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,o=arguments.length;switch(o){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t);});case 3:return s.nextTick(function(){e.call(null,t,n);});case 4:return s.nextTick(function(){e.call(null,t,n,r);});default:for(i=new Array(o-1),a=0;a<i.length;)i[a++]=arguments[a];return s.nextTick(function(){e.apply(null,i);})}}}:t.exports=s;}).call(this,e(25));},{25:25}],25:[function(e,t,n){var r,i,a=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o;}catch(e){r=o;}try{i="function"==typeof clearTimeout?clearTimeout:s;}catch(e){i=s;}}();var l,d=[],f=!1,c=-1;function h(){f&&l&&(f=!1,l.length?d=l.concat(d):c=-1,d.length&&p());}function p(){if(!f){var e=u(h);f=!0;for(var t=d.length;t;){for(l=d,d=[];++c<t;)l&&l[c].run();c=-1,t=d.length;}l=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t);}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e);}}function g(e,t){this.fun=e,this.array=t;}function _(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new g(e,t)),1!==d.length||f||u(p);},g.prototype.run=function(){this.fun.apply(null,this.array);},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(e){return []},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return "/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0};},{}],26:[function(e,t,n){t.exports=e(27);},{27:27}],27:[function(e,t,n){var r=e(24),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=f;var a=e(10);a.inherits=e(21);var o=e(29),s=e(31);a.inherits(f,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var d=u[l];f.prototype[d]||(f.prototype[d]=s.prototype[d]);}function f(e){if(!(this instanceof f))return new f(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c);}function c(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this);}function h(e){e.end();}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e);}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e);};},{10:10,21:21,24:24,29:29,31:31}],28:[function(e,t,n){t.exports=a;var r=e(30),i=e(10);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e);}i.inherits=e(21),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e);};},{10:10,21:21,30:30}],29:[function(P,L,e){(function(_,e){var E=P(24);L.exports=c;var o,m=P(23);c.ReadableState=a;function v(e,t){return e.listeners(t).length}P(11).EventEmitter;var i=P(34),l=P(39).Buffer,d=e.Uint8Array||function(){};var t=P(10);t.inherits=P(21);var s,n=P(7),y=void 0,y=n&&n.debuglog?n.debuglog("stream"):function(){},u=P(32),r=P(33);t.inherits(c,i);var f=["error","close","destroy","pause","resume"];function a(e,t){e=e||{};var n=t instanceof(o=o||P(27));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s=s||P(42).StringDecoder,this.decoder=new s(e.encoding),this.encoding=e.encoding);}function c(e){if(o=o||P(27),!(this instanceof c))return new c(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this);}function h(e,t,n,r,i){var a,o,s,u=e._readableState;return null===t?(u.reading=!1,function(e,t){if(t.ended)return;{var n;!t.decoder||(n=t.decoder.end())&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length);}t.ended=!0,S(e);}(e,u)):(i||(a=function(e,t){var n;(function(e){return l.isBuffer(e)||e instanceof d})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(u,t)),a?e.emit("error",a):u.objectMode||t&&0<t.length?("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===l.prototype||(o=t,t=l.from(o)),r?u.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):p(e,u,t,!0):u.ended?e.emit("error",new Error("stream.push() after EOF")):(u.reading=!1,u.decoder&&!n?(t=u.decoder.write(t),u.objectMode||0!==t.length?p(e,u,t,!1):I(e,u)):p(e,u,t,!1))):r||(u.reading=!1)),!(s=u).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function p(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&S(e)),I(e,t);}Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e);}}),c.prototype.destroy=r.destroy,c.prototype._undestroy=r.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e);},c.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),h(this,e,t,!1,n)},c.prototype.unshift=function(e){return h(this,e,null,!0,!1)},c.prototype.isPaused=function(){return !1===this._readableState.flowing},c.prototype.setEncoding=function(e){return s=s||P(42).StringDecoder,this._readableState.decoder=new s(e),this._readableState.encoding=e,this};var g=8388608;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(g<=(n=e)?n=g:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n;}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(y("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?E.nextTick(A,e):A(e));}function A(e){y("emit readable"),e.emit("readable"),M(e);}function I(e,t){t.readingMore||(t.readingMore=!0,E.nextTick(R,e,t));}function R(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(y("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1;}function b(e){y("readable nexttick read 0"),e.read(0);}function D(e,t){t.reading||(y("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0);}function M(e){var t=e._readableState;for(y("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():(n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=a.slice(o);break}++r;}return t.length-=r,i}:function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=a.slice(o);break}++i;}return t.length-=i,n})(e,t);return r}(e,t.buffer,t.decoder),n);var n;}function C(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,E.nextTick(O,t,e));}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"));}function w(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}c.prototype.read=function(e){y("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return y("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?C:S)(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&C(this),null;var r,i=t.needReadable;return y("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&y("length less than watermark",i=!0),t.ended||t.reading?y("reading or ended",i=!1):i&&(y("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=0<e?N(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&C(this)),null!==r&&this.emit("data",r),r},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"));},c.prototype.pipe=function(n,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n);}i.pipesCount+=1,y("pipe count=%d opts=%j",i.pipesCount,e);var t=(!e||!1!==e.end)&&n!==_.stdout&&n!==_.stderr?o:g;function a(e,t){y("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,y("cleanup"),n.removeListener("close",h),n.removeListener("finish",p),n.removeListener("drain",u),n.removeListener("error",c),n.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",g),r.removeListener("data",f),l=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||u());}function o(){y("onend"),n.end();}i.endEmitted?E.nextTick(t):r.once("end",t),n.on("unpipe",a);var s,u=(s=r,function(){var e=s._readableState;y("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&v(s,"data")&&(e.flowing=!0,M(s));});n.on("drain",u);var l=!1;var d=!1;function f(e){y("ondata"),(d=!1)!==n.write(e)||d||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==w(i.pipes,n))&&!l&&(y("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause());}function c(e){y("onerror",e),g(),n.removeListener("error",c),0===v(n,"error")&&n.emit("error",e);}function h(){n.removeListener("finish",p),g();}function p(){y("onfinish"),n.removeListener("close",h),g();}function g(){y("unpipe"),r.unpipe(n);}return r.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?m(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n);}(n,"error",c),n.once("close",h),n.once("finish",p),n.emit("pipe",r),i.flowing||(y("pipe resume"),r.resume()),n},c.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=w(t.pipes,e);return -1===o||(t.pipes.splice(o,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},c.prototype.addListener=c.prototype.on=function(e,t){var n,r=i.prototype.on.call(this,e,t);return "data"===e?!1!==this._readableState.flowing&&this.resume():"readable"===e&&((n=this._readableState).endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):E.nextTick(b,this))),r},c.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(y("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,E.nextTick(D,e,t))),this},c.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(t){var n=this,r=this._readableState,i=!1;for(var e in t.on("end",function(){var e;y("wrapped end"),!r.decoder||r.ended||(e=r.decoder.end())&&e.length&&n.push(e),n.push(null);}),t.on("data",function(e){y("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&(n.push(e)||(i=!0,t.pause()));}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<f.length;a++)t.on(f[a],this.emit.bind(this,f[a]));return this._read=function(e){y("wrapped _read",e),i&&(i=!1,t.resume());},this},Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),c._fromList=N;}).call(this,P(25),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{10:10,11:11,21:21,23:23,24:24,25:25,27:27,32:32,33:33,34:34,39:39,42:42,7:7}],30:[function(e,t,n){t.exports=a;var r=e(27),i=e(10);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o);}function o(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){s(n,e,t);}):s(this,null,null);}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e(21),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r,i=this._transformState;i.writecb=n,i.writechunk=e,i.writeencoding=t,i.transforming||(r=this._readableState,(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark));},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0;},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close");});};},{10:10,21:21,27:27}],31:[function(A,I,e){(function(e,t,n){var E=A(24);function f(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next;}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e;}(t,e);};}I.exports=c;var s,u=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?n:E.nextTick;c.WritableState=d;var r=A(10);r.inherits=A(21);var i={deprecate:A(44)},a=A(34),m=A(39).Buffer,v=t.Uint8Array||function(){};var o,l=A(33);function y(){}function d(e,t){s=s||A(27),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=e.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;{var a;(((function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0;})))(n),t?function(e,t,n,r,i){--t.pendingcb,n?(E.nextTick(i,r),E.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t));}(e,n,r,t,i):((a=g(n))||n.corked||n.bufferProcessing||!n.bufferedRequest||p(e,n),r?u(h,e,n,a,i):h(e,n,a,i));}}(t,e);},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this);}function c(e){if(s=s||A(27),!(o.call(c,this)||this instanceof s))return new c(e);this._writableState=new d(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this);}function T(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1;}function h(e,t,n,r){var i,a;n||(i=e,0===(a=t).length&&a.needDrain&&(a.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),S(e,t);}function p(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var o=0,s=!0;n;)(i[o]=n).isBuf||(s=!1),n=n.next,o+=1;i.allBuffers=s,T(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new f(t),t.bufferedRequestCount=0;}else {for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(T(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null);}t.bufferedRequest=n,t.bufferProcessing=!1;}function g(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),S(t,n);});}function S(e,t){var n,r,i=g(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,E.nextTick(_,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}r.inherits(c,a),d.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(d.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")});}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return !!o.call(this,e)||this===c&&(e&&e._writableState instanceof d)}})):o=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"));},c.prototype.write=function(e,t,n){var r,i,a,o,s,u,l,d,f,c,h,p=this._writableState,g=!1,_=!p.objectMode&&(r=e,m.isBuffer(r)||r instanceof v);return _&&!m.isBuffer(e)&&(i=e,e=m.from(i)),"function"==typeof t&&(n=t,t=null),t=_?"buffer":t||p.defaultEncoding,"function"!=typeof n&&(n=y),p.ended?(f=this,c=n,h=new Error("write after end"),f.emit("error",h),E.nextTick(c,h)):(_||(a=this,o=p,u=n,d=!(l=!0),null===(s=e)?d=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||o.objectMode||(d=new TypeError("Invalid non-string/buffer chunk")),d&&(a.emit("error",d),E.nextTick(u,d),l=!1),l))&&(p.pendingcb++,g=function(e,t,n,r,i,a){{var o;n||(o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=m.from(t,n));return t}(t,r,i),r!==o&&(n=!0,i="buffer",r=o));}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);{var l;t.writing||t.corked?(l=t.lastBufferedRequest,t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):T(e,t,!1,s,r,i,a);}return u}(this,p,_,e,t,n)),g},c.prototype.cork=function(){this._writableState.corked++;},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||p(this,e));},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"));},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?E.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1;}(this,r,n);},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e);}}),c.prototype.destroy=l.destroy,c.prototype._undestroy=l.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e);};}).call(this,A(25),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},A(43).setImmediate);},{10:10,21:21,24:24,25:25,27:27,33:33,34:34,39:39,43:43,44:44}],32:[function(e,t,n){var s=e(39).Buffer,r=e(7);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0;}t.exports=(i.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length;},i.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length;},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0;},i.prototype.join=function(e){if(0===this.length)return "";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},i.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,i=s.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,n=i,r=o,t.copy(n,r),o+=a.data.length,a=a.next;return i},i),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e});},{39:39,7:7}],33:[function(e,t,n){var a=e(24);function o(e,t){e.emit("error",t);}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e);})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1);}};},{24:24}],34:[function(e,t,n){t.exports=e(11).EventEmitter;},{11:11}],35:[function(e,t,n){t.exports=e(36).PassThrough;},{36:36}],36:[function(e,t,n){(((n=t.exports=e(29)).Stream=n).Readable=n).Writable=e(31),n.Duplex=e(27),n.Transform=e(30),n.PassThrough=e(28);},{27:27,28:28,29:29,30:30,31:31}],37:[function(e,t,n){t.exports=e(36).Transform;},{36:36}],38:[function(e,t,n){t.exports=e(31);},{31:31}],39:[function(e,t,n){var r=e(8),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n];}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,n),n.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};},{8:8}],40:[function(Y,e,t){(function(j){!function(u){u.parser=function(e,t){return new i(e,t)},u.SAXParser=i,u.SAXStream=o,u.createStream=function(e,t){return new o(e,t)},u.MAX_BUFFER_LENGTH=65536;var r,l=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(e,t){if(!(this instanceof i))return new i(e,t);var n=this;!function(e){for(var t=0,n=l.length;t<n;t++)e[l[t]]="";}(n),n.q=n.c="",n.bufferCheckPosition=u.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=R.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(u.XML_ENTITIES):Object.create(u.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(g)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),D(n,"onready");}u.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){w(this);},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return O(t,"Cannot write after close. Assign an onready handler.");if(null===e)return w(t);"object"==typeof e&&(e=e.toString());var n,r,i=0,a="";for(;a=B(e,i++),t.c=a;)switch(t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++),t.state){case R.BEGIN:if(t.state=R.BEGIN_WHITESPACE,"\ufeff"===a)continue;k(t,a);continue;case R.BEGIN_WHITESPACE:k(t,a);continue;case R.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=i-1;a&&"<"!==a&&"&"!==a;)(a=B(e,i++))&&t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,i-1);}"<"!==a||t.sawRoot&&t.closedRoot&&!t.strict?(!S(_,a)||t.sawRoot&&!t.closedRoot||P(t,"Text data outside of root node."),"&"===a?t.state=R.TEXT_ENTITY:t.textNode+=a):(t.state=R.OPEN_WAKA,t.startTagPosition=t.position);continue;case R.SCRIPT:"<"===a?t.state=R.SCRIPT_ENDING:t.script+=a;continue;case R.SCRIPT_ENDING:"/"===a?t.state=R.CLOSE_TAG:(t.script+="<"+a,t.state=R.SCRIPT);continue;case R.OPEN_WAKA:var s;"!"===a?(t.state=R.SGML_DECL,t.sgmlDecl=""):T(_,a)||(T(E,a)?(t.state=R.OPEN_TAG,t.tagName=a):"/"===a?(t.state=R.CLOSE_TAG,t.tagName=""):"?"===a?(t.state=R.PROC_INST,t.procInstName=t.procInstBody=""):(P(t,"Unencoded <"),t.startTagPosition+1<t.position&&(s=t.position-t.startTagPosition,a=new Array(s).join(" ")+a),t.textNode+="<"+a,t.state=R.TEXT));continue;case R.SGML_DECL:(t.sgmlDecl+a).toUpperCase()===c?(M(t,"onopencdata"),t.state=R.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+a==="--"?(t.state=R.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+a).toUpperCase()===h?(t.state=R.DOCTYPE,(t.doctype||t.sawRoot)&&P(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===a?(M(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=R.TEXT):(T(d,a)&&(t.state=R.SGML_DECL_QUOTED),t.sgmlDecl+=a);continue;case R.SGML_DECL_QUOTED:a===t.q&&(t.state=R.SGML_DECL,t.q=""),t.sgmlDecl+=a;continue;case R.DOCTYPE:">"===a?(t.state=R.TEXT,M(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=a,"["===a?t.state=R.DOCTYPE_DTD:T(d,a)&&(t.state=R.DOCTYPE_QUOTED,t.q=a));continue;case R.DOCTYPE_QUOTED:t.doctype+=a,a===t.q&&(t.q="",t.state=R.DOCTYPE);continue;case R.DOCTYPE_DTD:t.doctype+=a,"]"===a?t.state=R.DOCTYPE:T(d,a)&&(t.state=R.DOCTYPE_DTD_QUOTED,t.q=a);continue;case R.DOCTYPE_DTD_QUOTED:t.doctype+=a,a===t.q&&(t.state=R.DOCTYPE_DTD,t.q="");continue;case R.COMMENT:"-"===a?t.state=R.COMMENT_ENDING:t.comment+=a;continue;case R.COMMENT_ENDING:"-"===a?(t.state=R.COMMENT_ENDED,t.comment=C(t.opt,t.comment),t.comment&&M(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+a,t.state=R.COMMENT);continue;case R.COMMENT_ENDED:">"!==a?(P(t,"Malformed comment"),t.comment+="--"+a,t.state=R.COMMENT):t.state=R.TEXT;continue;case R.CDATA:"]"===a?t.state=R.CDATA_ENDING:t.cdata+=a;continue;case R.CDATA_ENDING:"]"===a?t.state=R.CDATA_ENDING_2:(t.cdata+="]"+a,t.state=R.CDATA);continue;case R.CDATA_ENDING_2:">"===a?(t.cdata&&M(t,"oncdata",t.cdata),M(t,"onclosecdata"),t.cdata="",t.state=R.TEXT):"]"===a?t.cdata+="]":(t.cdata+="]]"+a,t.state=R.CDATA);continue;case R.PROC_INST:"?"===a?t.state=R.PROC_INST_ENDING:T(_,a)?t.state=R.PROC_INST_BODY:t.procInstName+=a;continue;case R.PROC_INST_BODY:if(!t.procInstBody&&T(_,a))continue;"?"===a?t.state=R.PROC_INST_ENDING:t.procInstBody+=a;continue;case R.PROC_INST_ENDING:">"===a?(M(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=R.TEXT):(t.procInstBody+="?"+a,t.state=R.PROC_INST_BODY);continue;case R.OPEN_TAG:T(m,a)?t.tagName+=a:(function(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns);e.attribList.length=0,M(e,"onopentagstart",n);}(t),">"===a?F(t):"/"===a?t.state=R.OPEN_TAG_SLASH:(S(_,a)&&P(t,"Invalid character in tag name"),t.state=R.ATTRIB));continue;case R.OPEN_TAG_SLASH:">"===a?(F(t,!0),U(t)):(P(t,"Forward-slash in opening tag not followed by >"),t.state=R.ATTRIB);continue;case R.ATTRIB:if(T(_,a))continue;">"===a?F(t):"/"===a?t.state=R.OPEN_TAG_SLASH:T(E,a)?(t.attribName=a,t.attribValue="",t.state=R.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case R.ATTRIB_NAME:"="===a?t.state=R.ATTRIB_VALUE:">"===a?(P(t,"Attribute without value"),t.attribValue=t.attribName,x(t),F(t)):T(_,a)?t.state=R.ATTRIB_NAME_SAW_WHITE:T(m,a)?t.attribName+=a:P(t,"Invalid attribute name");continue;case R.ATTRIB_NAME_SAW_WHITE:if("="===a)t.state=R.ATTRIB_VALUE;else {if(T(_,a))continue;P(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",M(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===a?F(t):T(E,a)?(t.attribName=a,t.state=R.ATTRIB_NAME):(P(t,"Invalid attribute name"),t.state=R.ATTRIB);}continue;case R.ATTRIB_VALUE:if(T(_,a))continue;T(d,a)?(t.q=a,t.state=R.ATTRIB_VALUE_QUOTED):(P(t,"Unquoted attribute value"),t.state=R.ATTRIB_VALUE_UNQUOTED,t.attribValue=a);continue;case R.ATTRIB_VALUE_QUOTED:if(a!==t.q){"&"===a?t.state=R.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=a;continue}x(t),t.q="",t.state=R.ATTRIB_VALUE_CLOSED;continue;case R.ATTRIB_VALUE_CLOSED:T(_,a)?t.state=R.ATTRIB:">"===a?F(t):"/"===a?t.state=R.OPEN_TAG_SLASH:T(E,a)?(P(t,"No whitespace between attributes"),t.attribName=a,t.attribValue="",t.state=R.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case R.ATTRIB_VALUE_UNQUOTED:if(S(f,a)){"&"===a?t.state=R.ATTRIB_VALUE_ENTITY_U:t.attribValue+=a;continue}x(t),">"===a?F(t):t.state=R.ATTRIB;continue;case R.CLOSE_TAG:if(t.tagName)">"===a?U(t):T(m,a)?t.tagName+=a:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=R.SCRIPT):(S(_,a)&&P(t,"Invalid tagname in closing tag"),t.state=R.CLOSE_TAG_SAW_WHITE);else {if(T(_,a))continue;S(E,a)?t.script?(t.script+="</"+a,t.state=R.SCRIPT):P(t,"Invalid tagname in closing tag."):t.tagName=a;}continue;case R.CLOSE_TAG_SAW_WHITE:if(T(_,a))continue;">"===a?U(t):P(t,"Invalid characters in closing tag");continue;case R.TEXT_ENTITY:case R.ATTRIB_VALUE_ENTITY_Q:case R.ATTRIB_VALUE_ENTITY_U:switch(t.state){case R.TEXT_ENTITY:n=R.TEXT,r="textNode";break;case R.ATTRIB_VALUE_ENTITY_Q:n=R.ATTRIB_VALUE_QUOTED,r="attribValue";break;case R.ATTRIB_VALUE_ENTITY_U:n=R.ATTRIB_VALUE_UNQUOTED,r="attribValue";}";"===a?(t[r]+=function(e){var t,n=e.entity,r=n.toLowerCase(),i="";if(e.ENTITIES[n])return e.ENTITIES[n];if(e.ENTITIES[r])return e.ENTITIES[r];"#"===(n=r).charAt(0)&&(i="x"===n.charAt(1)?(n=n.slice(2),(t=parseInt(n,16)).toString(16)):(n=n.slice(1),(t=parseInt(n,10)).toString(10)));return n=n.replace(/^0+/,""),i.toLowerCase()===n?String.fromCodePoint(t):(P(e,"Invalid character entity"),"&"+e.entity+";")}(t),t.entity="",t.state=n):T(t.entity.length?y:v,a)?t.entity+=a:(P(t,"Invalid character in entity name"),t[r]+="&"+t.entity+a,t.entity="",t.state=n);continue;default:throw new Error(t,"Unknown state: "+t.state)}t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(u.MAX_BUFFER_LENGTH,10),n=0,r=0,i=l.length;r<i;r++){var a=e[l[r]].length;if(t<a)switch(l[r]){case"textNode":N(e);break;case"cdata":M(e,"oncdata",e.cdata),e.cdata="";break;case"script":M(e,"onscript",e.script),e.script="";break;default:O(e,"Max buffer length exceeded: "+l[r]);}n=Math.max(n,a);}var o=u.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=o+e.position;}(t);return t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;N(e=this),""!==e.cdata&&(M(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(M(e,"onscript",e.script),e.script="");}};try{r=Y(41).Stream;}catch(e){r=function(){};}var a=u.EVENTS.filter(function(e){return "error"!==e&&"end"!==e});function o(e,t){if(!(this instanceof o))return new o(e,t);r.apply(this),this._parser=new i(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end");},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null;},this._decoder=null,a.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e;n.on(t,e);},enumerable:!0,configurable:!1});});}(o.prototype=Object.create(r.prototype,{constructor:{value:o}})).write=function(e){var t;return "function"==typeof j&&"function"==typeof j.isBuffer&&j.isBuffer(e)&&(this._decoder||(t=Y(42).StringDecoder,this._decoder=new t("utf8")),e=this._decoder.write(e)),this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===a.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e);}),r.prototype.on.call(n,t,e)};var e="0124356789",t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d="'\"",f=(_="\r\n\t ")+">",c="[CDATA[",h="DOCTYPE",s="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",g={xml:s,xmlns:p},_=n(_),e=n(e),t=n(t),E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function n(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function T(e,t){return n=e,"[object RegExp]"===Object.prototype.toString.call(n)?t.match(e):e[t];var n;}function S(e,t){return !T(e,t)}d=n(d),f=n(f);var A,I,R=0;for(var b in u.STATE={BEGIN:R++,BEGIN_WHITESPACE:R++,TEXT:R++,TEXT_ENTITY:R++,OPEN_WAKA:R++,SGML_DECL:R++,SGML_DECL_QUOTED:R++,DOCTYPE:R++,DOCTYPE_QUOTED:R++,DOCTYPE_DTD:R++,DOCTYPE_DTD_QUOTED:R++,COMMENT_STARTING:R++,COMMENT:R++,COMMENT_ENDING:R++,COMMENT_ENDED:R++,CDATA:R++,CDATA_ENDING:R++,CDATA_ENDING_2:R++,PROC_INST:R++,PROC_INST_BODY:R++,PROC_INST_ENDING:R++,OPEN_TAG:R++,OPEN_TAG_SLASH:R++,ATTRIB:R++,ATTRIB_NAME:R++,ATTRIB_NAME_SAW_WHITE:R++,ATTRIB_VALUE:R++,ATTRIB_VALUE_QUOTED:R++,ATTRIB_VALUE_CLOSED:R++,ATTRIB_VALUE_UNQUOTED:R++,ATTRIB_VALUE_ENTITY_Q:R++,ATTRIB_VALUE_ENTITY_U:R++,CLOSE_TAG:R++,CLOSE_TAG_SAW_WHITE:R++,SCRIPT:R++,SCRIPT_ENDING:R++},u.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},u.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(u.ENTITIES).forEach(function(e){var t=u.ENTITIES[e],n="number"==typeof t?String.fromCharCode(t):t;u.ENTITIES[e]=n;}),u.STATE)u.STATE[u.STATE[b]]=b;function D(e,t,n){e[t]&&e[t](n);}function M(e,t,n){e.textNode&&N(e),D(e,t,n);}function N(e){e.textNode=C(e.opt,e.textNode),e.textNode&&D(e,"ontext",e.textNode),e.textNode="";}function C(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function O(e,t){return N(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,D(e,"onerror",t),e}function w(e){return e.sawRoot&&!e.closedRoot&&P(e,"Unclosed root tag"),e.state!==R.BEGIN&&e.state!==R.BEGIN_WHITESPACE&&e.state!==R.TEXT&&O(e,"Unexpected end"),N(e),e.c="",e.closed=!0,D(e,"onend"),i.call(e,e.strict,e.opt),e}function P(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&O(e,t);}function L(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function x(e){var t,n,r,i,a;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(n=(t=L(e.attribName,!0)).prefix,r=t.local,"xmlns"===n&&("xml"===r&&e.attribValue!==s?P(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue):"xmlns"===r&&e.attribValue!==p?P(e,"xmlns: prefix must be bound to "+p+"\nActual: "+e.attribValue):(i=e.tag,a=e.tags[e.tags.length-1]||e,i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,M(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue="";}function F(t,e){if(t.opt.xmlns){var n=t.tag,r=L(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(P(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){M(t,"onopennamespace",{prefix:e,uri:n.ns[e]});});for(var a=0,o=t.attribList.length;a<o;a++){var s=t.attribList[a],u=s[0],l=s[1],d=L(u,!0),f=d.prefix,c=d.local,h=""!==f&&n.ns[f]||"",p={name:u,value:l,prefix:f,local:c,uri:h};f&&"xmlns"!==f&&!h&&(P(t,"Unbound namespace prefix: "+JSON.stringify(f)),p.uri=f),t.tag.attributes[u]=p,M(t,"onattribute",p);}t.attribList.length=0;}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),M(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=R.TEXT:t.state=R.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0;}function U(n){if(!n.tagName)return P(n,"Weird empty close tag."),n.textNode+="</>",void(n.state=R.TEXT);if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",void(n.state=R.SCRIPT);M(n,"onscript",n.script),n.script="";}var e=n.tags.length,t=n.tagName;n.strict||(t=t[n.looseCase]());for(var r=t;e--;){if(n.tags[e].name===r)break;P(n,"Unexpected close tag");}if(e<0)return P(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",void(n.state=R.TEXT);n.tagName=t;for(var i=n.tags.length;i-- >e;){var a=n.tag=n.tags.pop();n.tagName=n.tag.name,M(n,"onclosetag",n.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var u=n.tags[n.tags.length-1]||n;n.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach(function(e){var t=a.ns[e];M(n,"onclosenamespace",{prefix:e,uri:t});});}0===e&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=R.TEXT;}function k(e,t){"<"===t?(e.state=R.OPEN_WAKA,e.startTagPosition=e.position):S(_,t)&&(P(e,"Non-whitespace before first tag."),e.textNode=t,e.state=R.TEXT);}function B(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function G(){var e,t,n=[],r=-1,i=arguments.length;if(!i)return "";for(var a="";++r<i;){var o=Number(arguments[r]);if(!isFinite(o)||o<0||1114111<o||I(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?n.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,n.push(e,t)),(r+1===i||16384<n.length)&&(a+=A.apply(null,n),n.length=0);}return a}R=u.STATE,String.fromCodePoint||(A=String.fromCharCode,I=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:G,configurable:!0,writable:!0}):String.fromCodePoint=G);}(void 0===t?this.sax={}:t);}).call(this,Y(8).Buffer);},{41:41,42:42,8:8}],41:[function(e,t,n){t.exports=r;var d=e(11).EventEmitter;function r(){d.call(this);}e(21)(r,d),r.Readable=e(36),r.Writable=e(38),r.Duplex=e(26),r.Transform=e(37),r.PassThrough=e(35),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause();}function i(){n.readable&&n.resume&&n.resume();}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",s));var a=!1;function o(){a||(a=!0,t.end());}function s(){a||(a=!0,"function"==typeof t.destroy&&t.destroy());}function u(e){if(l(),0===d.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l);}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t};},{11:11,21:21,26:26,35:35,36:36,37:37,38:38}],42:[function(e,t,n){var r=e(39).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return !0;default:return !1}};function a(e){var t=function(e){if(!e)return "utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return "utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return "utf16le";case"latin1":case"binary":return "latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0;}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=l,this.end=d,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=c,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t);}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"ï¿½";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"ï¿½";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"ï¿½"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return "";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return "";n=this.lastNeed,this.lastNeed=0;}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"ï¿½":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=s(t[r])))return 0<i&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=s(t[r])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length;};},{39:39}],43:[function(u,e,l){(function(e,t){var r=u(25).nextTick,n=Function.prototype.apply,i=Array.prototype.slice,a={},o=0;function s(e,t){this._id=e,this._clearFn=t;}l.setTimeout=function(){return new s(n.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new s(n.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close();},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id);},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t;},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1;},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout();},t));},l.setImmediate="function"==typeof e?e:function(e){var t=o++,n=!(arguments.length<2)&&i.call(arguments,1);return a[t]=!0,r(function(){a[t]&&(n?e.apply(null,n):e.call(null),l.clearImmediate(t));}),t},l.clearImmediate="function"==typeof t?t:function(e){delete a[e];};}).call(this,u(43).setImmediate,u(43).clearImmediate);},{25:25,43:43}],44:[function(e,t,n){(function(n){function r(e){try{if(!n.localStorage)return}catch(e){return}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0;}return e.apply(this,arguments)}};}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{}],45:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(46)),h=r(e(54)),i=r(e(47)),o=1,p=2,g=3,_=4,E=5;function s(e){e=e||{};var t,n=this.context,s=(0, a.default)(n).getInstance(),u=e.settings,l=[],d=void 0,f=void 0,c=void 0;function r(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function i(e,t){var n="",r=null;d&&(r=(new Date).getTime(),n+="["+(r-c)+"]"),f&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),0<n.length&&(n+=" ");for(var i=arguments.length,a=Array(2<i?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];Array.apply(null,a).forEach(function(e){n+=e+" ";}),l[e]&&u.get().debug.logLevel>=e&&l[e](n),s.trigger(h.default.LOG,{message:n,level:e});}return t={getLogger:function(e){return {fatal:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[o,this].concat(t));}.bind(e),error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[p,this].concat(t));}.bind(e),warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[g,this].concat(t));}.bind(e),info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[_,this].concat(t));}.bind(e),debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[E,this].concat(t));}.bind(e)}},setLogTimestampVisible:function(e){d=e;},setCalleeNameVisible:function(e){f=e;}},f=d=!0,c=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(l[o]=r(window.console.error),l[p]=r(window.console.error),l[g]=r(window.console.warn),l[_]=r(window.console.info),l[E]=r(window.console.debug)),t}s.__dashjs_factory_name="Debug";var u=i.default.getSingletonFactory(s);u.LOG_LEVEL_NONE=0,u.LOG_LEVEL_FATAL=o,u.LOG_LEVEL_ERROR=p,u.LOG_LEVEL_WARNING=g,u.LOG_LEVEL_INFO=_,u.LOG_LEVEL_DEBUG=E,i.default.updateSingletonFactory(s.__dashjs_factory_name,u),n.default=u,t.exports=n.default;},{46:46,47:47,54:54}],46:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var a={};function o(e,n,r){var i=-1;return a[e]&&a[e].some(function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0}),i}return {on:function(n,e,t){var r,i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);0<=o(n,e,t)||(a[n]=a[n]||[],r={callback:e,scope:t,priority:i},a[n].some(function(e,t){if(e&&i>e.priority)return a[n].splice(t,0,r),!0})||a[n].push(r));},off:function(e,t,n){var r;e&&t&&a[e]&&((r=o(e,t,n))<0||(a[e][r]=null));},trigger:function(e,t){if(e&&a[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e]=a[e].filter(function(e){return e}),a[e].forEach(function(e){return e&&e.callback.call(e.scope,t)});}},reset:function(){a={};}}}o.__dashjs_factory_name="EventBus";var s=a.default.getSingletonFactory(o);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,a.default.updateSingletonFactory(o.__dashjs_factory_name,s),n.default=s,t.exports=n.default;},{47:47}],47:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var u,a,r,i,o=(u=void 0,a=[],r={},i={},u={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n});},getSingletonInstance:s,setSingletonInstance:function(e,t,n){for(var r in a){var i=a[r];if(i.context===e&&i.name===t)return void(a[r].instance=n)}a.push({name:t,context:e,instance:n});},getSingletonFactory:function(n){var e=l(n.__dashjs_factory_name,r);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return (t=t||s(e,n.__dashjs_factory_name))||(t=f(n,e,arguments),a.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}},r[n.__dashjs_factory_name]=e),e},getSingletonFactoryByName:function(e){return l(e,r)},updateSingletonFactory:function(e,t){d(e,t,r);},getClassFactory:function(t){var e=l(t.__dashjs_factory_name,i);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return f(t,e,arguments)}}},i[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(e){return l(e,i)},updateClassFactory:function(e,t){d(e,t,i);}});function s(e,t){for(var n in a){var r=a[n];if(r.context===e&&r.name===t)return r.instance}return null}function l(e,t){return t[e]}function d(e,t,n){e in n&&(n[e]=t);}function f(e,t,n){var r=void 0,i=e.__dashjs_factory_name,a=t[i];if(a){var o=a.instance;if(!a.override)return o.apply({context:t,factory:u},n);for(var s in r=e.apply({context:t},n),o=o.apply({context:t,factory:u,parent:r},n))r.hasOwnProperty(s)&&(r[s]=o[s]);}else r=e.apply({context:t},n);return r.getClassName=function(){return i},r}n.default=o,t.exports=n.default;},{}],48:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(47)),o=r(e(49)),s=r(e(45)),u=r(e(108)),l=e(241);function d(){var e,t,n={debug:{logLevel:s.default.LOG_LEVEL_WARNING},streaming:{metricsMaxListDepth:1e3,abandonLoadTimeout:1e4,liveDelayFragmentCount:NaN,liveDelay:null,scheduleWhilePaused:!0,fastSwitchEnabled:!1,bufferPruningInterval:10,bufferToKeep:20,bufferAheadToKeep:80,jumpGaps:!0,smallGapLimit:1.5,stableBufferTime:12,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600,wallclockTimeUpdateInterval:50,lowLatencyEnabled:!1,keepProtectionMediaKeys:!1,useManifestDateHeaderTimeSource:!0,useSuggestedPresentationDelay:!0,useAppendWindowEnd:!0,manifestUpdateRetryInterval:100,liveCatchUpMinDrift:.02,liveCatchUpMaxDrift:0,liveCatchUpPlaybackRate:.5,liveCatchupLatencyThreshold:NaN,lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},retryIntervals:(i(e={},l.HTTPRequest.MPD_TYPE,500),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,500),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.OTHER_TYPE,1e3),i(e,"lowLatencyReductionFactor",10),e),retryAttempts:(i(t={},l.HTTPRequest.MPD_TYPE,3),i(t,l.HTTPRequest.XLINK_EXPANSION_TYPE,1),i(t,l.HTTPRequest.MEDIA_SEGMENT_TYPE,3),i(t,l.HTTPRequest.INIT_SEGMENT_TYPE,3),i(t,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),i(t,l.HTTPRequest.INDEX_SEGMENT_TYPE,3),i(t,l.HTTPRequest.OTHER_TYPE,3),i(t,"lowLatencyMultiplyFactor",5),t),abr:{movingAverageMethod:u.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:u.default.ABR_STRATEGY_DYNAMIC,bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useBufferOccupancyABR:!1,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{enabled:!1,sid:null,cid:null,did:null}}},r=o.default.clone(n);return {get:function(){return r},update:function(e){"object"==typeof e&&!function e(t,n,r){for(var i in t)t.hasOwnProperty(i)&&n.hasOwnProperty(i)&&("object"==typeof t[i]&&null!==t[i]?e(t[i],n[i],r.slice()+i+"."):n[i]=o.default.clone(t[i]));}(e,r,"");},reset:function(){r=o.default.clone(n);}}}d.__dashjs_factory_name="Settings";var f=a.default.getSingletonFactory(d);n.default=f,t.exports=n.default;},{108:108,241:241,45:45,47:47,49:49}],49:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,null,[{key:"mixin",value:function(e,t,n){var r=void 0,i={};if(e)for(var a in t)t.hasOwnProperty(a)&&(r=t[a],a in e&&(e[a]===r||a in i&&i[a]===r)||("object"==typeof e[a]&&null!==e[a]?e[a]=o.mixin(e[a],r,n):e[a]=n(r)));return e}},{key:"clone",value:function(e){if(!e||"object"!=typeof e)return e;var t=void 0;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;++n)n in e&&t.push(o.clone(e[n]));}else t={};return o.mixin(t,e,o.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(n,e){try{var t=function(){if(!e||0===e.length)return {v:n};var t=new URL(n);return e.forEach(function(e){e.key&&e.value&&t.searchParams.set(e.key,e.value);}),{v:t.href}}();if("object"==typeof t)return t.v}catch(e){return n}}},{key:"generateUuid",value:function(){var n=(new Date).getTime();return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);}n.default=i,t.exports=n.default;},{}],50:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return r};var r="3.1.2";},{}],51:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(52);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{52:52}],52:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i]);}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}n.default=i,t.exports=n.default;},{}],53:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(55),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(s,((i=a)&&i.__esModule?i:{default:i}).default),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INBAND_EVENTS="inbandEvents",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATE_STARTED="representationUpdateStarted",this.REPRESENTATION_UPDATE_COMPLETED="representationUpdateCompleted",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEGMENTBASE_INIT_REQUEST_NEEDED="segmentBaseInitRequestNeeded",this.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED="segmentBaseSegmentsListRequestNeeded",this.SEEK_TARGET="seekTarget",this.DYNAMIC_STREAM_COMPLETED="dynamicStreamCompleted";}n.default=o,t.exports=n.default;},{55:55}],54:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(53);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).apply(this,arguments);}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{53:53}],55:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i]);}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}n.default=i,t.exports=n.default;},{}],56:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(61)),p=r(e(93)),g=r(e(89)),_=r(e(95)),E=r(e(88)),D=r(e(86)),i=r(e(47)),M=r(e(65));function a(){var e,m=void 0,v=void 0,y=void 0,u=void 0,T=void 0,i=void 0,t=this.context;function o(e,t,n){var r,i=m.getAdaptationsForType(v[0].mpd.manifest,e,t);if(!i||0===i.length)return null;if(1<i.length&&n){var a=l(n,t);if(u[n.id]&&u[n.id][t])for(var o=0,s=i.length;o<s;o++)if(u[n.id][t].isMediaInfoEqual(a[o]))return i[o];for(o=0,s=i.length;o<s;o++)if(r=i[o],m.getRolesForAdaptation(r).filter(function(e){return e.value===h.default.MAIN})[0])return i[o]}return i[0]}function l(e,t,n){var r,i=v,a=n,o=[],s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0;if(a)b(),i=S(a);else {if(!(0<v.length))return o;a=v[0].mpd.manifest;}var h=A(e,i);h&&(c=h.id);var p=m.getAdaptationsForType(a,e?e.index:null,t!==T.EMBEDDED_TEXT?t:T.VIDEO);if(!p||0===p.length)return o;for(y[c]=y[c]||m.getAdaptationsForPeriod(h),d=0,r=p.length;d<r;d++)if(s=p[d],l=m.getIndexForAdaptation(s,a,e.index),u=I(y[c][l]),t===T.EMBEDDED_TEXT){for(var g=u.accessibility.length,f=0;f<g;f++)if(u){var _=u.accessibility[f];if(0===_.indexOf("cea-608:")){var E=_.substring(8).split(";");if("CC"===E[0].substring(0,2))for(f=0;f<E.length;f++)R(u=u||I.call(this,y[c][l]),E[f].substring(0,3),E[f].substring(4)),o.push(u),u=null;else for(f=0;f<E.length;f++)R(u=u||I.call(this,y[c][l]),"CC"+(f+1),E[f]),o.push(u),u=null;}else 0===_.indexOf("cea-608")&&(R(u,T.CC1,"eng"),o.push(u),u=null);}}else t===T.IMAGE?(u.type=T.IMAGE,o.push(u),u=null):u&&o.push(u);return o}function S(e){var t=n(e);return m.getRegularPeriods(t)}function n(e){var t=a(e);return m.getMpd(t)}function r(){v=[],y={},u={};}function a(e){return e||(0<v.length?v[0].mpd.manifest:null)}function s(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&y[e.streamInfo.id]?y[e.streamInfo.id][e.index]:null}function A(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e&&e.id===i.id)return i}return null}function I(e){if(!e)return null;var t,r=new g.default,n=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=d(e.period),r.representationCount=m.getRepresentationCount(n),r.labels=m.getLabelsForAdaptation(n),r.lang=m.getLanguageForAdaptation(n),t=m.getViewpointForAdaptation(n),r.viewpoint=t?t.value:void 0,r.accessibility=m.getAccessibilityForAdaptation(n).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==i&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=m.getAudioChannelConfigurationForAdaptation(n).map(function(e){return e.value}),0===r.audioChannelConfiguration.length&&Array.isArray(n.Representation_asArray)&&0<n.Representation_asArray.length&&(r.audioChannelConfiguration=m.getAudioChannelConfigurationForRepresentation(n.Representation_asArray[0]).map(function(e){return e.value})),r.roles=m.getRolesForAdaptation(n).map(function(e){return e.value}),r.codec=m.getCodec(n),r.mimeType=m.getMimeType(n),r.contentProtection=m.getContentProtectionData(n),r.bitrateList=m.getBitrateListForAdaptation(n),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=m.getKID(e);}),r.isText=m.getIsTextTrack(r.mimeType),r.supplementalProperties=m.getSupplementalPropperties(n),r}function R(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=T.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"];}function d(e){var t,n,r=new _.default;return r.id=e.id,r.index=e.index,r.start=e.start,r.duration=e.duration,r.manifestInfo=(t=e.mpd,(n=new E.default).DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=m.getDuration(t.manifest),n.isDynamic=m.getIsDynamic(t.manifest),n.serviceDescriptions=m.getServiceDescriptions(t.manifest),n.protocol=t.manifest.protocol,n),r.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<1,r}function b(){if(!T)throw new Error("setConfig function has to be called previously")}function f(e){return 0<v.length?v[0].mpd.manifest.Period_asArray[e]:null}function c(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e)for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(a=r[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return n?s:i;return null}return e={getBandwidthForRepresentation:function(e,t){var n;return (n=c(f(t),e))?n.bandwidth:null},getIndexForRepresentation:function(e,t){var n,r=f(t);return null!==(n=c(r,e,!0))?n:-1},getMaxIndexForBufferType:function(e,t){return function(e,t){var n,r=void 0,i=void 0,a=void 0;if(!e||!t)return -1;for(n=e.AdaptationSet_asArray,a=0;a<n.length;a+=1)if(r=n[a],i=r.Representation_asArray,m.getIsTypeOf(r,t))return i.length;return -1}(f(t),e)},convertDataToRepresentationInfo:function(e){if(e){var t=new p.default,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=m.getRepresentationFor(e.index,n);return t.id=e.id,t.quality=e.index,t.bandwidth=m.getBandwidth(r),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,t.mediaInfo=I(e.adaptation),t}return null},getDataForMedia:s,getStreamsInfo:function(e,t){var n=[],r=v;if(e&&(b(),r=S(e)),0<r.length){(!t||t>r.length)&&(t=r.length);for(var i=0;i<t;i++)n.push(d(r[i]));}return n},getMediaInfoForType:function(e,t){if(0===v.length||!e)return null;var n=A(e,v);if(!n)return null;var r=n.id;y[r]=y[r]||m.getAdaptationsForPeriod(n);var i=o(e.index,t,e);if(!i)return null;var a=m.getIndexForAdaptation(i,v[0].mpd.manifest,e.index);return I(y[r][a])},getAllMediaInfoForType:l,getAdaptationForType:o,getRealAdaptation:function(e,t){var n=void 0,r=A(e,v),i=t?t.id:null;return 0<v.length&&r&&(n=i?m.getAdaptationForId(i,v[0].mpd.manifest,r.index):m.getAdaptationForIndex(t?t.index:null,v[0].mpd.manifest,r.index)),n},getVoRepresentations:function(e){var t=s(e);return m.getRepresentationsForAdaptation(t)},getEventsFor:function(e,t){var n,r=[];return 0<v.length&&(n=v[0].mpd.manifest,e instanceof _.default?r=m.getEventsForPeriod(A(e,v)):e instanceof g.default?r=m.getEventStreamForAdaptationSet(n,s(e)):e instanceof p.default&&(r=m.getEventStreamForRepresentation(n,t))),r},getEvent:function(e,t,n){if(!e||!t)return null;var r=new D.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,f=n*o+s;return t[i+"/"+a]?(r.eventStream=t[i+"/"+a],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=u,r.id=l,r.calculatedPresentationTime=f,r.messageData=d,r.presentationTimeDelta=s,r):null},setConfig:function(e){e&&(e.constants&&(T=e.constants),e.cea608parser&&(i=e.cea608parser),e.errHandler&&m.setConfig({errHandler:e.errHandler}),e.BASE64&&m.setConfig({BASE64:e.BASE64}));},updatePeriods:function(e){if(!e)return null;b(),v=S(e),y={};},getUseCalculatedLiveEdgeTimeForMediaInfo:function(e){var t=s(e);return m.getUseCalculatedLiveEdgeTimeForAdaptation(t)},getIsTextTrack:function(e){return m.getIsTextTrack(e)},getUTCTimingSources:function(){var e=a();return m.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<v.length?v[0].mpd:null;return m.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){var t=n(e);return m.getAvailabilityStartTime(t)},getIsDynamic:function(e){var t=a(e);return m.getIsDynamic(t)},getDuration:function(e){var t=a(e);return m.getDuration(t)},getRegularPeriods:S,getLocation:function(e){return m.getLocation(e)},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return m.getManifestUpdatePeriod(e,t)},getIsDVB:function(e){return m.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getBaseURLsFromElement:function(e){return m.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return m.getRepresentationSortFunction()},getCodec:function(e,t,n){return m.getCodec(e,t,n)},getVoAdaptations:function(){return y},getVoPeriods:function(){return v},setCurrentMediaInfo:function(e,t,n){u[e]=u[e]||{},u[e][t]=u[e][t]||{},u[e][t]=n;},reset:r},m=(0, M.default)(t).getInstance(),r(),e}a.__dashjs_factory_name="DashAdapter",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{47:47,61:61,65:65,86:86,88:88,89:89,93:93,95:95}],57:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var w=r(e(227)),P=e(241),i=r(e(47)),L=e(80),x=r(e(64));function a(e){e=e||{};var t=this.context,f=e.eventBus,c=e.events,n=e.debug,l=e.dashConstants,o=e.urlUtils,h=e.type,r=e.streamInfo,p=e.timelineConverter,g=e.dashMetrics,s=e.baseURLController,i=void 0,d=void 0,_=void 0,E=void 0,m=void 0,a=void 0,v=void 0,u=void 0,y=void 0,T=void 0;function S(){return h}function A(){_=-1,E=null;}function I(){A(),a=0,y=T=m=null;}function R(e,t,n){var r=s.resolve(n.path),i=void 0,a=void 0;return r&&t!==r.url&&o.isRelative(t)?(i=r.url,a=r.serviceLocation,t&&(i=o.resolve(t,i))):i=t,!o.isRelative(i)&&(e.url=i,e.serviceLocation=a,1)}function b(e){var t,n,r;e.sender.getType()===h&&(t=e.representation,n=t.hasInitialization(),r=t.hasSegments(),n&&r?f.trigger(c.REPRESENTATION_UPDATE_COMPLETED,{sender:i,representation:t}):T.update(t,h,y,n,r));}function D(e,t){if(null==t)return null;var n=new w.default,r=t.representation,i=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth,a=t.media,a=(0, L.replaceTokenForTemplate)(a,"Number",t.replacementNumber);return a=(0, L.replaceTokenForTemplate)(a,"Time",t.replacementTime),a=(0, L.replaceTokenForTemplate)(a,"Bandwidth",i),a=(0, L.replaceIDForTemplate)(a,r.id),a=(0, L.unescapeDollarsInTemplate)(a),n.mediaType=h,n.type=P.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.duration=t.duration,n.timescale=r.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.wallStartTime=t.wallStartTime,n.quality=r.index,n.index=t.availabilityIdx,n.mediaInfo=e,n.adaptationIndex=r.adaptation.index,n.representationId=r.id,R(n,a,r)?n:void 0}function M(e){var t,n,r=!1;return e&&(v?u?r=!0:E&&(t=parseFloat((E.presentationStartTime-e.adaptation.period.start).toFixed(5)),n=0<E.duration?t+1.5*E.duration:t,r=e.adaptation.period.duration<=n):_>=e.availableSegmentsNumber&&(r=!0)),r}function N(e){var t=e.representation;t.segments&&f.trigger(c.REPRESENTATION_UPDATE_COMPLETED,{sender:this,representation:t});}function C(e){if(!e.error&&h===e.mediaType){for(var t,n,r=e.segments,i=e.representation,a=[],o=0,s=void 0,u=void 0,l=void 0,s=0,d=r?r.length:0;s<d;s++)u=r[s],(l=(0, L.getTimeBasedSegment)(p,v,i,u.startTime,u.duration,u.timescale,u.media,u.mediaRange,o))&&(a.push(l),l=null,o++);0<a.length&&(i.segmentAvailabilityRange={start:a[0].presentationStartTime,end:a[a.length-1].presentationStartTime},i.availableSegmentsNumber=a.length,i.segments=a,v&&(t=a[a.length-1].presentationStartTime-8,n=t,p.setExpectedLiveEdge(n),g.updateManifestUpdateInfo({presentationStartTime:n}))),i.hasInitialization()&&f.trigger(c.REPRESENTATION_UPDATE_COMPLETED,{sender:this,representation:i});}}function O(){d.debug("Dynamic stream complete"),u=!0;}return i={initialize:function(e){v=e,u=!1,T.initialize(e);},getType:S,getStreamInfo:function(){return r},getInitRequest:function(e,t){return t?function(e,t,n){var r=new w.default,i=t.adaptation.period,a=i.start;if(r.mediaType=n,r.type=P.HTTPRequest.INIT_SEGMENT_TYPE,r.range=t.range,r.availabilityStartTime=p.calcAvailabilityStartTimeFromPresentationTime(a,i.mpd,v),r.availabilityEndTime=p.calcAvailabilityEndTimeFromPresentationTime(a+i.duration,i.mpd,v),r.quality=t.index,r.mediaInfo=e,r.representationId=t.id,R(r,t.initialization,t))return r.url=(0, L.replaceTokenForTemplate)(r.url,"Bandwidth",t.bandwidth),r}(e,t,h):null},getRequestForSegment:D,getSegmentRequestForTime:function(e,t,n,r){var i=null;if(!t||!t.segmentInfoType)return i;var a=_,o=!!r&&r.keepIdx,s=!(!r||!r.ignoreIsFinished);m!==n&&(m=n,d.debug("Getting the request for time : "+n));var u=T.getSegmentByTime(t,n);return u?(_=u.availabilityIdx,E=u,d.debug("Index for time "+n+" is "+_),i=D(e,u)):!s&&M(t)&&((i=new w.default).action=w.default.ACTION_COMPLETE,i.index=_-1,i.mediaType=h,i.mediaInfo=e,d.debug("Signal complete in getSegmentRequestForTime")),o&&0<=a&&(_=t.segmentInfoType===l.SEGMENT_TIMELINE&&v?_:a),i},getNextSegmentRequest:function(e,t){var n=null;if(!t||!t.segmentInfoType)return null;m=null;var r=_+1;d.debug("Getting the next request at index: "+r);var i=T.getSegmentByIndex(t,r,E?E.mediaStartTime:-1);return i||isFinite(t.adaptation.period.duration)||u?(_=i?(n=D(e,i),i.availabilityIdx):v?r-1:r,i?E=i:M(t)&&((n=new w.default).action=w.default.ACTION_COMPLETE,n.index=_-1,n.mediaType=h,n.mediaInfo=e,d.debug("Signal complete")),n):(d.debug("No segment found at index: "+r+". Wait for next loop"),null)},setCurrentTime:function(e){a=e;},getCurrentTime:function(){return a},setCurrentIndex:function(e){_=e;},getCurrentIndex:function(){return _},isMediaFinished:M,reset:function(){I(),f.off(c.INITIALIZATION_LOADED,N,i),f.off(c.SEGMENTS_LOADED,C,i),f.off(c.REPRESENTATION_UPDATE_STARTED,b,i),f.off(c.DYNAMIC_STREAM_COMPLETED,O,i);},resetIndex:A,setMimeType:function(e){y=e;}},d=n.getLogger(i),I(),T=(0, x.default)(t).create(e),f.on(c.INITIALIZATION_LOADED,N,i),f.on(c.SEGMENTS_LOADED,C,i),f.on(c.REPRESENTATION_UPDATE_STARTED,b,i),f.on(c.DYNAMIC_STREAM_COMPLETED,O,i),i}a.__dashjs_factory_name="DashHandler",n.default=i.default.getClassFactory(a),t.exports=n.default;},{227:227,241:241,47:47,64:64,80:80}],58:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(108)),c=e(241),i=r(e(47)),h=r(e(109)),p=r(e(78)),g=r(e(152)),_=e(243);function a(e){e=e||{};var t,n=this.context,i=void 0,a=void 0,o=void 0,s=e.metricsModel;function u(e){var t=s.getMetricsFor(e,!0);if(!t)return null;var n=t.HttpList,r=null,i=void 0;if(!n||n.length<=0)return null;for(i=n.length-1;0<=i;){if(n[i].responsecode){r=n[i];break}i--;}return r}function l(e){var t=s.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function r(e,t){if(!e)return null;var n=e[t];return n&&0!==n.length?n[n.length-1]:null}function d(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2));}return t}return t={getCurrentRepresentationSwitch:function(e){return r(s.getMetricsFor(e,!0),h.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return r(s.getMetricsFor(e,!0),h.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){var t=r(s.getMetricsFor(e,!0),h.default.BUFFER_LEVEL);return t?p.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:u,getHttpRequests:l,getCurrentDroppedFrames:function(){return r(s.getMetricsFor(f.default.VIDEO,!0),h.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return r(s.getMetricsFor(e,!0),h.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return r(e?s.getMetricsFor(e,!0):s.getMetricsFor(f.default.VIDEO,!0)||s.getMetricsFor(f.default.AUDIO,!0),h.default.DVR_INFO)},getCurrentManifestUpdate:function(){return r(s.getMetricsFor(f.default.STREAM),h.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={},r=u(e);return r&&(n=d(r._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e){for(var t,n={},r=void 0,i=void 0,i=(t=l(f.default.STREAM)).length-1;0<=i;i--)if((r=t[i]).type===c.HTTPRequest.MPD_TYPE){n=d(r._responseHeaders);break}return void 0===n[e]?null:n[e]},addRepresentationSwitch:function(e,t,n,r,i){s.addRepresentationSwitch(e,t,n,r,i);},addDVRInfo:function(e,t,n,r){s.addDVRInfo(e,t,n,r);},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();s.updateManifestUpdateInfo(t,e);},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),s.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration));},addManifestUpdateRepresentationInfo:function(e,t){var n;e&&(n=this.getCurrentManifestUpdate(),s.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType));},addManifestUpdate:function(e){s.addManifestUpdate(f.default.STREAM,e.type,e.requestStartDate,e.requestEndDate);},addHttpRequest:function(e,t,n,r,i){s.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,r,i);},addSchedulingInfo:function(e,t){s.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t);},addRequestsQueue:function(e,t,n){s.addRequestsQueue(e,t,n);},addBufferLevel:function(e,t,n){s.addBufferLevel(e,t,n);},addBufferState:function(e,t,n){s.addBufferState(e,t,n);},addDroppedFrames:function(e){s.addDroppedFrames(f.default.VIDEO,e);},addPlayList:function(){o&&(s.addPlayList(o),o=null);},addDVBErrors:function(e){s.addDVBErrors(e);},createPlaylistMetrics:function(e,t){(o=new _.PlayList).start=new Date,o.mstart=e,o.starttype=t;},createPlaylistTraceMetrics:function(e,t,n){!0===i&&(i=!1,(a=new _.PlayListTrace).representationid=e,a.start=new Date,a.mstart=t,a.playbackspeed=null!==n?n.toString():null);},updatePlayListTraceMetrics:function(e){if(a)for(var t in a)a[t]=e[t];},pushPlayListTraceMetrics:function(e,t){var n,r;!1===i&&o&&a&&a.start&&(n=a.start,r=e.getTime()-n.getTime(),a.duration=r,a.stopreason=t,o.trace.push(a),i=!0);},clearAllCurrentMetrics:function(){s.clearAllCurrentMetrics();}},s=s||(0, g.default)(n).getInstance({settings:e.settings}),i=!0,o=a=null,t}a.__dashjs_factory_name="DashMetrics",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,109:109,152:152,241:241,243:243,47:47,78:78}],59:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(94)),T=r(e(225)),i=r(e(47)),S=r(e(227)),A=r(e(158));function a(){var e=this.context,t=void 0,g=void 0,n=void 0,s=void 0,r=void 0,i=void 0,a=void 0,o=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,_=void 0;function E(){if(!_||!_.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function m(e){if(e.url){var t=new S.default;return t.setInfo(e),t}}function v(e,t,n){e?d.trigger(l.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):d.trigger(l.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new T.default(f.SEGMENT_BASE_LOADER_ERROR_CODE,f.SEGMENT_BASE_LOADER_ERROR_MESSAGE)});}return t={setConfig:function(e){e.baseURLController&&(_=e.baseURLController),e.dashMetrics&&(i=e.dashMetrics),e.mediaPlayerModel&&(o=e.mediaPlayerModel),e.errHandler&&(n=e.errHandler),e.settings&&(a=e.settings),e.boxParser&&(s=e.boxParser),e.events&&(l=e.events),e.eventBus&&(d=e.eventBus),e.debug&&(g=e.debug.getLogger(t)),e.requestModifier&&(r=e.requestModifier),e.errors&&(f=e.errors),e.urlUtils&&(p=e.urlUtils),e.constants&&(c=e.constants),e.dashConstants&&(h=e.dashConstants);},initialize:function(){u=(0, A.default)(e).create({errHandler:n,dashMetrics:i,mediaPlayerModel:o,requestModifier:r,useFetch:a?a.get().streaming.lowLatencyEnabled:null,boxParser:s,errors:f,urlUtils:p,constants:c,dashConstants:h});},loadInitialization:function t(n,e){E();var r=null,i=n?_.resolve(n.path):null,a=e||{init:!0,url:i?i.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:n&&n.adaptation?n.adaptation.type:null};g.debug("Start searching for initialization.");var o=m(a);u.load({request:o,success:function(e){a.bytesLoaded=a.range.end,(r=s.findInitRange(e))?(n.range=r,d.trigger(l.INITIALIZATION_LOADED,{representation:n})):(a.range.end=a.bytesLoaded+a.bytesToLoad,t(n,a));},error:function(){d.trigger(l.INITIALIZATION_LOADED,{representation:n});}}),g.debug("Perform init search: "+a.url);},loadSegments:function l(d,f,e,c,t){var n;E(),!e||void 0!==e.start&&void 0!==e.end||(e=(n=e?e.toString().split("-"):null)?{start:parseFloat(n[0]),end:parseFloat(n[1])}:null),c=c||v;var o=null,h=null,r=!!e,i=d?_.resolve(d.path):null,p={init:!1,url:i?i.url:void 0,range:r?e:{start:0,end:1500},searching:!r,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500,mediaType:d&&d.adaptation?d.adaptation.type:null},a=m(p);u.load({request:a,success:function(e){var t=p.bytesToLoad,n=e.byteLength;if(p.bytesLoaded=p.range.end-p.range.start,o=s.parse(e),(h=o.getBox("sidx"))&&h.isComplete){var u=h.references,r=void 0,i=void 0;null!=u&&0<u.length&&(r=1===u[0].reference_type),r?function(){g.debug("Initiate multiple SIDX load."),p.range.end=p.range.start+h.size;for(var e=void 0,t=void 0,n=void 0,r=void 0,i=[],a=0,o=(h.offset||p.range.start)+h.size,s=function(e){e?(i=i.concat(e),t<=++a&&(i.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),c(i,d,f))):c(null,d,f);},e=0,t=u.length;e<t;e++)r=(n=o)+u[e].referenced_size-1,o+=u[e].referenced_size,l(d,null,{start:n,end:r},s,p);}():(g.debug("Parsing segments from SIDX. representation "+d.adaptation.type+" - id: "+d.id+" for range : "+p.range.start+" - "+p.range.end),i=function(e,t){for(var n=e.references,r=n.length,i=e.timescale,a=e.earliest_presentation_time,o=t.range.start+e.offset+e.first_offset+e.size,s=[],u=void 0,l=void 0,d=void 0,f=void 0,c=0;c<r;c++)d=n[c].subsegment_duration,f=n[c].referenced_size,(u=new y.default).duration=d,u.startTime=a,u.timescale=i,l=o+f-1,u.mediaRange=o+"-"+l,s.push(u),a+=d,o+=f;return s}(h,p),c(i,d,f));}else {if(h)p.range.start=h.offset||p.range.start,p.range.end=p.range.start+(h.size||t);else {if(n<p.bytesLoaded)return void c(null,d,f);var a=o.getLastBox();a&&a.size?(p.range.start=a.offset+a.size,p.range.end=p.range.start+t):p.range.end+=t;}l(d,f,p.range,c,p);}},error:function(){c(null,d,f);}}),g.debug("Perform SIDX load: "+p.url+" with range : "+p.range.start+" - "+p.range.end);},reset:function(){u.abort(),r=s=n=u=null;}}}a.__dashjs_factory_name="SegmentBaseLoader",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{158:158,225:225,227:227,47:47,94:94}],60:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(211)),h=r(e(108)),i=r(e(47)),T=r(e(94)),S=r(e(227)),A=r(e(158)),I=r(e(225));function a(){var p=this.context,t=void 0,g=void 0,_=void 0,n=void 0,r=void 0,i=void 0,a=void 0,E=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0;function m(e,t,n,r){for(var i,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,o=[],u=0,f=(i=function(e){var t=[],n=(0, y.default)(p).create({data:e}),r=void 0,i=void 0;for(n.consumeTagAndSize(_.Segment.Cues);n.moreData()&&n.consumeTagAndSize(_.Segment.Cues.CuePoint,!0);){for((r={}).CueTime=n.parseTag(_.Segment.Cues.CuePoint.CueTime),r.CueTracks=[];n.moreData()&&n.consumeTag(_.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=n.getMatroskaCodedNum(),o=n.getPos();if((i={}).Track=n.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=n.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),r.CueTracks.push(i),n.setPos(o+a);}if(0===r.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(r);}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}(e)).length;u<f;u+=1)s=new T.default,a=0,a=u<i.length-1?i[u+1].CueTime-i[u].CueTime:r-i[u].CueTime,s.duration=a,s.startTime=i[u].CueTime,s.timescale=1e3,l=i[u].CueTracks[0].ClusterPosition+t,d=u<i.length-1?i[u+1].CueTracks[0].ClusterPosition+t-1:n-1,s.mediaRange=l+"-"+d,o.push(s);return g.debug("Parsed cues: "+o.length+" cues."),o}function f(){if(!d||!d.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function c(e,t,n){e?s.trigger(u.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):s.trigger(u.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new I.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)});}function v(e){var t=new S.default;return t.setInfo(e),t}return t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(h.default.MISSING_CONFIG_ERROR);d=e.baseURLController,i=e.dashMetrics,a=e.mediaPlayerModel,n=e.errHandler,o=e.settings,u=e.events,s=e.eventBus,l=e.errors,g=e.debug.getLogger(t),r=e.requestModifier;},initialize:function(){E=(0, A.default)(p).create({errHandler:n,dashMetrics:i,mediaPlayerModel:a,requestModifier:r,useFetch:o?o.get().streaming.lowLatencyEnabled:null,errors:l});},loadInitialization:function(e,t){f();var n=null,r=e?d.resolve(e.path):null,i=e?e.range.split("-"):null,a=t||{range:{start:i?parseFloat(i[0]):null,end:i?parseFloat(i[1]):null},request:n,url:r?r.url:void 0,init:!0,mediaType:e&&e.adaptation?e.adaptation.type:null};g.info("Start loading initialization."),n=v(a),E.load({request:n,success:function(){s.trigger(u.INITIALIZATION_LOADED,{representation:e});},error:function(){s.trigger(u.INITIALIZATION_LOADED,{representation:e});}}),g.debug("Perform init load: "+a.url);},loadSegments:function(t,n,r,i){f();var e=null,a=t?d.resolve(t.path):null,o=a?a.url:void 0,s={bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:e,url:o,init:!1,mediaType:t&&t.adaptation?t.adaptation.type:null};i=i||c,e=v(s),g.debug("Parsing ebml header"),E.load({request:e,success:function(e){!function(e,t,n,r){if(e&&0!==e.byteLength){var i,a,o=(0, y.default)(p).create({data:e}),s=void 0,u=void 0,l=n?n.split("-"):null,d=null,f={url:t,range:{start:l?parseFloat(l[0]):null,end:l?parseFloat(l[1]):null},request:d};for(g.debug("Parse EBML header: "+f.url),o.skipOverElement(_.EBML),o.consumeTag(_.Segment),i=o.getMatroskaCodedNum(),i+=o.getPos(),a=o.getPos();o.moreData()&&!o.consumeTagAndSize(_.Segment.Info,!0);)if(!(o.skipOverElement(_.Segment.SeekHead,!0)||o.skipOverElement(_.Segment.Tracks,!0)||o.skipOverElement(_.Segment.Cues,!0)||o.skipOverElement(_.Void,!0)))throw new Error("no valid top level element found");for(;void 0===s;){var c=o.getMatroskaCodedNum(!0),h=o.getMatroskaCodedNum();switch(c){case _.Segment.Info.Duration.tag:s=o[_.Segment.Info.Duration.parse](h);break;default:o.setPos(o.getPos()+h);}}d=v(f);E.load({request:d,success:function(e){u=m(e,a,i,s),r(u);},error:function(){g.error("Download Error: Cues "+f.url),r(null);}}),g.debug("Perform cues load: "+f.url+" bytes="+f.range.start+"-"+f.range.end);}else r(null);}(e,o,r,function(e){i(e,t,n);});},error:function(){i(null,t,n);}});},reset:function(){r=n=null;}},_={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t}a.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,158:158,211:211,225:225,227:227,47:47,94:94}],61:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init();}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate";}}]),i);n.default=a,t.exports=n.default;},{}],62:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var w=r(e(108)),P=r(e(225)),i=r(e(47));function a(e){var i=(e=e||{}).eventBus,a=e.events,l=e.errors,d=e.abrController,f=e.dashMetrics,c=e.playbackController,r=e.timelineConverter,h=e.type,p=e.streamId,g=e.dashConstants,o=void 0,s=void 0,_=void 0,E=void 0,m=void 0;function u(){if(!(d&&f&&c&&r))throw new Error(w.default.MISSING_CONFIG_ERROR)}function t(){return _}function n(){return m}function v(){_=!(s=null),E=[];}function y(){return h}function T(){u();var e=new Date,t=m,n=1e3*c.getTime();t&&f.addRepresentationSwitch(t.adaptation.type,e,n,t.id);}function S(e){return null==e||e>=E.length?null:E[e]}function A(e,t){var n;e.segmentAvailabilityRange=r.calcSegmentAvailabilityRange(e,t),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime?b(new P.default(l.SEGMENTS_UNAVAILABLE_ERROR_CODE,l.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end})):t&&(n=e.segmentAvailabilityRange.end,r.setExpectedLiveEdge(n),f.updateManifestUpdateInfo({presentationStartTime:n}));}function I(e,t){u();for(var n=0,r=E.length;n<r;n++)A(E[n],e),t&&i.trigger(a.REPRESENTATION_UPDATE_STARTED,{sender:o,representation:E[n]});}function R(){_=!0,i.trigger(a.DATA_UPDATE_STARTED,{sender:o});}function b(e){_=!1;var t={sender:o,data:s,currentRepresentation:m};e&&(t.error=e),i.trigger(a.DATA_UPDATE_COMPLETED,t);}function D(e){var t=e;i.trigger(a.AST_IN_FUTURE,{delay:t}),setTimeout(function(){_||(R(),E.forEach(function(e){e.segmentAvailabilityRange=null;}),I(c.getIsDynamic(),!0));},t);}function M(e){if(e.sender.getType()===h&&e.sender.getStreamInfo().id===p&&_)if(e.error)b(e.error);else {var t,n=e.sender.getStreamInfo(),r=e.representation,i=f.getCurrentManifestUpdate(),a=!1,o=0,s=void 0;if(r.adaptation.period.mpd.manifest.type!==g.DYNAMIC||r.adaptation.period.mpd.manifest.ignorePostponeTimePeriod||(o=function(e,t){try{var n=c.getStreamController().getActiveStreamInfo(),r=e.segmentAvailabilityRange.start;n&&n.id&&n.id!==t.id&&(r=Math.min(c.getTime(),r));var i=e.segmentAvailabilityRange.end-r;return 1e3*(c.getLiveDelay()-i)}catch(e){return 0}}(r,n)),0<o)return D(o),void b(new P.default(l.SEGMENTS_UPDATE_FAILED_ERROR_CODE,l.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE));if(i){for(var u=0;u<i.representationInfo.length;u++)if((s=i.representationInfo[u]).index===r.index&&s.mediaType===h){a=!0;break}a||f.addManifestUpdateRepresentationInfo(r,h);}!function(){for(var e=0,t=E.length;e<t;e++){var n=E[e].segmentInfoType;if(null===E[e].segmentAvailabilityRange||!E[e].hasInitialization()||(n===g.SEGMENT_BASE||n===g.BASE_URL)&&!E[e].segments)return}return 1}()||(d.setPlaybackQuality(h,n,(t=m,E.indexOf(t))),f.updateManifestUpdateInfo({latency:m.segmentAvailabilityRange.end-c.getTime()}),f.getCurrentRepresentationSwitch(m.adaptation.type)||T(),b());}}function N(e){e.isDynamic&&I(e.isDynamic);}function C(e){e.mediaType===h&&p===e.streamInfo.id&&(m=S(e.newQuality),T());}function O(e){e.newDuration&&m&&m.adaptation.period&&(m.adaptation.period.duration=e.newDuration);}return o={getData:function(){return s},isUpdating:t,updateData:function(e,t,n,r){u(),R(),E=t,m=S(r),s=e,n===w.default.VIDEO||n===w.default.AUDIO||n===w.default.FRAGMENTED_TEXT?I(c.getIsDynamic(),!0):b();},updateRepresentation:A,getCurrentRepresentation:n,getRepresentationForQuality:S,getType:y,getStreamId:function(){return p},reset:function(){i.off(a.QUALITY_CHANGE_REQUESTED,C,o),i.off(a.REPRESENTATION_UPDATE_COMPLETED,M,o),i.off(a.WALLCLOCK_TIME_UPDATED,N,o),i.off(a.MANIFEST_VALIDITY_CHANGED,O,o),v();}},v(),i.on(a.QUALITY_CHANGE_REQUESTED,C,o),i.on(a.REPRESENTATION_UPDATE_COMPLETED,M,o),i.on(a.WALLCLOCK_TIME_UPDATED,N,o),i.on(a.MANIFEST_VALIDITY_CHANGED,O,o),o}a.__dashjs_factory_name="RepresentationController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,225:225,47:47}],63:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),m=r(e(59)),v=r(e(60));function a(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.dashMetrics,a=e.mediaPlayerModel,o=e.errHandler,s=e.baseURLController,u=e.debug,l=e.boxParser,d=e.requestModifier,f=e.errors,c=void 0,h=void 0,p=void 0;function g(e){return "webm"===(e?e.split("/")[1]:"").toLowerCase()}function _(e){g(e.mimeType)?p.loadInitialization(e.representation):h.loadInitialization(e.representation);}function E(e){g(e.mimeType)?p.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null,e.callback):h.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null,e.callback);}return c={initialize:function(){n.on(r.SEGMENTBASE_INIT_REQUEST_NEEDED,_,c),n.on(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,E,c),h.initialize(),p.initialize();},reset:function(){n.off(r.SEGMENTBASE_INIT_REQUEST_NEEDED,_,c),n.off(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,E,c);}},h=(0, m.default)(t).getInstance(),p=(0, v.default)(t).getInstance(),h.setConfig({baseURLController:s,dashMetrics:i,mediaPlayerModel:a,errHandler:o,eventBus:n,events:r,errors:f,debug:u,boxParser:l,requestModifier:d}),p.setConfig({baseURLController:s,dashMetrics:i,mediaPlayerModel:a,errHandler:o,eventBus:n,events:r,errors:f,debug:u,requestModifier:d}),c}a.__dashjs_factory_name="SegmentBaseController";var o=i.default.getSingletonFactory(a);n.default=o,t.exports=n.default;},{47:47,59:59,60:60}],64:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(83)),l=r(e(81)),d=r(e(77)),f=r(e(79));function a(t){t=t||{};var e,n=this.context,a=t.events,o=t.eventBus,r=t.dashConstants,i=void 0;function s(e){return e?e.segments?i[r.SEGMENT_BASE]:i[e.segmentInfoType]:null}return e={initialize:function(e){i[r.SEGMENT_TIMELINE]=(0, u.default)(n).create(t,e),i[r.SEGMENT_TEMPLATE]=(0, l.default)(n).create(t,e),i[r.SEGMENT_LIST]=(0, d.default)(n).create(t,e),i[r.SEGMENT_BASE]=(0, f.default)(n).create(t,e);},update:function(e,t,n,r,i){r||o.trigger(a.SEGMENTBASE_INIT_REQUEST_NEEDED,{mimeType:n,representation:e}),i||o.trigger(a.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{mimeType:n,mediaType:t,representation:e});},getSegmentByIndex:function(e,t,n){var r=s(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=s(e);return n?n.getSegmentByTime(e,t):null}},i={},e}a.__dashjs_factory_name="SegmentsController";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default;},{47:47,77:77,79:79,81:81,83:83}],65:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var g=r(e(108)),S=r(e(61)),A=r(e(92)),I=r(e(84)),R=r(e(91)),i=r(e(90)),b=r(e(96)),D=r(e(86)),M=r(e(85)),N=r(e(87)),C=r(e(216)),O=r(e(220)),a=r(e(47)),w=r(e(45)),P=r(e(225)),L=r(e(51)),x=e(204);function o(){var e=void 0,l=void 0,d=void 0,f=void 0,a=this.context,o=(0, O.default)(a).getInstance(),_=Number.isInteger||function(e){return "number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function s(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=!1,l=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),o=t!==g.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length){var d=m(e.Representation_asArray[0]);if(d&&0<d.length&&0<=x.THUMBNAILS_SCHEME_ID_URIS.indexOf(d[0].schemeIdUri))return t===g.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(S.default.CODECS)&&(0===(s=e.Representation_asArray[0].codecs).search(g.default.STPP)||0===s.search(g.default.WVTT)))return t===g.default.FRAGMENTED_TEXT}if(a){if(1<a.length)return t===g.default.MUXED;a[0]&&a[0].contentType===t&&(l=u=!0);}if(e.hasOwnProperty(S.default.MIME_TYPE)&&(u=o.test(e.mimeType),l=!0),!l)for(n=0,r=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!l&&n<r;)(i=e.Representation_asArray[n]).hasOwnProperty(S.default.MIME_TYPE)&&(u=o.test(i.mimeType),l=!0),n++;return u}function E(e){return "text/vtt"===e||"application/ttml+xml"===e}function t(){return function(e,t){return e.bandwidth-t.bandwidth}}function u(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(t()),e}function c(e,t){return e&&e.Period_asArray&&_(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function h(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===S.default.DYNAMIC),t}function m(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return {schemeIdUri:e.schemeIdUri,value:e.value}}):null}function v(e){if(e&&e.period&&_(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&_(e.index))return u(t.AdaptationSet_asArray[e.index])}}function y(e){var t=e.S_asArray[e.S_asArray.length-1];return !t.hasOwnProperty("r")||0<=t.r}function p(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var i=new N.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty(g.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(S.default.TIMESCALE)&&(i.timescale=e[r].timescale),e[r].hasOwnProperty(S.default.VALUE)&&(i.value=e[r].value),n.push(i);}return n}function T(r){var i=[],e=r.BaseURL_asArray||[r.baseUri],a=!1;return e.some(function(e){if(e){var t=new M.default,n=e.__text||e;return o.isRelative(n)&&(a=!0,r.baseUri&&(n=o.resolve(n,r.baseUri))),t.url=n,e.hasOwnProperty(S.default.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty(S.default.DVB_PRIORITY)&&(t.dvb_priority=e[S.default.DVB_PRIORITY]),e.hasOwnProperty(S.default.DVB_WEIGHT)&&(t.dvb_weight=e[S.default.DVB_WEIGHT]),e.hasOwnProperty(S.default.AVAILABILITY_TIME_OFFSET)&&(t.availabilityTimeOffset=e[S.default.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(S.default.AVAILABILITY_TIME_COMPLETE)&&(t.availabilityTimeComplete="false"!==e[S.default.AVAILABILITY_TIME_COMPLETE]),i.push(t),a}}),i}return e={getIsTypeOf:s,getIsTextTrack:E,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(S.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(S.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(S.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(S.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(S.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(S.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var r=c(t,n);return 0<r.length&&_(e)?r[e]:null},getIndexForAdaptation:function(e,t,n){if(!e)return -1;for(var r=c(t,n),i=0;i<r.length;i++){if((0, C.default)(a).getInstance().areEqual(r[i],e))return i}return -1},getAdaptationForId:function(e,t,n){for(var r=c(t,n),i=void 0,i=0,a=r.length;i<a;i++)if(r[i].hasOwnProperty(S.default.ID)&&r[i].id===e)return r[i];return null},getAdaptationsForType:function(e,t,n){for(var r=c(e,t),i=void 0,a=[],i=0,o=r.length;i<o;i++)s(r[i],n)&&a.push(u(r[i]));return a},getCodec:function(e,t,n){var r,i=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&((r=_(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(i=r.mimeType+';codecs="'+r.codecs+'"',n&&void 0!==r.width&&(i+=';width="'+r.width+'";height="'+r.height+'"'))),i=i&&i.replace(/\sprofiles=[^;]*/g,"")},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(S.default.CENC_DEFAULT_KID)?e[S.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return [];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(S.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:h,hasProfile:function(e,t){var n=!1;return e&&e.profiles&&0<e.profiles.length&&(n=-1!==e.profiles.indexOf(t)),n},getDuration:function(e){return e&&e.hasOwnProperty(S.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(S.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=u(e);return (t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map(function(e){return {bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&_(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,r,i,a,o,s=[],u=v(e),l=void 0,d=void 0;if(u&&u.Representation_asArray){e&&e.period&&_(e.period.index)&&((t=T(e.period.mpd.manifest))&&(d=t[0]));for(var f=0,c=u.Representation_asArray.length;f<c;++f){var h,p=u.Representation_asArray[f],g=new A.default;g.index=f,g.adaptation=e,p.hasOwnProperty(S.default.ID)&&(g.id=p.id),p.hasOwnProperty(S.default.CODECS)&&(g.codecs=p.codecs),p.hasOwnProperty(S.default.CODEC_PRIVATE_DATA)&&(g.codecPrivateData=p.codecPrivateData),p.hasOwnProperty(S.default.BANDWITH)&&(g.bandwidth=p.bandwidth),p.hasOwnProperty(S.default.WIDTH)&&(g.width=p.width),p.hasOwnProperty(S.default.HEIGHT)&&(g.height=p.height),p.hasOwnProperty(S.default.SCAN_TYPE)&&(g.scanType=p.scanType),p.hasOwnProperty(S.default.MAX_PLAYOUT_RATE)&&(g.maxPlayoutRate=p.maxPlayoutRate),p.hasOwnProperty(S.default.SEGMENT_BASE)?(l=p.SegmentBase,g.segmentInfoType=S.default.SEGMENT_BASE):p.hasOwnProperty(S.default.SEGMENT_LIST)?(l=p.SegmentList).hasOwnProperty(S.default.SEGMENT_TIMELINE)?(g.segmentInfoType=S.default.SEGMENT_TIMELINE,g.useCalculatedLiveEdgeTime=y(l.SegmentTimeline)):(g.segmentInfoType=S.default.SEGMENT_LIST,g.useCalculatedLiveEdgeTime=!0):p.hasOwnProperty(S.default.SEGMENT_TEMPLATE)?((l=p.SegmentTemplate).hasOwnProperty(S.default.SEGMENT_TIMELINE)?(g.segmentInfoType=S.default.SEGMENT_TIMELINE,g.useCalculatedLiveEdgeTime=y(l.SegmentTimeline)):g.segmentInfoType=S.default.SEGMENT_TEMPLATE,l.hasOwnProperty(S.default.INITIALIZATION_MINUS)&&(g.initialization=l.initialization.split("$Bandwidth$").join(p.bandwidth).split("$RepresentationID$").join(p.id))):g.segmentInfoType=S.default.BASE_URL,g.essentialProperties=m(p),l&&(l.hasOwnProperty(S.default.INITIALIZATION)?((h=l.Initialization).hasOwnProperty(S.default.SOURCE_URL)&&(g.initialization=h.sourceURL),h.hasOwnProperty(S.default.RANGE)&&(g.range=h.range)):p.hasOwnProperty(S.default.MIME_TYPE)&&E(p.mimeType)&&(g.range=0),l.hasOwnProperty(S.default.TIMESCALE)&&(g.timescale=l.timescale),l.hasOwnProperty(S.default.DURATION)?g.segmentDuration=l.duration/g.timescale:p.hasOwnProperty(S.default.SEGMENT_TEMPLATE)&&(l=p.SegmentTemplate).hasOwnProperty(S.default.SEGMENT_TIMELINE)&&(g.segmentDuration=(i=l.SegmentTimeline,a=void 0,a=i.S_asArray[0],o=i.S_asArray[1],(a.hasOwnProperty("d")?a.d:o.t-a.t)/g.timescale)),l.hasOwnProperty(S.default.MEDIA)&&(g.media=l.media),l.hasOwnProperty(S.default.START_NUMBER)&&(g.startNumber=l.startNumber),l.hasOwnProperty(S.default.INDEX_RANGE)&&(g.indexRange=l.indexRange),l.hasOwnProperty(S.default.PRESENTATION_TIME_OFFSET)&&(g.presentationTimeOffset=l.presentationTimeOffset/g.timescale),l.hasOwnProperty(S.default.AVAILABILITY_TIME_OFFSET)?g.availabilityTimeOffset=l.availabilityTimeOffset:d&&void 0!==d.availabilityTimeOffset&&(g.availabilityTimeOffset=d.availabilityTimeOffset),l.hasOwnProperty(S.default.AVAILABILITY_TIME_COMPLETE)?g.availabilityTimeComplete="false"!==l.availabilityTimeComplete:d&&void 0!==d.availabilityTimeComplete&&(g.availabilityTimeComplete=d.availabilityTimeComplete)),g.MSETimeOffset=(r=(n=g).presentationTimeOffset,n.adaptation.period.start-r),g.path=[e.period.index,e.index,f],s.push(g);}}return s},getAdaptationsForPeriod:function(e){var t=e&&_(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],r=void 0,i=void 0,a=void 0;if(t&&t.AdaptationSet_asArray)for(a=0;a<t.AdaptationSet_asArray.length;a++)i=t.AdaptationSet_asArray[a],r=new I.default,i.hasOwnProperty(S.default.ID)&&(r.id=i.id),r.index=a,r.period=e,s(i,g.default.MUXED)?r.type=g.default.MUXED:s(i,g.default.AUDIO)?r.type=g.default.AUDIO:s(i,g.default.VIDEO)?r.type=g.default.VIDEO:s(i,g.default.FRAGMENTED_TEXT)?r.type=g.default.FRAGMENTED_TEXT:s(i,g.default.IMAGE)?r.type=g.default.IMAGE:r.type=g.default.TEXT,n.push(r);return n},getRegularPeriods:function(e){for(var t=!!e&&h(e.manifest),n=[],r=null,i=null,a=null,o=null,s=void 0,s=0,u=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;s<u;s++)(i=e.manifest.Period_asArray[s]).hasOwnProperty(S.default.START)?(o=new R.default).start=i.start:null!==r&&r.hasOwnProperty(S.default.DURATION)&&null!==a?(o=new R.default).start=parseFloat((a.start+a.duration).toFixed(5)):0!==s||t||((o=new R.default).start=0),null!==a&&isNaN(a.duration)&&(null!==o?a.duration=parseFloat((o.start-a.start).toFixed(5)):l.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==o&&(o.id=function(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=R.default.DEFAULT_ID+"_"+t;e.hasOwnProperty(S.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(n=e.id);return n}(i,s),o.index=s,o.mpd=e,i.hasOwnProperty(S.default.DURATION)&&(o.duration=i.duration),n.push(o),r=i,a=o),o=i=null;return 0===n.length||null!==a&&isNaN(a.duration)&&(a.duration=parseFloat((function(e){!function(){if(!d||!d.hasOwnProperty("error"))throw new Error(g.default.MISSING_CONFIG_ERROR)}();var t=h(e.mpd.manifest),n=void 0;e.mpd.manifest.mediaPresentationDuration?n=e.mpd.manifest.mediaPresentationDuration:e.duration?n=e.duration:t?n=Number.POSITIVE_INFINITY:d.error(new P.default(L.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e));return n}(a)-a.start).toFixed(5))),n},getMpd:function(e){var t=new i.default;return e&&((t.manifest=e).hasOwnProperty(S.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(S.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(S.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(S.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(S.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(S.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(S.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,r=n&&e&&_(e.index)?n[e.index].EventStream_asArray:null,i=[],a=void 0,o=void 0;if(r)for(a=0;a<r.length;a++){var s=new N.default;if(s.period=e,s.timescale=1,!r[a].hasOwnProperty(g.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(s.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty(S.default.TIMESCALE)&&(s.timescale=r[a].timescale),r[a].hasOwnProperty(S.default.VALUE)&&(s.value=r[a].value),o=0;r[a].Event_asArray&&o<r[a].Event_asArray.length;o++){var u,l=new D.default;l.presentationTime=0,l.eventStream=s,r[a].Event_asArray[o].hasOwnProperty(S.default.PRESENTATION_TIME)&&(l.presentationTime=r[a].Event_asArray[o].presentationTime,u=s.presentationTimeOffset?s.presentationTimeOffset*s.timescale:0,l.calculatedPresentationTime=l.presentationTime+e.start*s.timescale+u),r[a].Event_asArray[o].hasOwnProperty(S.default.DURATION)&&(l.duration=r[a].Event_asArray[o].duration),r[a].Event_asArray[o].hasOwnProperty(S.default.ID)&&(l.id=r[a].Event_asArray[o].id),r[a].Event_asArray[o].Signal&&r[a].Event_asArray[o].Signal.Binary?l.messageData=f.decodeArray(r[a].Event_asArray[o].Signal.Binary.toString()):l.messageData=r[a].Event_asArray[o].messageData||r[a].Event_asArray[o].__text,i.push(l);}}return i},getEventStreamForAdaptationSet:function(e,t){var n=void 0,r=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&_(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&_(t.index)&&(i=r.AdaptationSet_asArray[t.index])&&(n=i.InbandEventStream_asArray),p(n,null)},getEventStreamForRepresentation:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&_(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&_(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&_(t.index)&&(a=i.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),p(n,t)},getUTCTimingSources:function(e){var t=h(e),n=!!e&&e.hasOwnProperty(S.default.AVAILABILITY_START_TIME),r=e?e.UTCTiming_asArray:null,i=[];return (t||n)&&r&&r.forEach(function(e){var t=new b.default;e.hasOwnProperty(g.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(S.default.VALUE)&&(t.value=e.value.toString(),i.push(t)));}),i},getBaseURLsFromElement:T,getRepresentationSortFunction:t,getLocation:function(e){if(e&&e.hasOwnProperty(g.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=v(e),n=t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray[0]:null,r=void 0;if(n){if(n.hasOwnProperty(S.default.SEGMENT_LIST))return !(r=n.SegmentList).hasOwnProperty(S.default.SEGMENT_TIMELINE)||y(r.SegmentTimeline);if(n.hasOwnProperty(S.default.SEGMENT_TEMPLATE)&&(r=n.SegmentTemplate).hasOwnProperty(S.default.SEGMENT_TIMELINE))return y(r.SegmentTimeline)}return !1},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(S.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(S.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(S.default.SERVICE_DESCRIPTION)){var n=!0,r=!1,i=void 0;try{for(var a,o=e.ServiceDescription_asArray[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=void 0,l=void 0,d=void 0,f=void 0;for(var c in s)s.hasOwnProperty(c)&&(c===S.default.ID?u=s[c]:c===S.default.SERVICE_DESCRIPTION_SCOPE?l=s[c].schemeIdUri:c===S.default.SERVICE_DESCRIPTION_LATENCY?d={target:s[c].target,max:s[c].max,min:s[c].min}:c===S.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(f={max:s[c].max,min:s[c].min}));l===g.default.SERVICE_DESCRIPTION_LL_SCHEME&&(d||f)&&t.push({id:u,schemeIdUri:l,latency:d,playbackRate:f});}}catch(e){r=!0,i=e;}finally{try{!n&&o.return&&o.return();}finally{if(r)throw i}}}return t},getSupplementalPropperties:function(e){var t={};if(e&&e.hasOwnProperty(S.default.SUPPLEMENTAL_PROPERTY)){var n=!0,r=!1,i=void 0;try{for(var a,o=e.SupplementalProperty_asArray[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.hasOwnProperty(g.default.SCHEME_ID_URI)&&s.hasOwnProperty(S.default.VALUE)&&(t[s[g.default.SCHEME_ID_URI]]=s[S.default.VALUE]);}}catch(e){r=!0,i=e;}finally{try{!n&&o.return&&o.return();}finally{if(r)throw i}}}return t},setConfig:function(e){e&&(e.errHandler&&(d=e.errHandler),e.BASE64&&(f=e.BASE64));}},l=(0, w.default)(a).getInstance().getLogger(e),e}o.__dashjs_factory_name="DashManifestModel",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{108:108,204:204,216:216,220:220,225:225,45:45,47:47,51:51,61:61,84:84,85:85,86:86,87:87,90:90,91:91,92:92,96:96}],66:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(76)),l=r(e(3)),d=r(e(75)),f=r(e(73)),c=r(e(72)),h=r(e(74)),p=r(e(69)),g=r(e(70));function a(e){e=e||{};var t=this.context,n=e.debug,r=void 0,a=void 0,i=void 0,o=void 0,s=void 0;return r={parse:function(e){var t=void 0,n=window.performance.now();if(!(t=o.xml_str2json(e)))throw new Error("parsing the manifest failed");var r=window.performance.now();s.run(t);var i=window.performance.now();return a.info("Parsing complete: ( xml2json: "+(r-n).toPrecision(3)+"ms, objectiron: "+(i-r).toPrecision(3)+"ms, total: "+((i-n)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return i},getIron:function(){return s}},a=n.getLogger(r),i=[new f.default,new c.default,new h.default,new d.default],o=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!0,matchers:i}),s=(0, u.default)(t).create({adaptationset:new p.default,period:new g.default}),r}a.__dashjs_factory_name="DashParser",n.default=i.default.getClassFactory(a),t.exports=n.default;},{3:3,47:47,69:69,70:70,72:72,73:73,74:74,75:75,76:76}],67:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t;this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase();}n.default=i,t.exports=n.default;},{}],68:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}var a,o=e(67),s=(a=o)&&a.__esModule?a:{default:a},u=(r(l,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),l);function l(e,t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(function(e){r._properties.push(new s.default(e));});}n.default=u,t.exports=n.default;},{67:67}],69:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(68)),o=i(e(61)),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(u,a.default),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var e=[o.default.PROFILES,o.default.WIDTH,o.default.HEIGHT,o.default.SAR,o.default.FRAMERATE,o.default.AUDIO_SAMPLING_RATE,o.default.MIME_TYPE,o.default.SEGMENT_PROFILES,o.default.CODECS,o.default.MAXIMUM_SAP_PERIOD,o.default.START_WITH_SAP,o.default.MAX_PLAYOUT_RATE,o.default.CODING_DEPENDENCY,o.default.SCAN_TYPE,o.default.FRAME_PACKING,o.default.AUDIO_CHANNEL_CONFIGURATION,o.default.CONTENT_PROTECTION,o.default.ESSENTIAL_PROPERTY,o.default.SUPPLEMENTAL_PROPERTY,o.default.INBAND_EVENT_STREAM];r(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,o.default.ADAPTATION_SET,e,[new a.default(o.default.REPRESENTATION,e,[new a.default(o.default.SUB_REPRESENTATION,e)])]);}n.default=s,t.exports=n.default;},{61:61,68:68}],70:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(68)),o=i(e(61)),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(u,a.default),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var e=[o.default.SEGMENT_BASE,o.default.SEGMENT_TEMPLATE,o.default.SEGMENT_LIST];r(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,o.default.PERIOD,e,[new a.default(o.default.ADAPTATION_SET,e,[new a.default(o.default.REPRESENTATION,e)])]);}n.default=s,t.exports=n.default;},{61:61,68:68}],71:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),a);function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this._test=e,this._converter=t;}n.default=i,t.exports=n.default;},{}],72:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(71),o=(i=a)&&i.__esModule?i:{default:i},s=60,u=60,l=1e3,d=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,f=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(c,o.default),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),r(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,function(e){return d.test(e.value)},function(e){var t,n=d.exec(e),r=void 0,r=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&parseFloat(n[7])*l||0);return n[9]&&n[10]&&(t=parseInt(n[9],10)*u+parseInt(n[10],10),r+=("+"===n[8]?-1:1)*t*s*l),new Date(r)});}n.default=f,t.exports=n.default;},{71:71}],73:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(71)),o=i(e(108)),s=i(e(61)),u=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=31536e3,d=2592e3,f=86400,c=3600,h=60,p=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(g,a.default),g);function g(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),r(Object.getPrototypeOf(g.prototype),"constructor",this).call(this,function(e){for(var t=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,s.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,o.default.START_TIME,s.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return u.test(e.value);return !1},function(e){var t=u.exec(e),n=parseFloat(t[3]||0)*l+parseFloat(t[5]||0)*d+parseFloat(t[7]||0)*f+parseFloat(t[9]||0)*c+parseFloat(t[11]||0)*h+parseFloat(t[13]||0);return void 0!==t[1]&&(n=-n),n});}n.default=p,t.exports=n.default;},{108:108,61:61,71:71}],74:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(71),o=(i=a)&&i.__esModule?i:{default:i},s=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(l,o.default),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){return parseFloat(e)});}n.default=u,t.exports=n.default;},{71:71}],75:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=i(e(71)),s=i(e(61)),u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(l,o.default),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,function(e,t){var n,r=(a(n={},s.default.MPD,[s.default.ID,s.default.PROFILES]),a(n,s.default.PERIOD,[s.default.ID]),a(n,s.default.BASE_URL,[s.default.SERVICE_LOCATION,s.default.BYTE_RANGE]),a(n,s.default.SEGMENT_BASE,[s.default.INDEX_RANGE]),a(n,s.default.INITIALIZATION,[s.default.RANGE]),a(n,s.default.REPRESENTATION_INDEX,[s.default.RANGE]),a(n,s.default.SEGMENT_LIST,[s.default.INDEX_RANGE]),a(n,s.default.BITSTREAM_SWITCHING,[s.default.RANGE]),a(n,s.default.SEGMENT_URL,[s.default.MEDIA_RANGE,s.default.INDEX_RANGE]),a(n,s.default.SEGMENT_TEMPLATE,[s.default.INDEX_RANGE,s.default.MEDIA,s.default.INDEX,s.default.INITIALIZATION_MINUS,s.default.BITSTREAM_SWITCHING_MINUS]),a(n,s.default.ASSET_IDENTIFIER,[s.default.VALUE,s.default.ID]),a(n,s.default.EVENT_STREAM,[s.default.VALUE]),a(n,s.default.ADAPTATION_SET,[s.default.PROFILES,s.default.MIME_TYPE,s.default.SEGMENT_PROFILES,s.default.CODECS,s.default.CONTENT_TYPE]),a(n,s.default.FRAME_PACKING,[s.default.VALUE,s.default.ID]),a(n,s.default.AUDIO_CHANNEL_CONFIGURATION,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_PROTECTION,[s.default.VALUE,s.default.ID]),a(n,s.default.ESSENTIAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.SUPPLEMENTAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.INBAND_EVENT_STREAM,[s.default.VALUE,s.default.ID]),a(n,s.default.ACCESSIBILITY,[s.default.VALUE,s.default.ID]),a(n,s.default.ROLE,[s.default.VALUE,s.default.ID]),a(n,s.default.RATING,[s.default.VALUE,s.default.ID]),a(n,s.default.VIEWPOINT,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_COMPONENT,[s.default.CONTENT_TYPE]),a(n,s.default.REPRESENTATION,[s.default.ID,s.default.DEPENDENCY_ID,s.default.MEDIA_STREAM_STRUCTURE_ID]),a(n,s.default.SUBSET,[s.default.ID]),a(n,s.default.METRICS,[s.default.METRICS_MINUS]),a(n,s.default.REPORTING,[s.default.VALUE,s.default.ID]),n);if(r.hasOwnProperty(t)){var i=r[t];return void 0!==i&&0<=i.indexOf(e.name)}return !1},function(e){return String(e)});}n.default=u,t.exports=n.default;},{61:61,71:71}],76:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(d){function l(e,t,n){for(var r=0,i=e.length;r<i;++r){var a,o,s=e[r];t[s.name]&&(n[s.name]?s.merge&&(a=t[s.name],o=n[s.name],"object"==typeof a&&"object"==typeof o?function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);}(a,o):n[s.name]=a+o):n[s.name]=t[s.name]);}}function f(e,t){for(var n=0,r=e.children.length;n<r;++n){var i=e.children[n],a=t[i.name+"_asArray"];if(a)for(var o=0,s=a.length;o<s;++o){var u=a[o];l(e.properties,t,u),f(i,u);}}}return {run:function(e){if(null===e||"object"!=typeof e)return e;if("period"in d)for(var t=d.period,n=e.Period_asArray,r=0,i=n.length;r<i;++r){var a=n[r];if(f(t,a),"adaptationset"in d){var o=a.AdaptationSet_asArray;if(o)for(var s=d.adaptationset,u=0,l=o.length;u<l;++u)f(s,o[u]);}}return e}}}o.__dashjs_factory_name="ObjectIron";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default;},{47:47}],77:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108)),d=e(80);function o(e,s){var u=(e=e||{}).timelineConverter;function l(){if(!u||!u.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(a.default.MISSING_CONFIG_ERROR)}function i(e,t){if(l(),!e)return null;var n,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,i=r.SegmentURL_asArray.length,a=e.startNumber,o=null;return t<i&&(n=r.SegmentURL_asArray[t],(o=(0, d.getIndexBasedSegment)(u,s,e,t))&&(o.replacementTime=(a+t-1)*e.segmentDuration,o.media=n.media?n.media:"",o.mediaRange=n.mediaRange,o.index=t,o.indexRange=n.indexRange)),e.availableSegmentsNumber=i,o}return {getSegmentByIndex:i,getSegmentByTime:function(e,t){if(l(),!e)return null;var n=e.segmentDuration;if(isNaN(n))return null;var r=u.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return i(e,Math.floor(r/n))}}}o.__dashjs_factory_name="ListSegmentsGetter";var s=i.default.getClassFactory(o);n.default=s,t.exports=n.default;},{108:108,47:47,80:80}],78:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"round10",value:function(e,t){return n="round",r=e,void 0!==(i=t)&&0!=+i?(i=+i,null===(r=+r)||isNaN(r)||"number"!=typeof i||i%1!=0?NaN:(r=r.toString().split("e"),+((r=(r=Math[n](+(r[0]+"e"+(r[1]?r[1]-i:-i)))).toString().split("e"))[0]+"e"+(r[1]?+r[1]+i:i)))):Math[n](r);var n,r,i;}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}n.default=i,t.exports=n.default;},{}],79:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(108));function a(e){var n=(e=e||{}).timelineConverter;function a(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function r(e,t){if(a(),!e)return null;var n=e.segments?e.segments.length:-1,r=void 0;if(t<n&&(r=e.segments[t])&&r.availabilityIdx===t)return r;for(var i=0;i<n;i++)if((r=e.segments[i])&&r.availabilityIdx===t)return r;return null}return {getSegmentByIndex:r,getSegmentByTime:function(e,t){return a(),r(e,function(e,t){if(!e)return -1;var n=e.segments,r=n?n.length:null,i=-1,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0;if(n&&0<r)for(l=0;l<r;l++)if(o=n[l],s=o.presentationStartTime,u=o.duration,s<=t+(a=u/2)&&t-a<s+u){i=o.availabilityIdx;break}return i}(e,n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t)))}}}a.__dashjs_factory_name="SegmentBaseGetter";var s=i.default.getClassFactory(a);n.default=s,t.exports=n.default;},{108:108,47:47}],80:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},n.replaceTokenForTemplate=g,n.getIndexBasedSegment=function(e,t,n,r){var i,a,o=void 0;o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration);i=parseFloat((n.adaptation.period.start+r*o).toFixed(5)),a=parseFloat((i+o).toFixed(5));var s=_(n,o,i,e.calcMediaTimeFromPresentationTime(i,n),e.calcAvailabilityStartTimeFromPresentationTime(i,n.adaptation.period.mpd,t),e,a,t,r);return E(e,n,s,t)?s:null},n.getTimeBasedSegment=function(e,t,n,r,i,a,o,s,u,l){var d,f,c=r/a,h=Math.min(i/a,n.adaptation.period.mpd.maxSegmentDuration),p=void 0;return d=e.calcPresentationTimeFromMediaTime(c,n),f=d+h,p=_(n,h,d,c,n.adaptation.period.mpd.manifest.loadedTime,e,f,t,u),E(e,n,p,t)?(p.replacementTime=l||r,o=g(o,"Number",p.replacementNumber),o=g(o,"Time",p.replacementTime),p.media=o,p.mediaRange=s,p):null};var r,i=e(94),f=(r=i)&&r.__esModule?r:{default:r};function c(e,t){for(;e.length<t;)e="0"+e;return e}function g(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=t.length,d="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",r+l))<0)return e;if(r<(a=e.indexOf("%0",r+l))&&a<i)switch(o=e.charAt(i-1),s=parseInt(e.substring(a+d,i-1),10),o){case"d":case"i":case"u":u=c(n.toString(),s);break;case"x":u=c(n.toString(16),s);break;case"X":u=c(n.toString(16),s).toUpperCase();break;case"o":u=c(n.toString(8),s);break;default:return e}else u=n;e=e.substring(0,r)+u+e.substring(i+1);}}function _(e,t,n,r,i,a,o,s,u){var l,d=new f.default;return d.representation=e,d.duration=t,d.presentationStartTime=n,d.mediaStartTime=r,d.availabilityStartTime=i,d.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(o,e.adaptation.period.mpd,s),d.wallStartTime=a.calcWallTimeForSegment(d,s),d.replacementNumber=(l=u,d.representation.startNumber+l),d.availabilityIdx=u,d}function E(e,t,n,r){var i=e.getPeriodEnd(t,r);if(e.calcPeriodRelativeTimeFromMpdRelativeTime(t,i)<=e.calcPeriodRelativeTimeFromMpdRelativeTime(t,n.presentationStartTime)){if(!r)return;if(t.segmentAvailabilityRange&&n.presentationStartTime>=t.segmentAvailabilityRange.end)return}return 1}},{94:94}],81:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108)),d=e(80);function o(e,s){var u=(e=e||{}).timelineConverter;function l(){if(!u||!u.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(a.default.MISSING_CONFIG_ERROR)}function i(e,t){if(l(),!e)return null;var n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;t=Math.max(t,0);var r,i=(0, d.getIndexBasedSegment)(u,s,e,t);i&&(i.replacementTime=(t-1)*e.segmentDuration,r=n.media,r=(0, d.replaceTokenForTemplate)(r,"Number",i.replacementNumber),r=(0, d.replaceTokenForTemplate)(r,"Time",i.replacementTime),i.media=r);var a=e.segmentDuration,o=e.segmentAvailabilityRange;return isNaN(a)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((o.end-o.start)/a),i}return {getSegmentByIndex:i,getSegmentByTime:function(e,t){if(l(),!e)return null;var n=e.segmentDuration;if(isNaN(n))return null;var r=u.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return i(e,Math.floor(r/n))}}}o.__dashjs_factory_name="TemplateSegmentsGetter";var s=i.default.getClassFactory(o);n.default=s,t.exports=n.default;},{108:108,47:47,80:80}],82:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(46)),p=r(e(54)),i=r(e(47)),g=r(e(61)),_=r(e(65));function a(){var e,t=this.context,n=(0, h.default)(t).getInstance(),c=void 0,i=void 0,u=void 0,r=void 0;function a(e){i=e;}function o(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-i)):t.availabilityStartTime}function l(e,t){return (e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*i)/1e3}function s(e){u||void 0!==e.offset&&(a(e.offset/1e3),u=!0);}function d(){i=0,u=!1,r=NaN;}function f(){n.off(p.default.TIME_SYNCHRONIZATION_COMPLETED,s,this),d();}return e={initialize:function(){d(),n.on(p.default.TIME_SYNCHRONIZATION_COMPLETED,s,this);},isTimeSyncCompleted:function(){return u},setTimeSyncCompleted:function(e){u=e;},getClientTimeOffset:function(){return i},setClientTimeOffset:a,getExpectedLiveEdge:function(){return r},setExpectedLiveEdge:function(e){r=e;},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return o.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return o.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:l,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!u&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0);if(e.segmentInfoType===g.default.SEGMENT_TIMELINE&&n.mpd.timeShiftBufferDepth===Number.POSITIVE_INFINITY)return function(e){var t,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=c.getRepresentationFor(e.index,n),i=r.SegmentTemplate.SegmentTimeline,a=r.SegmentTemplate.timescale,o=i.S_asArray,s={start:0,end:0},u=0,l=void 0,d=void 0,f=void 0;for(s.start=o[0].t/a,f=0,t=o.length;f<t;f++)l=o[f],d=0,l.hasOwnProperty("r")&&(d=l.r),u+=l.d/a*(1+d);return s.end=s.start+u,s}(e);var a=l(new Date,n),o=n.start+n.duration;r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start);var s=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<i?i-e.availabilityTimeOffset:i;return r.end=o<=a&&a-s<o?o:a-s,r},getPeriodEnd:function(e,t){var n=e.adaptation.period;if(!t)return n.start+n.duration;if(!u&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),i=l(new Date,n),a=n.start+n.duration,o=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<r?r-e.availabilityTimeOffset:r;return Math.min(i-o,a)},calcWallTimeForSegment:function(e,t){var n=void 0,r=void 0,i=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},reset:f},c=(0, _.default)(t).getInstance(),f(),e}a.__dashjs_factory_name="TimelineConverter",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{46:46,47:47,54:54,61:61,65:65}],83:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108)),p=e(80);function o(e,v){var y=(e=e||{}).timelineConverter;function t(){if(!y||!y.hasOwnProperty("calcMediaTimeFromPresentationTime")||!y.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(a.default.MISSING_CONFIG_ERROR)}function n(e,t){for(var n,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,i=r.SegmentTimeline,a=r.SegmentURL_asArray,o=0,s=0,u=-1,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=e.timescale,_=!1,d=0,E=(n=i.S_asArray).length;d<E&&!_;d++){var m,c=0;for((l=n[d]).hasOwnProperty("r")&&(c=l.r),l.hasOwnProperty("t")&&(s=(o=l.t)/g),c<0&&((p=n[d+1])&&p.hasOwnProperty("t")?h=p.t/g:(m=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:y.calcSegmentAvailabilityRange(e,v).end,h=y.calcMediaTimeFromPresentationTime(m,e),e.segmentDuration=l.d/g),c=Math.ceil((h-s)/(l.d/g))-1),f=0;f<=c&&!_;f++)(_=t(o,s,r,a,l,g,++u,d))&&(e.segmentDuration=l.d/g,(f<c-1||d<E-1)&&u++),s=(o+=l.d)/g;}e.availableSegmentsNumber=u;}return {getSegmentByIndex:function(d,e,f){if(t(),!d)return null;var c=null,h=!1;return n(d,function(e,t,n,r,i,a,o,s){if(h||f<0){var u=n.media,l=i.mediaRange;return r&&(u=r[s].media||"",l=r[s].mediaRange),c=(0, p.getTimeBasedSegment)(y,v,d,e,i.d,a,u,l,o,i.tManifest),!0}return t>=f-.5*i.d/a&&(h=!0),!1}),c},getSegmentByTime:function(d,e){if(t(),!d)return null;void 0===e&&(e=null);var f=null,c=y.calcMediaTimeFromPresentationTime(e,d);return n(d,function(e,t,n,r,i,a,o,s){if(c<t+i.d/a){var u=n.media,l=i.mediaRange;return r&&(u=r[s].media||"",l=r[s].mediaRange),f=(0, p.getTimeBasedSegment)(y,v,d,e,i.d,a,u,l,o,i.tManifest),!0}return !1}),f}}}o.__dashjs_factory_name="TimelineSegmentsGetter";var s=i.default.getClassFactory(o);n.default=s,t.exports=n.default;},{108:108,47:47,80:80}],84:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null;},t.exports=n.default;},{}],85:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});function i(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=n||1,this.dvb_weight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0;}i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default;},{}],86:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN;},t.exports=n.default;},{}],87:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="";},t.exports=n.default;},{}],88:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null;},t.exports=n.default;},{}],89:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"isMediaInfoEqual",value:function(e){if(!e)return !1;var t=this.id===e.id,n=this.viewpoint===e.viewpoint,r=this.lang===e.lang,i=this.roles.toString()===e.roles.toString(),a=this.accessibility.toString()===e.accessibility.toString(),o=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&n&&r&&i&&a&&o}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null;}n.default=i,t.exports=n.default;},{}],90:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN;},t.exports=n.default;},{}],91:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null;}r.DEFAULT_ID="defaultId",n.default=r,t.exports=n.default;},{}],92:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}var a,o=e(61),s=(a=o)&&a.__esModule?a:{default:a},u=(r(l,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==s.default.BASE_URL&&this.segmentInfoType!==s.default.SEGMENT_BASE&&!this.indexRange}}]),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0;}n.default=u,t.exports=n.default;},{61:61}],93:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null;},t.exports=n.default;},{}],94:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null;},t.exports=n.default;},{}],95:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0;},t.exports=n.default;},{}],96:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value="";},t.exports=n.default;},{}],97:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(108)),d=r(e(158)),f=r(e(228)),c=r(e(225)),i=r(e(47));function a(e){e=e||{};var t=this.context,i=e.eventBus,a=e.events,n=e.urlUtils,o=e.errors,s=void 0,u=void 0;return s={checkForExistence:function(t){function e(e){i.trigger(a.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e});}var n;t?(n=new f.default(t.url),u.load({request:n,success:function(){e(!0);},error:function(){e(!1);}})):e(!1);},load:function(n){function r(e,t){i.trigger(a.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:s});}n?u.load({request:n,progress:function(e){i.trigger(a.LOADING_PROGRESS,{request:n,stream:e.stream}),e.data&&i.trigger(a.LOADING_DATA_PROGRESS,{request:n,response:e.data||null,error:null,sender:s});},success:function(e){r(e);},error:function(e,t,n){r(void 0,new c.default(o.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t));},abort:function(e){e&&i.trigger(a.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:s});}}):r(void 0,new c.default(o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE));},abort:function(){u&&u.abort();},reset:function(){u&&(u.abort(),u=null);}},u=(0, d.default)(t).create({errHandler:e.errHandler,errors:o,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:n,constants:l.default,boxParser:e.boxParser,dashConstants:e.dashConstants}),s}a.__dashjs_factory_name="FragmentLoader",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,158:158,225:225,228:228,47:47}],98:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(108)),a=r(e(61)),o=r(e(123)),s=r(e(158)),u=r(e(220)),m=r(e(232)),v=r(e(225)),y=e(241),T=r(e(46)),S=r(e(54)),A=r(e(51)),i=r(e(47)),I=r(e(66));function l(e){e=e||{};var l=this.context,d=e.debug,f=(0, T.default)(l).getInstance(),c=(0, u.default)(l).getInstance(),t=void 0,h=void 0,n=void 0,p=void 0,g=void 0,_=e.mssHandler,r=e.errHandler;function i(e){f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest});}return t={load:function(u){var e=new m.default(u,y.HTTPRequest.MPD_TYPE);n.load({request:e,success:function(e,t,n){if(p){var r,i,a=void 0,o=void 0,s=void 0;if(n&&n!==u?(o=c.parseBaseUrl(n),a=n):(c.isRelative(u)&&(u=c.resolve(u,window.location.href)),o=c.parseBaseUrl(u)),null===g&&(i=null,g=-1<(r=e).indexOf("SmoothStreamingMedia")?(_&&(i=_.createMssParser(),_.registerEvents()),i):-1<r.indexOf("MPD")?(0, I.default)(l).create({debug:d}):i),null!==g){p.setMatchers(g.getMatchers()),p.setIron(g.getIron());try{s=g.parse(e);}catch(e){return void f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+u)})}s?(s.url=a||u,s.originalUrl||(s.originalUrl=s.url),s.hasOwnProperty(E.default.LOCATION)&&(o=c.parseBaseUrl(s.Location_asArray[0]),h.debug("BaseURI set by Location to: "+o)),s.baseUri=o,s.loadedTime=new Date,p.resolveManifestOnLoad(s),f.trigger(S.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:e})):f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+u)});}else f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+u)});}},error:function(e,t,n){f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(u+", ")+n)});}});},reset:function(){f.off(S.default.XLINK_READY,i,t),p&&(p.reset(),p=null),n&&(n.abort(),n=null),_&&_.reset();}},h=d.getLogger(t),f.on(S.default.XLINK_READY,i,t),n=(0, s.default)(l).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:c,constants:E.default,dashConstants:a.default,errors:A.default}),p=(0, o.default)(l).create({errHandler:r,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),g=null,t}l.__dashjs_factory_name="ManifestLoader";var d=i.default.getClassFactory(l);n.default=d,t.exports=n.default;},{108:108,123:123,158:158,220:220,225:225,232:232,241:241,46:46,47:47,51:51,54:54,61:61,66:66}],99:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var A=r(e(46)),I=r(e(54)),i=r(e(47)),R=r(e(45)),b=r(e(51)),D=r(e(61));function a(){var e=this.context,r=(0, A.default)(e).getInstance(),t=void 0,i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0;function h(){a=NaN,o=!(s=!1),p();}function p(){null!==n&&(clearTimeout(n),n=null);}function g(e){p(),isNaN(e)&&!isNaN(a)&&(e=1e3*a),isNaN(e)||(i.debug("Refresh manifest in "+e+" milliseconds."),n=setTimeout(m,e));}function _(){s=!0;var e=l.getValue(),t=e.url,n=d.getLocation(e);n&&(t=n),u.load(t);}function E(e){var t,n;l.getValue()&&l.getValue().type===D.default.DYNAMIC&&e.type===D.default.STATIC?r.trigger(I.default.DYNAMIC_STREAM_COMPLETED):(l.setValue(e),n=((t=new Date).getTime()-e.loadedTime.getTime())/1e3,2147483647<1e3*(a=d.getManifestUpdatePeriod(e,n))&&(a=2147483.647),r.trigger(I.default.MANIFEST_UPDATED,{manifest:e}),i.info("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),o||g());}function m(){o&&!c.get().streaming.scheduleWhilePaused||(s?g(c.get().streaming.manifestUpdateRetryInterval):_());}function v(e){e.error?e.error.code===b.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&f.error(e.error):E(e.manifest);}function y(){o=!1,g();}function T(){o=!0,p();}function S(){s=!1;}return t={initialize:function(){h(),r.on(I.default.STREAMS_COMPOSED,S,this),r.on(I.default.PLAYBACK_STARTED,y,this),r.on(I.default.PLAYBACK_PAUSED,T,this),r.on(I.default.INTERNAL_MANIFEST_LOADED,v,this);},setManifest:function(e){E(e);},refreshManifest:_,setConfig:function(e){e&&(e.manifestModel&&(l=e.manifestModel),e.adapter&&(d=e.adapter),e.manifestLoader&&(u=e.manifestLoader),e.errHandler&&(f=e.errHandler),e.settings&&(c=e.settings));},reset:function(){r.off(I.default.PLAYBACK_STARTED,y,this),r.off(I.default.PLAYBACK_PAUSED,T,this),r.off(I.default.STREAMS_COMPOSED,S,this),r.off(I.default.INTERNAL_MANIFEST_LOADED,v,this),h();}},i=(0, R.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="ManifestUpdater",n.default=i.default.getClassFactory(a),t.exports=n.default;},{45:45,46:46,47:47,51:51,54:54,61:61}],100:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var oe=r(e(2)),se=r(e(108)),ue=r(e(61)),le=r(e(109)),de=r(e(119)),fe=r(e(121)),ce=r(e(117)),he=r(e(112)),pe=r(e(98)),ge=r(e(212)),_e=r(e(207)),Ee=r(e(202)),me=r(e(217)),ve=r(e(200)),ye=r(e(153)),Te=r(e(150)),Se=r(e(151)),Ae=r(e(111)),Ie=r(e(157)),Re=r(e(154)),be=r(e(148)),De=r(e(209)),Me=r(e(45)),Ne=r(e(51)),Ce=r(e(46)),Oe=r(e(54)),we=r(e(101)),Pe=r(e(47)),Le=r(e(48)),xe=e(50),Fe=r(e(63)),Ue=r(e(56)),ke=r(e(58)),Be=r(e(82)),Ge=e(241),je=r(e(1)),Ye=r(e(9)),Ke=r(e(225)),qe=e(218),He=r(e(99)),Ve=r(e(220)),ze=r(e(206));function i(){var i="You must first call initialize() and set a source before calling this method",r="You must first call initialize() and set a valid source and view before calling this method",t="You must first call attachView() to set the video element before calling this method",e="You must first call attachSource() with a valid source before calling this method",a="MediaPlayer not initialized!",o=this.context,s=(0, Ce.default)(o).getInstance(),u=(0, Le.default)(o).getInstance(),l=(0, Me.default)(o).getInstance({settings:u}),n=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0,m=void 0,v=void 0,y=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,k=void 0,B=void 0;function G(){return !!f&&!!x.getElement()}function j(){return (0, xe.getVersionString)()}function Y(){if(!g)throw r;return O.isPaused()}function K(e){var t=w.getCurrentDVRInfo();if(!t)return 0;var n=O.getLiveDelay(),r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function q(e){if(!g)throw r;var t,n=X().currentTime;return void 0!==e?n=C.getTimeRelativeToStreamId(n,e):O.getIsDynamic()&&(n=null===(t=w.getCurrentDVRInfo())?0:H()-(t.range.end-t.time)),n}function H(){if(!g)throw r;var e=X().duration;if(O.getIsDynamic()){var t,n=w.getCurrentDVRInfo();if(!n)return 0;e=(t=n.range.end-n.range.start)<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize;}return e}function V(e){(0, qe.checkParameterType)(e,"boolean"),_=e;}function z(){b.restoreDefaultUTCTimingSources();}function W(){return w}function X(){if(!x.getElement())throw t;return x.getElement()}function Q(e){if(!h)throw a;x.setElement(e),e&&(ne(),function(){if(S)return;var e=dashjs.MetricsReporting;{var t;"function"==typeof e&&(t=e(o).create(),S=t.createMetricsReporting({debug:l,eventBus:s,mediaElement:X(),adapter:R,dashMetrics:w,events:Oe.default,constants:se.default,metricsConstants:le.default}));}}(),function(){if(A)return;var e=dashjs.MssHandler;"function"==typeof e&&(Ne.default.extend(e.errors),A=e(o).create({eventBus:s,mediaPlayerModel:b,dashMetrics:w,manifestModel:P,playbackController:O,streamController:C,protectionController:T,baseURLController:M,errHandler:D,events:Oe.default,constants:se.default,debug:l,initSegmentType:Ge.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:je.default,ISOBoxer:Ye.default,settings:u}));}(),C&&C.switchToVideoElement()),g&&ee(),ae();}function Z(e){if(!p)throw i;var t=C.getActiveStreamInfo();return y.getTracksFor(e,t)}function $(e){if(!h)throw a;"string"==typeof e&&U.initialize(e),f=e,(p||g)&&ee(),G()&&ae();}function J(){if(!p)throw i;var e=C.getActiveStreamInfo();return e?C.getStreamById(e.id):null}function ee(){p=g=!1,R.reset(),C.reset(),O.reset(),E.reset(),y.reset(),F.reset(),T&&(u.get().streaming.keepProtectionMediaKeys?T.stop():(T.reset(),T=null,ne())),L.reset();}function te(){return (0, pe.default)(o).create({debug:l,errHandler:D,dashMetrics:w,mediaPlayerModel:b,requestModifier:(0, me.default)(o).getInstance(),mssHandler:A,settings:u})}function ne(){if(T)return T;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(o).create();return Oe.default.extend(e.events),we.default.extend(e.events,{publicOnly:!0}),Ne.default.extend(e.errors),N=N||(0, _e.default)(o).getInstance(),T=t.createProtectionSystem({debug:l,errHandler:D,videoModel:x,capabilities:N,eventBus:s,events:Oe.default,BASE64:je.default,constants:se.default})}function re(){if(!h)throw a;if(I)return I;var e=dashjs.OfflineController;if("function"!=typeof e)return null;Oe.default.extend(e.events),we.default.extend(e.events,{publicOnly:!0}),Ne.default.extend(e.errors);var t=te(),n=(0, He.default)(o).create();return n.setConfig({manifestModel:P,adapter:R,manifestLoader:t,errHandler:D}),I=e(o).create({debug:l,manifestUpdater:n,baseURLController:M,manifestLoader:t,manifestModel:P,mediaPlayerModel:b,abrController:E,playbackController:O,adapter:R,errHandler:D,dashMetrics:w,timelineConverter:v,schemeLoaderFactory:m,eventBus:s,events:Oe.default,errors:Ne.default,constants:se.default,settings:u,dashConstants:ue.default,urlUtils:(0, Ve.default)(o).getInstance()})}function ie(e){var t=w.getCurrentDVRInfo();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function ae(){var e;I&&I.resetRecords(),!p&&f&&(p=!0,d.info("Streaming Initialized"),e=te(),C=C||(0, fe.default)(o).getInstance(),y.setConfig({domStorage:k}),C.setConfig({capabilities:N,manifestLoader:e,manifestModel:P,mediaPlayerModel:b,protectionController:T,adapter:R,dashMetrics:w,errHandler:D,timelineConverter:v,videoModel:x,playbackController:O,abrController:E,mediaController:y,textController:F,settings:u,baseURLController:M}),O.setConfig({streamController:C,dashMetrics:w,mediaPlayerModel:b,adapter:R,videoModel:x,timelineConverter:v,uriFragmentModel:U,settings:u}),E.setConfig({streamController:C,domStorage:k,mediaPlayerModel:b,dashMetrics:w,adapter:R,videoModel:x,settings:u}),E.createAbrRulesCollection(),F.setConfig({errHandler:D,manifestModel:P,adapter:R,mediaController:y,streamController:C,videoModel:x}),L.setConfig({abrController:E,dashMetrics:w,playbackController:O}),C.initialize(_,c),L.initialize(),"string"==typeof f?C.load(f):C.loadWithManifest(f)),!g&&G()&&(g=!0,d.info("Playback Initialized"));}return n={initialize:function(e,t,n){N=N||(0, _e.default)(o).getInstance(),D=(0, ge.default)(o).getInstance(),N.supportsMediaSource()?h||(h=!0,v=(0, Be.default)(o).getInstance(),E||(E=(0, Ae.default)(o).getInstance()).setConfig({settings:u}),m=m||(0, Ie.default)(o).getInstance(),O=O||(0, de.default)(o).getInstance(),y=y||(0, ce.default)(o).getInstance(),C=C||(0, fe.default)(o).getInstance(),R=(0, Ue.default)(o).getInstance(),P=(0, Te.default)(o).getInstance(),L=(0, be.default)(o).getInstance(),w=(0, ke.default)(o).getInstance({settings:u}),F=(0, ve.default)(o).getInstance(),k=(0, De.default)(o).getInstance({settings:u}),R.setConfig({constants:se.default,cea608parser:oe.default,errHandler:D,BASE64:je.default}),(M=M||(0, he.default)(o).create()).setConfig({adapter:R}),(B=(0, Fe.default)(o).getInstance({dashMetrics:w,mediaPlayerModel:b,errHandler:D,baseURLController:M,events:Oe.default,eventBus:s,debug:l,boxParser:(0, ze.default)(o).getInstance(),requestModifier:(0, me.default)(o).getInstance(),errors:Ne.default})).initialize(),z(),V(void 0===n||n),re(),e&&Q(e),t&&$(t),d.info("[dash.js "+j()+"] MediaPlayer has been initialized")):D.error(new Ke.default(Ne.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ne.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));},setConfig:function(e){e&&(e.capabilities&&(N=e.capabilities),e.streamController&&(C=e.streamController),e.playbackController&&(O=e.playbackController),e.mediaPlayerModel&&(b=e.mediaPlayerModel),e.abrController&&(E=e.abrController),e.schemeLoaderFactory&&(m=e.schemeLoaderFactory),e.mediaController&&(y=e.mediaController),e.settings&&(u=e.settings));},on:function(e,t,n){s.on(e,t,n);},off:function(e,t,n){s.off(e,t,n);},extend:function(e,t,n){Pe.default.extend(e,t,n,o);},attachView:Q,attachSource:$,isReady:G,preload:function(){if(x.getElement()||p)return !1;if(!f)throw e;ae();},play:function(){if(!g)throw r;(!_||Y()&&g)&&O.play();},isPaused:Y,pause:function(){if(!g)throw r;O.pause();},isSeeking:function(){if(!g)throw r;return O.isSeeking()},isDynamic:function(){if(!g)throw r;return O.getIsDynamic()},seek:function(e){if(!g)throw r;if((0, qe.checkParameterType)(e,"number"),isNaN(e))throw se.default.BAD_ARGUMENT_ERROR;var t=O.getIsDynamic()?K(e):e;O.seek(t);},setPlaybackRate:function(e){X().playbackRate=e;},getPlaybackRate:function(){return X().playbackRate},setMute:function(e){(0, qe.checkParameterType)(e,"boolean"),X().muted=e;},isMuted:function(){return X().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw se.default.BAD_ARGUMENT_ERROR;X().volume=e;},getVolume:function(){return X().volume},time:q,duration:H,timeAsUTC:function(){if(!g)throw r;return q()<0?NaN:ie(q())},durationAsUTC:function(){if(!g)throw r;return ie(H())},getActiveStream:J,getDVRWindowSize:function(){var e=w.getCurrentDVRInfo();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:K,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return (0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o},getVersion:j,getDebug:function(){return l},getBufferLength:function(e){var t,n=[se.default.VIDEO,se.default.AUDIO,se.default.FRAGMENTED_TEXT];return e?-1===n.indexOf(e)?(d.warn("getBufferLength requested for invalid type"),NaN):(t=w.getCurrentBufferLevel(e))||NaN:(t=n.map(function(e){return 0<Z(e).length?w.getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return x?x.getTTMLRenderingDiv():null},getVideoElement:X,getSource:function(){if(!f)throw e;return f},getCurrentLiveLatency:function(){if(!h)throw a;return g?O.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!p)throw i;return E.getTopBitrateInfoFor(e)},setAutoPlay:V,getAutoPlay:function(){return _},getDashMetrics:W,getQualityFor:function(e){if(!p)throw i;if(e!==se.default.IMAGE)return E.getQualityFor(e);var t=J();if(!t)return -1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1},setQualityFor:function(e,t){if(!p)throw i;if(e===se.default.IMAGE){var n=J();if(!n)return;var r=n.getThumbnailController();r&&r.setTrackByIndex(t);}E.setPlaybackQuality(e,C.getActiveStreamInfo(),t);},updatePortalSize:function(){E.setElementSize(),E.setWindowResizeEventCalled(!0);},setTextDefaultLanguage:function(e){d.warn('setTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use setInitialMediaSettingsFor("fragmentedText", { lang: lang }) instead'),void 0===F&&(F=(0, ve.default)(o).getInstance()),F.setTextDefaultLanguage(e);},getTextDefaultLanguage:function(){return d.warn('getTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use getInitialMediaSettingsFor("fragmentedText").lang instead'),void 0===F&&(F=(0, ve.default)(o).getInstance()),F.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===F&&(F=(0, ve.default)(o).getInstance()),F.setTextDefaultEnabled(e);},getTextDefaultEnabled:function(){return void 0===F&&(F=(0, ve.default)(o).getInstance()),F.getTextDefaultEnabled()},enableText:function(e){void 0===F&&(F=(0, ve.default)(o).getInstance()),F.enableText(e);},enableForcedTextStreaming:function(e){void 0===F&&(F=(0, ve.default)(o).getInstance()),F.enableForcedTextStreaming(e);},isTextEnabled:function(){return void 0===F&&(F=(0, ve.default)(o).getInstance()),F.isTextEnabled()},setTextTrack:function(e){if(!g)throw r;void 0===F&&(F=(0, ve.default)(o).getInstance()),F.setTextTrack(e);},getBitrateInfoListFor:function(e){if(!p)throw i;var t=J();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!p)throw i;return R.getStreamsInfo(e)},getTracksFor:Z,getTracksForTypeFromManifest:function(e,t,n){if(!p)throw i;return (n=n||R.getStreamsInfo(t,1)[0])?R.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!p)throw i;var t=C.getActiveStreamInfo();return y.getCurrentTrackFor(e,t)},setInitialMediaSettingsFor:function(e,t){if(!h)throw a;y.setInitialSettings(e,t),e===se.default.FRAGMENTED_TEXT&&F.setInitialSettings(t);},getInitialMediaSettingsFor:function(e){if(!h)throw a;return y.getInitialSettings(e)},setCurrentTrack:function(e){if(!p)throw i;y.setTrack(e);},getTrackSwitchModeFor:function(e){if(!h)throw a;return y.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!h)throw a;y.setSwitchMode(e,t);},setSelectionModeForInitialTrack:function(e){if(!h)throw a;y.setSelectionModeForInitialTrack(e);},getSelectionModeForInitialTrack:function(){if(!h)throw a;return y.getSelectionModeForInitialTrack()},addABRCustomRule:function(e,t,n){b.addABRCustomRule(e,t,n);},removeABRCustomRule:function(e){b.removeABRCustomRule(e);},removeAllABRCustomRule:function(){b.removeABRCustomRule();},getAverageThroughput:function(e){var t=E.getThroughputHistory();return t?t.getAverageThroughput(e):0},retrieveManifest:function(e,n){var r=te(),i=this;s.on(Oe.default.INTERNAL_MANIFEST_LOADED,function e(t){t.error?n(null,t.error):n(t.manifest),s.off(Oe.default.INTERNAL_MANIFEST_LOADED,e,i),r.reset();},i),U.initialize(e),r.load(e);},addUTCTimingSource:function(e,t){b.addUTCTimingSource(e,t);},removeUTCTimingSource:function(e,t){b.removeUTCTimingSource(e,t);},clearDefaultUTCTimingSources:function(){b.clearDefaultUTCTimingSources();},restoreDefaultUTCTimingSources:z,setXHRWithCredentialsForType:function(e,t){b.setXHRWithCredentialsForType(e,t);},getXHRWithCredentialsForType:function(e){return b.getXHRWithCredentialsForType(e)},getProtectionController:ne,attachProtectionController:function(e){T=e;},setProtectionData:function(e){c=e,C&&C.setProtectionData(c);},displayCaptionsOnTop:function(e){var t=(0, Ee.default)(o).getInstance();t.setConfig({videoModel:x}),t.initialize(),t.setDisplayCConTop(e);},attachTTMLRenderingDiv:function(e){if(!x.getElement())throw t;x.setTTMLRenderingDiv(e);},getCurrentTextTrackIndex:function(){var e=NaN;return F&&(e=F.getCurrentTrackIdx()),e},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else {var n=O.getIsDynamic()?K(e):e,r=C.getStreamForTime(n);if(null!==r){var i=r.getThumbnailController();if(i){var a=C.getTimeRelativeToStreamId(n,r.getId());return i.provide(a,t)}t(null);}else t(null);}},getDashAdapter:function(){return R},getOfflineController:re,getSettings:function(){return u.get()},updateSettings:function(e){u.update(e);},resetSettings:function(){u.reset();},reset:function(){$(null),Q(null),c=null,T&&(T.reset(),T=null),S&&(S.reset(),S=null),B.reset(),u.reset(),I&&(I.reset(),I=null);}},d=l.getLogger(n),_=!(p=g=h=!1),B=R=c=I=T=null,Oe.default.extend(we.default),b=(0, Se.default)(o).getInstance(),x=(0, Re.default)(o).getInstance(),U=(0, ye.default)(o).getInstance(),n}i.__dashjs_factory_name="MediaPlayer";var a=Pe.default.getClassFactory(i);a.events=we.default,a.errors=Ne.default,Pe.default.updateClassFactory(i.__dashjs_factory_name,a),n.default=a,t.exports=n.default;},{1:1,101:101,108:108,109:109,111:111,112:112,117:117,119:119,121:121,148:148,150:150,151:151,153:153,154:154,157:157,2:2,200:200,202:202,206:206,207:207,209:209,212:212,217:217,218:218,220:220,225:225,241:241,45:45,46:46,47:47,48:48,50:50,51:51,54:54,56:56,58:58,61:61,63:63,82:82,9:9,98:98,99:99}],101:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{55:55}],102:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(100),a=(r=i)&&r.__esModule?r:{default:r};var s,o,u=(s="application/dash+xml",{create:l,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var r=(t=t||document).querySelectorAll(e),i=0;i<r.length;i++){var a=l(r[i],null);n.push(a);}for(var o=t.querySelectorAll('source[type="'+s+'"]'),i=0;i<o.length;i++)a=l(function(e){for(var t=!0;t;){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0;}}(o[i]),null),n.push(a);return n}});function l(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var r=void 0,i=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==s})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(r=(0, a.default)(n).create()).initialize(e,t.src,e.autoplay),(o=o||r.getDebug().getLogger()).debug("Converted "+i+" to dash.js player and added content: "+t.src),e._dashjs_player=r}var d=o=void 0;"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?u.createAll():d=window.setInterval(function(){window.dashjs&&(window.clearInterval(d),u.createAll());},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),u.createAll();})),n.default=u,t.exports=n.default;},{100:100}],103:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(45)),i=r(e(47));function a(e){var t=this.context,n=void 0,r=void 0,a=void 0,o=[],i=e;function s(t,n){o=o.filter(function(e){return !((isNaN(n)||e.start<n)&&(isNaN(t)||e.end>t))});}return n={getAllBufferRanges:function(){for(var t=[],e=0;e<o.length;e++){var n=o[e];0===t.length||n.start>t[t.length-1].end?t.push({start:n.start,end:n.end}):t[t.length-1].end=n.end;}var r={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(r,"length",{get:function(){return t.length}}),r},append:function(e){a="InitializationSegment"!==e.segmentType?(o.push(e),o.sort(function(e,t){return e.start-t.start}),null):e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),i&&i({chunk:e});},remove:s,abort:function(){},discharge:function(e,t){var n,r,i=(n=e,r=t,o.filter(function(e){return (isNaN(r)||e.start<r)&&(isNaN(n)||e.end>n)}));return a&&(i.push(a),a=null),s(e,t),i},reset:function(){o=[],i=a=null;},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return !1},waitForUpdateEnd:function(e){e();},getBuffer:function(){return this}},r=(0, u.default)(t).getInstance().getLogger(n),n}a.__dashjs_factory_name="PreBufferSink";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default;},{45:45,47:47}],104:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var A=r(e(45)),I=r(e(225)),R=r(e(46)),b=r(e(54)),i=r(e(47)),D=r(e(200)),M=r(e(51));function a(i,r,e,t,a){var o=this.context,u=(0, R.default)(o).getInstance(),s=void 0,l=void 0,d=void 0,f=void 0,c=void 0,n=[],h=[],p=e,g=!1!==t;function _(){try{return d.buffered}catch(e){return l.error("getAllBufferRanges exception: "+e.message),null}}function E(){var t=this,s=this;0<h.length&&function(){f=!0;var a=h[0];h.splice(0,1);function e(){var e,t,n,r,i=_();e=s,n=i,r=a,(t=o)&&0<t.length&&t.length<n.length&&function(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return !0}return !1}(t,r)&&u.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:n.end(n.length-2),to:n.start(n.length-1),unintended:!0}),0<h.length?E.call(this):(f=!1,p&&p({chunk:a}));}var o=[];try{0===a.bytes.length?e.call(t):(o=_(),d.appendBuffer?d.appendBuffer(a.bytes):d.append(a.bytes,a),S(e.bind(t)));}catch(e){l.fatal('SourceBuffer append failed "'+e+'"'),0<h.length?E():f=!1,p&&p({chunk:a,error:new I.default(e.code,e.message)});}}();}function m(){var e;0<n.length&&(e=n.shift(),d.updating?S(e):(e(),m()));}function v(){d.updating||m();}function y(){d.updating||m();}function T(){l.error("SourceBufferSink error",r.type);}function S(e){n.push(e),d.updating||m();}return s={getAllBufferRanges:_,getBuffer:function(){return d},append:function(e){e?(h.push(e),f||S(E.bind(this))):p({chunk:e,error:new I.default(M.default.APPEND_ERROR_CODE,M.default.APPEND_ERROR_MESSAGE)});},remove:function(t,n,e){var r=this;S(function(){try{0<=t&&t<n&&(e||"ended"!==i.readyState)&&d.remove(t,n),S(function(){u.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1});});}catch(e){u.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1,error:new I.default(e.code,e.message)});}});},abort:function(){try{("open"===i.readyState||d.setTextTrack&&"ended"===i.readyState)&&d.abort();}catch(e){l.error('SourceBuffer append abort failed: "'+e+'"');}h=[];},reset:function(e){if(d){if("function"==typeof d.removeEventListener&&(d.removeEventListener("updateend",y,!1),d.removeEventListener("error",T,!1),d.removeEventListener("abort",T,!1)),clearInterval(c),d.appendWindowEnd=1/0,!e){try{d.getClassName&&"TextSourceBuffer"===d.getClassName()||i.removeSourceBuffer(d);}catch(e){l.error("Failed to remove source buffer from media source.");}d=null;}f=!1;}h=[],p=null;},updateTimestampOffset:function(e){d.timestampOffset===e||isNaN(e)||S(function(){d.timestampOffset=e;});},hasDiscontinuitiesAfter:function(e){try{var t=_();if(t&&1<t.length)for(var n=0,r=t.length;n<r;n++)if(0<n&&e<t.start(n)&&t.start(n)>t.end(n-1)+.1)return !0}catch(e){l.error("hasDiscontinuities exception: "+e.message);}return !1},waitForUpdateEnd:S},function(){l=(0, A.default)(o).getInstance().getLogger(s),f=!1;var t=r.codec;try{if(t.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");(d=a||i.addSourceBuffer(t)).changeType&&a&&(l.debug("Doing period transition with changeType"),d.changeType(t)),g&&d&&(d.appendWindowEnd=i.duration);if("function"==typeof d.addEventListener)try{d.addEventListener("updateend",y,!1),d.addEventListener("error",T,!1),d.addEventListener("abort",T,!1);}catch(e){c=setInterval(v,50);}else c=setInterval(v,50);}catch(e){if(!r.isText&&-1===t.indexOf('codecs="stpp')&&-1===t.indexOf('codecs="wvtt'))throw e;var n=(0, D.default)(o).getInstance();d=n.getTextSourceBuffer();}}(),s}a.__dashjs_factory_name="SourceBufferSink";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default;},{200:200,225:225,45:45,46:46,47:47,51:51,54:54}],105:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var le=r(e(108)),de=r(e(61)),fe=r(e(106)),ce=r(e(116)),he=r(e(203)),pe=r(e(46)),ge=r(e(54)),_e=r(e(45)),Ee=r(e(51)),i=r(e(47)),me=r(e(225)),ve=r(e(206)),ye=r(e(220));function a(u){u=u||{};var l=this.context,s=(0, pe.default)(l).getInstance(),e=(0, ye.default)(l).getInstance(),d=u.manifestModel,f=u.mediaPlayerModel,a=u.manifestUpdater,c=u.adapter,i=u.capabilities,h=u.errHandler,p=u.timelineConverter,t=u.dashMetrics,g=u.abrController,_=u.playbackController,o=u.eventController,E=u.mediaController,m=u.textController,v=u.videoModel,y=u.settings,r=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,k=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function n(e){for(var t=A?A.length:0,n=0;n<t;n++){A[n].getFragmentModel().removeExecutedRequestsBeforeTime(Y()+j()),A[n].reset(!1,e);}se(b=R=!(A=[])),s.off(ge.default.CURRENT_TRACK_CHANGED,W,r);}function B(){n(),S=null,M=D=I=!1,C=!(N={});}function G(){_&&_.pause(),w&&(w.reset(),w=null),B(),s.off(ge.default.DATA_UPDATE_COMPLETED,te,r),s.off(ge.default.BUFFERING_COMPLETED,ee,r),s.off(ge.default.INBAND_EVENTS,ne,r),O&&(s.off(ge.default.KEY_ERROR,V,r),s.off(ge.default.SERVER_CERTIFICATE_UPDATED,V,r),s.off(ge.default.LICENSE_REQUEST_COMPLETE,V,r),s.off(ge.default.KEY_SYSTEM_SELECTED,V,r),s.off(ge.default.KEY_SESSION_CREATED,V,r),s.off(ge.default.KEY_STATUSES_CHANGED,V,r)),se(!1);}function j(){return S?S.duration:NaN}function Y(){return S?S.start:NaN}function K(){return S?S.id:null}function q(){return S}function H(){if(!(v&&g&&g.hasOwnProperty("getBitrateList")&&c&&c.hasOwnProperty("getAllMediaInfoForType")&&c.hasOwnProperty("getEventsFor")))throw new Error(le.default.MISSING_CONFIG_ERROR)}function V(e){e.error&&(h.error(e.error),T.fatal(e.error.message),G());}function z(e){var t,n=e?e.type:null,r=void 0;if(n===le.default.MUXED)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",T.fatal(r),void h.error(new me.default(Ee.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,r,d.getValue()));if(n===le.default.TEXT||n===le.default.FRAGMENTED_TEXT||n===le.default.EMBEDDED_TEXT||n===le.default.IMAGE)return 1;if(t=e.codec,T.debug(n+" codec: "+t),e.contentProtection&&!i.supportsEncryptedMedia())h.error(new me.default(Ee.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ee.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!i.supportsCodec(t))return r=n+"Codec ("+t+") is not supported.",void T.error(r);return 1}function W(e){var t,n,r,i;S&&e.newMediaInfo.streamInfo.id===S.id&&(t=e.newMediaInfo,n=d.getValue(),c.setCurrentMediaInfo(S.id,t.type,t),(r=re(t))&&(i=_.getTime(),T.info("Stream -  Process track changed at current time "+i),T.debug("Stream -  Update stream controller"),n.refreshManifestOnSwitchTrack?(T.debug("Stream -  Refreshing manifest for switch track"),U=e,a.refreshManifest()):(r.selectMediaInfo(t),t.type!==le.default.FRAGMENTED_TEXT?(g.updateTopQualityIndex(t),r.switchTrackAsked(),r.getFragmentModel().abortRequests()):(r.getScheduleController().setSeekTarget(i),r.setIndexHandlerTime(i),r.resetIndexHandler()))));}function X(e,t){var n,r=c.getAllMediaInfoForType(S,e),i=null;if(r&&0!==r.length){e===le.default.VIDEO&&(D=!0),e===le.default.AUDIO&&(M=!0);for(var a=0,o=r.length;a<o;a++)if(i=r[a],e===le.default.EMBEDDED_TEXT)m.addEmbeddedTrack(i);else {if(!z(i))continue;E.addTrack(i);}e!==le.default.EMBEDDED_TEXT&&0!==E.getTracksFor(e,S).length&&(e!==le.default.IMAGE?(E.checkInitialMediaSettingsForType(e,S),n=E.getCurrentTrackFor(e,S),s.trigger(ge.default.STREAM_INITIALIZING,{streamInfo:S,mediaInfo:i}),function(e,t,n,r){var i=w.getModel(K(),e?e.type:null),a=(0, fe.default)(l).create({streamInfo:S,type:e?e.type:null,mimeType:e?e.mimeType:null,timelineConverter:p,adapter:c,manifestModel:d,mediaPlayerModel:f,fragmentModel:i,dashMetrics:u.dashMetrics,baseURLController:u.baseURLController,abrController:g,playbackController:_,mediaController:E,textController:m,errHandler:h,settings:y,boxParser:x});if(a.initialize(n,D),g.updateTopQualityIndex(e),r?(a.setBuffer(r.buffer),a.setIndexHandlerTime(r.currentTime),A[r.replaceIdx]=a):A.push(a),!r||!r.ignoreMediaInfo)if(!e||e.type!==le.default.TEXT&&e.type!==le.default.FRAGMENTED_TEXT)a.addMediaInfo(e,!0);else {for(var o=void 0,s=0;s<t.length;s++)t[s].index===e.index&&(o=s),a.addMediaInfo(t[s]);a.selectMediaInfo(t[o]);}}(n,r,t)):P=(0, he.default)(l).create({streamInfo:S,adapter:c,baseURLController:u.baseURLController,timelineConverter:u.timelineConverter,debug:F,eventBus:s,events:ge.default,dashConstants:de.default}));}else T.info("No "+e+" data.");}function Q(){var e;o&&(e=c.getEventsFor(S),o.addInlineEvents(e));}function Z(e){var r=c.getAdaptationForType(S?S.index:null,e,S);r&&Array.isArray(r.Representation_asArray)&&(r.Representation_asArray=r.Representation_asArray.filter(function(e,t){if(0===t)return !0;var n=c.getCodec(r,t,!0);return !!i.supportsCodec(n)||(T.error("[Stream] codec not supported: "+n),!1)}));}function $(){for(var e=A.length,t=!!N.audio||!!N.video?new me.default(Ee.default.DATA_UPDATE_FAILED_ERROR_CODE,Ee.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(A[n].isUpdating()||C)return;if(b){if(O)for(n=0;n<e&&A[n];n++)A[n].getType()!==le.default.AUDIO&&A[n].getType()!==le.default.VIDEO&&A[n].getType()!==le.default.FRAGMENTED_TEXT||O.initializeForMedia(A[n].getMediaInfo());t?h.error(t):I||(I=!0,p.setTimeSyncCompleted(!0),s.trigger(ge.default.STREAM_INITIALIZED,{streamInfo:S,liveStartTime:function(){if(!S.manifestInfo.isDynamic)return NaN;for(var e=0;e<A.length;e++)if(A[e].getType()===le.default.AUDIO||A[e].getType()===le.default.VIDEO)return A[e].getLiveStartTime();return NaN}()}));for(n=0;n<e&&A[n];n++)A[n].getScheduleController().start();}}function J(e){for(var t={},n=0,r=A.length;n<r;n++){var i=A[n].createBuffer(e);i&&(t[A[n].getType()]=i.getBuffer());}return t}function ee(e){if(e.streamId===S.id){var t=ie(),n=t.length;if(0!==n){for(var r=0;r<n;r++)if(!t[r].isBufferingCompleted()&&(t[r].getType()===le.default.AUDIO||t[r].getType()===le.default.VIDEO))return void T.warn("onBufferingCompleted - One streamProcessor has finished but",t[r].getType(),"one is not buffering completed");T.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),s.trigger(ge.default.STREAM_BUFFERING_COMPLETED,{streamInfo:S});}else T.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");}}function te(e){S&&e.sender.getStreamId()===S.id&&(N[e.sender.getType()]=e.error,$());}function ne(e){var t;S&&e.sender.getStreamInfo().id===S.id&&(t=e.events,o&&o.addInbandEvents(t));}function re(t){return t?ie().filter(function(e){return e.getType()===t.type})[0]:null}function ie(){for(var e=[],t=void 0,n=void 0,r=0;r<A.length;r++)(t=(n=A[r]).getType())!==le.default.AUDIO&&t!==le.default.VIDEO&&t!==le.default.FRAGMENTED_TEXT&&t!==le.default.TEXT||e.push(n);return e}function ae(e,t){if(!e)return !1;var n=e.getStreamInfo(),r=S;if(!n||!r)return !1;var i=c.getAdaptationForType(n.index,t,n),a=c.getAdaptationForType(r.index,t,r);return i&&a?!i.ContentProtection&&!a.ContentProtection:!i&&!a}function oe(e,t){if(!e||!e.hasOwnProperty("getStreamInfo"))return !1;var n=e.getStreamInfo(),r=S;if(!n||!r)return !1;var i=c.getAdaptationForType(n.index,t,n),a=c.getAdaptationForType(r.index,t,r);if(!i||!a)return !i&&!a;var o=i&&a&&i.mimeType===a.mimeType,s=a.Representation_asArray.map(function(e){return e.codecs}),u=i.Representation_asArray.map(function(e){return e.codecs}),l=u.some(function(e){return -1<s.indexOf(e)}),d=u.some(function(t){return s.some(function(e){return function(e,t){for(var n=e.split(".")[0],r=0===t.indexOf(n),i=void 0,a=0;a<k.length;a++)if(k[a].codec===n){i=k[a];break}if(i)return r||i.compatibleCodecs.some(function(e){return 0===t.indexOf(e)});return r}(e,t)})});return l||d&&o}function se(e){L=e;}function ue(){return L}return r={initialize:function(e,t){S=e,(O=t)&&(s.on(ge.default.KEY_ERROR,V,r),s.on(ge.default.SERVER_CERTIFICATE_UPDATED,V,r),s.on(ge.default.LICENSE_REQUEST_COMPLETE,V,r),s.on(ge.default.KEY_SYSTEM_SELECTED,V,r),s.on(ge.default.KEY_SESSION_CREATED,V,r),s.on(ge.default.KEY_STATUSES_CHANGED,V,r));},activate:function(e,t){if(R)return t;var n=void 0;return s.on(ge.default.CURRENT_TRACK_CHANGED,W,r),n=L?(function(){{var e;C=!0,H(),Z(le.default.VIDEO),Z(le.default.AUDIO),C=!(b=!0),0===A.length?(e="No streams to play.",h.error(new me.default(Ee.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,d.getValue())),T.debug(e)):$();}}(),t):function(e,t){H();var n=v.getElement();Q(),C=!0,Z(le.default.VIDEO),Z(le.default.AUDIO),(!n||n&&/^VIDEO$/i.test(n.nodeName))&&X(le.default.VIDEO,e);X(le.default.AUDIO,e),X(le.default.TEXT,e),X(le.default.FRAGMENTED_TEXT,e),X(le.default.EMBEDDED_TEXT,e),X(le.default.MUXED,e),X(le.default.IMAGE,e);var r=J(t);{var i;C=!(b=!0),0===A.length?(i="No streams to play.",h.error(new me.default(Ee.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i,d.getValue())),T.fatal(i)):$();}return r}(e,t),R=!0,n},deactivate:n,isActive:function(){return R},getDuration:j,getStartTime:Y,getId:K,getStreamInfo:q,getHasAudioTrack:function(){return M},getHasVideoTrack:function(){return D},preload:function(e,t){Q(),X(le.default.VIDEO,e),X(le.default.AUDIO,e),X(le.default.TEXT,e),X(le.default.FRAGMENTED_TEXT,e),X(le.default.EMBEDDED_TEXT,e),X(le.default.MUXED,e),X(le.default.IMAGE,e),J(t),s.on(ge.default.CURRENT_TRACK_CHANGED,W,r);for(var n=0;n<A.length&&A[n];n++)A[n].getScheduleController().start();se(!0);},getThumbnailController:function(){return P},getBitrateListFor:function(e){if(H(),e===le.default.IMAGE)return P?P.getBitrateList():[];var t=function(e){for(var t=null,n=0;n<A.length;n++)if((t=A[n]).getType()===e)return t.getMediaInfo();return null}(e);return g.getBitrateList(t)},updateData:function(e){T.info("Manifest updated... updating data system wide."),C=!(R=!1),S=e,o&&Q(),Z(le.default.VIDEO),Z(le.default.AUDIO);for(var t=0,n=A.length;t<n;t++){var r=A[t];r.updateStreamInfo(S);var i=c.getMediaInfoForType(S,r.getType());g.updateTopQualityIndex(i),r.addMediaInfo(i,!0);}if(U&&(i=U.newMediaInfo).type!==le.default.FRAGMENTED_TEXT){var a=re(U.oldMediaInfo);if(!a)return;a.switchTrackAsked(),U=void 0;}C=!1,$();},reset:G,getProcessors:ie,setMediaSource:function(e){for(var t=0;t<A.length;)z(A[t].getMediaInfo())?(A[t].setMediaSource(e),t++):(A[t].reset(),A.splice(t,1));for(var n,t=0;t<A.length;t++)A[t].dischargePreBuffer();0===A.length&&(n="No streams to play.",h.error(new me.default(Ee.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",d.getValue())),T.fatal(n));},isMediaCodecCompatible:function(e){return oe(e,le.default.VIDEO)&&oe(e,le.default.AUDIO)},isProtectionCompatible:function(e){return ae(e,le.default.VIDEO)&&ae(e,le.default.AUDIO)},getPreloaded:ue},F=(0, _e.default)(l).getInstance(),T=F.getLogger(r),B(),x=(0, ve.default)(l).getInstance(),w=(0, ce.default)(l).create({mediaPlayerModel:f,dashMetrics:t,errHandler:h,settings:y,boxParser:x,dashConstants:de.default,urlUtils:e}),s.on(ge.default.BUFFERING_COMPLETED,ee,r),s.on(ge.default.DATA_UPDATE_COMPLETED,te,r),s.on(ge.default.INBAND_EVENTS,ne,r),r}a.__dashjs_factory_name="Stream",n.default=i.default.getClassFactory(a),t.exports=n.default;},{106:106,108:108,116:116,203:203,206:206,220:220,225:225,45:45,46:46,47:47,51:51,54:54,61:61}],106:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var W=r(e(108)),X=r(e(61)),Q=r(e(109)),Z=r(e(149)),$=r(e(114)),J=r(e(199)),ee=r(e(120)),te=r(e(62)),ne=r(e(215)),i=r(e(47)),re=e(218),ie=r(e(46)),ae=r(e(54)),oe=r(e(57)),se=r(e(51)),ue=r(e(225)),le=r(e(45)),de=r(e(217)),fe=r(e(220)),ce=r(e(206)),he=r(e(227)),pe=e(243);function a(n){n=n||{};var c=this.context,l=(0, ie.default)(c).getInstance(),d=n.streamInfo,f=n.type,r=n.errHandler,i=n.mimeType,a=n.timelineConverter,h=n.adapter,o=n.manifestModel,s=n.mediaPlayerModel,p=n.fragmentModel,u=n.abrController,g=n.playbackController,_=n.mediaController,E=n.textController,m=n.dashMetrics,v=n.settings,y=n.boxParser,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0;function O(){R=[],I=null;}function w(e){e.sender.getType()===f&&e.sender.getStreamId()===d.id&&(e.error||D.setCurrentRepresentation(h.convertDataToRepresentationInfo(e.currentRepresentation)),e.error&&e.error.code!==se.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE||t());}function P(e){var t;f===e.mediaType&&d.id===e.streamInfo.id&&(t=G(e.newQuality),D.setCurrentRepresentation(t),m.pushPlayListTraceMetrics(new Date,pe.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),m.createPlaylistTraceMetrics(t.id,1e3*g.getTime(),g.getPlaybackRate()));}function L(e){e.streamId===d.id&&e.mediaType===f&&(m.addBufferLevel(f,new Date,1e3*e.bufferLevel),o.getValue().doNotUpdateDVRWindowOnBufferUpdated||t());}function x(e){e.streamId===d.id&&e.mediaType===f&&(m.addBufferState(f,e.state,D.getBufferTarget()),e.state!==Q.default.BUFFER_EMPTY||g.isSeeking()||m.pushPlayListTraceMetrics(new Date,pe.PlayListTrace.REBUFFERING_REASON));}function F(e){e.streamId===d.id&&e.mediaType===f&&(e.unintended?p.removeExecutedRequestsAfterTime(e.from):p.syncExecutedRequestsWithBufferedRange(b.getBuffer().getAllBufferRanges(),d.duration));}function t(){var e=d.manifestInfo,t=e.isDynamic,n=a.calcSegmentAvailabilityRange(M.getCurrentRepresentation(),t);m.addDVRInfo(f,g.getTime(),e,n);}function e(){return f}function U(){return b?b.getBuffer():null}function k(){return R}function B(){return I}function G(e){var t=void 0,t=void 0!==e?((0, re.checkInteger)(e),M?M.getRepresentationForQuality(e):null):M?M.getCurrentRepresentation():null;return h.convertDataToRepresentationInfo(t)}function j(e){var t;e.sender&&e.mediaType===f&&e.streamId===d.id&&(h.getIsTextTrack(i)&&!E.isTextEnabled()||b&&e.representationId&&(b.appendInitSegment(e.representationId)||(t=C?C.getInitRequest(I,M.getCurrentRepresentation()):null,D.processInitRequest(t))));}function Y(e){var t;e.sender&&e.mediaType===f&&e.streamId===d.id&&(t=void 0,b.getIsPruningInProgress()||(t=function(e,t){var n=G(),r=!isNaN(e),i=g.getNormalizedTime(),a=r?e:V(),o=!1,s=void 0;if(isNaN(a)||f===W.default.FRAGMENTED_TEXT&&!E.isTextEnabled())return null;{var u,l;b&&(u=b.getRangeAt(a),l=b.getRangeAt(i),null===u&&null===l||r||(!u||l&&l.start!=u.start&&l.end!=u.end)&&b.getBuffer().hasDiscontinuitiesAfter(i)&&f!==W.default.FRAGMENTED_TEXT&&(p.removeExecutedRequestsAfterTime(l.end),o=!0));}if(t)a=t.startTime+t.duration/2,s=z(n,a,{timeThreshold:0,ignoreIsFinished:!0});else for(s=z(n,r||o?a:void 0,{keepIdx:!r&&!o});s&&s.action!==he.default.ACTION_COMPLETE&&p.isFragmentLoaded(s);)s=z(n);return s}(e.seekTarget,e.replacement))&&(D.setSeekTarget(NaN),e.replacement||(isNaN(t.startTime+t.duration)||H(t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+D.getTimeToLoadDelay(),D.setTimeToLoadDelay(0))),D.processMediaRequest(t));}function K(e){var t,n,r,i,a,o,s,u=e.chunk;u.streamId===d.id&&u.mediaInfo.type==f&&(t=u.bytes,r=G(n=u.quality),i=M&&r?M.getRepresentationForQuality(r.quality):null,a=h.getEventsFor(r.mediaInfo),o=h.getEventsFor(r,i),(a&&0<a.length||o&&0<o.length)&&(s=function(e,t,n,r){for(var i=Math.max(!t||isNaN(t.startTime)?0:t.startTime,0),a=[],o=[],s=n.concat(r),u=0,l=s.length;u<l;u++)a[s[u].schemeIdUri+"/"+s[u].value]=s[u];for(var d=(0, ce.default)(c).getInstance().parse(e).getBoxes("emsg"),u=0,l=d.length;u<l;u++){var f=h.getEvent(d[u],a,i);f&&o.push(f);}return o}(t,p.getRequests({state:Z.default.FRAGMENT_MODEL_EXECUTED,quality:n,index:u.index})[0],a,o),l.trigger(ae.default.INBAND_EVENTS,{sender:T,events:s})));}function q(e){e.mediaType===f&&e.streamId===d.id&&(H(e.time),D.setSeekTarget(e.time));}function H(e){C&&C.setCurrentTime(e);}function V(){return C?C.getCurrentTime():NaN}function z(e,t,n){var r,i=null;return C&&(r=M&&e?M.getRepresentationForQuality(e.quality):null,i=void 0!==t&&void 0!==n?C.getSegmentRequestForTime(I,r,t,n):C.getNextSegmentRequest(I,r)),i}return T={initialize:function(e,t){C=(0, oe.default)(c).create({streamInfo:d,type:f,timelineConverter:a,dashMetrics:m,mediaPlayerModel:s,baseURLController:n.baseURLController,errHandler:r,settings:v,boxParser:y,events:ae.default,eventBus:l,errors:se.default,debug:(0, le.default)(c).getInstance(),requestModifier:(0, de.default)(c).getInstance(),dashConstants:X.default,constants:W.default,urlUtils:(0, fe.default)(c).getInstance()}),(A=d.manifestInfo.isDynamic)&&(N=(0, ne.default)(c).create({timelineConverter:a})),C.initialize(A),u.registerStreamType(f,T),M=(0, te.default)(c).create({streamId:d.id,type:f,abrController:u,dashMetrics:m,playbackController:g,timelineConverter:a,dashConstants:X.default,events:ae.default,eventBus:l,errors:se.default}),(b=function(e){var t=null;if(!e)return r.error(new ue.default(se.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,se.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null;t=e===W.default.VIDEO||e===W.default.AUDIO?(0, $.default)(c).create({streamInfo:d,type:e,mediaPlayerModel:s,manifestModel:o,fragmentModel:p,errHandler:r,mediaController:_,representationController:M,adapter:h,textController:E,abrController:u,playbackController:g,settings:v}):(0, J.default)(c).create({streamInfo:d,type:e,mimeType:i,mediaPlayerModel:s,manifestModel:o,fragmentModel:p,errHandler:r,mediaController:_,representationController:M,adapter:h,textController:E,abrController:u,playbackController:g,settings:v});return t}(f))&&b.initialize(e),(D=(0, ee.default)(c).create({streamId:d.id,type:f,mimeType:i,adapter:h,dashMetrics:m,mediaPlayerModel:s,fragmentModel:p,abrController:u,playbackController:g,textController:E,mediaController:_,bufferController:b,settings:v})).initialize(t);},isUpdating:function(){return !!M&&M.isUpdating()},getType:e,getBufferController:function(){return b},getFragmentModel:function(){return p},getScheduleController:function(){return D},getRepresentationController:function(){return M},getRepresentationInfo:G,getBufferLevel:function(){return b?b.getBufferLevel():0},isBufferingCompleted:function(){return !!b&&b.getIsBufferingCompleted()},createBuffer:function(e){return U()||b?b.createBuffer(R,e):null},updateStreamInfo:function(e){d=e;},getStreamInfo:function(){return d},selectMediaInfo:function(e){e===I||e&&I&&e.type!==I.type||(I=e);var t,n,r,i,a,o=h.getRealAdaptation(d,I),s=h.getVoRepresentations(I);M&&(t=M.getData(),n=u.getTopQualityIndexFor(f,d.id),r=u.getMinAllowedIndexFor(f),a=void 0,a=(i=null)!==t&&t.id==o.id||f===W.default.FRAGMENTED_TEXT?u.getQualityFor(f):(i=u.getThroughputHistory().getAverageThroughput(f)||u.getInitialBitrateFor(f),u.getQualityForBitrate(I,i)),void 0!==r&&a<r&&(a=r),n<a&&(a=n),C.setMimeType(I?I.mimeType:null),M.updateData(o,s,f,a));},addMediaInfo:function(e,t){-1===R.indexOf(e)&&R.push(e),t&&this.selectMediaInfo(e);},getLiveStartTime:function(){if(!A)return NaN;if(!N)return NaN;var e=NaN,t=G(),n=function(e,t){try{var n=null,r=g.getLiveDelay(),i=isNaN(d.manifestInfo.DVRWindowSize)?r:d.manifestInfo.DVRWindowSize,a=.1*i,o=void 0;if(!isFinite(i)||z(t,e-i+a,{ignoreIsFinished:!0}))for(;!n&&r<=i;)(n=z(t,o=e-r,{ignoreIsFinished:!0}))||(r+=1);return n&&g.setLiveDelay(r,!0),S.debug("live edge: "+e+", live delay: "+r+", live target: "+o),n}catch(e){return null}}(N.getLiveEdge(t),t);return n&&(e=!v.get().streaming.lowLatencyEnabled||n.duration<s.getLiveDelay()?n.startTime:n.startTime+n.duration-s.getLiveDelay()),e},switchTrackAsked:function(){D.switchTrackAsked();},getMediaInfoArr:k,getMediaInfo:B,getMediaSource:function(){return b.getMediaSource()},setMediaSource:function(e){b.setMediaSource(e,R);},dischargePreBuffer:function(){b.dischargePreBuffer();},getBuffer:U,setBuffer:function(e){b.setBuffer(e);},setIndexHandlerTime:H,getIndexHandlerTime:V,resetIndexHandler:function(){C&&C.resetIndex();},getInitRequest:function(e){(0, re.checkInteger)(e);var t=M?M.getRepresentationForQuality(e):null;return C?C.getInitRequest(I,t):null},getFragmentRequest:z,finalisePlayList:function(e,t){m.pushPlayListTraceMetrics(e,t);},reset:function(e,t){C&&C.reset(),b&&(b.reset(e,t),b=null),D&&(D.reset(),D=null),M&&(M.reset(),M=null),N&&(N.reset(),N=null),u&&u.unRegisterStreamType(f),l.off(ae.default.DATA_UPDATE_COMPLETED,w,T),l.off(ae.default.QUALITY_CHANGE_REQUESTED,P,T),l.off(ae.default.INIT_FRAGMENT_NEEDED,j,T),l.off(ae.default.MEDIA_FRAGMENT_NEEDED,Y,T),l.off(ae.default.MEDIA_FRAGMENT_LOADED,K,T),l.off(ae.default.BUFFER_LEVEL_UPDATED,L,T),l.off(ae.default.BUFFER_LEVEL_STATE_CHANGED,x,T),l.off(ae.default.BUFFER_CLEARED,F,T),l.off(ae.default.SEEK_TARGET,q,T),O(),d=f=null;}},S=(0, le.default)(c).getInstance().getLogger(T),O(),l.on(ae.default.DATA_UPDATE_COMPLETED,w,T,ie.default.EVENT_PRIORITY_HIGH),l.on(ae.default.QUALITY_CHANGE_REQUESTED,P,T),l.on(ae.default.INIT_FRAGMENT_NEEDED,j,T),l.on(ae.default.MEDIA_FRAGMENT_NEEDED,Y,T),l.on(ae.default.MEDIA_FRAGMENT_LOADED,K,T),l.on(ae.default.BUFFER_LEVEL_UPDATED,L,T),l.on(ae.default.BUFFER_LEVEL_STATE_CHANGED,x,T),l.on(ae.default.BUFFER_CLEARED,F,T),l.on(ae.default.SEEK_TARGET,q,T),T}a.__dashjs_factory_name="StreamProcessor",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,109:109,114:114,120:120,149:149,199:199,206:206,215:215,217:217,218:218,220:220,225:225,227:227,243:243,45:45,46:46,47:47,51:51,54:54,57:57,61:61,62:62}],107:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(225)),i=r(e(158)),l=e(241),d=r(e(232)),f=r(e(46)),c=r(e(54)),a=r(e(47)),h=r(e(51));function o(e){e=e||{};var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,o=(0, f.default)(t).getInstance(),s=(0, i.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings?e.settings.get().streaming.lowLatencyEnabled:null,errors:h.default});return {load:function(n,r,i){function t(e,t){r.resolved=!0,r.resolvedContent=e||null,o.trigger(c.default.XLINK_ELEMENT_LOADED,{element:r,resolveObject:i,error:e||t?null:new u.default(h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+n)});}var e;n===a?t(null,!0):(e=new d.default(n,l.HTTPRequest.XLINK_EXPANSION_TYPE),s.load({request:e,success:function(e){t(e);},error:function(){t(null);}}));},reset:function(){s&&(s.abort(),s=null);}}}o.__dashjs_factory_name="XlinkLoader",n.default=a.default.getClassFactory(o),t.exports=n.default;},{158:158,225:225,232:232,241:241,46:46,47:47,51:51,54:54}],108:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init();}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer";}}]),i);n.default=a,t.exports=n.default;},{}],109:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init();}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors";}}]),i);n.default=a,t.exports=n.default;},{}],110:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init();}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready";}}]),i);n.default=a,t.exports=n.default;},{}],111:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var Y=r(e(189)),K=r(e(108)),q=r(e(109)),H=r(e(224)),V=r(e(149)),z=r(e(46)),W=r(e(54)),i=r(e(47)),X=r(e(185)),Q=r(e(186)),Z=r(e(187)),$=r(e(184)),J=r(e(188)),ee=r(e(45)),te=e(241),ne=e(218);function a(){var f=this.context,e=(0, ee.default)(f).getInstance(),c=(0, z.default)(f).getInstance(),h=void 0,p=void 0,g=void 0,o=void 0,s=void 0,_=void 0,E=void 0,m=void 0,u=void 0,i=void 0,a=void 0,l=void 0,d=void 0,v=void 0,y=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0;function n(){(g=(0, Y.default)(f).create({dashMetrics:D,mediaPlayerModel:y,settings:M})).initialize();}function t(){s={},_={},m={},E={},A={},b={},void 0===i&&(i=!1),R=I=S=void 0,clearTimeout(u),u=null;}function r(e){e.mediaType===K.default.VIDEO&&(S=e.oldQuality,I.push(S,v.getPlaybackQuality()));}function N(e){e.metric!==q.default.HTTP_REQUEST||!e.value||e.value.type!==te.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==K.default.AUDIO&&e.mediaType!==K.default.VIDEO||R.push(e.mediaType,e.value,M.get().streaming.abr.useDeadTimeLatency),e.metric!==q.default.BUFFER_LEVEL||e.mediaType!==K.default.AUDIO&&e.mediaType!==K.default.VIDEO||function(e,t){var n=M.get().streaming.abr.ABRStrategy;{if(n===K.default.ABR_STRATEGY_BOLA)return b[e]=!0;if(n===K.default.ABR_STRATEGY_THROUGHPUT)return b[e]=!1}var r=y.getStableBufferTime(),i=r,a=.5*r,o=b[e],s=(o?a:i)<t;(b[e]=s)!==o&&(s?p.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):p.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."));}(e.mediaType,.001*e.value.level);}function C(e,t){return s[t]=s[t]||{},s[t].hasOwnProperty(e)||(s[t][e]=0),function(e,t){if(t!==K.default.VIDEO||!M.get().streaming.abr.limitBitrateByPortal||!E[t])return e;i||G();var n=d.getAdaptationForType(0,t).Representation,r=e;if(0<a&&0<l){for(;0<r&&n[r]&&a<n[r].width&&a-n[r-1].width<n[r].width-a;)--r;for(;r<n.length-1&&n[r].width===n[r+1].width;)r+=1;}return r}(function(e,t,n){var r=M.get().streaming.abr.maxRepresentationRatio[t];if(isNaN(r)||1<=r||r<0)return e;return Math.min(e,Math.round(n*r))}(function(e,t){var n=e;if(!E[t])return n;var r=w(t);void 0!==r&&(n=Math.max(e,r));var i=O(t);void 0!==i&&(n=Math.min(n,i));return n}(s[t][e],e),e,s[t][e]),e)}function O(e){var t,n=(t=e,M.get().streaming.abr.maxBitrate[t]);return -1<n?F(E[e].getMediaInfo(),n):void 0}function w(e){var t,n=(t=e,M.get().streaming.abr.minBitrate[t]);if(-1<n){var r=E[e].getMediaInfo(),i=U(r),a=F(r,n);return i[a]&&a<i.length-1&&i[a].bitrate<1e3*n&&a++,a}}function P(e,t,n,r){var i=t.id,a=B(e);(0, ne.checkInteger)(n);var o=C(e,i);n!==a&&0<=n&&n<=o&&L(e,a,n,o,r);}function L(e,t,n,r,i){var a,o,s,u,l,d,f;e&&E[e]&&(o=(a=E[e].getStreamInfo())?a.id:null,M.get().debug.logLevel===ee.default.LOG_LEVEL_DEBUG&&(s=D.getCurrentBufferLevel(e),p.info("["+e+"] switch from "+t+" to "+n+"/"+r+" (buffer: "+s+") "+(i?JSON.stringify(i):"."))),l=e,f=n,_[d=o]=_[d]||{},_[d][l]=f,c.trigger(W.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:a,oldQuality:t,newQuality:n,reason:i}),u=R.getAverageThroughput(e),isNaN(u)||T.setSavedBitrateSettings(e,u));}function x(e,t){m[e].state=t;}function F(e,t,n){var r=e&&e.type?E[e.type].getRepresentationInfo():null;if(M.get().streaming.abr.useDeadTimeLatency&&n&&r&&r.fragmentDuration){n/=1e3;var i=r.fragmentDuration;if(i<n)return 0;t*=1-n/i;}for(var a=U(e),o=a.length-1;0<=o;o--){if(1e3*t>=a[o].bitrate)return o}return 0}function U(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,a=0,o=n.length;a<o;a++)(i=new H.default).mediaType=r,i.qualityIndex=a,i.bitrate=n[a].bandwidth,i.width=n[a].width,i.height=n[a].height,i.scanType=n[a].scanType,t.push(i);return t}function k(e){return b[e]}function B(e){if(e&&E[e]){var t=E[e].getStreamInfo(),n=t?t.id:null;if(n)return _[n]=_[n]||{},_[n].hasOwnProperty(e)||(_[n][e]=0),_[n][e]}return 0}function G(){var e;v&&(e=M.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,a=v.getClientWidth()*e,l=v.getClientHeight()*e);}function j(e){var t=e.request.mediaType;if(M.get().streaming.abr.autoSwitchBitrate[t]){var n=E[t];if(!n)return;var r,i=(0, X.default)(f).create({abrController:h,streamProcessor:n,currentRequest:e.request,useBufferOccupancyABR:k(t)}),a=g.shouldAbandonFragment(i);a.quality>Q.default.NO_CHANGE&&((r=n.getFragmentModel()).getRequests({state:V.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(r.abortRequests(),x(t,q.default.ABANDON_LOAD),A[t].reset(),A[t].push({oldValue:B(t),newValue:a.quality,confidence:1,reason:a.reason}),P(t,o.getActiveStreamInfo(),a.quality,a.reason),clearTimeout(u),u=setTimeout(function(){x(t,q.default.ALLOW_LOAD),u=null;},M.get().streaming.abandonLoadTimeout)));}}return h={isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=B(K.default.AUDIO),r=B(K.default.VIDEO);return n===C(K.default.AUDIO,t)&&r===C(K.default.VIDEO,t)},updateTopQualityIndex:function(e){if(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return i=t,o=r,s[a=n]=s[a]||{},s[a][i]=o,r}var i,a,o;},getThroughputHistory:function(){return R},getBitrateList:U,getQualityForBitrate:F,getTopBitrateInfoFor:function(e){if(e&&E&&E[e]){var t=E[e].getStreamInfo();if(t&&t.id){var n=C(e,t.id),r=U(E[e].getMediaInfo());return r[n]?r[n]:null}}return null},getMaxAllowedIndexFor:O,getMinAllowedIndexFor:w,getInitialBitrateFor:function(e){if(!function(){if(!T||!T.hasOwnProperty("getSavedBitrateSettings"))throw new Error(K.default.MISSING_CONFIG_ERROR)}(),e===K.default.TEXT||e===K.default.FRAGMENTED_TEXT)return NaN;var t,n=T.getSavedBitrateSettings(e),r=M.get().streaming.abr.initialBitrate[e],i=M.get().streaming.abr.initialRepresentationRatio[e];return -1===r&&(r=-1<i?(t=d.getAdaptationForType(0,e).Representation,Array.isArray(t)?t[Math.max(Math.round(t.length*i)-1,0)].bandwidth:0):isNaN(n)?e===K.default.VIDEO?1e3:100:n),r},getQualityFor:B,getAbandonmentStateFor:function(e){return m[e]?m[e].state:null},setPlaybackQuality:P,checkPlaybackQuality:function(e){var t,n,r,i,a,o,s,u,l,d;e&&E&&E[e]&&(n=(t=E[e].getStreamInfo())?t.id:null,r=B(e),i=(0, X.default)(f).create({abrController:h,streamProcessor:E[e],currentValue:r,switchHistory:A[e],droppedFramesHistory:I,useBufferOccupancyABR:k(e)}),!I||(a=v.getPlaybackQuality())&&I.push(S,a),M.get().streaming.abr.autoSwitchBitrate[e]&&(o=w(e),s=C(e,n),l=(u=g.getMaxQuality(i)).quality,void 0!==o&&(l>Q.default.NO_CHANGE?l:r)<o&&(l=o),s<l&&(l=s),A[e].push({oldValue:r,newValue:l}),l>Q.default.NO_CHANGE&&l!=r?(m[e].state===q.default.ALLOW_LOAD||r<l)&&L(e,r,l,s,u.reason):M.get().debug.logLevel===ee.default.LOG_LEVEL_DEBUG&&(d=D.getCurrentBufferLevel(e),p.debug("["+e+"] stay on "+r+"/"+s+" (buffer: "+d+")"))));},getTopQualityIndexFor:C,setElementSize:G,setWindowResizeEventCalled:function(e){i=e;},createAbrRulesCollection:n,registerStreamType:function(e,t){A[e]=A[e]||(0, Z.default)(f).create(),E[e]=t,m[e]=m[e]||{},m[e].state=q.default.ALLOW_LOAD,b[e]=!1,c.on(W.default.LOADING_PROGRESS,j,this),e==K.default.VIDEO&&(c.on(W.default.QUALITY_CHANGE_RENDERED,r,this),I=I||(0, $.default)(f).create(),G()),c.on(W.default.METRIC_ADDED,N,this),c.on(W.default.PERIOD_SWITCH_COMPLETED,n,this),R=R||(0, J.default)(f).create({settings:M});},unRegisterStreamType:function(e){delete E[e];},setConfig:function(e){e&&(e.streamController&&(o=e.streamController),e.domStorage&&(T=e.domStorage),e.mediaPlayerModel&&(y=e.mediaPlayerModel),e.dashMetrics&&(D=e.dashMetrics),e.adapter&&(d=e.adapter),e.videoModel&&(v=e.videoModel),e.settings&&(M=e.settings));},reset:function(){t(),c.off(W.default.LOADING_PROGRESS,j,this),c.off(W.default.QUALITY_CHANGE_RENDERED,r,this),c.off(W.default.METRIC_ADDED,N,this),c.off(W.default.PERIOD_SWITCH_COMPLETED,n,this),g&&g.reset();}},p=e.getLogger(h),t(),h}a.__dashjs_factory_name="AbrController";var o=i.default.getSingletonFactory(a);o.QUALITY_DEFAULT=0,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{108:108,109:109,149:149,184:184,185:185,186:186,187:187,188:188,189:189,218:218,224:224,241:241,45:45,46:46,47:47,54:54}],112:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(147)),l=r(e(205)),d=r(e(220)),f=r(e(85)),i=r(e(47)),c=r(e(46)),h=r(e(54));function a(){var e=void 0,n=void 0,t=this.context,r=(0, c.default)(t).getInstance(),i=(0, d.default)(t).getInstance(),a=void 0,o=void 0;function s(e){a.invalidateSelectedIndexes(e.entry);}return e={reset:function(){a.reset(),o.reset();},initialize:function(e){var t;a.setConfig({adapter:n}),t=e,a.update(t),o.chooseSelector(n.getIsDVB(t));},resolve:function(e){var t=a.getForPath(e).reduce(function(e,t){var n=o.select(t);return n?(i.isRelative(n.url)?e.url=i.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new f.default},new f.default);if(!i.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(a=e.baseURLTreeModel),e.baseURLSelector&&(o=e.baseURLSelector),e.adapter&&(n=e.adapter);}},a=(0, u.default)(t).create(),o=(0, l.default)(t).create(),r.on(h.default.SERVICE_LOCATION_BLACKLIST_CHANGED,s,e),e}a.__dashjs_factory_name="BaseURLController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{147:147,205:205,220:220,46:46,47:47,54:54,85:85}],113:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),s=r(e(46));function a(e){e=e||{};var t=[],n=(0, s.default)(this.context).getInstance(),r=e.updateEventName,i=e.addBlacklistEventName;function a(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(r,{entry:e}));}function o(e){a(e.entry);}return function(){i&&n.on(i,o,this);}(),{add:a,contains:function(e){return !!(t.length&&e&&e.length)&&-1!==t.indexOf(e)},reset:function(){t=[];}}}a.__dashjs_factory_name="BlackListController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{46:46,47:47}],114:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ge=r(e(108)),_e=r(e(109)),Ee=r(e(149)),me=r(e(104)),ve=r(e(103)),ye=r(e(111)),Te=r(e(117)),Se=r(e(46)),Ae=r(e(54)),i=r(e(47)),Ie=r(e(45)),Re=r(e(213)),be=r(e(225)),De=r(e(51)),Me=e(241),Ne="BufferController";function a(e){e=e||{};var r=this.context,i=(0, Se.default)(r).getInstance(),a=e.errHandler,l=e.fragmentModel,o=e.representationController,n=e.mediaController,t=e.adapter,s=e.textController,u=e.abrController,d=e.playbackController,f=e.streamInfo,c=e.type,h=e.settings,p=void 0,g=void 0,_=void 0,E=void 0,m=void 0,v=void 0,y=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0;function F(e,t){if(!C||!e)return null;var n=e[0];if(y)try{"function"==typeof(A=t&&t[c]?(0,me.default)(r).create(y,n,j.bind(this),h.get().streaming.useAppendWindowEnd,t[c]):(0,me.default)(r).create(y,n,j.bind(this),h.get().streaming.useAppendWindowEnd)).getBuffer().initialize&&A.getBuffer().initialize(c,f,e,l);}catch(e){g.fatal("Caught error on create SourceBuffer: "+e),a.error(new be.default(De.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,De.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+c));}else A=(0, ve.default)(r).create(j.bind(this));return ie(this.getRepresentationInfo(_)),A}function U(e){e.chunk.streamId===f.id&&e.chunk.mediaInfo.type===c&&(g.info("Init fragment finished loading saving to",c+"'s init cache"),C.save(e.chunk),g.debug("Append Init fragment",c," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),B(e.chunk));}function k(e){var t,n=e.chunk;n.streamId===f.id&&n.mediaInfo.type==c&&(L?(x=n,(t=A&&A.getAllBufferRanges())&&0<t.length&&.5<d.getTimeToStreamEnd()&&(g.debug("Clearing buffer because track changed - "+(t.end(t.length-1)+.5)),te([{start:0,end:t.end(t.length-1)+.5,force:!0}]))):B(n));}function B(e){A.append(e),e.mediaInfo.type===ge.default.VIDEO&&he(Ae.default.VIDEO_CHUNK_RECEIVED,{chunk:e});}function G(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)g.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",d.getTime());}function j(e){var t,n,r;if(e.error)return 22===e.error.code&&(N=!0,v=.8*fe(),g.warn("Quota exceeded, Critical Buffer: "+v),0<v&&(t=Math.max(.2*v,1),n=v-t,r={streaming:{bufferToKeep:parseFloat(t.toFixed(5)),bufferAheadToKeep:parseFloat(n.toFixed(5))}},h.update(r))),void(22!==e.error.code&&ce()||(g.warn("Clearing playback buffer to overcome quota exceed situation"),he(Ae.default.QUOTA_EXCEEDED,{criticalBufferLevel:v}),H()));N=!1,(b=e.chunk)&&!isNaN(b.index)&&(T=Math.max(b.index,T),Z());var i,a=A.getAllBufferRanges();b.segmentType===Me.HTTPRequest.MEDIA_SEGMENT_TYPE?(G(a),V(),function(){if(c!==ge.default.AUDIO&&c!==ge.default.VIDEO)return;if(isNaN(O))return;var e=d.getTime(),t=X(O,0);if(e===O&&t)return;var n=o.getCurrentRepresentation().segmentDuration;if(!(t=X(O,n)))return;Math.abs(e-O)>n?O<=t.end&&(d.seek(Math.max(O,t.start),!1,!0),O=NaN):e<t.start&&(d.seek(t.start,!1,!0),O=NaN);}()):L&&(i=d.getTime(),g.debug("AppendToBuffer seek target should be "+i),he(Ae.default.SEEK_TARGET,{time:i})),b&&he(b.endFragment?Ae.default.BYTES_APPENDED_END_FRAGMENT:Ae.default.BYTES_APPENDED,{quality:b.quality,startTime:b.start,index:b.index,bufferedRanges:a,mediaType:c});}function Y(e){e.streamInfo.id==f.id&&e.mediaType===c&&_!==e.newQuality&&(ie(this.getRepresentationInfo(e.newQuality)),_=e.newQuality);}function K(e){O=e.seekTime,E&&(E=!(w=!0),S=Number.POSITIVE_INFINITY),(c!==ge.default.FRAGMENTED_TEXT?H:V)();}function q(){O=NaN;}function H(){A.waitForUpdateEnd(function(){var e=function(){var e=[],t=A.getAllBufferRanges();if(!t||0===t.length)return e;var n=d.getTime(),r=t.end(t.length-1)+.5,i=l.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];{var a,o,s,u;i?(a={start:0,end:i.startTime-.5},(o=l.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:.01})[0])&&o.startTime!=i.startTime&&(a.end=o.startTime),a.start<a.end&&a.end>t.start(0)&&e.push(a),s={start:i.startTime+i.duration+.5,end:r},(u=l.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+.5,threshold:.01})[0])&&u.startTime!==i.startTime&&(s.start=u.startTime+u.duration+.5),s.start<s.end&&s.start<r&&e.push(s)):(g.debug("getAllRangesWithSafetyFactor - No request found in current time position, removing full buffer 0 -",r),e.push({start:0,end:r}));}return e}();e&&0!==e.length||V(),te(e);});}function V(){(!L||c===ge.default.FRAGMENTED_TEXT&&s.isTextEnabled())&&Q();}function z(){$();}function W(){O=NaN,$();}function X(e,t){var n=A.getAllBufferRanges(),r=0,i=0,a=null,o=null,s=0,u=void 0,l=void 0,d=isNaN(t)?.15:t;if(null!=n){for(l=0,u=n.length;l<u;l++)if(r=n.start(l),i=n.end(l),null===a)s=Math.abs(r-e),(r<=e&&e<i||s<=d)&&(a=r,o=i);else {if(!((s=r-o)<=d))break;o=i;}if(null!==a)return {start:a,end:o}}return null}function Q(){var e,t,n;d&&(e=(isNaN(O)?d.getTime():O)||0,m=null===(n=X(e,t))?0:n.end-e,he(Ae.default.BUFFER_LEVEL_UPDATED,{bufferLevel:m}),$());}function Z(){S-1<=T&&!E&&void 0===A.discharge&&(E=!0,g.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),he(Ae.default.BUFFERING_COMPLETED));}function $(){c!==ge.default.AUDIO&&c!==ge.default.VIDEO||(w&&!E&&0<m&&d&&d.getTimeToStreamEnd()-m<.5&&(E=!(w=!1),g.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),he(Ae.default.BUFFERING_COMPLETED)),(!h.get().streaming.lowLatencyEnabled&&m<.5||0===m)&&!E?J(_e.default.BUFFER_EMPTY):(E||m>=f.manifestInfo.minBufferTime)&&J(_e.default.BUFFER_LOADED));}function J(e){R===e||e===_e.default.BUFFER_EMPTY&&0===d.getTime()||c===ge.default.FRAGMENTED_TEXT&&!s.isTextEnabled()||(R=e,he(Ae.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),he(e===_e.default.BUFFER_LOADED?Ae.default.BUFFER_LOADED:Ae.default.BUFFER_EMPTY),g.debug(e===_e.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"));}function ee(){A&&c!==ge.default.FRAGMENTED_TEXT&&(E||te(function(){var e=[],t=A.getAllBufferRanges();if(!t||0===t.length)return e;var n=d.getTime(),r={start:Math.max(0,n-h.get().streaming.bufferToKeep),end:n+h.get().streaming.bufferAheadToKeep},i=l.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r.start=Math.min(i.startTime,r.start),r.end=Math.max(i.startTime+i.duration,r.end);else if(0===n&&d.getIsDynamic())return [];if(t.start(0)<=r.start){for(var a={start:0,end:r.start},o=0;o<t.length&&t.end(o)<=r.start;o++)a.end=t.end(o);a.start<a.end&&e.push(a);}{var s;t.end(t.length-1)>=r.end&&((s={start:r.end,end:t.end(t.length-1)+.01}).start<s.end&&e.push(s));}return e}()));}function te(e){e&&A&&0!==e.length&&(P.push.apply(P,e),M||ne());}function ne(){if(0===P.length||!A)return g.debug("Nothing to prune, halt pruning"),void(M=!(P=[]));var e=A.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return g.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(M=!(P=[]));var t=P.shift();g.debug("Removing buffer from:",t.start,"to",t.end),M=!0,d.getTime()<t.end&&(E=!1,T=0),A.remove(t.start,t.end,t.force);}function re(e){A===e.buffer&&(g.debug("onRemoved buffer from:",e.from,"to",e.to),G(A.getAllBufferRanges()),0===P.length&&(M=!1),e.unintended&&(g.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),he(Ae.default.SEEK_TARGET,{time:e.from})),M?ne():(L?(L=!1,x&&B(x)):Q(),he(Ae.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:ce(),quotaExceeded:N})));}function ie(e){e&&void 0!==e.MSETimeOffset&&A&&A.updateTimestampOffset&&A.updateTimestampOffset(e.MSETimeOffset);}function ae(e){e.sender.getStreamId()===f.id&&e.sender.getType()===c&&(e.error||ie(e.currentRepresentation));}function oe(e){e.request.mediaInfo.streamInfo.id===f.id&&e.request.mediaType===c&&(S=e.request.index,Z());}function se(e){var t;e.newMediaInfo.streamInfo.id!==f.id||e.newMediaInfo.type!==c||(t=A&&A.getAllBufferRanges())&&(g.info("Track change asked"),n.getSwitchMode(c)===Te.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&0<t.length&&.5<d.getTimeToStreamEnd()&&(E=!1,S=Number.POSITIVE_INFINITY));}function ue(){++D*(h.get().streaming.wallclockTimeUpdateInterval/1e3)>=h.get().streaming.bufferPruningInterval&&(D=0,ee());}function le(){$();}function de(e,t){y=e,A&&t&&"function"==typeof A.discharge&&(I=A,F(t));}function fe(){var e,t=A.getAllBufferRanges(),n=0,r=void 0;if(!t)return n;for(r=0,e=t.length;r<e;r++)n+=t.end(r)-t.start(r);return n}function ce(){return fe()<v}function he(e,t){var n=t||{};n.sender=p,n.mediaType=c,n.streamId=f.id,i.trigger(e,n);}function pe(e,t){v=Number.POSITIVE_INFINITY,R=void 0,_=ye.default.QUALITY_DEFAULT,S=Number.POSITIVE_INFINITY,b=null,w=N=M=E=!1,D=m=T=0,P=[],O=NaN,A&&(e||A.abort(),A.reset(t),A=null),L=!1;}return p={getBufferControllerType:function(){return Ne},getRepresentationInfo:function(e){return t.convertDataToRepresentationInfo(o.getRepresentationForQuality(e))},initialize:function(e){de(e),_=u.getQualityFor(c),i.on(Ae.default.DATA_UPDATE_COMPLETED,ae,this),i.on(Ae.default.INIT_FRAGMENT_LOADED,U,this),i.on(Ae.default.MEDIA_FRAGMENT_LOADED,k,this),i.on(Ae.default.QUALITY_CHANGE_REQUESTED,Y,this),i.on(Ae.default.STREAM_COMPLETED,oe,this),i.on(Ae.default.PLAYBACK_PLAYING,W,this),i.on(Ae.default.PLAYBACK_PROGRESS,V,this),i.on(Ae.default.PLAYBACK_TIME_UPDATED,V,this),i.on(Ae.default.PLAYBACK_RATE_CHANGED,le,this),i.on(Ae.default.PLAYBACK_SEEKING,K,this),i.on(Ae.default.PLAYBACK_SEEKED,q,this),i.on(Ae.default.PLAYBACK_STALLED,z,this),i.on(Ae.default.WALLCLOCK_TIME_UPDATED,ue,this),i.on(Ae.default.CURRENT_TRACK_CHANGED,se,this,Se.default.EVENT_PRIORITY_HIGH),i.on(Ae.default.SOURCEBUFFER_REMOVE_COMPLETED,re,this);},createBuffer:F,dischargePreBuffer:function(){if(A&&I&&"function"==typeof I.discharge){var e=I.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+c+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";g.debug(t);}else g.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var r=I.discharge(),i=null,a=0;a<r.length;a++){var o=r[a],s=C.extract(o.streamId,o.representationId);s&&(i!==s&&(A.append(s),i=s),A.append(o));}I.reset(),I=null;}},getType:function(){return c},getBuffer:function(){return A},setBuffer:function(e){A=e;},getBufferLevel:function(){return m},getRangeAt:X,setMediaSource:de,getMediaSource:function(){return y},appendInitSegment:function(e){var t=C.extract(f.id,e);return !!t&&(g.info("Append Init fragment",c," with representationId:",t.representationId," and quality:",t.quality,", data size:",t.bytes.byteLength),B(t),!0)},replaceBuffer:function(){L=!0;},getIsBufferingCompleted:function(){return E},getIsPruningInProgress:function(){return M},reset:function(e,t){i.off(Ae.default.DATA_UPDATE_COMPLETED,ae,this),i.off(Ae.default.INIT_FRAGMENT_LOADED,U,this),i.off(Ae.default.MEDIA_FRAGMENT_LOADED,k,this),i.off(Ae.default.QUALITY_CHANGE_REQUESTED,Y,this),i.off(Ae.default.STREAM_COMPLETED,oe,this),i.off(Ae.default.PLAYBACK_PLAYING,W,this),i.off(Ae.default.PLAYBACK_PROGRESS,V,this),i.off(Ae.default.PLAYBACK_TIME_UPDATED,V,this),i.off(Ae.default.PLAYBACK_RATE_CHANGED,le,this),i.off(Ae.default.PLAYBACK_SEEKING,K,this),i.off(Ae.default.PLAYBACK_SEEKED,q,this),i.off(Ae.default.PLAYBACK_STALLED,z,this),i.off(Ae.default.WALLCLOCK_TIME_UPDATED,ue,this),i.off(Ae.default.CURRENT_TRACK_CHANGED,se,this),i.off(Ae.default.SOURCEBUFFER_REMOVE_COMPLETED,re,this),pe(e,t);}},g=(0, Ie.default)(r).getInstance().getLogger(p),C=(0, Re.default)(r).getInstance(),pe(),p}a.__dashjs_factory_name=Ne,n.default=i.default.getClassFactory(a),t.exports=n.default;},{103:103,104:104,108:108,109:109,111:111,117:117,149:149,213:213,225:225,241:241,45:45,46:46,47:47,51:51,54:54}],115:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),b=r(e(45)),D=r(e(46)),M=r(e(54)),N=r(e(159));function a(){var i="urn:mpeg:dash:event:2012",a=1,o="urn:mpeg:dash:event:callback:2015",s=1,e=100,u=300,l=this.context,d=(0, D.default)(l).getInstance(),t=void 0,f=void 0,r=void 0,c=void 0,h=void 0,n=void 0,p=void 0,g=void 0,_=void 0,E=void 0,m=void 0;function v(){if(!g||!_)throw new Error("setConfig function has to be called previously")}function y(){m=!1,r={},c={},n=null,E=!(h={}),p=Date.now()/1e3;}function T(){try{null!==n&&m&&(clearInterval(n),n=null,m=!1,function(){try{I(c),I(r);}catch(e){}}());}catch(e){throw e}}function S(){try{var e,t;E||(t=(e=_.getTime())-p,t=0<p?Math.max(0,t):0,A(c,t,e),A(r,t,e),function(){try{if(h)for(var e=_.getTime(),t=Object.keys(h),n=0;n<t.length;n++){var r=t[n],i=h[r];null!==i&&(i.duration+i.calculatedPresentationTime)/i.eventStream.timescale<e&&(f.debug("Remove Event "+r+" at time "+e),i=null,delete h[r]);}}catch(e){}}(),p=e),E=!1;}catch(e){E=!1;}}function A(e,t,n){try{if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a,o=r[i],s=e[o];void 0!==s&&((a=s.calculatedPresentationTime/s.eventStream.timescale)<=n&&n<=a+t?R(o,s,e):(function(e,t,n){try{return n<e-t}catch(e){return !1}}(n,t,a)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime/1e3>t}catch(e){return !1}}(s))&&(f.debug("Deleting event "+o+" as it is expired or invalid"),delete e[o]));}}catch(e){}}function I(i){try{var e=function(){var e=Object.keys(i),r=_.getTime();if(!e||0===e.length)return {v:void 0};var t=i[e[0]].eventStream&&i[e[0]].eventStream.period&&!isNaN(i[e[0]].eventStream.period.duration)?i[e[0]].eventStream.period.duration:NaN,n=i[e[0]].eventStream&&i[e[0]].eventStream.period&&!isNaN(i[e[0]].eventStream.period.start)?i[e[0]].eventStream.period.start:NaN;if(isNaN(t)||isNaN(n))return {v:void 0};e.forEach(function(e){var t=i[e],n=t.calculatedPresentationTime/t.eventStream.timescale;Math.abs(n-r)<u&&R(e,t,i);});}();if("object"==typeof e)return e.v}catch(e){}}function R(e,t,n){try{var r=_.getTime();0<t.duration&&(h[e]=t),t.eventStream.schemeIdUri===i&&t.eventStream.value==a?0===t.duration&&0===t.presentationTimeDelta||(f.debug("Starting manifest refresh event "+e+" at "+r),function(){try{v(),g.refreshManifest();}catch(e){}}()):t.eventStream.schemeIdUri===o&&t.eventStream.value==s?(f.debug("Starting callback event "+e+" at "+r),function(e){try{(0,N.default)(l).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}});}catch(e){throw e}}(t.messageData)):(f.debug("Starting event "+e+" at "+r),d.trigger(t.eventStream.schemeIdUri,{event:t})),delete n[e];}catch(e){}}return t={addInlineEvents:function(e){try{if(v(),e)for(var t=0;t<e.length;t++){var n=e[t];r[n.id]=n,f.debug("Add inline event with id "+n.id);}f.debug("Added "+e.length+" inline events");}catch(e){throw e}},addInbandEvents:function(e){try{v();for(var t=0;t<e.length;t++){var n=e[t];n.id in c?f.debug("Repeated event with id "+n.id):(n.eventStream.schemeIdUri===i&&void 0===c[n.id]&&function(e){try{var t,n,r;e.eventStream.value==a&&(t=e.eventStream.timescale||1,n=e.calculatedPresentationTime/t,r=void 0,r=4294967295==e.calculatedPresentationTime?NaN:(e.calculatedPresentationTime+e.duration)/t,f.info("Manifest validity changed: Valid until: "+n+"; remaining duration: "+r),d.trigger(M.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:n,newDuration:r,newManifestValidAfter:NaN}));}catch(e){}}(n),c[n.id]=n,f.debug("Add inband event with id "+n.id));}S();}catch(e){throw e}},start:function(){try{v(),f.debug("Start Event Controller"),m||isNaN(e)||(m=!0,n=setInterval(S,e));}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(g=e.manifestUpdater),e.playbackController&&(_=e.playbackController);}catch(e){throw e}},reset:function(){T(),y();}},f=(0, b.default)(l).getInstance().getLogger(t),y(),t}a.__dashjs_factory_name="EventController",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{159:159,45:45,46:46,47:47,54:54}],116:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(108)),p=r(e(226)),d=r(e(149)),g=r(e(97)),_=r(e(217)),E=r(e(46)),m=r(e(54)),v=r(e(51)),i=r(e(47)),y=r(e(45));function a(r){r=r||{};var i=this.context,f=(0, E.default)(i).getInstance(),a=r.errHandler,o=r.mediaPlayerModel,s=r.dashMetrics,u=(0, y.default)(i).getInstance(),e=void 0,c=void 0,l=void 0;function t(){for(var e in l)l[e].reset();l={};}function n(e){var t,n,r,i,a,o,s,u,l,d;e.sender&&(t=e.request,n=e.response,r=t.isInitializationRequest(),i=t.mediaInfo.streamInfo,e.error&&(e.request.mediaType!==h.default.AUDIO&&e.request.mediaType!==h.default.VIDEO&&e.request.mediaType!==h.default.FRAGMENTED_TEXT||f.trigger(m.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),n&&i?(o=n,s=t,u=i.id,l=e.type!==m.default.FRAGMENT_LOADING_PROGRESS,(d=new p.default).streamId=u,d.mediaInfo=s.mediaInfo,d.segmentType=s.type,d.start=s.startTime,d.duration=s.duration,d.end=d.start+d.duration,d.bytes=o,d.index=s.index,d.quality=s.quality,d.representationId=s.representationId,d.endFragment=l,a=d,f.trigger(r?m.default.INIT_FRAGMENT_LOADED:m.default.MEDIA_FRAGMENT_LOADED,{chunk:a,request:t})):c.warn("No "+t.mediaType+" bytes to push or stream is inactive."));}return e={getModel:function(e,t){var n=l[t];return n||(n=(0, d.default)(i).create({streamId:e,dashMetrics:s,fragmentLoader:(0, g.default)(i).create({dashMetrics:s,mediaPlayerModel:o,errHandler:a,requestModifier:(0, _.default)(i).getInstance(),settings:r.settings,boxParser:r.boxParser,eventBus:f,events:m.default,errors:v.default,dashConstants:r.dashConstants,urlUtils:r.urlUtils}),debug:u,eventBus:f,events:m.default}),l[t]=n),n},reset:function(){f.off(m.default.FRAGMENT_LOADING_COMPLETED,n,this),f.off(m.default.FRAGMENT_LOADING_PROGRESS,n,this),t();}},c=u.getLogger(e),t(),f.on(m.default.FRAGMENT_LOADING_COMPLETED,n,e),f.on(m.default.FRAGMENT_LOADING_PROGRESS,n,e),e}a.__dashjs_factory_name="FragmentController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,149:149,217:217,226:226,45:45,46:46,47:47,51:51,54:54,97:97}],117:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var S=r(e(108)),A=r(e(54)),I=r(e(46)),i=r(e(47)),R=r(e(45)),b="neverReplace",D="alwaysReplace",M="highestBitrate",N="widestRange",C=M;function a(){var e=this.context,l=(0, I.default)(e).getInstance(),t=void 0,o=void 0,d=void 0,n=void 0,r=void 0,f=void 0,c=void 0,i=[D,b],a=[M,N];function s(e,t){if(!e||!t)return [];var n=t.id;return d[n]&&d[n][e]?d[n][e].list:[]}function h(e,t){return !e||!t||t&&!d[t.id]?null:d[t.id][e].current}function u(e,t){if(e&&e.streamInfo){var n,r,i=e.type,a=e.streamInfo,o=a.id,s=h(i,a);if(d[o]&&d[o][i]&&!m(e,s))if(d[o][i].current=e,!d[o][i].current||t&&i===S.default.FRAGMENTED_TEXT||l.trigger(A.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:s,newMediaInfo:e,switchMode:f[i]}),!t){var u=(r={lang:(n=e).lang,viewpoint:n.viewpoint,roles:n.roles,accessibility:n.accessibility,audioChannelConfiguration:n.audioChannelConfiguration}).lang||r.viewpoint||r.role&&0<r.role.length||r.accessibility&&0<r.accessibility.length||r.audioChannelConfiguration&&0<r.audioChannelConfiguration.length?r:null;if(!u||!d[o][i].storeLastSettings)return;u.roles&&(u.role=u.roles[0],delete u.roles),u.accessibility&&(u.accessibility=u.accessibility[0]),u.audioChannelConfiguration&&(u.audioChannelConfiguration=u.audioChannelConfiguration[0]),c.setSavedMediaSettings(i,u);}}}function p(e,t){e&&t&&(n[e]=t);}function g(e){return e?n[e]:null}function _(){return r||C}function E(e){return e===S.default.AUDIO||e===S.default.VIDEO||e===S.default.TEXT||e===S.default.FRAGMENTED_TEXT||e===S.default.IMAGE}function m(e,t){if(!e&&!t)return !0;if(!e||!t)return !1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function v(){d={},n={audio:null,video:null,fragmentedText:null},f={audio:D,video:b};}function y(t,e){var n=!t.lang||e.lang.match(t.lang),r=!t.viewpoint||t.viewpoint===e.viewpoint,i=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],a=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],o=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return n&&r&&i&&a&&o}function T(e,t){if(e===S.default.FRAGMENTED_TEXT)return t[0];function n(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t<r?(t=r,n=[e]):r===t&&n.push(e);}),n}function r(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=e.representationCount,t<r?(t=r,n=[e]):r===t&&n.push(e);}),n}var i=_(),a=[];switch(i){case M:1<(a=n(t)).length&&(a=r(a));break;case N:1<(a=r(t)).length&&(a=n(t));break;default:o.warn("Track selection mode is not supported: "+i);}return a[0]}return t={checkInitialMediaSettingsForType:function(e,t){var n=g(e),r=s(e,t),i=[];n||p(e,n=c.getSavedMediaSettings(e)),r&&0!==r.length&&(n&&r.forEach(function(e){y(n,e)&&i.push(e);}),0===i.length?u(T(e,r),!0):1<i.length?u(T(e,i)):u(i[0]));},addTrack:function(e){if(e){var t=e.type;if(E(t)){var n=e.streamInfo.id;d[n]||(d[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var r=d[n][t].list,i=0,a=r.length;i<a;++i)if(m(r[i],e))return;r.push(e);var o=g(t);o&&y(o,e)&&!h(t,e.streamInfo)&&u(e);}}},getTracksFor:s,getCurrentTrackFor:h,isCurrentTrack:function(e){if(!e)return !1;var t=e.type,n=e.streamInfo.id;return d[n]&&d[n][t]&&m(d[n][t].current,e)},setTrack:u,setInitialSettings:p,getInitialSettings:g,setSwitchMode:function(e,t){-1!==i.indexOf(t)?f[e]=t:o.warn("Track switch mode is not supported: "+t);},getSwitchMode:function(e){return f[e]},setSelectionModeForInitialTrack:function(e){-1!==a.indexOf(e)?r=e:o.warn("Track selection mode is not supported: "+e);},getSelectionModeForInitialTrack:_,isMultiTrackSupportedByType:E,isTracksEqual:m,matchSettings:y,saveTextSettingsDisabled:function(){c.setSavedMediaSettings(S.default.FRAGMENTED_TEXT,null);},setConfig:function(e){e&&e.domStorage&&(c=e.domStorage);},reset:v},o=(0, R.default)(e).getInstance().getLogger(t),v(),t}a.__dashjs_factory_name="MediaController";var o=i.default.getSingletonFactory(a);o.TRACK_SWITCH_MODE_NEVER_REPLACE=b,o.TRACK_SWITCH_MODE_ALWAYS_REPLACE=D,o.TRACK_SELECTION_MODE_HIGHEST_BITRATE=M,o.TRACK_SELECTION_MODE_WIDEST_RANGE=N,o.DEFAULT_INIT_TRACK_SELECTION_MODE=C,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{108:108,45:45,46:46,47:47,54:54}],118:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45));function o(){var e=void 0,r=void 0,t=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return "MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null);},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n));},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,n=0;n<t.length;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}r.info("call to mediaSource endOfStream"),e.endOfStream();}}},r=(0, a.default)(t).getInstance().getLogger(e),e}o.__dashjs_factory_name="MediaSourceController",n.default=i.default.getSingletonFactory(o),t.exports=n.default;},{45:45,47:47}],119:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var fe=r(e(108)),ce=r(e(109)),he=r(e(46)),pe=r(e(54)),i=r(e(47)),ge=r(e(45));function a(){var e=this.context,a=(0, he.default)(e).getInstance(),t=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,n=void 0,o=void 0,c=void 0,r=void 0,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0,i=void 0,m=void 0,v=void 0,y=void 0,T=void 0,S=void 0,A=void 0,I=void 0;function R(e){var t,n,r,i;o&&isNaN(c)||(t=c,isNaN(t)&&(g?(t=e.liveStartTime,(r=(n=l.getCurrentDVRInfo())?n.range:null)&&(i=G(p.start,!0),isNaN(i)||(s.info("Start time from URI parameters: "+i),t=Math.max(Math.min(t,i),r.start)))):(t=p.start,i=G(p.start,!1),!isNaN(i)&&i<t+p.duration&&(s.info("Start time from URI parameters: "+i),t=Math.max(t,i)))),isNaN(t)||t===f.getTime()||(a.trigger(pe.default.PLAYBACK_SEEKING,{seekTime:t}),w(t,!1,!0)));}function b(){return parseFloat((D()-P()).toFixed(5))}function D(){return p.start+p.duration}function M(){p&&f&&f.getElement()?f.play():E=!0;}function N(){return p&&f?f.isPaused():null}function C(){p&&f&&f.pause();}function O(){return p&&f?f.isSeeking():null}function w(e,t,n){p&&f&&e!==(isNaN(v)?f.getTime():v)&&(!0===n?(f.removeEventListener("seeking",Q),s.info("Requesting internal seek to time: "+e)):(v=e,a.trigger(pe.default.PLAYBACK_SEEK_ASKED),s.info("Requesting seek to time: "+e)),f.setCurrentTime(e,t));}function P(){return p&&f?f.getTime():null}function L(){var e,t=P();return !g||isNaN(m)||(e=m/1e3)<t&&(t-=e),t}function x(){return p&&f?f.getPlaybackRate():null}function F(){return p&&f?f.getEnded():null}function U(){return g}function k(){if(!g||isNaN(m))return NaN;var e=L();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*n.getClientTimeOffset();return Math.max(((t-m-1e3*e)/1e3).toFixed(3),0)}function B(){o=E=!1,m=h=0,v=c=NaN,f&&(a.off(pe.default.STREAM_INITIALIZED,R,this),a.off(pe.default.DATA_UPDATE_COMPLETED,q,this),a.off(pe.default.BUFFER_LEVEL_STATE_CHANGED,ue,this),a.off(pe.default.LOADING_PROGRESS,se,this),a.off(pe.default.PLAYBACK_PROGRESS,ae,this),a.off(pe.default.PLAYBACK_TIME_UPDATED,ae,this),a.off(pe.default.PLAYBACK_ENDED,re,this),a.off(pe.default.STREAM_INITIALIZING,de,this),Y(),f.removeEventListener("canplay",H),f.removeEventListener("play",V),f.removeEventListener("waiting",z),f.removeEventListener("playing",W),f.removeEventListener("pause",X),f.removeEventListener("error",ie),f.removeEventListener("seeking",Q),f.removeEventListener("seeked",Z),f.removeEventListener("timeupdate",$),f.removeEventListener("progress",J),f.removeEventListener("ratechange",ee),f.removeEventListener("loadedmetadata",te),f.removeEventListener("stalled",le),f.removeEventListener("ended",ne)),g=p=f=r=null;}function G(e,t){var n=A.getURIFragmentData();if(!n||!n.t)return NaN;return n.t=n.t.split(",")[0],t&&-1!==n.t.indexOf("posix:")?parseInt(n.t.substring(6)):e+parseInt(n.t)}function j(){null===r&&(r=setInterval(function(){a.trigger(pe.default.WALLCLOCK_TIME_UPDATED,{isDynamic:g,time:new Date}),g&&N()&&function(){var e=Date.now();(!i||i+500<e)&&(i=e,$());}();},I.get().streaming.wallclockTimeUpdateInterval));}function Y(){clearInterval(r),r=null;}function K(){var e,t,n,r,i;!N()&&g&&0!==f.getReadyState()&&(e=L(),n=e,r=l.getCurrentDVRInfo(),t=(i=r?r.range:null)?n>i.end?Math.max(i.end-2*p.manifestInfo.minBufferTime,i.start):0<n&&n+.25<i.start&&Math.abs(n-i.start)<31536e4?i.start:n:NaN,isNaN(t)||t===e||w(t));}function q(e){var t,n;e.error||null!==(n=(t=d.convertDataToRepresentationInfo(e.currentRepresentation))?t.mediaInfo.streamInfo:null)&&p.id===n.id&&(p=n,K());}function H(){a.trigger(pe.default.CAN_PLAY);}function V(){s.info("Native video element event: play"),K(),j(),a.trigger(pe.default.PLAYBACK_STARTED,{startTime:P()});}function z(){s.info("Native video element event: waiting"),a.trigger(pe.default.PLAYBACK_WAITING,{playingTime:P()});}function W(){s.info("Native video element event: playing"),a.trigger(pe.default.PLAYBACK_PLAYING,{playingTime:P()});}function X(){s.info("Native video element event: pause"),a.trigger(pe.default.PLAYBACK_PAUSED,{ended:F()});}function Q(){var e=P();isNaN(v)||v===e||(e=v),v=NaN,s.info("Seeking to: "+e),j(),a.trigger(pe.default.PLAYBACK_SEEKING,{seekTime:e});}function Z(){s.info("Native video element event: seeked"),a.trigger(pe.default.PLAYBACK_SEEKED),f.addEventListener("seeking",Q);}function $(){p&&a.trigger(pe.default.PLAYBACK_TIME_UPDATED,{timeToEnd:b(),time:P()});}function J(){a.trigger(pe.default.PLAYBACK_PROGRESS);}function ee(){var e=x();s.info("Native video element event: ratechange: ",e),a.trigger(pe.default.PLAYBACK_RATE_CHANGED,{playbackRate:e});}function te(){s.info("Native video element event: loadedmetadata"),a.trigger(pe.default.PLAYBACK_METADATA_LOADED),j();}function ne(){s.info("Native video element event: ended"),C(),Y(),a.trigger(pe.default.PLAYBACK_ENDED,{isLast:u.getActiveStreamInfo().isLast});}function re(e){r&&e.isLast&&(s.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),f.setCurrentTime(D()),C(),Y());}function ie(e){var t=e.target||e.srcElement;a.trigger(pe.default.PLAYBACK_ERROR,{error:t.error});}function ae(){var e,t,n;g&&I.get().streaming.lowLatencyEnabled&&0<I.get().streaming.liveCatchUpPlaybackRate&&!N()&&!O()&&(e=k(),t=Math.abs(e-_.getLiveDelay()),n=_.getLiveCatchupLatencyThreshold(),(I.get().streaming.lowLatencyEnabled&&0<I.get().streaming.liveCatchUpPlaybackRate&&0<P()&&t>I.get().streaming.liveCatchUpMinDrift&&(isNaN(n)||e<=n)?function(){{var e,t,n,r,i,a,o;f&&(e=I.get().streaming.liveCatchUpPlaybackRate,t=_.getLiveDelay(),n=k()-t,r=5*n,i=2*e/(1+Math.pow(Math.E,-r)),a=1-e+i,T&&(o=function(){var n=null;return u.getActiveStreamProcessors().forEach(function(e){var t=e.getBufferLevel();n=null===n?t:Math.min(n,t);}),n}(),t/2<o?T=!1:0<n&&(a=1)),Math.abs(f.getPlaybackRate()-a)>S&&f.setPlaybackRate(a),0<I.get().streaming.liveCatchUpMaxDrift&&!y&&n>I.get().streaming.liveCatchUpMaxDrift?(s.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),y=!0,function(){var e=l.getCurrentDVRInfo();w((e?e.range:null).end-_.getLiveDelay(),!0,!1);}()):y=!1);}}:oe)());}function oe(){f&&f.setPlaybackRate(1);}function se(e){var t,n;!1!==e.stream||!I.get().streaming.lowLatencyEnabled||isNaN(e.request.duration)||(t=1.2*e.request.duration)>_.getLiveDelay()&&(s.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2)),n={streaming:{liveDelay:t}},I.update(n));}function ue(e){e.streamId===p.id&&(I.get().streaming.lowLatencyEnabled?e.state!==ce.default.BUFFER_EMPTY||O()||T||(T=!0,oe()):f.setStallState(e.mediaType,e.state===ce.default.BUFFER_EMPTY));}function le(e){a.trigger(pe.default.PLAYBACK_STALLED,{e:e});}function de(e){!function(e,t){if(e&&e.manifestInfo&&e.manifestInfo.serviceDescriptions){for(var n=void 0,r=0;r<e.manifestInfo.serviceDescriptions.length;r++){var i=e.manifestInfo.serviceDescriptions[r];if(i.schemeIdUri===fe.default.SERVICE_DESCRIPTION_LL_SCHEME){n=i;break}}n&&t&&t.supplementalProperties&&"true"===t.supplementalProperties[fe.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(n.latency&&0<n.latency.target&&(s.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),I.update({streaming:{lowLatencyEnabled:!0,liveDelay:n.latency.target/1e3,liveCatchUpMinDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target)/1e3:void 0}})),n.playbackRate&&1<n.playbackRate.max&&(s.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),I.update({streaming:{lowLatencyEnabled:!0,liveCatchUpPlaybackRate:n.playbackRate.max-1}})));}}(e.streamInfo,e.mediaInfo);}return t={initialize:function(e,t,n){p=e,f.addEventListener("canplay",H),f.addEventListener("play",V),f.addEventListener("waiting",z),f.addEventListener("playing",W),f.addEventListener("pause",X),f.addEventListener("error",ie),f.addEventListener("seeking",Q),f.addEventListener("seeked",Z),f.addEventListener("timeupdate",$),f.addEventListener("progress",J),f.addEventListener("ratechange",ee),f.addEventListener("loadedmetadata",te),f.addEventListener("stalled",le),f.addEventListener("ended",ne),g=p.manifestInfo.isDynamic,o=!(T=y=!1)===t,c=n;var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i=/safari/.test(r)&&!/chrome/.test(r);S=i?.25:.02,a.on(pe.default.STREAM_INITIALIZED,R,this),a.on(pe.default.DATA_UPDATE_COMPLETED,q,this),a.on(pe.default.LOADING_PROGRESS,se,this),a.on(pe.default.BUFFER_LEVEL_STATE_CHANGED,ue,this),a.on(pe.default.PLAYBACK_PROGRESS,ae,this),a.on(pe.default.PLAYBACK_TIME_UPDATED,ae,this),a.on(pe.default.PLAYBACK_ENDED,re,this),a.on(pe.default.STREAM_INITIALIZING,de,this),E&&(E=!1,M());},setConfig:function(e){e&&(e.streamController&&(u=e.streamController),e.dashMetrics&&(l=e.dashMetrics),e.mediaPlayerModel&&(_=e.mediaPlayerModel),e.adapter&&(d=e.adapter),e.videoModel&&(f=e.videoModel),e.timelineConverter&&(n=e.timelineConverter),e.uriFragmentModel&&(A=e.uriFragmentModel),e.settings&&(I=e.settings));},getStartTimeFromUriParameters:G,getTimeToStreamEnd:b,getTime:P,getNormalizedTime:L,getPlaybackRate:x,getPlayedRanges:function(){return p&&f?f.getPlayedRanges():null},getEnded:F,getIsDynamic:U,getStreamController:function(){return u},computeAndSetLiveDelay:function(e,t,n){var r,i,a=void 0,o=void 0,s=!isNaN(e)&&isFinite(e)?e:NaN,u=d.getSuggestedPresentationDelay(),a=I.get().streaming.lowLatencyEnabled?0:_.getLiveDelay()?_.getLiveDelay():null===I.get().streaming.liveDelayFragmentCount||isNaN(I.get().streaming.liveDelayFragmentCount)||isNaN(s)?!0===I.get().streaming.useSuggestedPresentationDelay&&null!==u&&!isNaN(u)&&0<u?u:isNaN(s)?isNaN(n)?4*p.manifestInfo.minBufferTime:4*n:4*s:s*I.get().streaming.liveDelayFragmentCount;return null!==(i=d.getAvailabilityStartTime())&&(m=i),o=0<t?(r=Math.max(t-10,t/2),Math.min(a,r)):a,h=o},getLiveDelay:function(){return h},setLiveDelay:function(e){!(arguments.length<=1||void 0===arguments[1])&&arguments[1]&&e<h||(h=e);},getCurrentLiveLatency:k,play:M,isPaused:N,pause:C,isSeeking:O,seek:w,reset:B},s=(0, ge.default)(e).getInstance().getLogger(t),B(),t}a.__dashjs_factory_name="PlaybackController",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,109:109,45:45,46:46,47:47,54:54}],120:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ae=r(e(108)),oe=r(e(109)),se=r(e(196)),ue=r(e(149)),le=r(e(46)),de=r(e(54)),i=r(e(47)),fe=r(e(45)),ce=r(e(117));function a(e){e=e||{};var t=this.context,n=(0, le.default)(t).getInstance(),l=e.adapter,d=e.dashMetrics,r=e.mediaPlayerModel,f=e.fragmentModel,c=e.abrController,h=e.playbackController,i=e.textController,a=e.streamId,p=e.type,g=e.mimeType,_=e.mediaController,E=e.bufferController,m=e.settings,o=void 0,v=void 0,y=void 0,s=void 0,u=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0;function x(){return !1===s}function F(){x()||y&&!E.getIsBufferingCompleted()&&(v.debug("Schedule Controller starts"),s=!1,d.createPlaylistTraceMetrics(y.id,1e3*h.getTime(),h.getPlaybackRate()),B(0));}function U(){s||(v.debug("Schedule Controller stops"),s=!0,clearTimeout(S));}function k(){var e,t;s||u||h.isPaused()&&!m.get().streaming.scheduleWhilePaused||(p===ae.default.FRAGMENTED_TEXT||p===ae.default.TEXT)&&!i.isTextEnabled()||E.getIsBufferingCompleted()?U():(function(){var e=h.getTime(),t=1.5;{var n;isNaN(y.fragmentDuration)&&(n=d.getCurrentSchedulingInfo(y.mediaInfo.type),t=n?1.5*n.duration:1.5);}var r=f.getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];{var i,a,o,s,u;r&&-1===N.indexOf(r)&&!l.getIsTextTrack(g)&&(i=m.get().streaming.fastSwitchEnabled,a=E.getBufferLevel(),o=c.getAbandonmentStateFor(p),s=!_.isCurrentTrack(r.mediaInfo)&&_.getSwitchMode(r.mediaInfo.type)===ce.default.TRACK_SWITCH_MODE_NEVER_REPLACE,u=r.quality<y.quality,i&&(s||u)&&t<=a&&o!==oe.default.ABANDON_LOAD?(j(r),L=!0,v.debug("Reloading outdated fragment at index: ",r.index)):r.quality>y.quality&&!O&&ne(h.getTime()+a));}}(),e=0<N.length,O||isNaN(M)||C||e||function(e,t){D[t]=D[t]||{};var n=c.getTopQualityIndexFor(e,t);return D[t][e]!=n&&(v.info("Top quality "+e+" index has changed from "+D[t][e]+" to "+n),D[t][e]=n,1)}(p,a)||R.execute(p,y,I)?(G(!0),!e&&P&&c.checkPlaybackQuality(p),P=y.quality===M&&!C||O?(t=N.shift())&&t.isInitializationRequest()?(n.trigger(de.default.INIT_FRAGMENT_NEEDED,{sender:o,streamId:a,mediaType:p,representationId:t.representationId}),!1):(n.trigger(de.default.MEDIA_FRAGMENT_NEEDED,{sender:o,streamId:a,mediaType:p,seekTarget:A,replacement:t}),!0):(C?(v.debug("Switch track for "+p+", representation id = "+y.id),(O=_.getSwitchMode(p)===ce.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE)&&E.replaceBuffer&&E.replaceBuffer(),C=!1):v.debug("Quality has changed, get init request for representationid = "+y.id),n.trigger(de.default.INIT_FRAGMENT_NEEDED,{sender:o,streamId:a,mediaType:p,representationId:y.id}),M=y.quality,!1)):B(500));}function B(e){clearTimeout(S),S=setTimeout(k,e);}function G(e){u!==e?u=e:v.debug("isFragmentProcessingInProgress is already equal to",e);}function j(e){N.push(e);}function Y(e){var t;h&&f&&((t=f.getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:h.getTime(),threshold:0})[0])&&h.getTime()>=t.startTime&&((!b.mediaInfo||t.mediaInfo.type===b.mediaInfo.type&&t.mediaInfo.id!==b.mediaInfo.id)&&e&&n.trigger(de.default.TRACK_CHANGE_RENDERED,{mediaType:p,oldMediaInfo:b.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===b.quality&&t.adaptationIndex===b.adaptationIndex||!e||n.trigger(de.default.QUALITY_CHANGE_RENDERED,{mediaType:p,oldQuality:b.quality,newQuality:t.quality}),b={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex}));}function K(e){e.request.mediaInfo.streamInfo.id===a&&e.request.mediaType===p&&(U(),G(!1),v.info("Stream is complete"));}function q(e){e.request.mediaInfo.streamInfo.id===a&&e.request.mediaType===p&&(v.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),l.getIsTextTrack(g)&&G(!1),e.error&&e.request.serviceLocation&&!s&&(j(e.request),G(!1),B(0)),O&&(w=e.request));}function H(){Y(!0);}function V(e){var t,n,r;e.streamId===a&&e.mediaType===p&&(O&&!isNaN(e.startTime)&&(O=!1,f.addExecutedRequest(w)),G(!1),L&&!isNaN(e.startTime)?(t=h.getTime(),B((n=e.startTime+y.fragmentDuration)<=t+(r=1.5*y.fragmentDuration)?0:1e3*(n-(t+r))),L=!1):B(0));}function z(e){e.streamId===a&&e.mediaType===p&&(v.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),h.isSeeking()||C||(v.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),j(e.request)),G(!1),B(0));}function W(e){e.sender.getType()===p&&e.sender.getStreamId();}function X(e){p===e.mediaType&&a===e.streamId&&U();}function Q(e){e.streamId===a&&e.mediaType===p&&e.hasEnoughSpaceToAppend&&e.quotaExceeded&&s&&F();}function Z(e){e.streamId===a&&e.mediaType===p&&(U(),G(!1));}function $(){f.abortRequests(),U();}function J(){!s&&m.get().streaming.scheduleWhilePaused||F();}function ee(e){ne(e.seekTime),re(0),s&&F();var t=y.DVRWindow&&h?y.DVRWindow.end-h.getTime():NaN;d.updateManifestUpdateInfo({latency:t}),u?(v.debug("Abort requests"),f.abortRequests()):B(0);}function te(e){d.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()});}function ne(e){A=e;}function re(e){T=e;}function ie(){b={mediaInfo:void(T=0),quality:M=A=NaN,adaptationIndex:NaN},D={},N=[],L=O=C=!(s=!(u=!(P=!(w=null))));}return o={initialize:function(e){I=e,R=(0, se.default)(t).create({abrController:c,dashMetrics:d,mediaPlayerModel:r,textController:i,settings:m}),n.on(de.default.DATA_UPDATE_STARTED,W,this),n.on(de.default.FRAGMENT_LOADING_COMPLETED,q,this),n.on(de.default.STREAM_COMPLETED,K,this),n.on(de.default.BUFFER_CLEARED,Q,this),n.on(de.default.BYTES_APPENDED_END_FRAGMENT,V,this),n.on(de.default.QUOTA_EXCEEDED,Z,this),n.on(de.default.PLAYBACK_SEEKING,ee,this),n.on(de.default.PLAYBACK_STARTED,J,this),n.on(de.default.PLAYBACK_RATE_CHANGED,te,this),n.on(de.default.PLAYBACK_TIME_UPDATED,H,this),n.on(de.default.URL_RESOLUTION_FAILED,$,this),n.on(de.default.FRAGMENT_LOADING_ABANDONED,z,this),n.on(de.default.BUFFERING_COMPLETED,X,this);},getType:function(){return p},getStreamId:function(){return a},setCurrentRepresentation:function(e){y=e;},setSeekTarget:ne,setTimeToLoadDelay:re,getTimeToLoadDelay:function(){return T},switchTrackAsked:function(){C=!0;},isStarted:x,start:F,stop:U,reset:function(){n.off(de.default.DATA_UPDATE_STARTED,W,this),n.off(de.default.FRAGMENT_LOADING_COMPLETED,q,this),n.off(de.default.STREAM_COMPLETED,K,this),n.off(de.default.BUFFER_CLEARED,Q,this),n.off(de.default.BYTES_APPENDED_END_FRAGMENT,V,this),n.off(de.default.QUOTA_EXCEEDED,Z,this),n.off(de.default.PLAYBACK_SEEKING,ee,this),n.off(de.default.PLAYBACK_STARTED,J,this),n.off(de.default.PLAYBACK_RATE_CHANGED,te,this),n.off(de.default.PLAYBACK_TIME_UPDATED,H,this),n.off(de.default.URL_RESOLUTION_FAILED,$,this),n.off(de.default.FRAGMENT_LOADING_ABANDONED,z,this),n.off(de.default.BUFFERING_COMPLETED,X,this),U(),Y(!1),ie();},getBufferTarget:function(){return R.getBufferTarget(p,y,I)},processInitRequest:function(e){e&&(G(!0),f.executeRequest(e));},processMediaRequest:function(e){e?(v.debug("Next fragment request url is "+e.url),f.executeRequest(e)):(h.getIsDynamic()&&v.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling."),G(!1),B(m.get().streaming.lowLatencyEnabled?100:500));}},v=(0, fe.default)(t).getInstance().getLogger(o),ie(),o}a.__dashjs_factory_name="ScheduleController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,109:109,117:117,149:149,196:196,45:45,46:46,47:47,54:54}],121:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var Ie=r(e(108)),Re=r(e(109)),be=r(e(105)),De=r(e(99)),Me=r(e(46)),Ne=r(e(54)),i=r(e(47)),Ce=e(243),Oe=r(e(45)),we=r(e(213)),Pe=r(e(220)),Le=r(e(101)),xe=r(e(122)),Fe=r(e(118)),Ue=r(e(225)),ke=r(e(51)),Be=r(e(115));function a(){var t=40,r=2e3,l=this.context,d=(0, Me.default)(l).getInstance(),e=void 0,f=void 0,c=void 0,h=void 0,n=void 0,p=void 0,g=void 0,_=void 0,o=void 0,u=void 0,E=void 0,m=void 0,v=void 0,y=void 0,T=void 0,i=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,a=void 0,s=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,k=void 0,B=void 0,G=void 0,j=void 0,Y=void 0,K=void 0,q=void 0,H=void 0;function V(){var e;!he()||(e=w.getPlaybackQuality())&&_.addDroppedFrames(e);}function z(){var e;!H.get().streaming.jumpGaps||0===re()||P.isSeeking()||x||M||N||C||t<=++G&&(e=P.getTime(),K===e?function(e){for(var t=re(),n=H.get().streaming.smallGapLimit,r=void 0,i=0;i<t.length;i++){var a=t[i].getBuffer().getAllBufferRanges(),o=void 0;if(a&&!(a.length<=1)){for(var s,u=0;u<a.length;u++)if(e<a.start(u)){o=a.start(u);break}0<o&&(0<(s=o-e)&&s<=n&&(void 0===r||r<o)&&(r=o));}}var l=P.getTimeToStreamEnd();void 0===r&&!isNaN(l)&&l<n&&(r=e+l);0<r&&(!isNaN(l)&&e+l<=r?(f.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),d.trigger(Ne.default.PLAYBACK_ENDED,{isLast:me().isLast})):(f.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",r),P.seek(r,!0,!0)));}(e):K=e,G=0);}function W(e){var t=ne(e.seekTime);k&&(Z(),U=!1),B&&(f.debug("[PreloadTimer] stop period preload timer."),clearTimeout(B),B=void 0),t===b&&Y&&Y.deactivate(!0),t&&(t!==b||Y&&!b.isActive())?(ge(Ce.PlayListTrace.END_OF_PERIOD_STOP_REASON),oe(t,b,e.seekTime)):ge(Ce.PlayListTrace.USER_REQUEST_STOP_REASON),_e(Ce.PlayList.SEEK_START_REASON);}function X(){f.debug("[onPlaybackStarted]"),F?(F=!1,_e(Ce.PlayList.INITIAL_PLAYOUT_START_REASON)):x&&(x=!1,_e(Ce.PlayList.RESUME_FROM_PAUSE_START_REASON),$());}function Q(e){f.debug("[onPlaybackPaused]"),e.ended||(x=!0,ge(Ce.PlayListTrace.USER_REQUEST_STOP_REASON),$());}function Z(){f.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(k),k=void 0;}function $(){var e,t,n;U&&(k?Z():(n=(t=0<(e=P.getTimeToStreamEnd())?1e3*e:0)<r?t/4:t-r,f.debug("[toggleEndPeriodTimer] Going to fire preload in",n,"milliseconds"),B=setTimeout(te,n),f.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",t,"milliseconds"),k=setTimeout(function(){d.trigger(Ne.default.PLAYBACK_ENDED,{isLast:me().isLast});},t)));}function J(e){var t;e.mediaType!==Ie.default.AUDIO&&e.mediaType!==Ie.default.VIDEO||(t=me().isLast,O&&!t&&void 0===k&&(f.info("[onTrackBufferingCompleted] end of period detected. Track",e.mediaType,"has finished"),!(U=!0)===x&&$()));}function ee(){var e=me().isLast;O&&e&&(f.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),o.signalEndOfStream(O));}function te(){var t,e=me().isLast;O&&!e&&(t=ae(),b.isProtectionCompatible(t)&&(q||b.isMediaCodecCompatible(t))&&(f.info("[onStreamCanLoadNext] Preloading next stream"),b.deactivate(!0),t.preload(O,j),(Y=t).getProcessors().forEach(function(e){e.setIndexHandlerTime(t.getStartTime());})));}function ne(e){var t=0,n=null,r=R.length;0<r&&(t+=R[0].getStartTime());for(var i=0;i<r;i++)if(n=R[i],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function re(){return b?b.getProcessors():[]}function ie(){var e=ae();e?oe(e,b,NaN):f.debug("StreamController no next stream found"),ge(e?Ce.PlayListTrace.END_OF_PERIOD_STOP_REASON:Ce.PlayListTrace.END_OF_CONTENT_STOP_REASON),k=void 0,U=!1;}function ae(){if(b){var e=(t=me().start,n=me().duration,{v:R.filter(function(e){return e.getStreamInfo().start===parseFloat((t+n).toFixed(5))})[0]});if("object"==typeof e)return e.v}var t,n;}function oe(e,t,n){var r;f.info("Switch stream to "+e.getId()+" at t="+n),M||!e||t===e&&e.isActive()||(M=!0,d.trigger(Ne.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),r=!1,t&&(r=b.isProtectionCompatible(e)&&(q||b.isMediaCodecCompatible(e))&&!n||e.getPreloaded(),t.deactivate(r)),n=isNaN(n)?!r&&t?e.getStreamInfo().start:NaN:n,b=e,Y=!1,P.initialize(me(),!!t,n),w.getElement()?se(n,null===t,!1,r):ue(n,r));}function se(e,t,n,r){var i=void 0;function a(){O&&"open"==O.readyState&&(f.debug("MediaSource is open!"),window.URL.revokeObjectURL(i),O.removeEventListener("sourceopen",a),O.removeEventListener("webkitsourceopen",a),le(),t||d.trigger(Ne.default.SOURCE_INITIALIZED),n?b.setMediaSource(O):ue(e,r));}O?r?(ue(e,r),t||d.trigger(Ne.default.SOURCE_INITIALIZED)):(o.detachMediaSource(w),O.addEventListener("sourceopen",a,!1),O.addEventListener("webkitsourceopen",a,!1),i=o.attachMediaSource(O,w),f.debug("MediaSource attached to element.  Waiting on open...")):((O=o.createMediaSource()).addEventListener("sourceopen",a,!1),O.addEventListener("webkitsourceopen",a,!1),i=o.attachMediaSource(O,w),f.debug("MediaSource attached to element.  Waiting on open..."));}function ue(e,t){var n;!(j=b.activate(O,t?j:void 0))||0<(n=Object.keys(j)).length&&j[n[0]].changeType&&(f.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),q=!0),F||isNaN(e)||P.seek(e),!s&&F||P.play(),M=!1,d.trigger(Ne.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:me()});}function le(e){var t=e||me().manifestInfo.duration,n=o.setDuration(O,t);f.debug("Duration successfully set to: "+n);}function de(){try{var e=g.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");_.updateManifestUpdateInfo({currentTime:P.getTime(),buffered:w.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:I.getClientTimeOffset()});for(var t,n,r,i,a=0,o=e.length;a<o;a++){var s=e[a],u=function(e){for(var t=0,n=R.length;t<n;t++)if(R[t].getId()===e.id)return R[t];return null}(s);u?u.updateData(s):(u=(0,be.default)(l).create({manifestModel:p,mediaPlayerModel:L,dashMetrics:_,manifestUpdater:h,adapter:g,timelineConverter:I,capabilities:c,errHandler:A,baseURLController:E,abrController:m,playbackController:P,eventController:y,mediaController:v,textController:T,videoModel:w,settings:H}),R.push(u),u.initialize(s,D)),_.addManifestUpdateStreamInfo(s);}b||(g.getIsDynamic()&&R.length&&(n=function(t,e){try{var n=NaN;return e&&!isNaN(e.maxFragmentDuration)&&isFinite(e.maxFragmentDuration)?e.maxFragmentDuration:(t&&1===t.length&&function(){var r=t[0],e=[Ie.default.VIDEO,Ie.default.AUDIO,Ie.default.FRAGMENTED_TEXT].reduce(function(e,t){var n=g.getMediaInfoForType(r,t);return n&&e.push(n),e},[]).reduce(function(t,e){var n=g.getVoRepresentations(e);return n&&0<n.length&&n.forEach(function(e){e&&t.push(e);}),t},[]).reduce(function(e,t){var n=g.convertDataToRepresentationInfo(t);return n&&n.fragmentDuration&&!isNaN(n.fragmentDuration)&&e.push(n.fragmentDuration),e},[]);n=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e));}(),isFinite(n)?n:NaN)}catch(e){return NaN}}(e,t=e[0].manifestInfo),P.computeAndSetLiveDelay(n,t.DVRWindowSize,t.minBufferTime)),r=null,i=P.getStartTimeFromUriParameters(e[0].start,g.getIsDynamic()),isNaN(i)||(r=ne(i)),!r&&g.getIsDynamic()&&R.length&&(f.debug("Dynamic stream: Trying to find the correct starting period"),r=function(){try{var e=I.calcPresentationTimeFromWallTime(new Date,g.getRegularPeriods()[0]),t=P.getLiveDelay();return ne(e-t)}catch(e){return null}}()),oe(null!==r?r:R[0],null,NaN)),d.trigger(Ne.default.STREAMS_COMPOSED);}catch(e){A.error(new Ue.default(ke.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",p.getValue())),C=!0,Se();}}function fe(){var e=p.getValue();D&&(d.trigger(Ne.default.PROTECTION_CREATED,{controller:D,manifest:e}),D.setMediaElement(w.getElement()),a&&D.setProtectionData(a)),de();}function ce(s){s.error?(C=!0,Se()):function(){var e=s.manifest;g.updatePeriods(e);var t=g.getStreamsInfo(void 0,1)[0],n=g.getMediaInfoForType(t,Ie.default.VIDEO)||g.getMediaInfoForType(t,Ie.default.AUDIO),r=void 0;n&&(r=g.getUseCalculatedLiveEdgeTimeForMediaInfo(n))&&(f.debug("SegmentTimeline detected using calculated Live Edge Time"),H.update({streaming:{useManifestDateHeaderTimeSource:!1}}));var i=g.getUTCTimingSources(),a=!g.getIsDynamic()||r?i:i.concat(L.getUTCTimingSources()),o=S.isHTTPS(s.manifest.url);a.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===L.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(o?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),o?"https://":"http://"),f.debug("Matching default timing source protocol to manifest protocol: ",e.value));}),E.initialize(e),u.setConfig({dashMetrics:_,baseURLController:E}),u.initialize(a,H.get().streaming.useManifestDateHeaderTimeSource);}();}function he(){return !!b&&b.getHasVideoTrack()}function pe(){return !!b&&b.getHasAudioTrack()}function ge(t,n){n=n||new Date,re().forEach(function(e){e.finalisePlayList(n,t);}),_.addPlayList();}function _e(e){_.createPlaylistMetrics(1e3*P.getTime(),e);}function Ee(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN";}N=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),f.fatal("Video Element Error: "+t),e.error&&f.fatal(e.error),A.error(new Ue.default(e.error.code,t)),Se();}}function me(){return b?b.getStreamInfo():null}function ve(){if(!(n&&n.hasOwnProperty("load")&&I&&I.hasOwnProperty("initialize")&&I.hasOwnProperty("reset")&&I.hasOwnProperty("getClientTimeOffset")&&p&&A&&_&&P))throw new Error(Ie.default.MISSING_CONFIG_ERROR)}function ye(e){isNaN(e.newDuration)||le(e.newDuration);}function Te(){b=D=null,k=void 0,U=!(s=!(x=!(F=!(C=N=M=!(R=[]))))),G=0;}function Se(){ve(),u.reset(),ge(N||C?Ce.PlayListTrace.FAILURE_STOP_REASON:Ce.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=R?R.length:0;e<t;e++){R[e].reset(N);}!function(){d.off(Ne.default.PLAYBACK_TIME_UPDATED,V,this),d.off(Ne.default.PLAYBACK_SEEKING,W,this),d.off(Ne.default.PLAYBACK_ERROR,Ee,this),d.off(Ne.default.PLAYBACK_STARTED,X,this),d.off(Ne.default.PLAYBACK_PAUSED,Q,this),d.off(Ne.default.PLAYBACK_ENDED,ie,this),d.off(Ne.default.MANIFEST_UPDATED,ce,this),d.off(Ne.default.BUFFERING_COMPLETED,J,this),d.off(Ne.default.STREAM_BUFFERING_COMPLETED,ee,this),d.off(Ne.default.MANIFEST_VALIDITY_CHANGED,ye,this),d.off(Ne.default.TIME_SYNCHRONIZATION_COMPLETED,fe,this),d.off(Ne.default.WALLCLOCK_TIME_UPDATED,z,this),d.off(Le.default.METRIC_ADDED,Ae,this);}(),E.reset(),h.reset(),y.reset(),_.clearAllCurrentMetrics(),p.setValue(null),n.reset(),I.reset(),i.reset(),O&&(o.detachMediaSource(w),O=null),w=null,D&&(D.setMediaElement(null),a=D=null,p.getValue()&&d.trigger(Ne.default.PROTECTION_DESTROYED,{data:p.getValue().url})),d.trigger(Ne.default.STREAM_TEARDOWN_COMPLETE),Te();}function Ae(e){var t;e.metric===Re.default.DVR_INFO&&(t=pe()?Ie.default.AUDIO:Ie.default.VIDEO,e.mediaType===t&&o.setSeekable(O,e.value.range.start,e.value.range.end));}return e={initialize:function(e,t){ve(),s=e,a=t,I.initialize(),(h=(0, De.default)(l).create()).setConfig({manifestModel:p,adapter:g,manifestLoader:n,errHandler:A,settings:H}),h.initialize(),(y=(0, Be.default)(l).getInstance()).setConfig({manifestUpdater:h,playbackController:P}),y.start(),function(){d.on(Ne.default.PLAYBACK_TIME_UPDATED,V,this),d.on(Ne.default.PLAYBACK_SEEKING,W,this),d.on(Ne.default.PLAYBACK_ERROR,Ee,this),d.on(Ne.default.PLAYBACK_STARTED,X,this),d.on(Ne.default.PLAYBACK_PAUSED,Q,this),d.on(Ne.default.PLAYBACK_ENDED,ie,this),d.on(Ne.default.MANIFEST_UPDATED,ce,this),d.on(Ne.default.BUFFERING_COMPLETED,J,this),d.on(Ne.default.STREAM_BUFFERING_COMPLETED,ee,this),d.on(Ne.default.MANIFEST_VALIDITY_CHANGED,ye,this),d.on(Ne.default.TIME_SYNCHRONIZATION_COMPLETED,fe,this),d.on(Ne.default.WALLCLOCK_TIME_UPDATED,z,this),d.on(Le.default.METRIC_ADDED,Ae,this);}();},getActiveStreamInfo:me,hasVideoTrack:he,hasAudioTrack:pe,switchToVideoElement:function(e){b&&(P.initialize(me()),se(e,!1,!0,!1));},getStreamById:function(t){return R.filter(function(e){return e.getId()===t})[0]},getStreamForTime:ne,getTimeRelativeToStreamId:function(e,t){for(var n=null,r=0,i=0,a=null,o=0;o<R.length;o++){if(i=(n=R[o]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a);}return null},load:function(e){ve(),n.load(e);},loadWithManifest:function(e){!function(){if(!h||!h.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),h.setManifest(e);},getActiveStreamProcessors:re,setConfig:function(e){e&&(e.capabilities&&(c=e.capabilities),e.manifestLoader&&(n=e.manifestLoader),e.manifestModel&&(p=e.manifestModel),e.mediaPlayerModel&&(L=e.mediaPlayerModel),e.protectionController&&(D=e.protectionController),e.adapter&&(g=e.adapter),e.dashMetrics&&(_=e.dashMetrics),e.errHandler&&(A=e.errHandler),e.timelineConverter&&(I=e.timelineConverter),e.videoModel&&(w=e.videoModel),e.playbackController&&(P=e.playbackController),e.abrController&&(m=e.abrController),e.mediaController&&(v=e.mediaController),e.textController&&(T=e.textController),e.settings&&(H=e.settings),e.baseURLController&&(E=e.baseURLController));},setProtectionData:function(e){a=e;},reset:Se},f=(0, Oe.default)(l).getInstance().getLogger(e),u=(0, xe.default)(l).getInstance(),o=(0, Fe.default)(l).getInstance(),i=(0, we.default)(l).getInstance(),S=(0, Pe.default)(l).getInstance(),Te(),e}a.__dashjs_factory_name="StreamController",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{101:101,105:105,108:108,109:109,115:115,118:118,122:122,213:213,220:220,225:225,243:243,45:45,46:46,47:47,51:51,54:54,99:99}],122:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var S=r(e(225)),A=e(241),I=r(e(46)),R=r(e(54)),b=r(e(51)),i=r(e(47)),D=r(e(45)),M=r(e(220));function a(){var e=this.context,r=(0, I.default)(e).getInstance(),c=(0, M.default)(e).getInstance(),t=void 0,o=void 0,n=void 0,i=void 0,s=void 0,u=void 0,a=void 0,h=void 0;function l(e){i=e;}function d(e){n=e;}function f(e){var t,n,r,i=Date.parse(e);return isNaN(i)&&(n=t=void 0,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),i=new Date(t).getTime()),i}function p(e){return Date.parse(e)}function g(e){return Date.parse(e)}function _(e,t,n){n();}function E(e,t,n){var r=f(e);isNaN(r)?n():t(r);}function m(n,e,r,t,i){var a,o,s,u=!1,l=new XMLHttpRequest,d=i?A.HTTPRequest.HEAD:A.HTTPRequest.GET,f=e.match(/\S+/g);e=f.shift(),a=function(){u||(u=!0,f.length?m(n,f.join(" "),r,t,i):t());},o=function(){var e=void 0,t=void 0;200===l.status&&(e=i?l.getResponseHeader("Date"):l.response,t=n(e),isNaN(t)||(r(t),u=!0));},!c.isRelative(e)||(s=h.resolve())&&(e=c.resolve(e,s.url)),l.open(d,e),l.timeout=5e3,l.onload=o,l.onloadend=a,l.send();}function v(e,t,n){m(g,e,t,n,!0);}function y(){var e=a.getLatestMPDRequestHeaderValueByID("Date"),t=null!==e?new Date(e).getTime():Number.NaN;isNaN(t)?T(!0):(d(t-(new Date).getTime()),T(!1,t/1e3,n));}function T(e,t,n){l(!1),r.trigger(R.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new S.default(b.default.TIME_SYNC_FAILED_ERROR_CODE,b.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null});}return t={initialize:function(e,t){s=t,n=0,i=!1,u={"urn:mpeg:dash:utc:http-head:2014":v,"urn:mpeg:dash:utc:http-xsdate:2014":m.bind(null,f),"urn:mpeg:dash:utc:http-iso:2014":m.bind(null,p),"urn:mpeg:dash:utc:direct:2014":E,"urn:mpeg:dash:utc:http-head:2012":v,"urn:mpeg:dash:utc:http-xsdate:2012":m.bind(null,f),"urn:mpeg:dash:utc:http-iso:2012":m.bind(null,p),"urn:mpeg:dash:utc:direct:2012":E,"urn:mpeg:dash:utc:http-ntp:2014":_,"urn:mpeg:dash:utc:ntp:2014":_,"urn:mpeg:dash:utc:sntp:2014":_},i||function e(t,n){var r=n||0;var i=t[r];var a=function(e,t){var n=!e||!t;n&&s?y():T(n,e,t);};l(!0);i?u.hasOwnProperty(i.schemeIdUri)?u[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;d(n),o.info("Local time: "+new Date(t)),o.info("Server time: "+new Date(e)),o.info("Server Time - Local Time (ms): "+n),a(e,n);},function(){e(t,r+1);}):e(t,r+1):(d(0),a());}(e);},getOffsetToDeviceTimeMs:function(){return n},setConfig:function(e){e&&(e.dashMetrics&&(a=e.dashMetrics),e.baseURLController&&(h=e.baseURLController));},reset:function(){l(!1);}},o=(0, D.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="TimeSyncController";var o=i.default.getSingletonFactory(a);o.HTTP_TIMEOUT_MS=5e3,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{220:220,225:225,241:241,45:45,46:46,47:47,51:51,54:54}],123:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(107)),g=r(e(46)),_=r(e(54)),i=r(e(47)),E=r(e(3)),m=r(e(220)),v=r(e(61)),y="onLoad";function a(e){e=e||{};var t=this.context,i=(0, g.default)(t).getInstance(),s=(0, m.default)(t).getInstance(),n=void 0,r=void 0,u=void 0,l=void 0,a=void 0,d=void 0;function o(e,t,n){var r={},i=void 0,a=void 0;r.elements=e,r.type=t,r.resolveType=n,0===r.elements.length&&c(r);for(var o=0;o<r.elements.length;o++)i=r.elements[o],a=s.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,d.load(a,i,r);}function f(e){var t,n=void 0,r="",n=e.element,i=e.resolveObject;n.resolvedContent&&((t=0)===n.resolvedContent.indexOf("<?xml")&&(t=n.resolvedContent.indexOf("?>")+2),r=n.resolvedContent.substr(0,t)+"<response>"+n.resolvedContent.substr(t)+"</response>",n.resolvedContent=a.xml_str2json(r)),function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return !1;return !0}(i)&&c(i);}function c(e){var t=[],n=void 0,r=void 0;if(!function(e){var t=[],n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;for(a=e.elements.length-1;0<=a;a--){if(n=e.elements[a],r=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(o=0;o<n.resolvedContent[r].length;o++)i=n.resolvedContent[r][o],t.push(i);}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[r].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[r].splice(n.index+s,0,t[s]);t=[];}0<e.elements.length&&u.run(l);}(e),"onActuate"===e.resolveType&&i.trigger(_.default.XLINK_READY,{manifest:l}),e.resolveType===y)switch(e.type){case v.default.PERIOD:for(n=0;n<l[v.default.PERIOD+"_asArray"].length;n++)(r=l[v.default.PERIOD+"_asArray"][n]).hasOwnProperty(v.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(h(r[v.default.ADAPTATION_SET+"_asArray"],r,v.default.ADAPTATION_SET,y))),r.hasOwnProperty(v.default.EVENT_STREAM+"_asArray")&&(t=t.concat(h(r[v.default.EVENT_STREAM+"_asArray"],r,v.default.EVENT_STREAM,y)));o(t,v.default.ADAPTATION_SET,y);break;case v.default.ADAPTATION_SET:i.trigger(_.default.XLINK_READY,{manifest:l});}}function h(e,t,n,r){for(var i=[],a=void 0,o=void 0,s=void 0,o=e.length-1;0<=o;o--)(a=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===r&&(s={url:a["xlink:href"],parentElement:t,type:n,index:o,resolveType:r,originalContent:a,resolvedContent:null,resolved:!1},i.push(s));return i}return n={resolveManifestOnLoad:function(e){a=new E.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),o(h((l=e).Period_asArray,l,v.default.PERIOD,y),v.default.PERIOD,y);},setMatchers:function(e){e&&(r=e);},setIron:function(e){e&&(u=e);},reset:function(){i.off(_.default.XLINK_ELEMENT_LOADED,f,n),d&&(d.reset(),d=null);}},i.on(_.default.XLINK_ELEMENT_LOADED,f,n),d=(0, p.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),n}a.__dashjs_factory_name="XlinkController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{107:107,220:220,3:3,46:46,47:47,54:54,61:61}],124:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(138)),a=r(e(125)),o=r(e(126)),s=r(e(131)),u=r(e(136));function l(){var t=this.context;return {createMetricsReporting:function(e){return (0, i.default)(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}),(0, o.default)(t).create(e)},getReportingFactory:function(){return (0, u.default)(t).getInstance()},getMetricsHandlerFactory:function(){return (0, s.default)(t).getInstance()}}}l.__dashjs_factory_name="MetricsReporting";var d=dashjs.FactoryMaker.getClassFactory(l);d.events=a.default,dashjs.FactoryMaker.updateClassFactory(l.__dashjs_factory_name,d),n.default=d,t.exports=n.default;},{125:125,126:126,131:131,136:136,138:138}],125:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{55:55}],126:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(127)),u=r(e(140)),l=r(e(125));function i(i){i=i||{};var a={},o=this.context,t=i.eventBus,e=i.events;function n(e){var r;e.error||(r=Object.keys(a),(0, u.default)(o).getInstance({adapter:i.adapter,constants:i.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))r.splice(t,1);else try{var n=(0,s.default)(o).create(i);n.initialize(e),a[t]=n;}catch(e){}}),r.forEach(function(e){a[e].reset(),delete a[e];}),t.trigger(l.default.METRICS_INITIALISATION_COMPLETE));}function r(){Object.keys(a).forEach(function(e){a[e].reset();}),a={};}return t.on(e.MANIFEST_UPDATED,n),t.on(e.STREAM_TEARDOWN_COMPLETE,r),{reset:function(){t.off(e.MANIFEST_UPDATED,n),t.off(e.STREAM_TEARDOWN_COMPLETE,r);}}}i.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{125:125,127:127,140:140}],127:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(129)),u=r(e(130)),l=r(e(128));function i(t){t=t||{};var n=void 0,r=void 0,i=void 0,a=this.context;function o(){n&&n.reset(),r&&r.reset(),i&&i.reset();}return {initialize:function(e){try{(i=(0,s.default)(a).create({mediaElement:t.mediaElement})).initialize(e.Range),(r=(0,u.default)(a).create({debug:t.debug,metricsConstants:t.metricsConstants})).initialize(e.Reporting,i),(n=(0,l.default)(a).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,r);}catch(e){throw o(),e}},reset:o}}i.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{128:128,129:129,130:130}],128:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(131),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var o=[],t=void 0,n=this.context,r=e.eventBus,i=e.events,s=(0, a.default)(n).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(t){o.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType);});}return t={initialize:function(e,a){e.split(",").forEach(function(e,t,n){var r,i;-1===e.indexOf("(")||-1!==e.indexOf(")")||(i=n[t+1])&&-1===i.indexOf("(")&&-1!==i.indexOf(")")&&(e+=","+i,delete n[t+1]),(r=s.create(e,a))&&o.push(r);}),r.on(i.METRIC_ADDED,u,t),r.on(i.METRIC_UPDATED,u,t);},reset:function(){r.off(i.METRIC_ADDED,u,t),r.off(i.METRIC_UPDATED,u,t),o.forEach(function(e){return e.reset()}),o=[];}}}o.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default;},{131:131}],129:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(208),u=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var t,a=!1,n=this.context,o=void 0,s=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;o.add(t,n);}),a=!!e[0]._useWallClockTime);},reset:function(){o.clear();},isEnabled:function(){var e,t=o.length;if(!t)return !0;e=a?(new Date).getTime()/1e3:s.currentTime;for(var n=0;n<t;n+=1){var r=o.start(n),i=o.end(n);if(r<=e&&e<i)return !0}return !1}},o=(0, u.default)(n).create(),t}a.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default;},{208:208}],130:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(136),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var r=[],i=(0, a.default)(this.context).getInstance(e);return {initialize:function(e,n){e.some(function(e){var t=i.create(e,n);if(t)return r.push(t),!0});},reset:function(){r.forEach(function(e){return e.reset()}),r=[];},report:function(t,n){r.forEach(function(e){return e.report(t,n)});}}}o.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default;},{136:136}],131:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(132)),d=r(e(133)),f=r(e(135)),c=r(e(134));function i(i){var e=void 0,a=(i=i||{}).debug?i.debug.getLogger(e):{},o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,u={BufferLevel:l.default,DVBErrors:d.default,HttpList:f.default,PlayList:c.default,RepSwitchList:c.default,TcpList:c.default};return e={create:function(e,t){var n,r=e.match(o);if(r){try{(n=u[r[1]](s).create({eventBus:i.eventBus,metricsConstants:i.metricsConstants})).initialize(r[1],t,r[3],r[5]);}catch(e){n=null,a.error("MetricsHandlerFactory: Could not create handler for type "+r[1]+" with args "+r[3]+", "+r[5]+" ("+e.message+")");}return n}},register:function(e,t){u[e]=t;},unregister:function(e){delete u[e];}}}i.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default;},{132:132,133:133,134:134,135:135}],132:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(139),f=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var r=void 0,i=void 0,a=void 0,o=void 0,t=void 0,n=this.context,s=(0, f.default)(n).getInstance(),u=[],l=e.metricsConstants;function d(){var e=function(){try{return Object.keys(u).map(function(e){return u[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&t!==e.t&&(t=e.t,r.report(a,e));}return {initialize:function(e,t,n){t&&(i=s.validateN(n),r=t,a=s.reconstructFullMetricName(e,n),o=setInterval(d,i));},reset:function(){clearInterval(o),i=0,t=r=o=null;},handleNewMetric:function(e,t,n){e===l.BUFFER_LEVEL&&(u[n]=t);}}}a.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default;},{139:139}],133:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(125),o=(r=i)&&r.__esModule?r:{default:r};n.default=dashjs.FactoryMaker.getClassFactory(function(e){var n=void 0,r=(e=e||{}).eventBus,i=e.metricsConstants;function a(){r.off(o.default.METRICS_INITIALISATION_COMPLETE,a,this),r.trigger(o.default.BECAME_REPORTING_PLAYER);}return {initialize:function(e,t){t&&(n=t,r.on(o.default.METRICS_INITIALISATION_COMPLETE,a,this));},reset:function(){n=null;},handleNewMetric:function(e,t){e===i.DVB_ERRORS&&n&&n.report(e,t);}}}),t.exports=n.default;},{125:125}],134:[function(e,t,n){function r(){var n=void 0,r=void 0;return {initialize:function(e,t){n=e,r=t;},reset:function(){r=null,n=void 0;},handleNewMetric:function(e,t){e===n&&r&&r.report(n,t);}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default;},{}],135:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(139),f=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,n=[],l=(0, f.default)(this.context).getInstance(),r=e.metricsConstants;function d(){n.length&&i&&i.report(s,n),n=[];}return {initialize:function(e,t,n,r){t&&(a=l.validateN(n),i=t,r&&r.length&&(o=r),s=l.reconstructFullMetricName(e,n,r),u=setInterval(d,a));},reset:function(){clearInterval(u),n=[],i=o=a=u=null;},handleNewMetric:function(e,t){e===r.HTTP_REQUEST&&(o&&o!==t.type||n.push(t));}}}a.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default;},{139:139}],136:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(137),s=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var r={"urn:dvb:dash:reporting:2014":s.default},i=this.context,t=void 0,a=e.debug?e.debug.getLogger(t):{},o=e.metricsConstants;return t={create:function(t,e){var n=void 0;try{(n=r[t.schemeIdUri](i).create({metricsConstants:o})).initialize(t,e);}catch(e){n=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri "+t.schemeIdUri+" ("+e.message+")");}return n},register:function(e,t){r[e]=t;},unregister:function(e){delete r[e];}}}a.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default;},{137:137}],137:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(141)),p=r(e(142));function i(e){e=e||{};var t,n=this.context,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=[],d=e.metricsConstants;function f(e,t,n){function r(){var e=l.indexOf(i);-1!==e&&(l.splice(e,1),200<=i.status&&i.status<300?t&&t():n&&n());}var i=new XMLHttpRequest;l.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send();}catch(e){i.onerror();}}function c(){o=a=!1,u=s=null;}return t={report:function(n,e){Array.isArray(e)||(e=[e]),o&&u.isEnabled()&&e.forEach(function(e){var t=r.serialise(e);n!==d.DVB_ERRORS&&(t="metricname="+n+"&"+t),f(t=s+"?"+t,null,function(){o=!1;});});},initialize:function(e,t){var n=void 0;if(u=t,!(s=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");a||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=i.random())&&(o=!0),a=!0);},reset:function(){c();}},r=(0, h.default)(n).getInstance(),i=(0, p.default)(n).getInstance(),c(),t}i.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{141:141,142:142}],138:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(143)),g=r(e(125));function i(e){var t=void 0,r=void 0,n=(e=e||{}).eventBus,i=e.dashMetrics,a=e.metricsConstants,o=e.events;function s(e){var t=new p.default;if(r){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=r.originalUrl||r.url),t.terror||(t.terror=new Date),i.addDVBErrors(t);}}function u(e){e.error||(r=e.manifest);}function l(e){s({errorcode:p.default.BASE_URL_CHANGED,servicelocation:e.entry});}function d(){s({errorcode:p.default.BECAME_REPORTER});}function f(e){switch(e.metric){case a.HTTP_REQUEST:(0===(t=e.value).responsecode||400<=t.responsecode||t.responsecode<100||600<=t.responsecode)&&s({errorcode:t.responsecode||p.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation});}var t;}function c(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=p.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=p.default.CORRUPT_MEDIA_OTHER;break;default:return}s({errorcode:t});}function h(){n.on(o.MANIFEST_UPDATED,u,t),n.on(o.SERVICE_LOCATION_BLACKLIST_CHANGED,l,t),n.on(o.METRIC_ADDED,f,t),n.on(o.METRIC_UPDATED,f,t),n.on(o.PLAYBACK_ERROR,c,t),n.on(g.default.BECAME_REPORTING_PLAYER,d,t);}return t={initialise:h,reset:function(){n.off(o.MANIFEST_UPDATED,u,t),n.off(o.SERVICE_LOCATION_BLACKLIST_CHANGED,l,t),n.off(o.METRIC_ADDED,f,t),n.off(o.METRIC_UPDATED,f,t),n.off(o.PLAYBACK_ERROR,c,t),n.off(g.default.BECAME_REPORTING_PLAYER,d,t);}},h(),t}i.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default;},{125:125,143:143}],139:[function(e,t,n){function r(){return {reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],140:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(144)),c=r(e(145)),a=r(e(146));function o(e){var d=(e=e||{}).adapter,f=e.constants;return {getMetrics:function(l){var t=[];return l&&l.Metrics_asArray&&l.Metrics_asArray.forEach(function(e){var s=new i.default,u=d.getIsDynamic(l);e.hasOwnProperty("metrics")&&(s.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t,n,r,i,a,o=new c.default;o.starttime=(t=l,n=e,i=r=void 0,a=0,u?a=d.getAvailabilityStartTime(t)/1e3:(r=d.getRegularPeriods(t)).length&&(a=r[0].start),i=a,n&&n.hasOwnProperty(f.START_TIME)&&(i+=n.starttime),i),e.hasOwnProperty("duration")?o.duration=e.duration:o.duration=d.getDuration(l),o._useWallClockTime=u,s.Range.push(o);}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(e){var t=new a.default;if(e.hasOwnProperty(f.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);s.Reporting.push(t);}}),t.push(s)));}),t}}}o.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default;},{144:144,145:145,146:146}],141:[function(e,t,n){function r(){return {serialise:function n(e){var t=[],r=[],i=void 0,a=void 0;for(i in e)if(e.hasOwnProperty(i)&&0!==i.indexOf("_")){if(null==(a=e[i])&&(a=""),Array.isArray(a)){if(!a.length)continue;r=[],a.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);r.push(t?e:n(e));}),a=r.map(encodeURIComponent).join(",");}else "string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));t.push(i+"="+a);}return t.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],142:[function(e,t,n){function r(){var e,r=window.crypto||window.msCrypto,t=Uint32Array,i=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,n=10,a=void 0,o=void 0;function s(){r&&(a=a||new t(n),r.getRandomValues(a),o=0);}return e={random:function(e,t){var n=void 0;return e=e||0,t=t||1,r?(o===a.length&&s(),n=a[o]/i,o+=1):n=Math.random(),n*(t-e)+e}},s(),e}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],143:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null;}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",n.default=r,t.exports=n.default;},{}],144:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[];},t.exports=n.default;},{}],145:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1;},t.exports=n.default;},{}],146:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value="";},t.exports=n.default;},{}],147:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.data={baseUrls:e||null,selectedIdx:t||NaN},this.children=[];}var l=r(e(216)),i=r(e(47));function a(){var e,i=void 0,a=void 0,t=this.context,o=(0, l.default)(t).getInstance();function s(e,t,n){var r=a.getBaseURLsFromElement(n);e[t]?o.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=NaN):e[t]=new u(r);}function n(e){!function(){if(!a||!a.hasOwnProperty("getBaseURLsFromElement")||!a.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var t=a.getBaseURLsFromElement(e);o.areEqual(t,i.data.baseUrls)||(i.data.baseUrls=t,i.data.selectedIdx=NaN),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,r){s(i.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){s(i.children[r].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach(function(e,t){s(i.children[r].children[n].children,t,e);});});});}function r(){i=new u;}return e={reset:r,update:function(e){n(e);},getForPath:function(e){var t=i,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data);}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){var r=e||i;n(r.data),r.children&&r.children.forEach(function(e){return t(n,e)});}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN);});},setConfig:function(e){e.adapter&&(a=e.adapter);}},r(),e}a.__dashjs_factory_name="BaseURLTreeModel",n.default=i.default.getClassFactory(a),t.exports=n.default;},{216:216,47:47}],148:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(46)),g=r(e(101)),i=r(e(47)),_=r(e(45)),E=r(e(48)),m=e(241),v=r(e(65)),y=r(e(49)),a=e(50),T="dash.js-v"+(0, a.getVersionString)(),S=null,A=1,I=2,R=3,b=4,D="m",M="a",N="v",C="i",O="c",w="d",P="s",L="v",x="l";function o(){var r=void 0,e=void 0,u=void 0,l=void 0,d=void 0,n=void 0,t=this.context,i=(0, p.default)(t).getInstance(),a=(0, E.default)(t).getInstance();function o(){u={pr:1,nor:null,st:null,sf:null,sid:""+y.default.generateUuid(),bs:{audio:A,video:A},cid:null,did:T};}function f(){var e={v:1};return e.sid=a.get().streaming.cmcd.sid?a.get().streaming.cmcd.sid:u.sid,e.cid=a.get().streaming.cmcd.cid?a.get().streaming.cmcd.cid:u.cid,e.did=a.get().streaming.cmcd.did?a.get().streaming.cmcd.did:u.did,e.sid='"'+e.sid+'"',e.cid='"'+e.cid+'"',e.did='"'+e.did+'"',isNaN(u.pr)||1===u.pr||null===u.pr||(e.pr=u.pr),u.st&&(e.st=u.st),u.sf&&(e.sf=u.sf),e}function s(e){try{u.pr=e.playbackRate;}catch(e){}}function c(e){try{var t=r.getIsDynamic(e.data)?""+x:""+L,n=e.protocol&&"MSS"===e.protocol?""+P:""+w;u.st=t,u.sf=n;}catch(e){}}function h(e){try{if(e.state&&e.mediaType){var t=null;switch(e.state){case g.default.BUFFER_LOADED:t=S;break;case g.default.BUFFER_EMPTY:n.isSeeking()&&(t=I),t=b;}u.bs[e.mediaType]=t;}}catch(e){}}return e={getQueryParameter:function(e){try{return a.get().streaming.cmcd&&a.get().streaming.cmcd.enabled?{key:"Common-Media-Client-Data",value:function(i){try{var e=function(){if(!i)return {v:null};var e=Object.keys(i),r=e.length;return {v:e.reduce(function(e,t,n){return e+=t+"="+i[t],n<r-1&&(e+=","),e},"")}}();if("object"==typeof e)return e.v}catch(e){return null}}(function(e){try{return e.type===m.HTTPRequest.MPD_TYPE?(function(e){try{u.cid=""+y.default.generateHashCode(e.url);}catch(e){}}(e),function(){var e=f();return e.ot=""+D,e}()):e.type===m.HTTPRequest.MEDIA_SEGMENT_TYPE?function(e){var t=f(),n=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(e),r=function(e){try{return isNaN(e.duration)?null:Math.round(1e3*e.duration)}catch(e){return null}}(e),i="video"===e.mediaType?""+N:"audio"===e.mediaType?""+M:"fragmentedText"===e.mediaType?""+O:null,a=function(e){try{return Math.round(l.getThroughputHistory().getSafeAverageThroughput(e))}catch(e){return null}}(e.mediaType),o=function(e){try{var t=u.pr,n=d.getCurrentBufferLevel(e);return isNaN(t)||isNaN(n)?null:parseInt(n/t*1e3)}catch(e){return null}}(e.mediaType),s=function(e){try{var t=e.mediaType;if(null!==u.bs[t])return u.bs[t];var n=d.getCurrentBufferLevel(t),r=e.duration;return n<r?R:S}catch(e){}}(e);n&&(t.br=n);i&&(t.ot=i);isNaN(r)||(t.d=r);isNaN(a)||(t.mtp=a);isNaN(o)||(t.dl=o);isNaN(s)||null===s||(t.bs=s);return t}(e):e.type===m.HTTPRequest.INIT_SEGMENT_TYPE?function(){var e=f();return e.ot=""+C,e}():null}catch(e){return null}}(e))}:null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(l=e.abrController),e.dashMetrics&&(d=e.dashMetrics),e.playbackController&&(n=e.playbackController));},reset:function(){i.off(g.default.PLAYBACK_RATE_CHANGED,s,this),i.off(g.default.MANIFEST_LOADED,c,this),i.off(g.default.BUFFER_LEVEL_STATE_CHANGED,h,e),o();},initialize:function(){i.on(g.default.PLAYBACK_RATE_CHANGED,s,e),i.on(g.default.MANIFEST_LOADED,c,e),i.on(g.default.BUFFER_LEVEL_STATE_CHANGED,h,e);}},(0, _.default)(t).getInstance().getLogger(e),r=(0, v.default)(t).getInstance(),o(),e}o.__dashjs_factory_name="CmcdModel",n.default=i.default.getSingletonFactory(o),t.exports=n.default;},{101:101,241:241,45:45,46:46,47:47,48:48,49:49,50:50,65:65}],149:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),y=r(e(227)),T="loading",S="executed";function a(e){var t,n=(e=e||{}).eventBus,r=e.events,i=e.dashMetrics,a=e.fragmentLoader,o=e.debug,s=e.streamId,u=void 0,l=void 0,d=void 0;function f(s){var u;return !!s&&(u=!1,l.some(function(e){if(a=s,o=e,!isNaN(a.index)&&a.startTime===o.startTime&&a.adaptationIndex===o.adaptationIndex&&a.type===o.type||(r=s,i=e,isNaN(r.index)&&isNaN(i.index)&&r.quality===i.quality)||(n=e,(t=s).action===y.default.ACTION_COMPLETE&&t.action===n.action))return u=!0;var t,n,r,i,a,o;}),u)}function c(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function h(n){l=l.filter(function(e){var t=c(e);return isNaN(e.startTime)||void 0!==n&&e.startTime>=n-t});}function p(n,r){r<=n+.5||(l=l.filter(function(e){var t=c(e);return isNaN(e.startTime)||e.startTime>=r-t||isNaN(e.duration)||e.startTime+e.duration<=n+t}));}function g(e,t){i.addSchedulingInfo(e,t),i.addRequestsQueue(e.mediaType,d,l);}function _(e){e.sender===a&&(d.splice(d.indexOf(e.request),1),e.response&&!e.error&&l.push(e.request),g(e.request,e.error?"failed":S),n.trigger(r.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}));}function E(e){e.sender===a&&n.trigger(r.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this});}function m(e){e.sender===a&&n.trigger(r.FRAGMENT_LOADING_ABANDONED,{streamId:s,request:e.request,mediaType:e.mediaType});}function v(){l=[],d=[];}return t={getRequests:function(n){var e=n?n.state instanceof Array?n.state:[n.state]:[],r=[];return e.forEach(function(e){var t=function(e){var t=void 0;switch(e){case T:t=d;break;case S:t=l;break;default:t=[];}return t}(e);r=r.concat(function(e,n){if(n.hasOwnProperty("time"))return [function(e,t,n){for(var r=e.length-1;0<=r;r--){var i=e[r],a=i.startTime,o=a+i.duration;if(n=isNaN(n)?c(i):n,!isNaN(a)&&!isNaN(o)&&a<=t+n&&t-n<o||isNaN(a)&&isNaN(t))return i}return null}(e,n.time,n.threshold)];return e.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return !1;return !0})}(t,n));}),r},isFragmentLoaded:f,isFragmentLoadedOrPending:function(e){var t=!1,n=0,r=void 0;if(!(t=f(e)))for(n=0;n<d.length;n++)r=d[n],e.url===r.url&&e.startTime===r.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:h,removeExecutedRequestsAfterTime:function(t){l=l.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime<t});},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)p(n,e.start(r)),n=e.end(r);0<t&&p(n,t);}else h();},abortRequests:function(){a.abort(),d=[];},executeRequest:function(e){switch(e.action){case y.default.ACTION_COMPLETE:l.push(e),g(e,S),u.debug("STREAM_COMPLETED"),n.trigger(r.STREAM_COMPLETED,{request:e});break;case y.default.ACTION_DOWNLOAD:g(e,T),d.push(e),t=e,n.trigger(r.FRAGMENT_LOADING_STARTED,{streamId:s,request:t}),a.load(t);break;default:u.warn("Unknown request action.");}var t;},reset:function(){n.off(r.LOADING_COMPLETED,_,this),n.off(r.LOADING_DATA_PROGRESS,E,this),n.off(r.LOADING_ABANDONED,m,this),a&&a.reset(),v();},addExecutedRequest:function(e){l.push(e);}},u=o.getLogger(t),v(),n.on(r.LOADING_COMPLETED,_,t),n.on(r.LOADING_DATA_PROGRESS,E,t),n.on(r.LOADING_ABANDONED,m,t),t}a.__dashjs_factory_name="FragmentModel";var o=i.default.getClassFactory(a);o.FRAGMENT_MODEL_LOADING=T,o.FRAGMENT_MODEL_EXECUTED=S,o.FRAGMENT_MODEL_CANCELED="canceled",o.FRAGMENT_MODEL_FAILED="failed",i.default.updateClassFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{227:227,47:47}],150:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),a=r(e(54)),o=r(e(47));function s(){var e=this.context,t=(0, i.default)(e).getInstance(),n=void 0;return {getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(a.default.MANIFEST_LOADED,{data:e});}}}s.__dashjs_factory_name="ManifestModel",n.default=o.default.getSingletonFactory(s),t.exports=n.default;},{46:46,47:47,54:54}],151:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(96)),i=r(e(47)),c=r(e(108)),h=r(e(189)),p=r(e(48)),g=e(218);function a(){var e,i=void 0,r=void 0,a=void 0,t={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"},n=this.context,o=(0, p.default)(n).getInstance();function s(e){for(var t=void 0,t=0;t<a.length;t++)if(a[t].rulename===e)return t;return -1}function u(){return o.get().streaming.lowLatencyEnabled?o.get().streaming.liveDelay||3:o.get().streaming.liveDelay}function l(e,t){d(e,t);var n=new f.default;n.schemeIdUri=e,n.value=t,i.push(n);}function d(n,r){(0, g.checkParameterType)(n,"string"),(0, g.checkParameterType)(r,"string"),i.forEach(function(e,t){e.schemeIdUri===n&&e.value===r&&i.splice(t,1);});}return e={getABRCustomRules:function(){return a},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==h.default.ABANDON_FRAGMENT_RULES&&e!==h.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw c.default.BAD_ARGUMENT_ERROR;var r=s(t);-1===r?a.push({type:e,rulename:t,rule:n}):(a[r].type=e,a[r].rule=n);},removeABRCustomRule:function(e){var t;e?-1!==(t=s(e))&&a.splice(t,1):a=[];},getStableBufferTime:function(){if(o.get().streaming.lowLatencyEnabled)return .6*u();var e=o.get().streaming.stableBufferTime;return -1<e?e:o.get().streaming.fastSwitchEnabled?20:12},getRetryAttemptsForType:function(e){var t=isNaN(o.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:o.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return o.get().streaming.lowLatencyEnabled?o.get().streaming.retryAttempts[e]*t:o.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(o.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:o.get().streaming.retryIntervals.lowLatencyReductionFactor;return o.get().streaming.lowLatencyEnabled?o.get().streaming.retryIntervals[e]/t:o.get().streaming.retryIntervals[e]},getLiveDelay:u,getLiveCatchupLatencyThreshold:function(){try{var e=o.get().streaming.liveCatchupLatencyThreshold,t=u();if(null!==e&&!isNaN(e))return Math.max(e,t);var n=o.get().streaming.liveCatchUpMinDrift,r=!isNaN(t)&&t?isNaN(n)?u():o.get().streaming.liveCatchUpMinDrift+u():NaN;return r&&!isNaN(r)?2*r:NaN}catch(e){return NaN}},addUTCTimingSource:l,removeUTCTimingSource:d,getUTCTimingSources:function(){return i},clearDefaultUTCTimingSources:function(){i=[];},restoreDefaultUTCTimingSources:function(){l(t.scheme,t.value);},setXHRWithCredentialsForType:function t(e,n){e?r[e]=!!n:Object.keys(r).forEach(function(e){t(e,n);});},getXHRWithCredentialsForType:function(e){var t=r[e];return void 0===t?r.default:t},getDefaultUtcTimingSource:function(){return t},reset:function(){}},r={default:!(i=[])},a=[],e}a.__dashjs_factory_name="MediaPlayerModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,189:189,218:218,47:47,48:48,96:96}],152:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(108)),m=r(e(109)),d=r(e(231)),v=e(241),p=r(e(244)),g=r(e(237)),_=r(e(238)),y=r(e(239)),T=r(e(240)),S=e(242),A=r(e(246)),I=r(e(46)),R=r(e(245)),b=r(e(54)),i=r(e(47));function a(e){var t,i=(e=e||{}).settings,n=this.context,r=(0, I.default)(n).getInstance(),a=void 0;function o(){r.trigger(b.default.METRICS_CHANGED);}function s(e){r.trigger(b.default.METRIC_CHANGED,{mediaType:e}),o();}function l(e,t,n){r.trigger(b.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),s(e);}function f(e,t,n){r.trigger(b.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),s(e);}function u(e,t){var n=null;return e&&(a.hasOwnProperty(e)?n=a[e]:t||(n=new d.default,a[e]=n)),n}function c(e,t,n){var r=u(e);null!==r&&(r[t].push(n),r[t].length>i.get().streaming.metricsMaxListDepth&&r[t].shift());}function E(e,t,n){c(e,t,n),f(e,t,n);}return t={clearCurrentMetricsForType:function(e){delete a[e],s(e);},clearAllCurrentMetrics:function(){a={},o();},getMetricsFor:u,addHttpRequest:function e(t,n,r,i,a,o,s,u,l,d,f,c,h,p,g){var _=new v.HTTPRequest;o&&o!==i&&(e(t,null,r,i,a,null,null,u,l,null,null,null,h,null,null),_.actualurl=o),_.tcpid=n,_.type=r,_.url=i,_.range=u,_.trequest=l,_.tresponse=d,_.responsecode=c,_._tfinish=f,_._stream=t,_._mediaduration=h,_._quality=a,_._responseHeaders=p,_._serviceLocation=s,g?g.forEach(function(e){var t,n,r,i,a;t=_,n=e.s,r=e.d,i=e.b,(a=new v.HTTPRequestTrace).s=n,a.d=r,a.b=i,t.trace.push(a),t.interval||(t.interval=0),t.interval+=r;}):(delete _.interval,delete _.trace),E(t,m.default.HTTP_REQUEST,_);},addRepresentationSwitch:function(e,t,n,r,i){var a=new p.default;a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,E(e,m.default.TRACK_SWITCH,a);},addBufferLevel:function(e,t,n){var r=new g.default;r.t=t,r.level=n,E(e,m.default.BUFFER_LEVEL,r);},addBufferState:function(e,t,n){var r=new _.default;r.target=n,r.state=t,E(e,m.default.BUFFER_STATE,r);},addDVRInfo:function(e,t,n,r){var i=new y.default;i.time=t,i.range=r,i.manifestInfo=n,E(e,m.default.DVR_INFO,i);},addDroppedFrames:function(e,t){var n=new T.default,r=u(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<r.length&&r[r.length-1]==n||E(e,m.default.DROPPED_FRAMES,n));},addSchedulingInfo:function(e,t,n,r,i,a,o,s,u){var l=new A.default;l.mediaType=e,l.t=t,l.type=n,l.startTime=r,l.availabilityStartTime=i,l.duration=a,l.quality=o,l.range=s,l.state=u,E(e,m.default.SCHEDULING_INFO,l);},addRequestsQueue:function(e,t,n){var r=new R.default;r.loadingRequests=t,r.executedRequests=n,u(e).RequestsQueue=r,f(e,m.default.REQUESTS_QUEUE,r);},addManifestUpdate:function(e,t,n,r,i,a,o,s,u,l){var d=new S.ManifestUpdate;d.mediaType=e,d.type=t,d.requestTime=n,d.fetchTime=r,d.availabilityStartTime=i,d.presentationStartTime=a,d.clientTimeOffset=o,d.currentTime=s,d.buffered=u,d.latency=l,c(h.default.STREAM,m.default.MANIFEST_UPDATE,d),f(e,m.default.MANIFEST_UPDATE,d);},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];l(e.mediaType,m.default.MANIFEST_UPDATE,e);}},addManifestUpdateStreamInfo:function(e,t,n,r,i){var a;e&&((a=new S.ManifestUpdateStreamInfo).id=t,a.index=n,a.start=r,a.duration=i,e.streamInfo.push(a),l(e.mediaType,m.default.MANIFEST_UPDATE_STREAM_INFO,e));},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,a,o,s){var u;e&&e.representationInfo&&((u=new S.ManifestUpdateRepresentationInfo).id=t,u.index=n,u.streamIndex=r,u.mediaType=i,u.startNumber=o,u.fragmentInfoType=s,u.presentationTimeOffset=a,e.representationInfo.push(u),l(e.mediaType,m.default.MANIFEST_UPDATE_TRACK_INFO,e));},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel;}):delete e.trace,E(h.default.STREAM,m.default.PLAY_LIST,e);},addDVBErrors:function(e){E(h.default.STREAM,m.default.DVB_ERRORS,e);}},a={},t}a.__dashjs_factory_name="MetricsModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,109:109,231:231,237:237,238:238,239:239,240:240,241:241,242:242,244:244,245:245,246:246,46:46,47:47,54:54}],153:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(236)),i=r(e(47));function a(){var u=void 0;return {initialize:function(e){if(u=new l.default,!e)return null;var t=e.indexOf("#");if(-1!==t)for(var n=e.substr(t+1).split("&"),r=0,i=n.length;r<i;++r){var a,o=n[r],s=o.indexOf("=");-1!==s&&(a=o.substring(0,s),u.hasOwnProperty(a)&&(u[a]=o.substr(s+1)));}},getURIFragmentData:function(){return u}}}a.__dashjs_factory_name="URIFragmentModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{236:236,47:47}],154:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),g=r(e(46)),_=r(e(54)),E=r(e(45));function a(){var e=void 0,t=void 0,o=void 0,n=void 0,r=void 0,i="element is not video or audio DOM type!",a=this.context,s=(0, g.default)(a).getInstance(),u=[];function l(){o&&(o.playbackRate=r||1,o.removeEventListener("canplay",l));}function d(e){o&&(o.readyState<=2&&0<e?o.addEventListener("canplay",l):o.playbackRate=e);}function f(){return 0<u.length}function c(){var e;o&&f()&&0===o.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),o.dispatchEvent(e));}function h(){return o?o.buffered:null}function p(e,t,n,r,i){if(o)for(var a=0;a<o.textTracks.length;a++)if(o.textTracks[a].kind===e&&(!t||o.textTracks[a].label==t)&&o.textTracks[a].language===n&&o.textTracks[a].isTTML===r&&o.textTracks[a].isEmbedded===i)return o.textTracks[a];return null}return e={initialize:function(){s.on(_.default.PLAYBACK_PLAYING,c,this);},setCurrentTime:function(t,e){if(o){if(o.currentTime==t)return;try{t=e?function(e){var t=h(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),o=t.end(i),s=Math.abs(a-e),u=Math.abs(o-e);if(a<=e&&e<=o)return e;s<r&&(r=s,n=a),u<r&&(r=u,n=o);}return n}(t):t,o.currentTime=t;}catch(e){0===o.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){o.currentTime=t;},400);}}},play:function(){var e;o&&(o.autoplay=!0,(e=o.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&s.trigger(_.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")");}));},isPaused:function(){return o?o.paused:null},pause:function(){o&&(o.pause(),o.autoplay=!1);},isSeeking:function(){return o?o.seeking:null},getTime:function(){return o?o.currentTime:null},getPlaybackRate:function(){return o?o.playbackRate:null},setPlaybackRate:d,getPlayedRanges:function(){return o?o.played:null},getEnded:function(){return o?o.ended:null},setStallState:function(e,t){(t?function(e){var t=void 0;if(null===e||o.seeking||-1!==u.indexOf(e))return;u.push(e),o&&1===u.length&&((t=document.createEvent("Event")).initEvent("waiting",!0,!1),r=o.playbackRate,d(0),o.dispatchEvent(t));}:function(e){var t=u.indexOf(e),n=void 0;if(null===e)return;-1!==t&&u.splice(t,1);o&&!1===f()&&0===o.playbackRate&&(d(r||1),o.paused||((n=document.createEvent("Event")).initEvent("playing",!0,!1),o.dispatchEvent(n)));})(e);},getElement:function(){return o},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw i;(o=e)&&(o.preload="auto");},setSource:function(e){o&&(e?o.src=e:(o.removeAttribute("src"),o.load()));},getSource:function(){return o?o.src:null},getTTMLRenderingDiv:function(){return n},setTTMLRenderingDiv:function(e){(n=e).style.position="absolute",n.style.display="flex",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.top=0,n.style.left=0;},getPlaybackQuality:function(){if(!o)return null;var e="webkitDroppedFrameCount"in o&&"webkitDecodedFrameCount"in o,t=null;return "getVideoPlaybackQuality"in o?t=o.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:o.webkitDroppedFrameCount,totalVideoFrames:o.webkitDroppedFrameCount+o.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){o&&o.addEventListener(e,t);},removeEventListener:function(e,t){o&&o.removeEventListener(e,t);},getReadyState:function(){return o?o.readyState:NaN},getBufferRange:h,getClientWidth:function(){return o?o.clientWidth:NaN},getClientHeight:function(){return o?o.clientHeight:NaN},getTextTracks:function(){return o?o.textTracks:[]},getTextTrack:p,addTextTrack:function(e,t,n,r,i){if(!o)return null;var a=p(e,t,n,r,i);return a||((a=o.addTextTrack(e,t,n)).isEmbedded=i,a.isTTML=r),a},appendChild:function(e){o&&(o.appendChild(e),void 0!==e.isTTML&&(o.textTracks[o.textTracks.length-1].isTTML=e.isTTML,o.textTracks[o.textTracks.length-1].isEmbedded=e.isEmbedded));},removeChild:function(e){o&&o.removeChild(e);},getVideoWidth:function(){return o?o.videoWidth:NaN},getVideoHeight:function(){return o?o.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var e=o.parentNode.host||o.parentNode;return e?o.getBoundingClientRect().top-e.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var e=o.parentNode.host||o.parentNode;return e?o.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},reset:function(){s.off(_.default.PLAYBACK_PLAYING,c,this);}},t=(0, E.default)(a).getInstance().getLogger(e),e}a.__dashjs_factory_name="VideoModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{45:45,46:46,47:47,54:54}],155:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var a=(e=e||{}).requestModifier,g=e.boxParser;function _(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e);});}function E(i,t){if(1<(i=i.filter(function(e){return e.bytes>t/4/i.length})).length){var e=(a=0,o=(i[i.length-1].ts-i[0].ts)/i.length,i.forEach(function(e,t){var n,r=i[t+1];r&&(n=r.ts-e.ts,a+=n<o?n:0);}),{v:a});if("object"==typeof e)return e.v}var a,o;return null}return {load:function(p){var e=new Date,t=p.request,n=new Headers;t.range&&n.append("Range","bytes="+t.range),t.requestStartDate||(t.requestStartDate=e),a&&a.modifyRequestHeader({setRequestHeader:function(e,t){n.append(e,t);}});var r=void 0;"function"==typeof window.AbortController&&(r=new AbortController,(p.abortController=r).signal.onabort=p.onabort);var i={method:p.method,headers:n,credentials:p.withCredentials?"include":void 0,signal:r?r.signal:void 0};fetch(p.url,i).then(function(e){p.response||(p.response={}),p.response.status=e.status,p.response.statusText=e.statusText,p.response.responseURL=e.url,e.ok||p.onerror();var t="",n=!0,r=!1,i=void 0;try{for(var a,o=e.headers.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s+": "+e.headers.get(s)+"\r\n";}}catch(e){r=!0,i=e;}finally{try{!n&&o.return&&o.return();}finally{if(r)throw i}}if(p.response.responseHeaders=t,!e.body)return e.arrayBuffer().then(function(e){var t={loaded:(p.response.response=e).byteLength,total:e.byteLength,stream:!1};p.progress(t),p.onload(),p.onend();});var u=parseInt(e.headers.get("Content-Length"),10),l=0,d=!1,f=new Uint8Array,c=0;p.reader=e.body.getReader();var h=[];_(p,function e(t){var n,r,i,a=t.value;if(t.done)return f&&(p.progress({loaded:l,total:isNaN(u)?l:u,lengthComputable:!0,time:E(h,l),stream:!0}),p.response.response=f.buffer),p.onload(),void p.onend();a&&0<a.length&&(f=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(f,a),l+=a.length,h.push({ts:Date.now(),bytes:a.length}),(n=g.findLastTopIsoBoxCompleted(["moov","mdat"],f,c)).found?(r=n.lastCompletedOffset+n.size,i=void 0,f=r===f.length?(i=f,new Uint8Array):(i=new Uint8Array(f.subarray(0,r)),f.subarray(r)),p.progress({data:i.buffer,lengthComputable:!1,noTrace:!0}),c=0):(c=n.lastCompletedOffset,d||(p.progress({lengthComputable:!1,noTrace:!0}),d=!0))),_(p,e);});}).catch(function(e){p.onerror&&p.onerror(e);});},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort();}catch(e){}},calculateDownloadedTime:E}}o.__dashjs_factory_name="FetchLoader";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default;},{47:47}],156:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var C=r(e(159)),O=r(e(155)),w=e(241),a=r(e(47)),P=r(e(225)),o=r(e(148)),L=r(e(49));function s(e){e=e||{};var t,n,E=this.context,m=e.errHandler,v=e.dashMetrics,y=e.mediaPlayerModel,T=e.requestModifier,S=e.boxParser,A=e.useFetch||!1,r=e.errors,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0;function N(n,t){var r=n.request,i=[],a=!0,o=!0,s=new Date,u=s,l=0,d=void 0;if(!T||!v||!m)throw new Error("config object is not correct or missing");function e(e){o=!1,r.requestStartDate=s,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||s,r.checkExistenceOnly||(v.addHttpRequest(r,d.response?d.response.responseURL:null,d.response?d.response.status:null,d.response&&d.response.getAllResponseHeaders?d.response.getAllResponseHeaders():d.response?d.response.responseHeaders:[],e?i:null),r.type===w.HTTPRequest.MPD_TYPE&&v.addManifestUpdate(r.type,r.requestStartDate,r.requestEndDate));}function f(){-1!==I.indexOf(d)&&(I.splice(I.indexOf(d),1),o&&(e(!1),0<t?function(){t--;var e={config:n};b.push(e),e.timeout=setTimeout(function(){-1!==b.indexOf(e)&&(b.splice(b.indexOf(e),1),N(n,t));},y.getRetryIntervalsForType(r.type));}():(m.error(new P.default(D[r.type],r.url+" is not available",{request:r,response:d.response})),n.error&&n.error(r,"error",d.response.statusText),n.complete&&n.complete(r,d.response.statusText))));}var c,h=void 0,h=A&&window.fetch&&"arraybuffer"===r.responseType&&r.type===w.HTTPRequest.MEDIA_SEGMENT_TYPE?(0, O.default)(E).create({requestModifier:T,boxParser:S}):(0, C.default)(E).create({requestModifier:T}),p=T.modifyRequestURL(r.url),g=function(e){try{var t=[],n=M.getQueryParameter(e);return n&&t.push(n),t}catch(e){return []}}(r),d={url:p=L.default.addAditionalQueryParameterToUrl(p,g),method:r.checkExistenceOnly?w.HTTPRequest.HEAD:w.HTTPRequest.GET,withCredentials:y.getXHRWithCredentialsForType(r.type),request:r,onload:function(){200<=d.response.status&&d.response.status<=299&&(e(!0),n.success&&n.success(d.response.response,d.response.statusText,d.response.responseURL),n.complete&&n.complete(r,d.response.statusText));},onend:f,onerror:f,progress:function(e){var t=new Date;a&&(a=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(r.firstByteDate=t)),e.lengthComputable&&(r.bytesLoaded=e.loaded,r.bytesTotal=e.total),e.noTrace||(i.push({s:u,d:e.time?e.time:t.getTime()-u.getTime(),b:[e.loaded?e.loaded-l:0]}),u=t,l=e.loaded),n.progress&&e&&n.progress(e);},onabort:function(){n.abort&&n.abort(r);},loader:h},_=(new Date).getTime();isNaN(r.delayLoadingTime)||_>=r.delayLoadingTime?(I.push(d),h.load(d)):(c={httpRequest:d},R.push(c),c.delayTimeout=setTimeout(function(){if(-1!==R.indexOf(c)){R.splice(R.indexOf(c),1);try{s=new Date,u=s,I.push(c.httpRequest),h.load(c.httpRequest);}catch(e){c.httpRequest.onerror();}}},r.delayLoadingTime-_));}return t={load:function(e){e.request?N(e,y.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error");},abort:function(){b.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request);}),b=[],R.forEach(function(e){return clearTimeout(e.delayTimeout)}),R=[],I.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e);}),I=[];}},I=[],R=[],b=[],M=(0, o.default)(E).getInstance(),i(n={},w.HTTPRequest.MPD_TYPE,r.DOWNLOAD_ERROR_ID_MANIFEST_CODE),i(n,w.HTTPRequest.XLINK_EXPANSION_TYPE,r.DOWNLOAD_ERROR_ID_XLINK_CODE),i(n,w.HTTPRequest.INIT_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),i(n,w.HTTPRequest.MEDIA_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(n,w.HTTPRequest.INDEX_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(n,w.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(n,w.HTTPRequest.OTHER_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),D=n,t}s.__dashjs_factory_name="HTTPLoader";var u=a.default.getClassFactory(s);n.default=u,t.exports=n.default;},{148:148,155:155,159:159,225:225,241:241,47:47,49:49}],157:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(156));function o(){var n=void 0;function e(){n={};}function t(){e();}return t(),{getLoader:function(e){for(var t in n)if(n.hasOwnProperty(t)&&e.startsWith(t))return n[t];return a.default},registerLoader:function(e,t){n[e]=t;},unregisterLoader:function(e){n[e]&&delete n[e];},unregisterAllLoader:e,reset:t}}o.__dashjs_factory_name="SchemeLoaderFactory";var s=i.default.getSingletonFactory(o);n.default=s,t.exports=n.default;},{156:156,47:47}],158:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(157));function a(n){n=n||{};var r=this.context,i=void 0,a=void 0;return i=(0, o.default)(r).getInstance(),{load:function(e){var t=i.getLoader(e&&e.request?e.request.url:null);(a=t(r).create({errHandler:n.errHandler,mediaPlayerModel:n.mediaPlayerModel,requestModifier:n.requestModifier,useFetch:n.useFetch||null,dashMetrics:n.dashMetrics,boxParser:n.boxParser?n.boxParser:null,constants:n.constants?n.constants:null,dashConstants:n.dashConstants?n.dashConstants:null,urlUtils:n.urlUtils?n.urlUtils:null,errors:n.errors})).load(e);},abort:function(){a&&a.abort();}}}a.__dashjs_factory_name="URLLoader";var s=i.default.getClassFactory(a);n.default=s,t.exports=n.default;},{157:157,47:47}],159:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var i=(e=e||{}).requestModifier;return {load:function(e){var t=new Date,n=e.request,r=new XMLHttpRequest;r.open(e.method,e.url,!0),n.responseType&&(r.responseType=n.responseType),n.range&&r.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=t),i&&(r=i.modifyRequestHeader(r)),r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.send(),e.response=r;},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort();}}}o.__dashjs_factory_name="XHRLoader";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default;},{47:47}],160:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r);}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,0<r&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var n=a.parsePSSHList(t);return e&&n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return "pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return [];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,a,o=void 0,s=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(a=t.getUint8(r))||1===a){r++,r+=3,o="";for(var u=void 0,l=void 0,u=0;u<4;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<6;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,o=o.toLowerCase(),t.getUint32(r),r+=4,n[o]=t.buffer.slice(s,i),r=i;}else r=i;else r=i;}return n}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}n.default=i,t.exports=n.default;},{}],161:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(163)),p=r(e(164)),i=r(e(162)),a=r(e(169)),g=r(e(171)),_=r(e(172)),E=r(e(170)),m=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],v=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function o(){var d=void 0,f=this.context;function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return d={createProtectionSystem:function(e){var t=null,n=(0, p.default)(f).getInstance();n.setConfig({debug:e.debug,BASE64:e.BASE64}),n.initialize();var r,i,a,o,s,u,l=(i=(r=e).debug,a=i.getLogger(d),o=r.eventBus,s=r.errHandler,(u=r.videoModel?r.videoModel.getElement():null)&&void 0===u.onencrypted||u&&void 0===u.mediaKeys?c(u,v)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0, _.default)(f).create({debug:i,eventBus:o,events:r.events,api:c(u,v)})):c(u,m)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),(0, E.default)(f).create({debug:i,eventBus:o,errHandler:s,events:r.events,api:c(u,m)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0, g.default)(f).create({debug:i,eventBus:o,events:r.events})));return !t&&l&&(t=(0, h.default)(f).create({protectionModel:l,protectionKeyController:n,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants}),e.capabilities.setEncryptedMediaSupported(!0)),t}}}o.__dashjs_factory_name="Protection";var s=dashjs.FactoryMaker.getClassFactory(o);s.events=i.default,s.errors=a.default,dashjs.FactoryMaker.updateClassFactory(o.__dashjs_factory_name,s),n.default=s,t.exports=n.default;},{162:162,163:163,164:164,169:169,170:170,171:171,172:172}],162:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{55:55}],163:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var N=r(e(160)),C=r(e(182)),O=r(e(181)),w=r(e(169)),P=r(e(225));function i(e){var t,y=(e=e||{}).protectionKeyController,T=e.protectionModel,S=e.eventBus,A=e.events,n=e.debug,d=e.BASE64,l=e.constants,s=[],I=void 0,f=void 0,c=void 0,h=void 0,r=void 0,p=void 0,R=void 0;function i(){if(!(S&&S.hasOwnProperty("on")&&y&&y.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function g(e,t){var n=N.default.getPSSHForKeySystem(R,e),r=b(R);if(n){for(var i=T.getAllInitData(),a=0;a<i.length;a++)if(y.initDataEquals(n,i[a]))return void I.warn("DRM: Ignoring initData because we have already seen it!");try{T.createKeySession(n,r,m(R),t);}catch(e){S.trigger(A.KEY_SESSION_CREATED,{data:null,error:new P.default(w.default.KEY_SESSION_CREATED_ERROR_CODE,w.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)});}}else e?T.createKeySession(e,r,m(R),t):S.trigger(A.KEY_SESSION_CREATED,{data:null,error:new P.default(w.default.KEY_SESSION_CREATED_ERROR_CODE,w.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(R?R.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")});}function _(e,t){i(),T.loadKeySession(e,t,m(R));}function a(e){i(),e?(T.setMediaElement(e),S.on(A.NEED_KEY,M,this)):null===e&&(T.setMediaElement(e),S.off(A.NEED_KEY,M,this));}function b(e){var t,n=null;return e&&(t=e.systemString,h&&(n=t in h?h[t]:null)),n}function E(e){var t=b(e),n=[],r=[],i=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:p,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:p,o=m(e),s=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",u=t&&t.persistentState?t.persistentState:"temporary"===o?"optional":"required";return c.forEach(function(e){e.type===l.AUDIO?n.push(new C.default(e.codec,i)):e.type===l.VIDEO&&r.push(new C.default(e.codec,a));}),new O.default(n,r,s,u,[o])}function m(e){var t=b(e);return t&&t.sessionType?t.sessionType:r}function u(n,s){var u=this,t=[];n=n.sort(function(e,t){return (h&&h[e.ks.systemString]&&0<=h[e.ks.systemString].priority?h[e.ks.systemString].priority:n.length)-(h&&h[t.ks.systemString]&&0<=h[t.ks.systemString].priority?h[t.ks.systemString].priority:n.length)});var r,l=void 0;if(R)for(l=0;l<n.length;l++){if(R===n[l].ks)if("break"===function(){t.push({ks:n[l].ks,configs:[E(R)]});return S.on(A.KEY_SYSTEM_ACCESS_COMPLETE,function e(t){S.off(A.KEY_SYSTEM_ACCESS_COMPLETE,e,u),t.error?s||S.trigger(A.KEY_SYSTEM_SELECTED,{error:new P.default(w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)}):(I.info("DRM: KeySystem Access Granted"),S.trigger(A.KEY_SYSTEM_SELECTED,{data:t.data}),n[l].sessionId?_(n[l].sessionId,n[l].initData):n[l].initData&&g(n[l].initData,n[l].cdmData));},u),T.requestKeySystemAccess(t),"break"}())break}else void 0===R?function(){R=null,f.push(n);for(var e=0;e<n.length;e++)t.push({ks:n[e].ks,configs:[E(n[e].ks)]});function a(e){S.off(A.KEY_SYSTEM_ACCESS_COMPLETE,a,u),e.error?(R=void 0,S.off(A.INTERNAL_KEY_SYSTEM_SELECTED,r,u),s||S.trigger(A.KEY_SYSTEM_SELECTED,{data:null,error:new P.default(w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(o=e.data,I.info("DRM: KeySystem Access Granted ("+o.keySystem.systemString+")!  Selecting key system..."),T.selectKeySystem(o));}var o=void 0;r=function e(t){if(S.off(A.INTERNAL_KEY_SYSTEM_SELECTED,e,u),S.off(A.KEY_SYSTEM_ACCESS_COMPLETE,a,u),t.error)R=void 0,s||S.trigger(A.KEY_SYSTEM_SELECTED,{data:null,error:new P.default(w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)});else {if(!T)return;R=T.getKeySystem(),S.trigger(A.KEY_SYSTEM_SELECTED,{data:o});var n=b(R);n&&n.serverCertificate&&0<n.serverCertificate.length&&T.setServerCertificate(d.decodeArray(n.serverCertificate).buffer);for(var r,i=0;i<f.length;i++)for(l=0;l<f[i].length;l++)if(R===f[i][l].ks){y.isClearKey(R)&&n&&n.hasOwnProperty("clearkeys")&&(r={kids:Object.keys(n.clearkeys)},f[i][l].initData=(new TextEncoder).encode(JSON.stringify(r))),f[i][l].sessionId?_(f[i][l].sessionId,f[i][l].initData):null!==f[i][l].initData&&g(f[i][l].initData,f[i][l].cdmData);break}}},S.on(A.INTERNAL_KEY_SYSTEM_SELECTED,r,u),S.on(A.KEY_SYSTEM_ACCESS_COMPLETE,a,u),T.requestKeySystemAccess(t);}():f.push(n);}function D(e,t){S.trigger(A.LICENSE_REQUEST_COMPLETE,{data:e,error:t});}function o(e){e.error?S.trigger(A.KEY_STATUSES_CHANGED,{data:null,error:e.error}):I.debug("DRM: key status = "+e.status);}function v(e){I.debug("DRM: onKeyMessage");var t=e.data;S.trigger(A.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",r=t.message,i=t.sessionToken,a=b(R),o=R?R.systemString:null,s=y.getLicenseServer(R,a,n),u={sessionToken:i,messageType:n};if(r&&0!==r.byteLength){if(!s)return I.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void D(u);if(y.isClearKey(R)){var l=y.processClearKeyLicenseRequest(R,a,r);if(l)return I.debug("DRM: ClearKey license request handled by application!"),D(u),void T.updateKeySession(i,l)}var d,f,c,h,p,g,_,E,m,v=null;a&&a.serverURL?"string"==typeof(d=a.serverURL)&&""!==d?v=d:"object"==typeof d&&d.hasOwnProperty(n)&&(v=d[n]):v=a&&a.laURL&&""!==a.laURL?a.laURL:(v=R.getLicenseServerURLFromInitData(N.default.getPSSHData(i.initData)))||e.data.laURL,(v=s.getServerURLFromMessage(v,r,n))?(c=!(f={}),h=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(c=!0),f[t]=e[t];},a&&h(a.httpRequestHeaders),h(R.getRequestHeadersFromMessage(r)),a&&"boolean"==typeof a.withCredentials&&(c=a.withCredentials),p=function(e,t,n,r){var i=e.response?s.getErrorResponse(e.response,n,r):"NONE";D(t,new P.default(w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+i));},g=R.getLicenseRequestFromMessage(r),_=s.getHTTPMethod(n),E=s.getResponseType(o,n),m=a&&!isNaN(a.httpTimeout)?a.httpTimeout:8e3,function e(t,n,r,i,a,o,s,u,l,d,f){var c=new XMLHttpRequest;c.open(r,t,!0);c.responseType=i;c.withCredentials=a;0<u&&(c.timeout=u);for(var h in n)c.setRequestHeader(h,n[h]);var p=function(){s--,setTimeout(function(){e(t,n,r,i,a,o,s,u,l,d,f);},1e3);};c.onload=function(){200===this.status||s<=0?l(this):(I.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+s),p());};c.ontimeout=c.onerror=function(){s<=0?f(this):(I.warn("License request network request failed . Retrying it... Pending retries: "+s),p());};c.onabort=function(){d(this);};c.send(o);}(v,f,_,E,c,g,3,m,function(e){var t;T&&(200===e.status&&null!==(t=s.getLicenseMessage(e.response,o,n))?(D(u),T.updateKeySession(i,t)):p(e,u,o,n));},function(e){D(u,new P.default(w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState));},function(e){D(u,new P.default(w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState));})):D(u,new P.default(w.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));}else D(u,new P.default(w.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE));}function M(e,t){if(I.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===c.length&&(I.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))s.push(setTimeout(function(){M(e,t);},500));else {var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),R){var r=N.default.getPSSHForKeySystem(R,n);if(r)for(var i=T.getAllInitData(),a=0;a<i.length;a++)if(y.initDataEquals(r,i[a]))return void I.warn("DRM: Ignoring initData because we have already seen it!")}I.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));var o=y.getSupportedKeySystems(n,h);0!==o.length?u(o,!1):I.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");}else I.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");i(),S.on(A.INTERNAL_KEY_MESSAGE,v,this),S.on(A.INTERNAL_KEY_STATUS_CHANGED,o,this),c.push(e);var t=y.getSupportedKeySystemsFromContentProtection(e.contentProtection);t&&0<t.length&&u(t,!0);},createKeySession:g,loadKeySession:_,removeKeySession:function(e){i(),T.removeKeySession(e);},closeKeySession:function(e){i(),T.closeKeySession(e);},setServerCertificate:function(e){i(),T.setServerCertificate(e);},setMediaElement:a,setSessionType:function(e){r=e;},setRobustnessLevel:function(e){p=e;},setProtectionData:function(e){h=e,y.setProtectionData(e);},getSupportedKeySystemsFromContentProtection:function(e){return i(),y.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return y?y.getKeySystems():[]},setKeySystems:function(e){y&&y.setKeySystems(e);},stop:function(){T&&T.stop();},reset:function(){i(),S.off(A.INTERNAL_KEY_MESSAGE,v,this),S.off(A.INTERNAL_KEY_STATUS_CHANGED,o,this),a(null),R=void 0,T&&(T.reset(),T=null),s.forEach(function(e){return clearTimeout(e)}),s=[],c=[];}},I=n.getLogger(t),f=[],c=[],r="temporary",p="",t}i.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{160:160,169:169,181:181,182:182,225:225}],164:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(160)),d=r(e(165)),f=r(e(167)),c=r(e(168)),h=r(e(166)),p=r(e(174)),g=r(e(175)),_=r(e(176)),E=r(e(173)),m=r(e(110));function i(){var i=this.context,t=void 0,n=void 0,r=void 0,u=void 0,a=void 0,o=void 0,s=void 0;return t={initialize:function(){u=[];var e=void 0,e=(0, h.default)(i).getInstance({BASE64:a});u.push(e),e=(0, c.default)(i).getInstance({BASE64:a}),u.push(e),e=(0, d.default)(i).getInstance({BASE64:a}),u.push(e),o=e,e=(0, f.default)(i).getInstance({BASE64:a,debug:n}),u.push(e),s=e;},setProtectionData:function(e){for(var t,n,r=0;r<u.length;r++){var i=u[r];i.hasOwnProperty("init")&&i.init((t=i.systemString,n=void 0,n=null,e&&(n=t in e?e[t]:null),n));}},isClearKey:function(e){return e===o||e===s},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return !1;for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return !1;return !0},getKeySystems:function(){return u},setKeySystems:function(e){u=e;},getKeySystemBySystemString:function(e){for(var t=0;t<u.length;t++)if(u[t].systemString===e)return u[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t,n=void 0,r=void 0,i=void 0,a=void 0,o=[];if(e)for(i=0;i<u.length;++i)for(r=u[i],a=0;a<e.length;++a){(n=e[a]).schemeIdUri.toLowerCase()===r.schemeIdURI&&(t=r.getInitData(n),o.push({ks:u[i],initData:t,cdmData:r.getCDMData(),sessionId:r.getSessionId(n)}));}return o},getSupportedKeySystems:function(e,t){for(var n=[],r=l.default.parsePSSHList(e),i=void 0,a=void 0,o=void 0,s=0;s<u.length;++s)a=(i=u[s]).systemString,o=!t||a in t,i.uuid in r&&o&&n.push({ks:i,initData:r[i.uuid],cdmData:i.getCDMData(),sessionId:i.getSessionId()});return n},getLicenseServer:function(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=(0, p.default)(i).getInstance({BASE64:a}):e.systemString===m.default.WIDEVINE_KEYSTEM_STRING?r=(0, _.default)(i).getInstance():e.systemString===m.default.PLAYREADY_KEYSTEM_STRING?r=(0, g.default)(i).getInstance():e.systemString===m.default.CLEARKEY_KEYSTEM_STRING&&(r=(0, E.default)(i).getInstance()),r},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,r=n.getLogger(t)),e.BASE64&&(a=e.BASE64));}}}i.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default;},{110:110,160:160,165:165,166:166,167:167,168:168,173:173,174:174,175:175,176:176}],165:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(179)),l=r(e(177)),i=r(e(160)),a=r(e(110)),o="e2719d58-a985-b3c9-781a-b030af78d30e",s=a.default.CLEARKEY_KEYSTEM_STRING;function d(e){var t=(e=e||{}).BASE64;return {uuid:o,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:s,getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new u.default(o,s));}n=new l.default(i);}return n}}}d.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(d),t.exports=n.default;},{110:110,160:160,177:177,179:179}],166:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=r(e(160)),i=r(e(110)),a="9a04f079-9840-4286-ab92-e65be0885f95",o=i.default.PLAYREADY_KEYSTEM_STRING,s=void 0;function u(e){var l="utf-16",d=(e=e||{}).BASE64;function f(){if(!d||!d.hasOwnProperty("decodeArray")||!d.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return {uuid:a,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:o,getInitData:function(e){var t,n,r,i=new Uint8Array([112,115,115,104,0,0,0,0]),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=0,s=null,u=void 0,l=void 0;if(f(),!e)return null;if("pssh"in e)return c.default.parseInitDataFromContentProtection(e,d);if("pro"in e)s=d.decodeArray(e.pro.__text);else {if(!("prheader"in e))return null;s=d.decodeArray(e.prheader.__text);}return t=s.length,n=4+i.length+a.length+4+t,r=new ArrayBuffer(n),u=new Uint8Array(r),(l=new DataView(r)).setUint32(o,n),o+=4,u.set(i,o),o+=i.length,u.set(a,o),o+=a.length,l.setUint32(o,t),o+=4,u.set(s,o),o+=t,u.buffer},getRequestHeadersFromMessage:function(e){for(var t=void 0,n={},r=new DOMParser,i=new("utf-16"===l?Uint16Array:Uint8Array)(e),a=String.fromCharCode.apply(null,i),o=(t=r.parseFromString(a,"application/xml")).getElementsByTagName("name"),s=t.getElementsByTagName("value"),u=0;u<o.length;u++)n[o[u].childNodes[0].nodeValue]=s[u].childNodes[0].nodeValue;return n.hasOwnProperty("Content")&&(n["Content-Type"]=n.Content,delete n.Content),n.hasOwnProperty("Content-Type")||(n["Content-Type"]="text/xml; charset=utf-8"),n},getLicenseRequestFromMessage:function(e){var t=null,n=new DOMParser,r=new("utf-16"===l?Uint16Array:Uint8Array)(e);f();var i=String.fromCharCode.apply(null,r),a=n.parseFromString(i,"application/xml");if(!a.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var o=a.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return o&&(t=d.decode(o)),t},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),d=i.parseFromString(l,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var f=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(f)return f}if(d.getElementsByTagName("LUI_URL")[0]){var c=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(c)return c}}else r+=s;}return null},getCDMData:function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(f(),s&&s.cdmData){for(e=[],r=0;r<s.cdmData.length;++r)e.push(s.cdmData.charCodeAt(r)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=d.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),n=[],r=0;r<t.length;++r)n.push(t.charCodeAt(r)),n.push(0);return new Uint8Array(n).buffer}return null},getSessionId:function(e){return s&&s.sessionId?s.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');l=e;},init:function(e){e&&(s=e);}}}u.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default;},{110:110,160:160}],167:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(179)),d=r(e(177)),i=r(e(160)),a=r(e(110)),o="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",s=a.default.CLEARKEY_KEYSTEM_STRING;function u(e){var t=void 0,n=e.BASE64,u=e.debug.getLogger(t);return t={uuid:o,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:s,getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new l.default(o,s));}n=new d.default(i),u.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4");}return n}}}u.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default;},{110:110,160:160,177:177,179:179}],168:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(160)),a=r(e(110)),o="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",s=a.default.WIDEVINE_KEYSTEM_STRING;function u(e){var t=null,n=(e=e||{}).BASE64;return {uuid:o,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:s,init:function(e){e&&(t=e);},getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}u.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default;},{110:110,160:160}],169:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(52);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{52:52}],170:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(164)),T=r(e(183)),S=r(e(225)),A=r(e(178)),I=r(e(181)),R=r(e(180)),b=r(e(169));function i(e){e=e||{};var t=this.context,h=e.eventBus,p=e.events,n=e.debug,o=e.api,s=e.errHandler,r=void 0,u=void 0,g=void 0,i=void 0,_=void 0,l=void 0,d=void 0,f=void 0,a=void 0;function c(){g&&v();for(var e=0;e<d.length;e++)E(d[e]);h.trigger(p.TEARDOWN_COMPLETE);}function E(t){try{g[o.cancelKeyRequest](i.systemString,t.sessionID);}catch(e){h.trigger(p.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionID+") "+e.message});}}function m(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function v(){g.removeEventListener(o.keyerror,a),g.removeEventListener(o.needkey,a),g.removeEventListener(o.keymessage,a),g.removeEventListener(o.keyadded,a);}return r={getAllInitData:function(){for(var e=[],t=0;t<l.length;t++)e.push(l[t].initData);for(t=0;t<d.length;t++)e.push(d[t].initData);return e},requestKeySystemAccess:function(e){for(var t=(t=g)||document.createElement("video"),n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,s=null,u=0;u<a.length;u++){var l=a[u].videoCapabilities;if(l&&0!==l.length){s=[];for(var d=0;d<l.length;d++)""!==t.canPlayType(l[d].contentType,i)&&s.push(l[d]);}if(s&&(!s||0!==s.length)){n=!0;var f=new I.default(o,s),c=_.getKeySystemBySystemString(i);h.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{data:new R.default(c,f)});break}}n||h.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"});},getKeySystem:function(){return i},selectKeySystem:function(e){i=e.keySystem,h.trigger(p.INTERNAL_KEY_SYSTEM_SELECTED);},setMediaElement:function(e){if(g!==e){if(g){v();for(var t=0;t<d.length;t++)E(d[t]);d=[];}(g=e)&&(g.addEventListener(o.keyerror,a),g.addEventListener(o.needkey,a),g.addEventListener(o.keymessage,a),g.addEventListener(o.keyadded,a),h.trigger(p.VIDEO_ELEMENT_SELECTED));}},createKeySession:function(e){if(!i)throw new Error("Can not create sessions until you have selected a key system");if(f||0===d.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return "temporary"}};return l.push(t),g[o.generateKeyRequest](i.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(_.isClearKey(i))for(var r=0;r<t.keyPairs.length;r++)g[o.addKey](i.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else g[o.addKey](i.systemString,new Uint8Array(t),new Uint8Array(e.initData),n);},closeKeySession:E,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:c,reset:c},u=n.getLogger(r),l=[],d=[],_=(i=g=null,y.default)(t).getInstance(),a={handleEvent:function(e){var t,n=null;switch(e.type){case o.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;h.trigger(p.NEED_KEY,{key:new T.default(r,"cenc")});break;case o.keyerror:if(n=(n=m(d,e.sessionId))||m(l,e.sessionId)){var i=b.default.MEDIA_KEYERR_CODE,a="";switch(e.errorCode.code){case 1:i=b.default.MEDIA_KEYERR_UNKNOWN_CODE,a+="MEDIA_KEYERR_UNKNOWN - "+b.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:i=b.default.MEDIA_KEYERR_CLIENT_CODE,a+="MEDIA_KEYERR_CLIENT - "+b.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:i=b.default.MEDIA_KEYERR_SERVICE_CODE,a+="MEDIA_KEYERR_SERVICE - "+b.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:i=b.default.MEDIA_KEYERR_OUTPUT_CODE,a+="MEDIA_KEYERR_OUTPUT - "+b.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:i=b.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,a+="MEDIA_KEYERR_HARDWARECHANGE - "+b.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:i=b.default.MEDIA_KEYERR_DOMAIN_CODE,a+="MEDIA_KEYERR_DOMAIN - "+b.default.MEDIA_KEYERR_DOMAIN_MESSAGE;}a+="  System Code = "+e.systemCode,h.trigger(p.KEY_ERROR,{data:new S.default(i,a,n)});}else u.error("No session token found for key error");break;case o.keyadded:(n=(n=m(d,e.sessionId))||m(l,e.sessionId))?(u.debug("DRM: Key added."),h.trigger(p.KEY_ADDED,{data:n})):u.debug("No session token found for key added");break;case o.keymessage:(f=null!==e.sessionId&&void 0!==e.sessionId)?!(n=m(d,e.sessionId))&&0<l.length&&(n=l.shift(),d.push(n),n.sessionID=e.sessionId,h.trigger(p.KEY_SESSION_CREATED,{data:n})):0<l.length&&(n=l.shift(),d.push(n),0!==l.length&&s.error(new S.default(b.default.MEDIA_KEY_MESSAGE_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),n?(t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,n.keyMessage=t,h.trigger(p.INTERNAL_KEY_MESSAGE,{data:new A.default(n,t,e.defaultURL)})):u.warn("No session token found for key message");}}},r}i.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{164:164,169:169,178:178,180:180,181:181,183:183,225:225}],171:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(164)),m=r(e(183)),v=r(e(169)),y=r(e(225)),T=r(e(178)),S=r(e(180)),A=r(e(110));function i(e){e=e||{};var t=this.context,o=e.eventBus,s=e.events,n=e.debug,r=void 0,u=void 0,l=void 0,i=void 0,d=void 0,f=void 0,a=void 0,c=void 0;function h(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function p(e){for(var t=0;t<f.length;t++)if(f[t]===e){f.splice(t,1);break}}function g(e){var t=void 0,n=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function _(t,e,n,r){var i={session:t,initData:e,sessionId:r,handleEvent:function(e){switch(e.type){case"keystatuseschange":o.trigger(s.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=g(arguments);switch(e.status){case"expired":o.trigger(s.INTERNAL_KEY_STATUS_CHANGED,{error:new y.default(v.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,v.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:o.trigger(s.INTERNAL_KEY_STATUS_CHANGED,e);}});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;o.trigger(s.INTERNAL_KEY_MESSAGE,{data:new T.default(this,t,void 0,e.messageType)});}},getSessionID:function(){return t.sessionId},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===g(arguments).status&&(e=!0);}),e},getSessionType:function(){return n}};return t.addEventListener("keystatuseschange",i),t.addEventListener("message",i),t.closed.then(function(){p(i),u.debug("DRM: Session closed.  SessionID = "+i.getSessionID()),o.trigger(s.KEY_SESSION_CLOSED,{data:i.getSessionID()});}),f.push(i),i}return r={getAllInitData:function(){for(var e=[],t=0;t<f.length;t++)f[t].initData&&e.push(f[t].initData);return e},requestKeySystemAccess:function(e){!function i(a,e){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return void o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"});!function(t){var r=a[t].ks,e=a[t].configs,n=r.systemString;n===A.default.PLAYREADY_KEYSTEM_STRING&&"required"===e[0].persistentState&&(n+=".recommendation"),navigator.requestMediaKeySystemAccess(n,e).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new S.default(r,t);n.mksa=e,o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{data:n});}).catch(function(e){++t<a.length?i(a,t):o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+e.message});});}(e);}(e,0);},getKeySystem:function(){return l},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){l=t.keySystem,d=e,i?i.setMediaKeys(d).then(function(){o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED);}):o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED);}).catch(function(){o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"});});},setMediaElement:function(e){i!==e&&(i&&(i.removeEventListener("encrypted",a),i.setMediaKeys&&i.setMediaKeys(null)),(i=e)&&(i.addEventListener("encrypted",a),i.setMediaKeys&&d&&i.setMediaKeys(d)));},setServerCertificate:function(e){if(!l||!d)throw new Error("Can not set server certificate until you have selected a key system");d.setServerCertificate(e).then(function(){u.info("DRM: License server certificate successfully updated."),o.trigger(s.SERVER_CERTIFICATE_UPDATED);}).catch(function(e){o.trigger(s.SERVER_CERTIFICATE_UPDATED,{error:new y.default(v.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,v.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)});});},createKeySession:function(e,t,n){if(!l||!d)throw new Error("Can not create sessions until you have selected a key system");var r=d.createSession(n),i=_(r,e,n),a=this.getKeySystem().systemString===A.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";r.generateRequest(a,e).then(function(){u.debug("DRM: Session created.  SessionID = "+i.getSessionID()),o.trigger(s.KEY_SESSION_CREATED,{data:i});}).catch(function(e){p(i),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new y.default(v.default.KEY_SESSION_CREATED_ERROR_CODE,v.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)});});},updateKeySession:function(t,e){var n=t.session;c.isClearKey(l)&&(e=e.toJWK()),n.update(e).catch(function(e){o.trigger(s.KEY_ERROR,{data:new y.default(v.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)});});},loadKeySession:function(t,e,n){if(!l||!d)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<f.length;r++)if(t===f[r].sessionId)return void u.warn("DRM: Ignoring session ID because we have already seen it!");var i=d.createSession(n),a=_(i,e,n,t);i.load(t).then(function(e){e?(u.debug("DRM: Session loaded.  SessionID = "+a.getSessionID()),o.trigger(s.KEY_SESSION_CREATED,{data:a})):(p(a),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new y.default(v.default.KEY_SESSION_CREATED_ERROR_CODE,v.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}));}).catch(function(e){p(a),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new y.default(v.default.KEY_SESSION_CREATED_ERROR_CODE,v.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)});});},removeKeySession:function(t){t.session.remove().then(function(){u.debug("DRM: Session removed.  SessionID = "+t.getSessionID()),o.trigger(s.KEY_SESSION_REMOVED,{data:t.getSessionID()});},function(e){o.trigger(s.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name});});},closeKeySession:function(t){h(t).catch(function(e){p(t),o.trigger(s.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name});});},stop:function(){for(var e=void 0,t=0;t<f.length;t++)(e=f[t]).getUsable()||h(e).catch(function(){p(e);});},reset:function(){var n=f.length,r=void 0;0!==n?function(){for(var t=function(e){p(e),0===f.length&&(i?(i.removeEventListener("encrypted",a),i.setMediaKeys(null).then(function(){o.trigger(s.TEARDOWN_COMPLETE);})):o.trigger(s.TEARDOWN_COMPLETE));},e=0;e<n;e++)!function(e){r.session.closed.then(function(){t(e);}),h(r).catch(function(){t(e);});}(r=f[e]);}():o.trigger(s.TEARDOWN_COMPLETE);}},u=n.getLogger(r),f=[],c=(d=i=l=null,E.default)(t).getInstance(),a={handleEvent:function(e){switch(e.type){case"encrypted":var t;e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,o.trigger(s.NEED_KEY,{key:new m.default(t,e.initDataType)}));}}},r}i.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{110:110,164:164,169:169,178:178,180:180,183:183,225:225}],172:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(164)),v=r(e(183)),y=r(e(225)),T=r(e(169)),S=r(e(178)),A=r(e(181)),I=r(e(180));function i(e){e=e||{};var t=this.context,p=e.eventBus,g=e.events,n=e.debug,_=e.api,r=void 0,u=void 0,i=void 0,l=void 0,d=void 0,f=void 0,c=void 0,a=void 0,E=void 0;function o(){try{for(var e=0;e<c.length;e++)s(c[e]);i&&i.removeEventListener(_.needkey,a),p.trigger(g.TEARDOWN_COMPLETE);}catch(e){p.trigger(g.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message});}}function s(e){var t=e.session;t.removeEventListener(_.error,e),t.removeEventListener(_.message,e),t.removeEventListener(_.ready,e),t.removeEventListener(_.close,e);for(var n=0;n<c.length;n++)if(c[n]===e){c.splice(n,1);break}t[_.release]();}function h(){function e(){i.removeEventListener("loadedmetadata",t),i[_.setMediaKeys](d),p.trigger(g.VIDEO_ELEMENT_SELECTED);}var t=null;1<=i.readyState?e():(t=e.bind(this),i.addEventListener("loadedmetadata",t));}return r={getAllInitData:function(){for(var e=[],t=0;t<c.length;t++)e.push(c[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,a=null,o=null,s=0;s<i.length;s++){var u=i[s].audioCapabilities,l=i[s].videoCapabilities;if(u&&0!==u.length){a=[];for(var d=0;d<u.length;d++)window[_.MediaKeys].isTypeSupported(r,u[d].contentType)&&a.push(u[d]);}if(l&&0!==l.length){o=[];for(var f=0;f<l.length;f++)window[_.MediaKeys].isTypeSupported(r,l[f].contentType)&&o.push(l[f]);}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var c=new A.default(a,o),h=E.getKeySystemBySystemString(r);p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{data:new I.default(h,c)});break}}t||p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"});},getKeySystem:function(){return l},selectKeySystem:function(e){try{d=e.mediaKeys=new window[_.MediaKeys](e.keySystem.systemString),l=e.keySystem,f=e,i&&h(),p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED);}catch(e){p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+l.systemString+")! Could not create MediaKeys -- TODO"});}},setMediaElement:function(e){i!==e&&(i&&i.removeEventListener(_.needkey,a),(i=e)&&(i.addEventListener(_.needkey,a),d&&h()));},createKeySession:function(e,t,n,r){if(!l||!d||!f)throw new Error("Can not create sessions until you have selected a key system");var i=null;if(f.ksConfiguration.videoCapabilities&&0<f.ksConfiguration.videoCapabilities.length&&(i=f.ksConfiguration.videoCapabilities[0]),null===i&&f.ksConfiguration.audioCapabilities&&0<f.ksConfiguration.audioCapabilities.length&&(i=f.ksConfiguration.audioCapabilities[0]),null===i)throw new Error("Can not create sessions for unknown content types.");var a=i.contentType,o=d.createSession(a,new Uint8Array(e),r?new Uint8Array(r):null),s={session:o,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return "temporary"},handleEvent:function(e){switch(e.type){case _.error:p.trigger(g.KEY_ERROR,{data:new y.default(T.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case _.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;p.trigger(g.INTERNAL_KEY_MESSAGE,{data:new S.default(this,t,e.destinationURL)});break;case _.ready:u.debug("DRM: Key added."),p.trigger(g.KEY_ADDED);break;case _.close:u.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),p.trigger(g.KEY_SESSION_CLOSED,{data:this.getSessionID()});}}};o.addEventListener(_.error,s),o.addEventListener(_.message,s),o.addEventListener(_.ready,s),o.addEventListener(_.close,s),c.push(s),u.debug("DRM: Session created.  SessionID = "+s.getSessionID()),p.trigger(g.KEY_SESSION_CREATED,{data:s});},updateKeySession:function(e,t){var n=e.session;E.isClearKey(l)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t));},closeKeySession:s,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:o,reset:o},u=n.getLogger(r),c=[],E=(f=d=l=i=null,m.default)(t).getInstance(),a={handleEvent:function(e){switch(e.type){case _.needkey:var t;e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,p.trigger(g.NEED_KEY,{key:new v.default(t,"cenc")}));}}},r}i.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{164:164,169:169,178:178,180:180,181:181,183:183,225:225}],173:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(179)),s=r(e(177));function i(){return {getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1)},getHTTPMethod:function(){return "GET"},getResponseType:function(){return "json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new o.default(i,a));}return new s.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}i.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default;},{177:177,179:179}],174:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(110),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var n=(e=e||{}).BASE64,r={};r[a.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[a.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};return {getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return "POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,t){return function(){if(!n||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),r[t].getLicenseMessage(e)},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}o.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default;},{110:110}],175:[function(e,t,n){function r(){var g="http://schemas.xmlsoap.org/soap/envelope/";function _(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}return {getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return "POST"},getResponseType:function(){return "arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=_(e),n=(new window.DOMParser).parseFromString(t,"text/xml"),r=n?n.getElementsByTagNameNS(g,"Envelope")[0]:null,i=r?r.getElementsByTagNameNS(g,"Body")[0]:null;if(i?i.getElementsByTagNameNS(g,"Fault")[0]:null)return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",r="",i=-1,a=-1;if(window.DOMParser){var o=_(e),s=(new window.DOMParser).parseFromString(o,"text/xml"),u=s?s.getElementsByTagNameNS(g,"Envelope")[0]:null,l=u?u.getElementsByTagNameNS(g,"Body")[0]:null,d=l?l.getElementsByTagNameNS(g,"Fault")[0]:null,f=d?d.getElementsByTagName("detail")[0]:null,c=f?f.getElementsByTagName("Exception")[0]:null,h=null;if(null===d)return o;t=(h=d.getElementsByTagName("faultstring")[0].firstChild)?h.nodeValue:null,null!==c&&(n=(h=c.getElementsByTagName("StatusCode")[0])?h.firstChild.nodeValue:null,i=(r=(h=c.getElementsByTagName("Message")[0])?h.firstChild.nodeValue:null)?r.lastIndexOf("[")+1:-1,a=r?r.indexOf("]"):-1,r=r?r.substring(i,a):"");}var p="code: "+n+", name: "+t;return r&&(p+=", message: "+r),p}.call(this,e)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],176:[function(e,t,n){function r(){return {getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return "POST"},getResponseType:function(){return "arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],177:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"toJWK",value:function(){for(var e=void 0,t=this.keyPairs.length,n={keys:[]},e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r);}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}]),a);function a(e,t){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t;}n.default=i,t.exports=n.default;},{}],178:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=r,this.messageType=i||"license-request";},t.exports=n.default;},{}],179:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n;},t.exports=n.default;},{}],180:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n;},t.exports=n.default;},{}],181:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a;},t.exports=n.default;},{}],182:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n;},t.exports=n.default;},{}],183:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n;},t.exports=n.default;},{}],184:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var o=[],s=0,u=0;return {push:function(e,t){var n=t&&t.droppedVideoFrames?t.droppedVideoFrames:0,r=t&&t.totalVideoFrames?t.totalVideoFrames:0,i=n-s;s=n;var a=r-u;u=r,isNaN(e)||(o[e]?(o[e].droppedVideoFrames+=i,o[e].totalVideoFrames+=a):o[e]={droppedVideoFrames:i,totalVideoFrames:a});},getFrameHistory:function(){return o},reset:function(e){o=[],s=e.droppedVideoFrames,u=e.totalVideoFrames;}}}o.__dashjs_factory_name="DroppedFramesHistory";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default;},{47:47}],185:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,a=e.useBufferOccupancyABR,o=e.streamProcessor?e.streamProcessor.getScheduleController():null,s=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;function u(){return s?s.mediaInfo:null}return {getMediaType:function(){var e=u();return e?e.type:null},getMediaInfo:u,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=u();return e?e.streamInfo:null},getScheduleController:function(){return o},getAbrController:function(){return t},getRepresentationInfo:function(){return s},useBufferOccupancyABR:function(){return a}}}o.__dashjs_factory_name="RulesContext",n.default=a.default.getClassFactory(o),t.exports=n.default;},{47:47}],186:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r},o={DEFAULT:.5,STRONG:1,WEAK:0};function s(e,t,n){var r;return {quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:(r=n)!==o.DEFAULT&&r!==o.STRONG&&r!==o.WEAK?o.DEFAULT:r}}s.__dashjs_factory_name="SwitchRequest";var u=a.default.getClassFactory(s);u.NO_CHANGE=-1,u.PRIORITY=o,a.default.updateClassFactory(s.__dashjs_factory_name,u),n.default=u,t.exports=n.default;},{47:47}],187:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(186));function a(){var o=[],s=[];return {push:function(e){e.newValue===u.default.NO_CHANGE&&(e.newValue=e.oldValue),o[e.oldValue]||(o[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t,n=e.newValue-e.oldValue,r=n<0?1:0,i=r?-n:0,a=r?0:1;o[e.oldValue].drops+=r,o[e.oldValue].dropSize+=i,o[e.oldValue].noDrops+=a,s.push({idx:e.oldValue,noDrop:a,drop:r,dropSize:i}),8<s.length&&(t=s.shift(),o[t.idx].drops-=t.drop,o[t.idx].dropSize-=t.dropSize,o[t.idx].noDrops-=t.noDrop);},getSwitchRequests:function(){return o},reset:function(){o=[],s=[];}}}a.__dashjs_factory_name="SwitchRequestHistory";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default;},{186:186,47:47}],188:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(108)),i=r(e(47));function a(e){var s=3,u=4,l=4,d=1.3,f=1.3,c=(e=e||{}).settings,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0;function m(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var a=Math.pow(.5,n/r.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n;}function n(e,t,n){return c.get().streaming.abr.movingAverageMethod!==y.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?E.throughputHalfLife:E.latencyHalfLife,r=e?g[t]:_[t];if(!r||r.totalWeight<=0)return NaN;var i=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),a=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(i,a):Math.max(i,a)}(e,t):(a=function(e,t,n){var r=void 0,i=void 0,i=e?(r=h[t],n?s:u):(r=p[t],l);if(r){if(i>=r.length)i=r.length;else if(e)for(var a=1;a<i;++a){var o=r[r.length-a]/r[r.length-a-1];if((f<=o||o<=1/d)&&(i+=1)===r.length)break}}else i=0;return i}(r=e,i=t,n),o=(r?h:p)[i],0!==a&&o&&0!==o.length?(o=o.slice(-a)).reduce(function(e,t){return e+t})/o.length:NaN);var r,i,a,o;}function r(e,t){return n(!0,e,t)}function v(e){h[e]=h[e]||[],p[e]=p[e]||[],g[e]=g[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},_[e]=_[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0};}function t(){h={},p={},g={},_={};}var i={push:function(e,t,n){if(t.trace&&t.trace.length){var r,i,a,o=t.tresponse.getTime()-t.trequest.getTime()||1,s=t._tfinish.getTime()-t.tresponse.getTime()||1,u=t.trace.reduce(function(e,t){return e+t.b[0]},0),l=void 0,l=c.get().streaming.lowLatencyEnabled?t.trace.reduce(function(e,t){return e+t.d},0):n?s:o+s,d=Math.round(8*u/l);if(v(e),a=s,(i=e)===y.default.VIDEO?a<c.get().streaming.cacheLoadThresholds[y.default.VIDEO]:i===y.default.AUDIO&&a<c.get().streaming.cacheLoadThresholds[y.default.AUDIO]){if(0<h[e].length&&!h[e].hasCachedEntries)return;h[e].hasCachedEntries=!0;}else h[e]&&h[e].hasCachedEntries&&(delete h[r=e],delete p[r],delete g[r],delete _[r],v(r));h[e].push(d),20<h[e].length&&h[e].shift(),p[e].push(o),20<p[e].length&&p[e].shift(),m(g[e],d,.001*s,E.throughputHalfLife),m(_[e],o,1,E.latencyHalfLife);}},getAverageThroughput:r,getSafeAverageThroughput:function(e,t){var n=r(e,t);return isNaN(n)||(n*=c.get().streaming.abr.bandwidthSafetyFactor),n},getAverageLatency:function(e){return n(!1,e)},reset:t};return E={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},t(),i}a.__dashjs_factory_name="ThroughputHistory",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,47:47}],189:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(195)),d=r(e(193)),f=r(e(190)),c=r(e(192)),h=r(e(194)),p=r(e(191)),i=r(e(47)),g=r(e(186)),_="qualitySwitchRules",E="abandonFragmentRules";function a(e){e=e||{};var s=this.context,t=e.mediaPlayerModel,n=e.dashMetrics,r=e.settings,i=void 0,a=void 0;function o(e){return e.filter(function(e){return e.quality>g.default.NO_CHANGE})}function u(e){var t,n={},r=void 0,i=void 0,a=void 0,o=void 0;if(0!==e.length){for(n[g.default.PRIORITY.STRONG]=g.default.NO_CHANGE,n[g.default.PRIORITY.WEAK]=g.default.NO_CHANGE,n[g.default.PRIORITY.DEFAULT]=g.default.NO_CHANGE,r=0,t=e.length;r<t;r+=1)(i=e[r]).quality!==g.default.NO_CHANGE&&(n[i.priority]=n[i.priority]>g.default.NO_CHANGE?Math.min(n[i.priority],i.quality):i.quality);return n[g.default.PRIORITY.WEAK]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.WEAK]),n[g.default.PRIORITY.DEFAULT]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.DEFAULT]),n[g.default.PRIORITY.STRONG]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.STRONG]),a!==g.default.NO_CHANGE&&(o=a),(0, g.default)(s).create(o)}}return {initialize:function(){i=[],a=[],r.get().streaming.abr.useDefaultABRRules&&(i.push((0, p.default)(s).create({dashMetrics:n,mediaPlayerModel:t,settings:r})),i.push((0, l.default)(s).create({dashMetrics:n})),i.push((0, d.default)(s).create({dashMetrics:n})),i.push((0, h.default)(s).create()),i.push((0, c.default)(s).create()),a.push((0, f.default)(s).create({dashMetrics:n,mediaPlayerModel:t,settings:r}))),t.getABRCustomRules().forEach(function(e){e.type===_&&i.push(e.rule(s).create()),e.type===E&&a.push(e.rule(s).create());});},reset:function(){[i,a].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()});}),i=[],a=[];},getMaxQuality:function(t){return u(o(i.map(function(e){return e.getMaxIndex(t)})))||(0, g.default)(s).create()},shouldAbandonFragment:function(t){return u(o(a.map(function(e){return e.shouldAbandon(t)})))||(0, g.default)(s).create()}}}a.__dashjs_factory_name="ABRRulesCollection";var o=i.default.getClassFactory(a);o.QUALITY_SWITCH_RULES=_,o.ABANDON_FRAGMENT_RULES=E,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{186:186,190:190,191:191,192:192,193:193,194:194,195:195,47:47}],190:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var R=r(e(186)),i=r(e(47)),a=r(e(45));function b(e){e=e||{};var E=this.context,m=e.mediaPlayerModel,v=e.dashMetrics,y=e.settings,t=void 0,T=void 0,S=void 0,A=void 0,I=void 0;function n(){S={},A={},I=[];}return t={shouldAbandon:function(e){var t=(0, R.default)(E).create(R.default.NO_CHANGE,{name:b.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var n,r,i,a,o=e.getMediaInfo(),s=e.getMediaType(),u=e.getCurrentRequest();if(!isNaN(u.index)){if(i=s,a=u.index,S[i]=S[i]||{},S[i][a]=S[i][a]||{},m.getStableBufferTime()<v.getCurrentBufferLevel(s))return t;var l=S[s][u.index];if(null===l||null===u.firstByteDate||A.hasOwnProperty(l.id))return t;if(void 0===l.firstByteTime&&(I[s]=[],l.firstByteTime=u.firstByteDate.getTime(),l.segmentDuration=u.duration,l.bytesTotal=u.bytesTotal,l.id=u.index),l.bytesLoaded=u.bytesLoaded,l.elapsedTime=(new Date).getTime()-l.firstByteTime,0<l.bytesLoaded&&0<l.elapsedTime&&(n=s,r=Math.round(8*l.bytesLoaded/l.elapsedTime),I[n]=I[n]||[],I[n].push(r)),5<=I[s].length&&500<l.elapsedTime&&l.bytesLoaded<l.bytesTotal){var d,f,c,h,p,g,_=I[s].reduce(function(e,t){return e+t},0);if(l.measuredBandwidthInKbps=Math.round(_/I[s].length),l.estimatedTimeOfDownload=+(8*l.bytesTotal/l.measuredBandwidthInKbps/1e3).toFixed(2),l.estimatedTimeOfDownload<1.8*l.segmentDuration||0===e.getRepresentationInfo().quality)return t;A.hasOwnProperty(l.id)||(d=e.getAbrController(),f=l.bytesTotal-l.bytesLoaded,c=d.getBitrateList(o),h=d.getQualityForBitrate(o,l.measuredBandwidthInKbps*y.get().streaming.abr.bandwidthSafetyFactor),g=void 0!==(p=d.getMinAllowedIndexFor(s))?Math.max(p,h):h,l.bytesTotal*c[g].bitrate/c[d.getQualityFor(s)].bitrate<f&&(t.quality=g,t.reason.throughput=l.measuredBandwidthInKbps,t.reason.fragmentID=l.id,A[l.id]=l,T.debug("["+s+"] frag id",l.id," is asking to abandon and switch to quality to ",g," measured bandwidth was",l.measuredBandwidthInKbps),delete S[s][l.id]));}else l.bytesLoaded===l.bytesTotal&&delete S[s][l.id];}return t},reset:n},T=(0, a.default)(E).getInstance().getLogger(t),n(),t}b.__dashjs_factory_name="AbandonRequestsRule",n.default=i.default.getClassFactory(b),t.exports=n.default;},{186:186,45:45,47:47}],191:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(109)),x=r(e(186)),i=r(e(47)),g=e(241),_=r(e(46)),E=r(e(54)),m=r(e(45));function a(e){e=e||{};var b=this.context,D=e.dashMetrics,o=e.mediaPlayerModel,t=(0, _.default)(b).getInstance(),n=void 0,M=void 0,N=void 0;function s(e,t,r){var n=r.reduce(function(e,t,n){return t>r[e]?n:e},0);if(0===n)return null;var i=Math.max(e,10+2*t.length),a=(r[n]-1)/(i/10-1);return {gp:a,Vp:10/a}}function C(e){var t={},n=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),r=(r=n.map(function(e){return Math.log(e)})).map(function(e){return e-r[0]+1}),i=o.getStableBufferTime(),a=s(i,n,r);return a?(t.state=1,t.bitrates=n,t.utilities=r,t.stableBufferTime=i,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,O(t)):t.state=0,t}function O(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN;}function w(e,t){var n,r,i,a=o.getStableBufferTime();e.stableBufferTime!==a&&((n=s(a,e.bitrates,e.utilities)).Vp===e.Vp&&n.gp===e.gp||(i=(r=D.getCurrentBufferLevel(t))+e.placeholderBuffer,i-=10,i*=n.Vp/e.Vp,i+=10,e.stableBufferTime=a,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,i-r)));}function P(e,t){return e.Vp*(e.utilities[t]+e.gp)}function L(e,t){for(var n,r,i,a=e.bitrates[t],o=e.utilities[t],s=0,u=t-1;0<=u;--u){e.utilities[u]<e.utilities[t]&&(n=e.bitrates[u],r=e.utilities[u],i=e.Vp*(e.gp+(a*r-n*o)/(a-n)),s=Math.max(s,i));}return s}function r(){for(var e in N)N.hasOwnProperty(e)&&2===N[e].state&&(N[e].placeholderBuffer=0);}function i(){for(var e in N){var t;!N.hasOwnProperty(e)||0!==(t=N[e]).state&&(t.state=1,O(t));}}function a(){}function u(e){var t,n;e&&e.chunk&&e.chunk.mediaInfo&&((t=N[e.chunk.mediaInfo.type])&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,d(t,e.chunk.mediaInfo.type)));}function l(e){var t;e&&e.metric===p.default.HTTP_REQUEST&&e.value&&e.value.type===g.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&((t=N[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),d(t,e.mediaType)));}function d(e,t){var n,r,i;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(n=D.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=P(e,e.lastQuality),i=Math.max(0,r-n),e.placeholderBuffer=Math.min(i,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN);}function f(e){var t;!e||(t=N[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality);}function c(e){var t,n,r,i;!e||(t=N[e.mediaType])&&0!==t.state&&(n=D.getCurrentBufferLevel(e.mediaType),r=void 0,r=0<t.abrQuality?L(t,t.abrQuality):10,i=Math.max(0,r-n),t.placeholderBuffer=Math.min(t.placeholderBuffer,i));}function h(){N={};}return n={getMaxIndex:function(e){var t=(0, x.default)(b).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var n=e.getMediaInfo(),r=e.getMediaType(),i=e.getScheduleController(),a=e.getStreamInfo(),o=e.getAbrController(),s=o.getThroughputHistory(),u=a?a.id:null,l=a&&a.manifestInfo&&a.manifestInfo.isDynamic,d=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!d)return t;i.setTimeToLoadDelay(0);var f,c,h,p=(c=(f=e).getMediaType(),(h=N[c])?0!==h.state&&w(h,c):(h=C(f),N[c]=h),h);if(0===p.state)return t;var g,_,E,m,v=D.getCurrentBufferLevel(r),y=s.getAverageThroughput(r,l),T=s.getSafeAverageThroughput(r,l),S=s.getAverageLatency(r),A=void 0;if(t.reason.state=p.state,t.reason.throughput=y,t.reason.latency=S,isNaN(y))return t;switch(p.state){case 1:A=o.getQualityForBitrate(n,T,S),t.quality=A,t.reason.throughput=T,p.placeholderBuffer=Math.max(0,L(p,A)-v),p.lastQuality=A,!isNaN(p.lastSegmentDurationS)&&v>=p.lastSegmentDurationS&&(p.state=2);break;case 2:g=p,_=r,m=Date.now(),isNaN(g.lastSegmentFinishTimeMs)?isNaN(g.lastCallTimeMs)||(E=.001*(m-g.lastCallTimeMs),g.placeholderBuffer+=Math.max(0,E)):(E=.001*(m-g.lastSegmentFinishTimeMs),g.placeholderBuffer+=Math.max(0,E)),g.lastCallTimeMs=m,g.lastSegmentStart=NaN,g.lastSegmentRequestTimeMs=NaN,g.lastSegmentFinishTimeMs=NaN,w(g,_),A=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||i<=o)&&(i=o,r=a);}return r}(p,v+p.placeholderBuffer);var I=o.getQualityForBitrate(n,T,S);A>p.lastQuality&&I<A&&(A=Math.max(I,p.lastQuality));var R=Math.max(0,v+p.placeholderBuffer-P(p,A));R<=p.placeholderBuffer?(p.placeholderBuffer-=R,R=0):(R-=p.placeholderBuffer,p.placeholderBuffer=0,A<o.getTopQualityIndexFor(r,u)?i.setTimeToLoadDelay(1e3*R):R=0),t.quality=A,t.reason.throughput=y,t.reason.latency=S,t.reason.bufferLevel=v,t.reason.placeholderBuffer=p.placeholderBuffer,t.reason.delay=R,p.lastQuality=A;break;default:M.debug("BOLA ABR rule invoked in bad state."),t.quality=o.getQualityForBitrate(n,T,S),t.reason.state=p.state,t.reason.throughput=T,t.reason.latency=S,p.state=1,O(p);}return t},reset:function(){h(),t.off(E.default.BUFFER_EMPTY,r,n),t.off(E.default.PLAYBACK_SEEKING,i,n),t.off(E.default.PERIOD_SWITCH_STARTED,a,n),t.off(E.default.MEDIA_FRAGMENT_LOADED,u,n),t.off(E.default.METRIC_ADDED,l,n),t.off(E.default.QUALITY_CHANGE_REQUESTED,f,n),t.off(E.default.FRAGMENT_LOADING_ABANDONED,c,n);}},M=(0, m.default)(b).getInstance().getLogger(n),h(),t.on(E.default.BUFFER_EMPTY,r,n),t.on(E.default.PLAYBACK_SEEKING,i,n),t.on(E.default.PERIOD_SWITCH_STARTED,a,n),t.on(E.default.MEDIA_FRAGMENT_LOADED,u,n),t.on(E.default.METRIC_ADDED,l,n),t.on(E.default.QUALITY_CHANGE_REQUESTED,f,n),t.on(E.default.FRAGMENT_LOADING_ABANDONED,c,n),n}a.__dashjs_factory_name="BolaRule",n.default=i.default.getClassFactory(a),t.exports=n.default;},{109:109,186:186,241:241,45:45,46:46,47:47,54:54}],192:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),d=r(e(186)),a=r(e(45));function o(){var u=this.context,e=void 0,l=void 0;return e={getMaxIndex:function(e){var t=(0, d.default)(u).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return t;var n=e.getDroppedFramesHistory();if(n){for(var r=n.getFrameHistory(),i=0,a=0,o=d.default.NO_CHANGE,s=1;s<r.length;s++)if(r[s]&&(i=r[s].droppedVideoFrames,375<(a=r[s].totalVideoFrames)&&.15<i/a)){o=s-1,l.debug("index: "+o+" Dropped Frames: "+i+" Total Frames: "+a);break}return (0, d.default)(u).create(o,{droppedFrames:i})}return t}},l=(0, a.default)(u).getInstance().getLogger(e),e}o.__dashjs_factory_name="DroppedFramesRule",n.default=i.default.getClassFactory(o),t.exports=n.default;},{186:186,45:45,47:47}],193:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(46)),u=r(e(54)),i=r(e(47)),l=r(e(45)),E=r(e(186)),m=r(e(108)),v=r(e(109));function a(e){e=e||{};var c=.5,t=2,h=this.context,n=(0, s.default)(h).getInstance(),p=e.dashMetrics,r=void 0,g=void 0,_=void 0;function i(){(_={})[m.default.VIDEO]={ignoreCount:t},_[m.default.AUDIO]={ignoreCount:t};}function a(){i();}function o(e){isNaN(e.startTime)||e.mediaType!==m.default.AUDIO&&e.mediaType!==m.default.VIDEO||0<_[e.mediaType].ignoreCount&&_[e.mediaType].ignoreCount--;}return r={getMaxIndex:function(e){var t=(0, E.default)(h).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!p||!p.hasOwnProperty("getCurrentBufferLevel")||!p.hasOwnProperty("getCurrentBufferState"))throw new Error(m.default.MISSING_CONFIG_ERROR)}();var n,r,i,a,o,s,u,l=e.getMediaType(),d=p.getCurrentBufferState(l),f=e.getRepresentationInfo().fragmentDuration;return 0<_[l].ignoreCount||!f||(d&&d.state===v.default.BUFFER_EMPTY?(g.debug("["+l+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty"):(n=e.getMediaInfo(),i=(r=e.getAbrController()).getThroughputHistory(),a=p.getCurrentBufferLevel(l),o=i.getAverageThroughput(l),s=i.getAverageLatency(l),u=o*(a/f)*c,t.quality=r.getQualityForBitrate(n,u,s),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering")),t},reset:function(){i(),n.off(u.default.PLAYBACK_SEEKING,a,r),n.off(u.default.BYTES_APPENDED_END_FRAGMENT,o,r);}},g=(0, l.default)(h).getInstance().getLogger(r),i(),n.on(u.default.PLAYBACK_SEEKING,a,r),n.on(u.default.BYTES_APPENDED_END_FRAGMENT,o,r),r}a.__dashjs_factory_name="InsufficientBufferRule",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,109:109,186:186,45:45,46:46,47:47,54:54}],194:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),d=r(e(186));function o(){var u=this.context,e=void 0,l=void 0;return e={getMaxIndex:function(e){for(var t=e?e.getSwitchHistory():null,n=t?t.getSwitchRequests():[],r=0,i=0,a=0,o=(0, d.default)(u).create(),s=0;s<n.length;s++)if(void 0!==n[s]&&(r+=n[s].drops,i+=n[s].noDrops,a+=n[s].dropSize,6<=r+i&&.075<r/i)){o.quality=0<s&&0<n[s].drops?s-1:s,o.reason={index:o.quality,drops:r,noDrops:i,dropSize:a},l.debug("Switch history rule index: "+o.quality+" samples: "+(r+i)+" drops: "+r);break}return o}},l=(0, a.default)(u).getInstance().getLogger(e),e}o.__dashjs_factory_name="SwitchHistoryRule",n.default=i.default.getClassFactory(o),t.exports=n.default;},{186:186,45:45,47:47}],195:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),_=r(e(186)),E=r(e(108)),m=r(e(109));function o(e){e=e||{};var h=this.context,p=e.dashMetrics,t=void 0,g=void 0;return t={getMaxIndex:function(e){var t=(0, _.default)(h).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return t;!function(){if(!p||!p.hasOwnProperty("getCurrentBufferState"))throw new Error(E.default.MISSING_CONFIG_ERROR)}();var n=e.getMediaInfo(),r=e.getMediaType(),i=p.getCurrentBufferState(r),a=e.getScheduleController(),o=e.getAbrController(),s=e.getStreamInfo(),u=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,l=o.getThroughputHistory(),d=l.getSafeAverageThroughput(r,u),f=l.getAverageLatency(r),c=e.useBufferOccupancyABR();return isNaN(d)||!i||c||o.getAbandonmentStateFor(r)!==m.default.ABANDON_LOAD&&(i.state!==m.default.BUFFER_LOADED&&!u||(t.quality=o.getQualityForBitrate(n,d,f),a.setTimeToLoadDelay(0),g.debug("["+r+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(d),"kbps"),t.reason={throughput:d,latency:f})),t},reset:function(){}},g=(0, a.default)(h).getInstance().getLogger(t),t}o.__dashjs_factory_name="ThroughputRule",n.default=i.default.getClassFactory(o),t.exports=n.default;},{108:108,109:109,186:186,45:45,47:47}],196:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=r(e(108)),i=r(e(47)),h=r(e(109));function a(e){var s=(e=e||{}).dashMetrics,u=e.mediaPlayerModel,l=e.textController,d=e.abrController,f=e.settings;function r(e,t,n){var r,i,a,o=NaN;return e&&t?o=e===c.default.FRAGMENTED_TEXT?l.isTextEnabled()?isNaN(t.fragmentDuration)?(r=s.getCurrentSchedulingInfo(h.default.SCHEDULING_INFO))?r.duration:0:t.fragmentDuration:0:e===c.default.AUDIO&&n?(i=s.getCurrentBufferLevel(c.default.VIDEO),isNaN(t.fragmentDuration)?i:Math.max(i,t.fragmentDuration)):(a=t.mediaInfo.streamInfo,d.isPlayingAtTopQuality(a)?a.manifestInfo.duration>=f.get().streaming.longFormContentDurationThreshold?f.get().streaming.bufferTimeAtTopQualityLongForm:f.get().streaming.bufferTimeAtTopQuality:u.getStableBufferTime()):o}return {execute:function(e,t,n){return !e||!t||s.getCurrentBufferLevel(e)<r(e,t,n)},getBufferTarget:r}}a.__dashjs_factory_name="BufferLevelRule",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,109:109,47:47}],197:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var G=0;function r(e){return "red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function j(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?r(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?r(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return {createHTMLCaptionsFromScreen:function(e,t,n,r){for(var i=null,a=!1,o=-1,s={start:t,end:n,spans:[]},u="style_cea608_white_black",l={},d={},f=[],c=void 0,h=void 0,c=0;c<15;++c){var p=r.rows[c],g="",_=null;if(!1===p.isEmpty()){var E=function(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar;}return t.length-t.replace(/^\s+/,"").length}(p.chars);null===i&&(i={x:E,y1:c,y2:c+1,p:[]}),E!==o&&a&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=c,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i={x:E,y1:c,y2:c+1,p:[]});for(var m=0;m<p.chars.length;++m){var v,y=p.chars[m],T=y.penState;null!==_&&T.equals(_)||(0<g.trim().length&&(s.spans.push({name:u,line:g,row:c}),g=""),v="style_cea608_"+T.foreground+"_"+T.background,T.underline&&(v+="_underline"),T.italics&&(v+="_italics"),d.hasOwnProperty(v)||(d[v]=JSON.parse(JSON.stringify(T))),_=T,u=v),g+=y.uchar;}0<g.trim().length&&s.spans.push({name:u,line:g,row:c}),a=!0,o=E;}else a=!1,o=-1,i&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=c,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null);}i&&(i.p.push(s),i.y2=c+1,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null);var S,A=[];for(c=0;c<f.length;++c){var I=f[c],R="sub_cea608_"+G++,b=document.createElement("div");b.id=R;var D="left: "+3.125*(S=I).x+"%; top: "+6.66*S.y1+"%; width: "+(100-3.125*S.x)+"%; height: "+6.66*Math.max(S.y2-1-S.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";b.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+D;var M=document.createElement("div");M.className="paragraph bodyStyle",M.style.cssText=j(e);var N=document.createElement("div");N.className="cueUniWrapper",N.style.cssText="unicode-bidi: normal; direction: ltr;";for(var C=0;C<I.p.length;++C)for(var O=I.p[C],w=0,h=0;h<O.spans.length;++h){var P,L,x,F,U=O.spans[h];0<U.line.length&&(0!==h&&w!=U.row&&((P=document.createElement("br")).className="lineBreak",N.appendChild(P)),L=!1,w===U.row&&(L=!0),w=U.row,x=d[U.name],(F=document.createElement("span")).className="spanPadding "+U.name+" customSpanColor",F.style.cssText=j(e,x),0!==h&&L?h===O.spans.length-1?F.textContent=U.line.replace(/\s+$/g,""):F.textContent=U.line:1<O.spans.length&&h<O.spans.length-1&&U.row===O.spans[h+1].row?F.textContent=U.line.replace(/^\s+/g,""):F.textContent=U.line.trim(),N.appendChild(F));}M.appendChild(N),b.appendChild(M);var k={bodyStyle:["%",90]};for(var B in d)d.hasOwnProperty(B)&&(k[B]=["%",90]);A.push({type:"html",start:t,end:n,cueHTMLElement:b,cueID:R,cellResolution:[32,15],isFromCEA608:!0,fontSize:k,lineHeight:{},linePadding:{}});}return A}}}o.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],198:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(108)),v=r(e(46)),y=r(e(54)),i=r(e(47)),T=r(e(213)),S=r(e(104)),A=r(e(200)),I=r(e(225)),R=r(e(51)),b="NotFragmentedTextBufferController";function a(e){e=e||{};var r=this.context,t=(0, v.default)(r).getInstance(),i=(0, A.default)(r).getInstance(),a=e.errHandler,o=e.streamInfo,s=e.type,u=e.mimeType,l=e.fragmentModel,n=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0;function g(e){c=e;}function _(e){e.sender.getStreamId()!==o.id||e.sender.getType()!==s||e.error||null===p.extract(o.id,e.currentRepresentation.id)&&(d=!1,t.trigger(y.default.INIT_FRAGMENT_NEEDED,{sender:n,streamId:o.id,mediaType:s,representationId:e.currentRepresentation.id}));}function E(e){e.chunk.streamId===o.id&&e.chunk.mediaInfo.type===s&&e.chunk.bytes&&(p.save(e.chunk),h.append(e.chunk),d=!0,t.trigger(y.default.STREAM_COMPLETED,{request:e.request}));}return n={getBufferControllerType:function(){return b},initialize:function(e){g(e),p=(0, T.default)(r).getInstance();},createBuffer:function(e){var t,n=e[0];try{return h=(0,S.default)(r).create(c,n),f||((t=h.getBuffer()).hasOwnProperty(m.default.INITIALIZE)&&t.initialize(u,o,e,l),f=!0),h}catch(e){if(n&&(n.isText||-1!==n.codec.indexOf('codecs="stpp')||-1!==n.codec.indexOf('codecs="wvtt')))try{h=i.getTextSourceBuffer();}catch(e){a.error(new I.default(R.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+s+" : "+e.message));}else a.error(new I.default(R.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+s));}},getType:function(){return s},getBuffer:function(){return h},getBufferLevel:function(){return 0},setMediaSource:g,getMediaSource:function(){return c},getIsBufferingCompleted:function(){return d},getIsPruningInProgress:function(){return !1},dischargePreBuffer:function(){},appendInitSegment:function(e){return null!==p.extract(o.id,e)},getRangeAt:function(){return null},reset:function(e){t.off(y.default.DATA_UPDATE_COMPLETED,_,n),t.off(y.default.INIT_FRAGMENT_LOADED,E,n),!e&&h&&(h.abort(),h.reset(),h=null);},updateTimestampOffset:function(e){h.timestampOffset===e||isNaN(e)||(h.timestampOffset=e);}},c=null,d=f=!1,t.on(y.default.DATA_UPDATE_COMPLETED,_,n),t.on(y.default.INIT_FRAGMENT_LOADED,E,n),n}a.__dashjs_factory_name=b,n.default=i.default.getClassFactory(a),t.exports=n.default;},{104:104,108:108,200:200,213:213,225:225,46:46,47:47,51:51,54:54}],199:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(108)),i=r(e(47)),o=r(e(114)),s=r(e(198));function u(e){e=e||{};var t,n=this.context,r=void 0;function i(){return r.getBuffer()}return t={getBufferControllerType:function(){return r.getBufferControllerType()},initialize:function(e,t){return r.initialize(e,t)},createBuffer:function(e){return r.createBuffer(e)},getType:function(){return r.getType()},getBuffer:i,setBuffer:function(e){r.setBuffer(e);},getBufferLevel:function(){return r.getBufferLevel()},setMediaSource:function(e){r.setMediaSource(e);},getMediaSource:function(){return r.getMediaSource()},getIsBufferingCompleted:function(){return r.getIsBufferingCompleted()},getIsPruningInProgress:function(){return r.getIsPruningInProgress()},dischargePreBuffer:function(){return r.dischargePreBuffer()},appendInitSegment:function(e){r.appendInitSegment(e);},getRangeAt:function(e){return r.getRangeAt(e)},reset:function(e){r.reset(e);},updateTimestampOffset:function(e){var t=i();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e);}},r=e.type===a.default.FRAGMENTED_TEXT?(0, o.default)(n).create({streamInfo:e.streamInfo,type:e.type,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,fragmentModel:e.fragmentModel,errHandler:e.errHandler,mediaController:e.mediaController,representationController:e.representationController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,settings:e.settings}):(0, s.default)(n).create({streamInfo:e.streamInfo,type:e.type,mimeType:e.mimeType,fragmentModel:e.fragmentModel,errHandler:e.errHandler}),t}u.__dashjs_factory_name="TextBufferController",n.default=i.default.getClassFactory(u),t.exports=n.default;},{108:108,114:114,198:198,47:47}],200:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var N=r(e(108)),i=r(e(47)),C=r(e(201)),O=r(e(202)),w=r(e(221)),P=r(e(219)),L=r(e(46)),x=r(e(54)),F=e(218);function a(){var e=this.context,t=void 0,h=void 0,n=void 0,r=void 0,i=void 0,p=void 0,a=void 0,g=void 0,_=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,E=void 0,m=void 0,v=void 0,y=void 0,T=void 0;function S(e){void 0===T&&null!==e.fromStreamInfo&&(T=this.getCurrentTrackIdx());}function A(){void 0===T&&(T=this.getCurrentTrackIdx());}function I(){void 0!==T&&(this.setTextTrack(T),T=void 0);}function R(e){var n=this,t=e.tracks,r=e.index;l&&t.some(function(e,t){if(p.matchSettings(l,e))return n.setTextTrack(t),r=t,!0}),(!1===c||void 0===c&&!l||y)&&this.setTextTrack(-1),f=r,u.trigger(x.default.TEXT_TRACKS_ADDED,{enabled:D(),index:r,tracks:t}),v=!0;}function b(e){var t;d||!e||!e.newMediaInfo||(t=e.newMediaInfo).type===N.default.FRAGMENTED_TEXT&&(l={lang:t.lang,role:t.roles[0],accessibility:t.accessibility[0]});}function D(){return E&&!m?!1:!0}function M(){y=v=!(E=!0);}return t={setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.adapter&&(r=e.adapter),e.manifestModel&&(i=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(a=e.videoModel),e.streamController&&(g=e.streamController),e.textTracks&&(_=e.textTracks),e.vttParser&&(o=e.vttParser),e.ttmlParser&&(s=e.ttmlParser),h.setConfig({errHandler:n,adapter:r,manifestModel:i,mediaController:p,videoModel:a,streamController:g,textTracks:_,vttParser:o,ttmlParser:s}));},getTextSourceBuffer:function(){return h},getAllTracksAreDisabled:function(){return E},addEmbeddedTrack:function(e){h.addEmbeddedTrack(e);},getTextDefaultLanguage:function(){return l&&l.lang||""},setTextDefaultLanguage:function(e){(0, F.checkParameterType)(e,"string"),(l=l||{}).lang=e,d=!0;},setTextDefaultEnabled:function(e){(0, F.checkParameterType)(e,"boolean"),(c=e)?E=!1:this.setTextTrack(-1);},getTextDefaultEnabled:function(){return void 0!==c&&c},setInitialSettings:function(e){l=e,d=!0;},enableText:function(e){(0, F.checkParameterType)(e,"boolean"),!c&&e&&(c=!0),D()!==e&&(e&&this.setTextTrack(f),e||(f=this.getCurrentTrackIdx(),v?this.setTextTrack(-1):y=!0));},isTextEnabled:D,setTextTrack:function(e){var t=h.getConfig(),n=t.fragmentModel,r=t.fragmentedTracks,i=t.videoModel,a=void 0,o=void 0;E=-1===e;var s=_.getCurrentTrackIdx();if(s!==e){E&&p&&p.saveTextSettingsDisabled(),_.setModeForTrackIdx(s,N.default.TEXT_HIDDEN),_.setCurrentTrackIdx(e),_.setModeForTrackIdx(e,N.default.TEXT_SHOWING);var u=_.getCurrentTrackInfo();if(u&&u.isFragmented&&!u.isEmbedded)for(var l=0;l<r.length;l++){var d=r[l];if(u.lang===d.lang&&u.index===d.index&&(d.id?u.id===d.id:u.id===d.index))if(d!==p.getCurrentTrackFor(N.default.FRAGMENTED_TEXT,g.getActiveStreamInfo()))n.abortRequests(),n.removeExecutedRequestsBeforeTime(),h.remove(),_.deleteCuesFromTrackIdx(s),p.setTrack(d),h.setCurrentFragmentedTrackIdx(l);else if(-1===s){for(var f=g.getActiveStreamProcessors(),c=0;c<f.length;c++)if(f[c].getType()===N.default.FRAGMENTED_TEXT){o=f[c];break}o.setIndexHandlerTime(i.getTime()),o.getScheduleController().start();}}else if(u&&!u.isFragmented){for(f=g.getActiveStreamProcessors(),l=0;l<f.length;l++)if(f[l].getType()===N.default.TEXT){a=(o=f[l]).getMediaInfoArr();break}if(o&&a)for(l=0;l<a.length;l++)if(a[l].index===u.index&&a[l].lang===u.lang){o.selectMediaInfo(a[l]);break}}}},getCurrentTrackIdx:function(){return _.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0, F.checkParameterType)(e,"boolean"),m=e;},reset:function(){M(),h.resetEmbedded(),h.reset();}},l=null,_=(y=d=v=m=!(f=-1),O.default)(e).getInstance(),o=(0, w.default)(e).getInstance(),s=(0, P.default)(e).getInstance(),h=(0, C.default)(e).getInstance(),u=(0, L.default)(e).getInstance(),_.initialize(),u.on(x.default.TEXT_TRACKS_QUEUE_INITIALIZED,R,t),u.on(x.default.CURRENT_TRACK_CHANGED,b,t),u.on(x.default.PERIOD_SWITCH_STARTED,S,t),u.on(x.default.STREAM_COMPLETED,A,t),u.on(x.default.PERIOD_SWITCH_COMPLETED,I,t),M(),t}a.__dashjs_factory_name="TextController",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,201:201,202:202,218:218,219:219,221:221,46:46,47:47,54:54}],201:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var re=r(e(108)),ie=e(241),m=r(e(233)),v=r(e(206)),y=r(e(208)),i=r(e(47)),T=r(e(45)),S=r(e(202)),A=r(e(197)),ae=r(e(9)),oe=r(e(2)),I=r(e(46)),R=r(e(54)),se=r(e(225)),ue=r(e(51));function a(){var s=this.context,n=(0, I.default)(s).getInstance(),i=!1,u=void 0,U=void 0,k=void 0,B=void 0,l=void 0,G=void 0,d=void 0,j=void 0,r=void 0,a=void 0,f=void 0,Y=void 0,K=void 0,q=void 0,H=void 0,c=void 0,V=void 0,o=void 0,z=void 0,W=void 0,X=void 0,Q=void 0,Z=void 0,$=void 0,J=void 0,ee=void 0;function e(){H=NaN,z=K=null,q=!(c=[]);}function t(){e(),f=[],j=null;}function h(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&_(t.bytes,t);}function p(){X=[],(Y=(0, S.default)(s).getInstance()).setConfig({videoModel:V}),Y.initialize(),k=(0, v.default)(s).getInstance(),$=[],i=!(Z=W=null),J=(Q=0,A.default)(s).getInstance();var e=o.getActiveStreamProcessors();for(var t in e)if("video"===e[t].getType()){ee=e[t].getRepresentationInfo().MSETimeOffset;break}n.on(R.default.VIDEO_CHUNK_RECEIVED,h,this),n.on(R.default.BUFFER_CLEARED,E,this);}function g(e){W=e;}function te(e,t){var n,r,i=new m.default,a={subtitle:"subtitles",caption:"captions"};i.captionData=e,i.lang=t.lang,i.labels=t.labels,i.id=t.id?t.id:t.index,i.index=t.index,i.isTTML=(n=!1,t.codec&&0<=t.codec.search(re.default.STPP)&&(n=!0),t.mimeType&&0<=t.mimeType.search(re.default.TTML)&&(n=!0),n),i.defaultTrack=function(e){var t=!1;1<X.length&&e.isEmbedded?t=e.id&&e.id===re.default.CC1:1===X.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===X.length&&(t=e.index===f[0].index);return t}(t),i.isFragmented=!l.getIsTextTrack(t.mimeType),i.isEmbedded=!!t.isEmbedded,i.kind=r=(r=0<t.roles.length?a[t.roles[0]]:a.caption)===a.caption||r===a.subtitle?r:a.caption,i.roles=t.roles,i.accessibility=t.accessibility;var o=(f?f.length:0)+X.length;Y.addTextTrack(i,o);}function _(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=t.mediaInfo,d=l.type,f=l.mimeType,c=l.codec||f;if(c){if(d===re.default.FRAGMENTED_TEXT)if(q||"InitializationSegment"!==t.segmentType){if(!q)return;if(r=(s=k.getSamplesInfo(e)).sampleList,null===z&&0<r.length&&(z=r[0].cts-t.start*H),0<=c.search(re.default.STPP))for(j=null!==j?j:ne(c),i=0;i<r.length;i++){var h=(T=r[i]).cts,p=h-z;this.buffered.add(p/H,(p+T.duration)/H);for(var g=new DataView(e,T.offset,T.subSizes[0]),u=ae.default.Utils.dataViewToString(g,re.default.UTF8),_=[],E=T.offset+T.subSizes[0],a=1;a<T.subSizes.length;a++){var m=new Uint8Array(e,E,T.subSizes[a]),v=String.fromCharCode.apply(null,m);_.push(v),E+=T.subSizes[a];}try{var y=G.getValue().ttmlTimeIsRelative?h/H:0,n=j.parse(u,y,h/H,(h+T.duration)/H,_);Y.addCaptions(W,z/H,n);}catch(e){K.removeExecutedRequestsBeforeTime(),this.remove(),U.error("TTML parser error: "+e.message);}}else {for(var T,S=[],i=0;i<r.length;i++){(T=r[i]).cts-=z,this.buffered.add(T.cts/H,(T.cts+T.duration)/H);var A=e.slice(T.offset,T.offset+T.size),I=ae.default.parseBuffer(A);for(a=0;a<I.boxes.length;a++){var R=I.boxes[a];if(U.debug("VTT box1: "+R.type),"vtte"!==R.type&&"vttc"===R.type)for(U.debug("VTT vttc boxes.length = "+R.boxes.length),o=0;o<R.boxes.length;o++){var b,D,M,N=R.boxes[o];U.debug("VTT box2: "+N.type),"payl"===N.type&&(b=N.cue_text,U.debug("VTT cue_text = "+b),D=T.cts/H,M=(T.cts+T.duration)/H,S.push({start:D,end:M,data:b,styles:{}}),U.debug("VTT "+D+"-"+M+" : "+b));}}}0<S.length&&Y.addCaptions(W,0,S);}}else q=!0,H=k.getMediaTimescaleFromMoov(e);else if(d===re.default.TEXT){g=new DataView(e,0,e.byteLength);u=ae.default.Utils.dataViewToString(g,re.default.UTF8);try{n=ne(c).parse(u,0),Y.addCaptions(Y.getCurrentTrackIdx(),0,n);}catch(e){B.error(new se.default(ue.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,ue.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,u));}}else if(d===re.default.VIDEO)if(t.segmentType===ie.HTTPRequest.INIT_SEGMENT_TYPE){if(0===Q)for(Q=k.getMediaTimescaleFromMoov(e),i=0;i<X.length;i++)te(null,X[i]);}else {if(0===Q)return void U.warn("CEA-608: No timescale for embeddedTextTrack yet");var C=(s=k.getSamplesInfo(e)).lastSequenceNumber;if(!$[0]&&!$[1]){var O=void 0,w=void 0;for(i=0;i<X.length;i++){if(X[i].id===re.default.CC1?w=Y.getTrackIdxForId(re.default.CC1):X[i].id===re.default.CC3&&(w=Y.getTrackIdxForId(re.default.CC3)),-1===w)return void U.warn("CEA-608: data before track is ready.");O=function(i){return function(e,t,n){var r=null;(r=V.getTTMLRenderingDiv()?J.createHTMLCaptionsFromScreen(V.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}])&&Y.addCaptions(i,0,r);}}(w),$[i]=new oe.default.Cea608Parser(i+1,{newCue:O},null);}}if(Q){if(null!==Z&&C!==Z+s.numSequences)for(i=0;i<$.length;i++)$[i]&&$[i].reset();for(var P=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],o=oe.default.findCea608Nalus(r,a.offset,a.size),s=null,u=0,l=0;l<o.length;l++)for(var d=oe.default.extractCea608DataFromRange(r,o[l]),f=0;f<2;f++)0<d[f].length&&(a.cts!==s?u=0:u+=1,n.fields[f].push([a.cts+ee*Q,d[f],u]),s=a.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]});}),n}(e,s.sampleList),L=0;L<$.length;L++){var x=P.fields[L],F=$[L];if(F)for(i=0;i<x.length;i++)F.addData(x[i][0]/Q,x[i][1]);}Z=C;}}}else U.error("No text type defined");}function ne(e){var t=void 0;return 0<=e.search(re.default.VTT)?t=r:(0<=e.search(re.default.TTML)||0<=e.search(re.default.STPP))&&(t=a),t}function E(n){X.forEach(function(e){var t=Y.getTrackIdxForId(e.id);0<=t&&Y.deleteCuesFromTrackIdx(t,n.from,n.to);});}return u={initialize:function(e,t,n,r){i||p(),Y.setConfig({videoModel:V}),Y.initialize(),k=k||(0, v.default)(s).getInstance(),function(e,t,n,r){var i=!l.getIsTextTrack(e);if(f=f.concat(n),i){K=r,u.buffered=(0, y.default)(s).create(),c=d.getTracksFor(re.default.FRAGMENTED_TEXT,t);for(var a=d.getCurrentTrackFor(re.default.FRAGMENTED_TEXT,t),o=0;o<c.length;o++)if(c[o]===a){g(o);break}}for(o=0;o<f.length;o++)te(null,f[o]);}(e,t,n,r);},append:_,abort:function(){Y.deleteAllTextTracks(),e(),k=null,f=[];},addEmbeddedTrack:function(e){if(i||p(),e)if(e.id===re.default.CC1||e.id===re.default.CC3){for(var t=0;t<X.length;t++)if(X[t].id===e.id)return;X.push(e);}else U.warn("Embedded track "+e.id+" not supported!");},resetEmbedded:function(){n.off(R.default.VIDEO_CHUNK_RECEIVED,h,this),n.off(R.default.BUFFER_CLEARED,E,this),Y&&Y.deleteAllTextTracks(),i=!1,X=[],$=[null,null],Z=null;},setConfig:function(e){e&&(e.errHandler&&(B=e.errHandler),e.adapter&&(l=e.adapter),e.manifestModel&&(G=e.manifestModel),e.mediaController&&(d=e.mediaController),e.videoModel&&(V=e.videoModel),e.streamController&&(o=e.streamController),e.textTracks&&(Y=e.textTracks),e.vttParser&&(r=e.vttParser),e.ttmlParser&&(a=e.ttmlParser));},getConfig:function(){return {fragmentModel:K,fragmentedTracks:c,videoModel:V}},setCurrentFragmentedTrackIdx:g,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t);},reset:function(){t(),Y=V=o=null;}},U=(0, T.default)(s).getInstance().getLogger(u),t(),u}a.__dashjs_factory_name="TextSourceBuffer",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,197:197,2:2,202:202,206:206,208:208,225:225,233:233,241:241,45:45,46:46,47:47,51:51,54:54,9:9}],202:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(108)),v=r(e(46)),C=r(e(54)),i=r(e(47)),O=r(e(45)),w=e(17),P=e(218);function a(){var e=this.context,y=(0, v.default)(e).getInstance(),t=void 0,u=void 0,l=void 0,T=void 0,o=void 0,a=void 0,d=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,r=void 0,D=void 0,M=void 0,n=void 0,N=void 0;function s(e){var t=o[e].kind,n=void 0!==o[e].id?o[e].id:o[e].lang,r=o[e].lang,i=o[e].isTTML,a=o[e].isEmbedded;return T.addTextTrack(t,n,r,i,a)}function f(e,t){var n=T.getClientWidth(),r=T.getClientHeight(),i=T.getVideoWidth(),a=T.getVideoHeight(),o=T.getVideoRelativeOffsetTop(),s=T.getVideoRelativeOffsetLeft();if(0!==i&&0!==a){var u=i/a,l=!1;e.isFromCEA608&&(u=3.5/3,l=!0);var d,f=function(e,t,n,r,i,a){var o=0,s=0;n/r<e/t?o=(s=t)/r*n:s=(o=e)/n*r;var u,l,d=0,f=0;return i<o/s?d=(f=s)*i:f=(d=o)/i,u=(e-d)/2,l=(t-f)/2,a?{x:u+.1*d,y:l+.1*f,w:.8*d,h:.8*f}:{x:u,y:l,w:d,h:f}}.call(this,n,r,i,a,u,l),c=f.w,h=f.h,p=f.x,g=f.y;if(c!=I||h!=R||p!=S||g!=A||t){S=p+s,A=g+o,I=c,R=h,!b||(d=b.style)&&(d.left=S+"px",d.top=A+"px",d.width=I+"px",d.height=R+"px",d.zIndex=D&&document[D]||M?N:null,y.trigger(C.default.CAPTION_CONTAINER_RESIZE,{}));var _=e.activeCues;if(_)for(var E=_.length,m=0;m<E;++m){var v=_[m];v.scaleCue(v);}}}}function c(e){var t,n=void 0,r=void 0,i=void 0,a=void 0,o=void 0;if(e.cellResolution){var s=[I/e.cellResolution[0],R/e.cellResolution[1]];if(e.linePadding)for(n in e.linePadding)if(e.linePadding.hasOwnProperty(n))for(var r=(e.linePadding[n]*s[0]).toString(),u=document.getElementsByClassName("spanPadding"),l=0;l<u.length;l++)u[l].style.cssText=u[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r),u[l].style.cssText=u[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r);if(e.fontSize){for(n in e.fontSize)if(e.fontSize.hasOwnProperty(n)){"%"===e.fontSize[n][0]?i=e.fontSize[n][1]/100:"c"===e.fontSize[n][0]&&(i=e.fontSize[n][1]),r=(i*s[1]).toString(),o="defaultFontSize"!==n?document.getElementsByClassName(n):document.getElementsByClassName("paragraph");for(var d=0;d<o.length;d++)o[d].style.cssText=o[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r);}if(e.lineHeight)for(n in e.lineHeight)if(e.lineHeight.hasOwnProperty(n)){"%"===e.lineHeight[n][0]?a=e.lineHeight[n][1]/100:"c"===e.fontSize[n][0]&&(a=e.lineHeight[n][1]),r=(a*s[1]).toString(),o=document.getElementsByClassName(n);for(var f=0;f<o.length;f++)o[f].style.cssText=o[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r);}}}e.isd&&((t=document.getElementById(e.cueID))&&b.removeChild(t),h(e));}function h(a){var e;b&&(e=document.createElement("div"),b.appendChild(e),n=(0, w.renderHTML)(a.isd,e,function(e){var t=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(t.test(e)){var r=t.exec(e),i=parseInt(r[4],10)-1;return "data:image/png;base64,"+btoa(a.images[i])}if(n.test(e)){i=(r=n.exec(e))[1];return "data:image/png;base64,"+a.embeddedImages[i]}return null},b.clientHeight,b.clientWidth,!1,function(e){u.info("renderCaption :",e);},n,!0),e.id=a.cueID,y.trigger(C.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:d}));}function p(e){return 0<=e&&o[e]?T.getTextTrack(o[e].kind,o[e].id,o[e].lang,o[e].isTTML,o[e].isEmbedded):null}function g(e){var t;e!==d&&(t=p(d=e),function(e){E.call(this),e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(e)return;(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=T.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0));}catch(e){u.info(""+e.message);}}.call(this):i.call(this);}.call(this,t),r&&(clearInterval(r),r=null),t&&"html"===t.renderingType&&(f.call(this,t,!0),r=setInterval(f.bind(this,t),500)));}function _(e,t,n){if(e.cues)for(var r=e.cues,i=r.length-1;0<=i;i--)a=r[i],o=t,s=n,(isNaN(o)||a.startTime>=o)&&(isNaN(s)||a.endTime<=s)&&e.removeCue(r[i]);var a,o,s;}function i(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e);}function E(){if(b)for(;b.firstChild;)b.removeChild(b.firstChild);}return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(l=window.VTTCue||window.TextTrackCue,o=[],a=[],M=!(d=-1),N=2147483647,n=r=b=null,void(R=I=A=S=0)!==document.fullscreenElement?D="fullscreenElement":void 0!==document.webkitIsFullScreen?D="webkitIsFullScreen":document.msFullscreenElement?D="msFullscreenElement":document.mozFullScreen&&(D="mozFullScreen"));},setDisplayCConTop:function(e){(0, P.checkParameterType)(e,"boolean"),M=e,b&&!document[D]&&(b.style.zIndex=e?N:null);},addTextTrack:function(e,t){var i=this;o.length!==t?(o.push(e),o.length===t&&function(){o.sort(function(e,t){return e.index-t.index}),b=T.getTTMLRenderingDiv();for(var n=-1,e=0;e<o.length;e++){var t=s.call(i,e);a.push(t),o[e].defaultTrack&&(t.default=!0,n=e);var r=p(e);r&&(r.mode=m.default.TEXT_SHOWING,b&&(o[e].isTTML||o[e].isEmbedded)?r.renderingType="html":r.renderingType="default"),i.addCaptions(e,0,o[e].captionData),y.trigger(C.default.TEXT_TRACK_ADDED);}g.call(i,n),0<=n&&function(){y.on(C.default.PLAYBACK_METADATA_LOADED,function e(){var t=p(n);t&&f.call(this,t,!0),y.off(C.default.PLAYBACK_METADATA_LOADED,e,this);},i);for(var e=0;e<o.length;e++){var t=p(e);t&&(t.mode=e===n?m.default.TEXT_SHOWING:m.default.TEXT_HIDDEN);}}(),y.trigger(C.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:d,tracks:o});}()):u.error("Trying to add too many tracks.");},addCaptions:function(e,t,n){var r=p(e),i=this;if(r&&Array.isArray(n)&&0!==n.length)for(var a=0;a<n.length;a++){var o=void 0,s=n[a];r.cellResolution=s.cellResolution,r.isFromCEA608=s.isFromCEA608,"html"===s.type&&b?((o=new l(s.start-t,s.end-t,"")).cueHTMLElement=s.cueHTMLElement,o.isd=s.isd,o.images=s.images,o.embeddedImages=s.embeddedImages,o.cueID=s.cueID,o.scaleCue=c.bind(i),o.cellResolution=s.cellResolution,o.lineHeight=s.lineHeight,o.linePadding=s.linePadding,o.fontSize=s.fontSize,b.style.left=S+"px",b.style.top=A+"px",b.style.width=I+"px",b.style.height=R+"px",o.onenter=function(){r.mode===m.default.TEXT_SHOWING&&(this.isd?(h(this),u.debug("Cue enter id:"+this.cueID)):(b.appendChild(this.cueHTMLElement),c.call(i,this),y.trigger(C.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:d})));},o.onexit=function(){if(b)for(var e=b.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(u.debug("Cue exit id:"+e[t].id),b.removeChild(e[t]),--t);}):s.data&&(o=new l(s.start-t,s.end-t,s.data),s.styles&&(void 0!==s.styles.align&&"align"in o&&(o.align=s.styles.align),void 0!==s.styles.line&&"line"in o&&(o.line=s.styles.line),void 0!==s.styles.position&&"position"in o&&(o.position=s.styles.position),void 0!==s.styles.size&&"size"in o&&(o.size=s.styles.size)),o.onenter=function(){r.mode===m.default.TEXT_SHOWING&&y.trigger(C.default.CAPTION_RENDERED,{currentTrackIdx:d});});try{o?r.addCue(o):u.error("impossible to display subtitles.");}catch(e){throw _(r),r.addCue(o),e}}},getCurrentTrackIdx:function(){return d},setCurrentTrackIdx:g,getTrackIdxForId:function(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return o[d]},setModeForTrackIdx:function(e,t){var n=p(e);n&&n.mode!==t&&(n.mode=t);},deleteCuesFromTrackIdx:function(e,t,n){var r=p(e);r&&_(r,t,n);},deleteAllTextTracks:function(){for(var e=a?a.length:0,t=0;t<e;t++){var n=p(t);n&&(_.call(this,n),n.mode="disabled");}a=[],o=[],r&&(clearInterval(r),r=null),d=-1,E.call(this);},deleteTextTrack:function(e){T.removeChild(a[e]),a.splice(e,1);},setConfig:function(e){e&&e.videoModel&&(T=e.videoModel);}},u=(0, O.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="TextTracks",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,17:17,218:218,45:45,46:46,47:47,54:54}],203:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108)),c=r(e(234)),o=r(e(204)),s=r(e(224)),h=e(80);function u(e){var t,n=this.context,f=void 0;function r(){f&&f.reset();}return t={provide:function(e,t){if("function"==typeof t){var n,r=f.getCurrentTrack(),i=void 0;if(!r||r.segmentDuration<=0||null==e)t(null);else {isNaN(r.segmentDuration)&&(i=f.getThumbnailRequestForTime(e))&&(r.segmentDuration=i.duration),n=e%r.segmentDuration;var a,o,s,u,l=Math.floor(n*r.tilesHor*r.tilesVert/r.segmentDuration),d=new c.default;if(d.width=Math.floor(r.widthPerTile),d.height=Math.floor(r.heightPerTile),d.x=Math.floor(l%r.tilesHor)*r.widthPerTile,d.y=Math.floor(l/r.tilesHor)*r.heightPerTile,"readThumbnail"in r)return r.readThumbnail(e,function(e){d.url=e,t(d);});i?(d.url=i.url,r.segmentDuration=NaN):(a=Math.floor(e/r.segmentDuration),d.url=(s=a+(o=r).startNumber,u=(0, h.replaceTokenForTemplate)(o.templateUrl,"Number",s),u=(0, h.replaceTokenForTemplate)(u,"Time",(s-1)*o.segmentDuration),u=(0, h.replaceTokenForTemplate)(u,"Bandwidth",o.bandwidth),(0, h.unescapeDollarsInTemplate)(u))),t(d);}}},setTrackByIndex:function(e){f.setTrackByIndex(e);},getCurrentTrackIndex:function(){return f.getCurrentTrackIndex()},getBitrateList:function(){var e=f.getTracks(),n=0;return e.map(function(e){var t=new s.default;return t.mediaType=a.default.IMAGE,t.qualityIndex=n++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:r},r(),f=(0, o.default)(n).create({streamInfo:e.streamInfo,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants}),t}u.__dashjs_factory_name="ThumbnailController",n.default=i.default.getClassFactory(u),t.exports=n.default;},{108:108,204:204,224:224,234:234,47:47,80:80}],204:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var T=r(e(108)),S=r(e(61)),i=r(e(47)),A=r(e(235)),I=r(e(220)),R=e(80),b=r(e(54)),D=r(e(206)),M=r(e(159)),N=r(e(57)),C=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function a(e){var t,n=this.context,u=e.adapter,s=e.baseURLController,r=e.streamInfo,l=e.timelineConverter,i=e.debug,a=e.eventBus,o=e.events,d=e.dashConstants,f=(0, I.default)(n).getInstance(),c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0;function m(){y(),_=(0, M.default)(n).create({}),E=(0, D.default)(n).getInstance(),(h=(0, N.default)(n).create({timelineConverter:l,baseURLController:s,debug:i,eventBus:a,events:o,dashConstants:d,urlUtils:f})).initialize(!!u&&u.getIsDynamic()),function(){if(!r||!u)return;if(!(g=u.getMediaInfoForType(r,T.default.IMAGE)))return;var e=u.getVoRepresentations(g);e&&0<e.length&&e.forEach(function(e){(e.segmentInfoType===S.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===S.default.SEGMENT_TIMELINE)&&v(e),e.segmentInfoType===S.default.SEGMENT_BASE&&v(e,!0);});0<c.length&&(c.sort(function(e,t){return e.bitrate-t.bitrate}),p=c.length-1);}();}function v(e,t){var n,r,i=new A.default;i.id=e.id,i.bitrate=e.bandwidth,i.width=e.width,i.height=e.height,i.tilesHor=1,i.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){var t;0<=C.indexOf(e.schemeIdUri)&&e.value&&(2!==(t=e.value.split("x")).length||isNaN(t[0])||isNaN(t[1])||(i.tilesHor=parseInt(t[0],10),i.tilesVert=parseInt(t[1],10)));}),t?a.trigger(b.default.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{mimeType:g.mimeType,mediaType:T.default.IMAGE,representation:e,callback:function(e,r){var o=[];e=function(e,t){for(var n=[],r=0,i=void 0,a=void 0,o=void 0,i=0,s=e.length;i<s;i++)a=e[i],(o=(0, R.getTimeBasedSegment)(l,u.getIsDynamic(),t,a.startTime,a.duration,a.timescale,a.media,a.mediaRange,r))&&(n.push(o),o=null,r++);return n}(e,r),i.segmentDuration=e[0].duration,i.readThumbnail=function(t,a){var n=null;o.some(function(e){if(e.start<=t&&e.end>t)return n=e.url,!0}),n?a(n):e.some(function(i){if(i.mediaStartTime<=t&&i.mediaStartTime+i.duration>t){var e=s.resolve(r.path);return _.load({method:"get",url:e.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=E.getSamplesInfo(e.target.response),n=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),r=window.URL.createObjectURL(n);o.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:r}),a&&a(r);}}),!0}});};}}):(i.startNumber=e.startNumber,i.segmentDuration=e.segmentDuration,i.timescale=e.timescale,i.templateUrl=(n=e,(r=f.isRelative(n.media)?f.resolve(n.media,s.resolve(n.path).url):n.media)?(0, R.replaceIDForTemplate)(r,n.id):"")),0<i.tilesHor&&0<i.tilesVert&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,c.push(i));}function y(){c=[],p=-1,g=null;}return t={initialize:m,getTracks:function(){return c},reset:y,setTrackByIndex:function(e){c&&0!==c.length&&(e>=c.length&&(e=c.length-1),p=e);},getCurrentTrack:function(){return p<0?null:c[p]},getCurrentTrackIndex:function(){return p},getThumbnailRequestForTime:function(e){for(var t=void 0,n=u.getVoRepresentations(g),r=0;r<n.length;r++)if(c[p].id===n[r].id){t=n[r];break}return h.getSegmentRequestForTime(g,t,e)}},m(),t}n.THUMBNAILS_SCHEME_ID_URIS=C,a.__dashjs_factory_name="ThumbnailTracks",n.default=i.default.getClassFactory(a);},{108:108,159:159,206:206,220:220,235:235,47:47,54:54,57:57,61:61,80:80}],205:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(51)),l=r(e(46)),d=r(e(54)),f=r(e(113)),c=r(e(223)),h=r(e(222)),i=r(e(47)),p=r(e(225)),g=e(218);function a(){var e,t=this.context,i=(0, l.default)(t).getInstance(),n=void 0,a=void 0,r=void 0,o=void 0;function s(){n.reset();}return e={chooseSelector:function(e){(0, g.checkParameterType)(e,"boolean"),o=e?r:a;},select:function(e){if(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=o.select(t);return r?(e.selectedIdx=t.indexOf(r),r):(i.trigger(d.default.URL_RESOLUTION_FAILED,{error:new p.default(u.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,u.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(o===a&&s()))}},reset:s,setConfig:function(e){e.selector&&(o=e.selector);}},n=(0, f.default)(t).create({updateEventName:d.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:d.default.SERVICE_LOCATION_BLACKLIST_ADD}),a=(0, h.default)(t).create({blacklistController:n}),r=(0, c.default)(t).create({blacklistController:n}),o=a,e}a.__dashjs_factory_name="BaseURLSelector",n.default=i.default.getClassFactory(a),t.exports=n.default;},{113:113,218:218,222:222,223:223,225:225,46:46,47:47,51:51,54:54}],206:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(45)),o=r(e(214)),a=r(e(47)),s=r(e(9)),c=r(e(230));function u(){var a=void 0,e=void 0,r=this.context;function P(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=s.default.parseBuffer(e),n=(0, o.default)(r).create();return n.setData(t),n}return e={parse:P,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new c.default(0,!1);for(var r,i,a,o,s=t instanceof ArrayBuffer?new Uint8Array(t):t,u=void 0,l=0;n<s.byteLength;){var d=(a=s)[(o=n)+3]>>>0|a[o+2]<<8>>>0|a[o+1]<<16>>>0|a[o]<<24>>>0,f=(r=s,i=n+4,String.fromCharCode(r[i++])+String.fromCharCode(r[i++])+String.fromCharCode(r[i++])+String.fromCharCode(r[i]));if(0==d)break;n+d<=s.byteLength&&(0<=e.indexOf(f)?u=new c.default(n,!0,d):l=n+d),n+=d;}return u||new c.default(l,!1)},getMediaTimescaleFromMoov:function(e){var t=P(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return {sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};for(var t=P(e),n=t.getBoxes("moof"),r=t.getBoxes("mfhd"),i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0,m=t.getBoxes("moof").length,v=r[r.length-1].sequence_number,u=[],y=-1,T=-1,h=a=0;h<n.length;h++)for(var S=n[h],A=S.getChildBoxes("traf"),f=0;f<A.length;f++){for(var I=A[f],R=I.getChildBox("tfhd"),b=I.getChildBox("tfdt"),s=b.baseMediaDecodeTime,D=I.getChildBoxes("trun"),M=I.getChildBoxes("subs"),c=0;c<D.length;c++)for(var N=D[c],a=N.sample_count,_=(R.base_data_offset||0)+(N.data_offset||0),d=0;d<a;d++){i=void 0!==(l=N.samples[d]).sample_duration?l.sample_duration:R.default_sample_duration,o=void 0!==l.sample_size?l.sample_size:R.default_sample_size;var C={dts:s,cts:s+(void 0!==l.sample_composition_time_offset?l.sample_composition_time_offset:0),duration:i,offset:S.offset+_,size:o,subSizes:[o]};if(M)for(p=0;p<M.length;p++){var O=M[p];if(y<O.entry_count-1&&T<d&&(y++,T+=O.entries[y].sample_delta),d==T){C.subSizes=[];for(var w=O.entries[y],g=0;g<w.subsample_count;g++)C.subSizes.push(w.subsamples[g].subsample_size);}}u.push(C),_+=o,s+=i;}E=s-b.baseMediaDecodeTime;}return {sampleList:u,lastSequenceNumber:v,totalDuration:E,numSequences:m}},findInitRange:function(e){var t=null,n=P(e);if(!n)return t;var r=n.getBox("ftyp"),i=n.getBox("moov");return a.debug("Searching for initialization."),i&&i.isComplete&&(t=(r?r.offset:i.offset)+"-"+(i.offset+i.size-1),a.debug("Found the initialization.  Range: "+t)),t}},a=(0, i.default)(r).getInstance().getLogger(e),e}u.__dashjs_factory_name="BoxParser",n.default=a.default.getSingletonFactory(u),t.exports=n.default;},{214:214,230:230,45:45,47:47,9:9}],207:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e,t=void 0;return t=!(e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return !!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e;}}),e}o.__dashjs_factory_name="Capabilities",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],208:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r},o=e(218);function s(){return {customTimeRangeArray:[],length:0,add:function(e,t){for(var n=0,n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length;},clear:function(){this.customTimeRangeArray=[],this.length=0;},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else {if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t);}this.length=this.customTimeRangeArray.length;},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return (0, o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return (0, o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}s.__dashjs_factory_name="CustomTimeRanges",n.default=a.default.getClassFactory(s),t.exports=n.default;},{218:218,47:47}],209:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),d=r(e(45)),f=r(e(108)),c=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],h="dashjs_?_bitrate",p="dashjs_?_settings",g="localStorage",_="lastBitrate",E="lastMediaSettings";function a(e){e=e||{};var t=this.context,o=e.settings,n=void 0,s=void 0,r=void 0;function i(e){if(void 0!==r)return r;r=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e]);}catch(e){return s.warn("DOMStorage access denied: "+e.message),r}if(!t||e!==g&&"sessionStorage"!==e)return r;try{t.setItem("1","1"),t.removeItem("1"),r=!0;}catch(e){s.warn("DOMStorage is supported, but cannot be used: "+e.message);}return r}function a(){return 6e5*Math.round((new Date).getTime()/6e5)}function u(e,t){return i(e)&&o.get().streaming[t+"CachingInfo"].enabled}function l(){if(!o)throw new Error(f.default.MISSING_CONFIG_ERROR)}return n={getSavedBitrateSettings:function(e){var t=NaN;if(l(),u(g,_)){var n=h.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=o.get().streaming.lastBitrateCachingInfo.ttl||!1,a=parseFloat(r.bitrate);isNaN(a)||i?i&&localStorage.removeItem(n):(t=a,s.debug("Last saved bitrate for "+e+" was "+a));}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(u(g,_)&&t){var n=h.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:a()}));}catch(e){s.error(e.message);}}},getSavedMediaSettings:function(e){var t=null;if(l(),u(g,E)){var n=p.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=o.get().streaming.lastMediaSettingsCachingInfo.ttl||!1,t=r.settings;i&&(localStorage.removeItem(n),t=null);}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(u(g,E)){var n=p.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:a()}));}catch(e){s.error(e.message);}}}},s=(0, d.default)(t).getInstance().getLogger(n),i(g)&&c.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t);}catch(e){s.error(e.message);}}}),n}a.__dashjs_factory_name="DOMStorage";var o=i.default.getSingletonFactory(a);n.default=o,t.exports=n.default;},{108:108,45:45,47:47}],210:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){function e(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}}function t(e,t){var n=s;if(!t)return e;if(!d(e))return e;f(e)&&(n=u),c(e)&&(n=l);var r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return [r,e].join(i)}var n=void 0,r=/^[a-z][a-z0-9+\-_.]*:/i,i=/^https?:\/\//i,a=/^https:\/\//i,o=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return -1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function u(e){var t=e.match(o);return t?t[1]:""}function l(e){var t=e.match(r);return t?t[0]:""}function d(e){return !r.test(e)}function f(e){return d(e)&&"/"===e.charAt(0)}function c(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y");n=e;}catch(e){}finally{n=n||t;}}(),{parseBaseUrl:s,parseOrigin:u,parseScheme:l,isRelative:d,isPathAbsolute:f,isSchemeRelative:c,isHTTPURL:function(e){return i.test(e)},isHTTPS:function(e){return a.test(e)},removeHostname:function(e){return /^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(e,t){return n(e,t)}}}o.__dashjs_factory_name="DefaultURLUtils",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],211:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var n=void 0,s=new DataView(e.data),u=0;function i(e,t){var n=!0,r=0;if(void 0===t&&(t=!1),r=16777215<e.tag?(s.getUint32(u)!==e.tag&&(n=!1),4):65535<e.tag?(256*s.getUint16(u)+s.getUint8(u+2)!==e.tag&&(n=!1),3):255<e.tag?(s.getUint16(u)!==e.tag&&(n=!1),2):(s.getUint8(u)!==e.tag&&(n=!1),1),!n&&e.required&&!t)throw new Error("required tag not found");return n&&(u+=r),n}function a(e){for(var t=1,n=128,r=-1,i=0,a=s.getUint8(u),o=0,o=0;o<8;o+=1){if((a&n)===n){i=void 0===e?a&~n:a,r=o;break}n>>=1;}for(o=0;o<r;o+=1,t+=1)i=i<<8|255&s.getUint8(u+t);return u+=t,i}return n={getPos:function(){return u},setPos:function(e){u=e;},consumeTag:i,consumeTagAndSize:function(e,t){var n=i(e,t);return n&&a(),n},parseTag:function(e){var t;return i(e),t=a(),n[e.parse](t)},skipOverElement:function(e,t){var n=i(e,t),r=void 0;return n&&(r=a(),u+=r),n},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=s.getFloat32(u),u+=4;break;case 8:t=s.getFloat64(u),u+=8;}return t},getMatroskaUint:function(e){for(var t=0,n=0;n<e;n+=1)t<<=8,t|=255&s.getUint8(u+n);return u+=e,t},moreData:function(){return u<s.byteLength}}}o.__dashjs_factory_name="EBMLParser",n.default=a.default.getClassFactory(o),t.exports=n.default;},{47:47}],212:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),a=r(e(54)),o=r(e(47));function s(){var e=this.context,t=(0, i.default)(e).getInstance();return {error:function(e){t.trigger(a.default.ERROR,{error:e});}}}s.__dashjs_factory_name="ErrorHandler",n.default=o.default.getSingletonFactory(s),t.exports=n.default;},{46:46,47:47,54:54}],213:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var r={};return {save:function(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e;},extract:function(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null},reset:function(){r={};}}}o.__dashjs_factory_name="InitCache",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],214:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(229)),a=r(e(47));function o(){var o=void 0;function t(e){var t=[];if(!e||!o||"function"!=typeof o.fetchAll)return t;for(var n=o.fetchAll(e),r=void 0,i=0,a=n.length;i<a;i++)(r=s(n[i]))&&t.push(r);return t}function s(e){if(!e)return null;var t=new i.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return {getBox:function(e){return e&&o&&o.boxes&&0!==o.boxes.length&&"function"==typeof o.fetch?s(o.fetch(e)):null},getBoxes:t,setData:function(e){o=e;},getLastBox:function(){if(!o||!o.boxes||!o.boxes.length)return null;var e=t(o.boxes[o.boxes.length-1].type);return 0<e.length?e[e.length-1]:null}}}o.__dashjs_factory_name="IsoFile",n.default=a.default.getClassFactory(o),t.exports=n.default;},{229:229,47:47}],215:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108));function o(e){var r=(e=e||{}).timelineConverter;return {getLiveEdge:function(e){!function(){if(!r||!r.hasOwnProperty("getExpectedLiveEdge"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var t=e.DVRWindow?e.DVRWindow.end:0,n=t;return e.useCalculatedLiveEdgeTime&&(n=r.getExpectedLiveEdge(),r.setClientTimeOffset(n-t)),n},reset:function(){r=null;}}}o.__dashjs_factory_name="LiveEdgeFinder",n.default=i.default.getClassFactory(o),t.exports=n.default;},{108:108,47:47}],216:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(12));function o(){return {areEqual:function(e,t){return (0, a.default)(e,t)}}}o.__dashjs_factory_name="ObjectUtils",n.default=i.default.getSingletonFactory(o),t.exports=n.default;},{12:12,47:47}],217:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){return {modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}o.__dashjs_factory_name="RequestModifier",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],218:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkParameterType=function(e,t){if(typeof e!==t)throw a.default.BAD_ARGUMENT_ERROR},n.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw a.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},n.checkRange=function(e,t,n){if(e<t||n<e)throw a.default.BAD_ARGUMENT_ERROR+" : argument out of range"},n.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==a.default.AUDIO&&e!==a.default.VIDEO)throw a.default.BAD_ARGUMENT_ERROR};var r,i=e(108),a=(r=i)&&r.__esModule?r:{default:r};},{108:108}],219:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),o=r(e(46)),S=r(e(54)),A=e(17);function s(){var e=this.context,v=(0, o.default)(e).getInstance(),t=void 0,y=void 0,T=0;return t={parse:function(e,t,n,r,i){var a="",o=[],s=void 0,u=void 0,l=void 0,d={},f={},c="",h="",p={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void y.warn("smpte-tt imagetype != PNG. Discarded");c=n["http://www.w3.org/XML/1998/namespace id"].value;}},onCloseTag:function(){c&&(f[c]=h.trim()),c=h="";},onText:function(e){c&&(h+=e);}};if(!e)throw a="no ttml data to parse",new Error(a);d.data=e,v.trigger(S.default.TTML_TO_PARSE,d);var g=(0, A.fromXML)(d.data,function(e){a=e;},p);v.trigger(S.default.TTML_PARSED,{ttmlString:d.data,ttmlDoc:g});for(var _,E=g.getMediaTimeEvents(),l=0;l<E.length;l++){var m=(0, A.generateISD)(g,E[l],function(e){a=e;});m.contents.some(function(e){return e.contents.length})&&(s=E[l]+t<n?n:E[l]+t)<(u=E[l+1]+t>r?r:E[l+1]+t)&&o.push({start:s,end:u,type:"html",cueID:(_="cue_TTML_"+T,T++,_),isd:m,images:i,embeddedImages:f});}if(""!==a)throw y.error(a),new Error(a);return o}},y=(0, a.default)(e).getInstance().getLogger(t),t}s.__dashjs_factory_name="TTMLParser",n.default=i.default.getSingletonFactory(s),t.exports=n.default;},{17:17,45:45,46:46,47:47,54:54}],220:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(210));function a(){var i=void 0,a=[],e=this.context;function n(e,t,n){var r=function(e){for(var t=void 0,t=0;t<a.length;t++){if(a[t].regex.test(e))return a[t].utils}return i}(n||t);return r&&"function"==typeof r[e]?r[e](t,n):i[e](t,n)}return i=(0, o.default)(e).getInstance(),{registerUrlRegex:function(e,t){a.push({regex:e,utils:t});},parseBaseUrl:function(e){return n("parseBaseUrl",e)},parseOrigin:function(e){return n("parseOrigin",e)},parseScheme:function(e){return n("parseScheme",e)},isRelative:function(e){return n("isRelative",e)},isPathAbsolute:function(e){return n("isPathAbsolute",e)},isSchemeRelative:function(e){return n("isSchemeRelative",e)},isHTTPURL:function(e){return n("isHTTPURL",e)},isHTTPS:function(e){return n("isHTTPS",e)},removeHostname:function(e){return n("removeHostname",e)},resolve:function(e,t){return n("resolve",e,t)}}}a.__dashjs_factory_name="URLUtils";var s=i.default.getSingletonFactory(a);n.default=s,t.exports=n.default;},{210:210,47:47}],221:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45));function o(){var e=this.context,t=void 0,p=void 0,g=void 0,_=void 0,E=void 0,m=void 0;function v(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}return t={parse:function(e){var t,n=[],r=void 0;if(!e)return n;t=(e=e.split(g)).length,r=-1;for(var i,a,o=0;o<t;o++){var s,u,l,d,f,c,h=e[o];0<h.length&&"WEBVTT"!==h&&h.match(_)&&(a=i=void 0,i=h.split(_),(a=i[1].split(m)).shift(),i[1]=a[0],a.shift(),u=(s={cuePoints:i,styles:function(e){var n={};return e.forEach(function(e){var t;1<e.split(/:/).length&&((t=e.split(/:/)[1])&&-1!=t.search(/%/)&&(t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(n.align=t),(e.match(/line/)||e.match(/L/))&&(n.line=t),(e.match(/position/)||e.match(/P/))&&(n.position=t),(e.match(/size/)||e.match(/S/))&&(n.size=t));}),n}(a)}).cuePoints,l=s.styles,d=function(e,t){var n,r=t,i="",a="";for(;""!==e[r]&&r<e.length;)r++;if(1<(n=r-t))for(var o=0;o<n;o++){if((a=e[t+o]).match(_)){i="";break}i+=a,o!==n-1&&(i+="\n");}else (a=e[t]).match(_)||(i=a);return i}(e,o+1),f=v(u[0].replace(E,"")),c=v(u[1].replace(E,"")),!isNaN(f)&&!isNaN(c)&&r<=f&&f<c?""!==d?(r=f,n.push({start:f,end:c,data:d,styles:l})):p.error("Skipping cue due to empty/malformed cue text"):p.error("Skipping cue due to incorrect cue timing"));}return n}},p=(0, a.default)(e).getInstance().getLogger(t),g=/(?:\r\n|\r|\n)/gm,_=/-->/,E=/(^[\s]+|[\s]+$)/g,m=/\s\b/g,t}o.__dashjs_factory_name="VTTParser",n.default=i.default.getSingletonFactory(o),t.exports=n.default;},{45:45,47:47}],222:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var r=(e=e||{}).blacklistController;return {select:function(e){var n=0,t=void 0;return e&&e.some(function(e,t){return n=t,!r.contains(e.serviceLocation)})&&(t=e[n]),t}}}o.__dashjs_factory_name="BasicSelector",n.default=a.default.getClassFactory(o),t.exports=n.default;},{47:47}],223:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var n=(e=e||{}).blacklistController;return {select:function(e){return e&&function(e){var t=0,n=[],r=0,i=void 0,a=void 0;if((a=e.sort(function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n}).filter(function(e,t,n){return !t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})).length)return 1<a.length&&(a.forEach(function(e){t+=e.dvb_weight,n.push(t);}),i=Math.floor(Math.random()*(t-1)),n.every(function(e,t){return r=t,!(i<e)})),a[r]}((t=[],e.filter(function(e){return !n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)}).filter(function(e){return !t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)})));var t;}}}o.__dashjs_factory_name="DVBSelector",n.default=a.default.getClassFactory(o),t.exports=n.default;},{47:47}],224:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN;},t.exports=n.default;},{}],225:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=r||null;},t.exports=n.default;},{}],226:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null;},t.exports=n.default;},{}],227:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}var a=e(241),o=(r(s,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===a.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?a.HTTPRequest.INIT_SEGMENT_TYPE:a.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null;}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.action=s.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null;}o.ACTION_DOWNLOAD="download",o.ACTION_COMPLETE="complete",n.default=o,t.exports=n.default;},{241:241}],228:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(227),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(s,((i=a)&&i.__esModule?i:{default:i}).default),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,e),this.checkForExistenceOnly=!0;}n.default=o,t.exports=n.default;},{227:227}],229:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),a);function a(e){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new a(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(t=0;t<e.references.length;t++){var n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n);}}break;case"emsg":this.id=e.id,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var t=0,r=e.samples.length;t<r;t++){var i={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(i);}}}}n.default=i,t.exports=n.default;},{}],230:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=n,this.size=r;},t.exports=n.default;},{}],231:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[];},t.exports=n.default;},{}],232:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(108)),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(s,i(e(227)).default),s);function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=a.default.STREAM,this.responseType="";}n.default=o,t.exports=n.default;},{108:108,227:227}],233:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1;},t.exports=n.default;},{}],234:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null;},t.exports=n.default;},{}],235:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id="";},t.exports=n.default;},{}],236:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null;},t.exports=n.default;},{}],237:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null;},t.exports=n.default;},{}],238:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(109),a=(r=i)&&r.__esModule?r:{default:r};n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY;},t.exports=n.default;},{109:109}],239:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null;},t.exports=n.default;},{}],240:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null;},t.exports=n.default;},{}],241:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null;}i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",n.HTTPRequest=i,n.HTTPRequestTrace=function e(){r(this,e),this.s=null,this.d=null,this.b=[];};},{}],242:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.ManifestUpdate=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[];},n.ManifestUpdateStreamInfo=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null;},n.ManifestUpdateRepresentationInfo=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null;};},{}],243:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.start=null,this.mstart=null,this.starttype=null,this.trace=[];}i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";function a(){r(this,a),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null;}a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=i,n.PlayListTrace=a;},{}],244:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null;},t.exports=n.default;},{}],245:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[];},t.exports=n.default;},{}],246:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null;},t.exports=n.default;},{}]},{},[4]);

// MSS support
!function a(o,s,u){function l(t,e){if(!s[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return l(o[t][1][e]||e)},i,i.exports,a,o,s,u);}return s[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){var W=function(u){var v=1e7,p=7,t=9007199254740992,r=b(t),d="0123456789abcdefghijklmnopqrstuvwxyz",c="function"==typeof BigInt;function h(e,t,r,n){return void 0===e?h[0]:void 0!==t&&(10!=+t||r)?Y(e,t,r,n):J(e)}function m(e,t){this.value=e,this.sign=t,this.isSmall=!1;}function g(e){this.value=e,this.sign=e<0,this.isSmall=!0;}function y(e){this.value=e;}function _(e){return -t<e&&e<t}function b(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function T(e){A(e);var t=e.length;if(t<4&&O(e,r)<0)switch(t){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*v;default:return e[0]+(e[1]+e[2]*v)*v}return e}function A(e){for(var t=e.length;0===e[--t];);e.length=t+1;}function S(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function E(e){return 0<e?Math.floor(e):Math.ceil(e)}function n(e,t){for(var r,n=e.length,i=t.length,a=new Array(n),o=0,s=v,u=0;u<i;u++)o=s<=(r=e[u]+t[u]+o)?1:0,a[u]=r-o*s;for(;u<n;)o=(r=e[u]+o)===s?1:0,a[u++]=r-o*s;return 0<o&&a.push(o),a}function w(e,t){return e.length>=t.length?n(e,t):n(t,e)}function i(e,t){for(var r,n=e.length,i=new Array(n),a=v,o=0;o<n;o++)r=e[o]-a+t,t=Math.floor(r/a),i[o]=r-t*a,t+=1;for(;0<t;)i[o++]=t%a,t=Math.floor(t/a);return i}function M(e,t){for(var r,n=e.length,i=t.length,a=new Array(n),o=0,s=v,u=0;u<i;u++)o=(r=e[u]-o-t[u])<0?(r+=s,1):0,a[u]=r;for(u=i;u<n;u++){if(!((r=e[u]-o)<0)){a[u++]=r;break}r+=s,a[u]=r;}for(;u<n;u++)a[u]=e[u];return A(a),a}function l(e,t,r){for(var n,i=e.length,a=new Array(i),o=-t,s=v,u=0;u<i;u++)n=e[u]+o,o=Math.floor(n/s),n%=s,a[u]=n<0?n+s:n;return "number"==typeof(a=T(a))?(r&&(a=-a),new g(a)):new m(a,r)}function I(e,t){for(var r,n,i,a=e.length,o=t.length,s=S(a+o),u=v,l=0;l<a;++l){i=e[l];for(var f=0;f<o;++f)r=i*t[f]+s[l+f],n=Math.floor(r/u),s[l+f]=r-n*u,s[l+f+1]+=n;}return A(s),s}function D(e,t){for(var r,n=e.length,i=new Array(n),a=v,o=0,s=0;s<n;s++)r=e[s]*t+o,o=Math.floor(r/a),i[s]=r-o*a;for(;0<o;)i[s++]=o%a,o=Math.floor(o/a);return i}function P(e,t){for(var r=[];0<t--;)r.push(0);return r.concat(e)}function a(e,t,r){return new m(e<v?D(t,e):I(t,b(e)),r)}function o(e){for(var t,r,n,i=e.length,a=S(i+i),o=v,s=0;s<i;s++){r=0-(n=e[s])*n;for(var u=s;u<i;u++)t=n*e[u]*2+a[s+u]+r,r=Math.floor(t/o),a[s+u]=t-r*o;a[s+i]=r;}return A(a),a}function C(e,t){for(var r,n,i=e.length,a=S(i),o=v,s=0,u=i-1;0<=u;--u)s=(n=s*o+e[u])-(r=E(n/t))*t,a[u]=0|r;return [a,0|s]}function x(e,t){var r,n=J(t);if(c)return [new y(e.value/n.value),new y(e.value%n.value)];var i=e.value,a=n.value;if(0===a)throw new Error("Cannot divide by zero");if(e.isSmall)return n.isSmall?[new g(E(i/a)),new g(i%a)]:[h[0],e];if(n.isSmall){if(1===a)return [e,h[0]];if(-1==a)return [e.negate(),h[0]];var o=Math.abs(a);if(o<v){l=T((r=C(i,o))[0]);var s=r[1];return e.sign&&(s=-s),"number"==typeof l?(e.sign!==n.sign&&(l=-l),[new g(l),new g(s)]):[new m(l,e.sign!==n.sign),new g(s)]}a=b(o);}var u=O(i,a);if(-1===u)return [h[0],e];if(0===u)return [h[e.sign===n.sign?1:-1],h[0]];l=(r=(i.length+a.length<=200?function(e,t){var r,n,i,a,o,s,u,l=e.length,f=t.length,p=v,d=S(t.length),c=t[f-1],h=Math.ceil(p/(2*c)),m=D(e,h),g=D(t,h);for(m.length<=l&&m.push(0),g.push(0),c=g[f-1],n=l-f;0<=n;n--){for(r=p-1,m[n+f]!==c&&(r=Math.floor((m[n+f]*p+m[n+f-1])/c)),a=i=0,s=g.length,o=0;o<s;o++)i+=r*g[o],u=Math.floor(i/p),a+=m[n+o]-(i-u*p),i=u,a=a<0?(m[n+o]=a+p,-1):(m[n+o]=a,0);for(;0!==a;){for(--r,o=i=0;o<s;o++)i=(i+=m[n+o]-p+g[o])<0?(m[n+o]=i+p,0):(m[n+o]=i,1);a+=i;}d[n]=r;}return m=C(m,h)[0],[T(d),T(m)]}:function(e,t){for(var r,n,i,a,o,s=e.length,u=t.length,l=[],f=[],p=v;s;)if(f.unshift(e[--s]),A(f),O(f,t)<0)l.push(0);else {i=f[(n=f.length)-1]*p+f[n-2],a=t[u-1]*p+t[u-2],u<n&&(i=(i+1)*p),r=Math.ceil(i/a);do{if(O(o=D(t,r),f)<=0)break;r--;}while(r);l.push(r),f=M(f,o);}return l.reverse(),[T(l),T(f)]})(i,a))[0];var l,f=e.sign!==n.sign,p=r[1],d=e.sign;return [l="number"==typeof l?(f&&(l=-l),new g(l)):new m(l,f),p="number"==typeof p?(d&&(p=-p),new g(p)):new m(p,d)]}function O(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;0<=r;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function f(e){var t=e.abs();return !t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function N(e,t){for(var r,n,i,a=e.prev(),o=a,s=0;o.isEven();)o=o.divide(2),s++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(i=W(t[n]).modPow(o,e)).isUnit()&&!i.equals(a)){for(r=s-1;0!=r;r--){if((i=i.square().mod(e)).isUnit())return !1;if(i.equals(a))continue e}return !1}return !0}m.prototype=Object.create(h.prototype),g.prototype=Object.create(h.prototype),y.prototype=Object.create(h.prototype),m.prototype.plus=m.prototype.add=function(e){var t=J(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new m(i(r,Math.abs(n)),this.sign):new m(w(r,n),this.sign)},g.prototype.plus=g.prototype.add=function(e){var t=J(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(_(r+n))return new g(r+n);n=b(Math.abs(n));}return new m(i(n,Math.abs(r)),r<0)},y.prototype.plus=y.prototype.add=function(e){return new y(this.value+J(e).value)},m.prototype.minus=m.prototype.subtract=function(e){var t=J(e);if(this.sign!==t.sign)return this.add(t.negate());var r,n,i,a,o=this.value,s=t.value;return t.isSmall?l(o,Math.abs(s),this.sign):(r=o,n=s,i=this.sign,0<=O(r,n)?a=M(r,n):(a=M(n,r),i=!i),"number"==typeof(a=T(a))?(i&&(a=-a),new g(a)):new m(a,i))},g.prototype.minus=g.prototype.subtract=function(e){var t=J(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new g(r-n):l(n,Math.abs(r),0<=r)},y.prototype.minus=y.prototype.subtract=function(e){return new y(this.value-J(e).value)},m.prototype.negate=function(){return new m(this.value,!this.sign)},g.prototype.negate=function(){var e=this.sign,t=new g(-this.value);return t.sign=!e,t},y.prototype.negate=function(){return new y(-this.value)},m.prototype.abs=function(){return new m(this.value,!1)},g.prototype.abs=function(){return new g(Math.abs(this.value))},y.prototype.abs=function(){return new y(0<=this.value?this.value:-this.value)},m.prototype.times=m.prototype.multiply=function(e){var t,r,n,i=J(e),a=this.value,o=i.value,s=this.sign!==i.sign;if(i.isSmall){if(0===o)return h[0];if(1===o)return this;if(-1===o)return this.negate();if((t=Math.abs(o))<v)return new m(D(a,t),s);o=b(t);}return r=a.length,n=o.length,new m((0<-.012*r-.012*n+15e-6*r*n?function e(t,r){var n=Math.max(t.length,r.length);if(n<=30)return I(t,r);n=Math.ceil(n/2);var i=t.slice(n),a=t.slice(0,n),o=r.slice(n),s=r.slice(0,n),u=e(a,s),l=e(i,o),f=e(w(a,i),w(s,o)),p=w(w(u,P(M(M(f,u),l),n)),P(l,2*n));return A(p),p}:I)(a,o),s)},g.prototype._multiplyBySmall=function(e){return _(e.value*this.value)?new g(e.value*this.value):a(Math.abs(e.value),b(Math.abs(this.value)),this.sign!==e.sign)},m.prototype._multiplyBySmall=function(e){return 0===e.value?h[0]:1===e.value?this:-1===e.value?this.negate():a(Math.abs(e.value),this.value,this.sign!==e.sign)},g.prototype.times=g.prototype.multiply=function(e){return J(e)._multiplyBySmall(this)},y.prototype.times=y.prototype.multiply=function(e){return new y(this.value*J(e).value)},m.prototype.square=function(){return new m(o(this.value),!1)},g.prototype.square=function(){var e=this.value*this.value;return _(e)?new g(e):new m(o(b(Math.abs(this.value))),!1)},y.prototype.square=function(e){return new y(this.value*this.value)},y.prototype.divmod=g.prototype.divmod=m.prototype.divmod=function(e){var t=x(this,e);return {quotient:t[0],remainder:t[1]}},m.prototype.divide=function(e){return x(this,e)[0]},y.prototype.over=y.prototype.divide=function(e){return new y(this.value/J(e).value)},g.prototype.over=g.prototype.divide=m.prototype.over=m.prototype.divide,m.prototype.mod=function(e){return x(this,e)[1]},y.prototype.mod=y.prototype.remainder=function(e){return new y(this.value%J(e).value)},g.prototype.remainder=g.prototype.mod=m.prototype.remainder=m.prototype.mod,m.prototype.pow=function(e){var t,r,n,i=J(e),a=this.value,o=i.value;if(0===o)return h[1];if(0===a)return h[0];if(1===a)return h[1];if(-1===a)return i.isEven()?h[1]:h[-1];if(i.sign)return h[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&_(t=Math.pow(a,o)))return new g(E(t));for(r=this,n=h[1];!0&o&&(n=n.times(r),--o),0!==o;)o/=2,r=r.square();return n},g.prototype.pow=m.prototype.pow,y.prototype.pow=function(e){var t=J(e),r=this.value,n=t.value,i=BigInt(0),a=BigInt(1),o=BigInt(2);if(n===i)return h[1];if(r===i)return h[0];if(r===a)return h[1];if(r===BigInt(-1))return t.isEven()?h[1]:h[-1];if(t.isNegative())return new y(i);for(var s=this,u=h[1];(n&a)===a&&(u=u.times(s),--n),n!==i;)n/=o,s=s.square();return u},y.prototype.modPow=g.prototype.modPow=m.prototype.modPow=function(e,t){if(e=J(e),(t=J(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=h[1],n=this.mod(t);e.isPositive();){if(n.isZero())return h[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t);}return r},m.prototype.compareAbs=function(e){var t=J(e),r=this.value,n=t.value;return t.isSmall?1:O(r,n)},g.prototype.compareAbs=function(e){var t=J(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:n<r?1:-1:-1},y.prototype.compareAbs=function(e){var t=this.value,r=J(e).value;return (t=0<=t?t:-t)===(r=0<=r?r:-r)?0:r<t?1:-1},m.prototype.compareTo=m.prototype.compare=function(e){if(e===1/0)return -1;if(e===-1/0)return 1;var t=J(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:O(r,n)*(this.sign?-1:1)},g.prototype.compareTo=g.prototype.compare=function(e){if(e===1/0)return -1;if(e===-1/0)return 1;var t=J(e),r=this.value,n=t.value;return t.isSmall?r==n?0:n<r?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},y.prototype.compareTo=y.prototype.compare=function(e){if(e===1/0)return -1;if(e===-1/0)return 1;var t=this.value,r=J(e).value;return t===r?0:r<t?1:-1},y.prototype.eq=y.prototype.equals=g.prototype.eq=g.prototype.equals=m.prototype.eq=m.prototype.equals=function(e){return 0===this.compare(e)},y.prototype.neq=y.prototype.notEquals=g.prototype.neq=g.prototype.notEquals=m.prototype.neq=m.prototype.notEquals=function(e){return 0!==this.compare(e)},y.prototype.gt=y.prototype.greater=g.prototype.gt=g.prototype.greater=m.prototype.gt=m.prototype.greater=function(e){return 0<this.compare(e)},y.prototype.lt=y.prototype.lesser=g.prototype.lt=g.prototype.lesser=m.prototype.lt=m.prototype.lesser=function(e){return this.compare(e)<0},y.prototype.geq=y.prototype.greaterOrEquals=g.prototype.geq=g.prototype.greaterOrEquals=m.prototype.geq=m.prototype.greaterOrEquals=function(e){return 0<=this.compare(e)},y.prototype.leq=y.prototype.lesserOrEquals=g.prototype.leq=g.prototype.lesserOrEquals=m.prototype.leq=m.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},m.prototype.isEven=function(){return 0==(1&this.value[0])},g.prototype.isEven=function(){return 0==(1&this.value)},y.prototype.isEven=function(){return (this.value&BigInt(1))===BigInt(0)},m.prototype.isOdd=function(){return 1==(1&this.value[0])},g.prototype.isOdd=function(){return 1==(1&this.value)},y.prototype.isOdd=function(){return (this.value&BigInt(1))===BigInt(1)},m.prototype.isPositive=function(){return !this.sign},y.prototype.isPositive=g.prototype.isPositive=function(){return 0<this.value},m.prototype.isNegative=function(){return this.sign},y.prototype.isNegative=g.prototype.isNegative=function(){return this.value<0},m.prototype.isUnit=function(){return !1},g.prototype.isUnit=function(){return 1===Math.abs(this.value)},y.prototype.isUnit=function(){return this.abs().value===BigInt(1)},m.prototype.isZero=function(){return !1},g.prototype.isZero=function(){return 0===this.value},y.prototype.isZero=function(){return this.value===BigInt(0)},y.prototype.isDivisibleBy=g.prototype.isDivisibleBy=m.prototype.isDivisibleBy=function(e){var t=J(e);return !t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},y.prototype.isPrime=g.prototype.isPrime=m.prototype.isPrime=function(e){var t=f(this);if(t!==u)return t;var r=this.abs(),n=r.bitLength();if(n<=64)return N(r,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var i=Math.log(2)*n.toJSNumber(),a=Math.ceil(!0===e?2*Math.pow(i,2):i),o=[],s=0;s<a;s++)o.push(W(s+2));return N(r,o)},y.prototype.isProbablePrime=g.prototype.isProbablePrime=m.prototype.isProbablePrime=function(e){var t=f(this);if(t!==u)return t;for(var r=this.abs(),n=e===u?5:e,i=[],a=0;a<n;a++)i.push(W.randBetween(2,r.minus(2)));return N(r,i)},y.prototype.modInv=g.prototype.modInv=m.prototype.modInv=function(e){for(var t,r,n,i=W.zero,a=W.one,o=J(e),s=this.abs();!s.isZero();)t=o.divide(s),r=i,n=o,i=a,o=s,a=r.subtract(t.multiply(a)),s=n.subtract(t.multiply(s));if(!o.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return -1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},m.prototype.next=function(){var e=this.value;return this.sign?l(e,1,this.sign):new m(i(e,1),this.sign)},g.prototype.next=function(){var e=this.value;return e+1<t?new g(e+1):new m(r,!1)},y.prototype.next=function(){return new y(this.value+BigInt(1))},m.prototype.prev=function(){var e=this.value;return this.sign?new m(i(e,1),!0):l(e,1,this.sign)},g.prototype.prev=function(){var e=this.value;return -t<e-1?new g(e-1):new m(r,!0)},y.prototype.prev=function(){return new y(this.value-BigInt(1))};for(var s=[1];2*s[s.length-1]<=v;)s.push(2*s[s.length-1]);var B=s.length,F=s[B-1];function R(e){return Math.abs(e)<=v}function L(e,t,r){t=J(t);for(var n=e.isNegative(),i=t.isNegative(),a=n?e.not():e,o=i?t.not():t,s=0,u=0,l=null,f=null,p=[];!a.isZero()||!o.isZero();)s=(l=x(a,F))[1].toJSNumber(),n&&(s=F-1-s),u=(f=x(o,F))[1].toJSNumber(),i&&(u=F-1-u),a=l[0],o=f[0],p.push(r(s,u));for(var d=0!==r(n?1:0,i?1:0)?W(-1):W(0),c=p.length-1;0<=c;--c)d=d.multiply(F).add(W(p[c]));return d}y.prototype.shiftLeft=g.prototype.shiftLeft=m.prototype.shiftLeft=function(e){var t=J(e).toJSNumber();if(!R(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var r=this;if(r.isZero())return r;for(;B<=t;)r=r.multiply(F),t-=B-1;return r.multiply(s[t])},y.prototype.shiftRight=g.prototype.shiftRight=m.prototype.shiftRight=function(e){var t,r=J(e).toJSNumber();if(!R(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;B<=r;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=x(n,F))[1].isNegative()?t[0].prev():t[0],r-=B-1;}return (t=x(n,s[r]))[1].isNegative()?t[0].prev():t[0]},y.prototype.not=g.prototype.not=m.prototype.not=function(){return this.negate().prev()},y.prototype.and=g.prototype.and=m.prototype.and=function(e){return L(this,e,function(e,t){return e&t})},y.prototype.or=g.prototype.or=m.prototype.or=function(e){return L(this,e,function(e,t){return e|t})},y.prototype.xor=g.prototype.xor=m.prototype.xor=function(e){return L(this,e,function(e,t){return e^t})};var q=1<<30,U=(v&-v)*(v&-v)|q;function j(e){var t=e.value,r="number"==typeof t?t|q:"bigint"==typeof t?t|BigInt(q):t[0]+t[1]*v|U;return r&-r}function k(e,t){return e=J(e),t=J(t),e.greater(t)?e:t}function G(e,t){return e=J(e),t=J(t),e.lesser(t)?e:t}function H(e,t){if(e=J(e).abs(),t=J(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=h[1];e.isEven()&&t.isEven();)r=G(j(e),j(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(j(e));do{for(;t.isEven();)t=t.divide(j(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e);}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}y.prototype.bitLength=g.prototype.bitLength=m.prototype.bitLength=function(){var e=this;return e.compareTo(W(0))<0&&(e=e.negate().subtract(W(1))),0===e.compareTo(W(0))?W(0):W(function e(t,r){if(r.compareTo(t)<=0){var n=e(t,r.square(r)),i=n.p,a=n.e,o=i.multiply(r);return o.compareTo(t)<=0?{p:o,e:2*a+1}:{p:i,e:2*a}}return {p:W(1),e:0}}(e,W(2)).e).add(W(1))};var Y=function(e,t,r,n){r=r||d,e=String(e),n||(e=e.toLowerCase(),r=r.toLowerCase());for(var i=e.length,a=Math.abs(t),o={},s=0;s<r.length;s++)o[r[s]]=s;for(s=0;s<i;s++){if("-"!==(u=e[s])&&(u in o&&o[u]>=a)){if("1"===u&&1===a)continue;throw new Error(u+" is not a valid digit in base "+t+".")}}t=J(t);var u,l=[],f="-"===e[0];for(s=f?1:0;s<e.length;s++){if((u=e[s])in o)l.push(J(o[u]));else {if("<"!==u)throw new Error(u+" is not a valid character");for(var p=s;">"!==e[++s]&&s<e.length;);l.push(J(e.slice(p+1,s)));}}return K(l,t,f)};function K(e,t,r){for(var n=h[0],i=h[1],a=e.length-1;0<=a;a--)n=n.add(e[a].times(i)),i=i.times(t);return r?n.negate():n}function z(e,t){if((t=W(t)).isZero()){if(e.isZero())return {value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return {value:[0],isNegative:!1};if(e.isNegative())return {value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var i,a=[],o=e;o.isNegative()||0<=o.compareAbs(t);){o=(i=o.divmod(t)).quotient;var s=i.remainder;s.isNegative()&&(s=t.minus(s).abs(),o=o.next()),a.push(s.toJSNumber());}return a.push(o.toJSNumber()),{value:a.reverse(),isNegative:n}}function V(e,t,n){var r=z(e,t);return (r.isNegative?"-":"")+r.value.map(function(e){return (t=e)<(r=(r=n)||d).length?r[t]:"<"+t+">";var t,r;}).join("")}function Z(e){if(_(+e)){var t=+e;if(t===E(t))return c?new y(BigInt(t)):new g(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(2<n.length)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==E(i)||!_(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var a=n[0],o=a.indexOf(".");if(0<=o&&(i-=a.length-o-1,a=a.slice(0,o)+a.slice(o+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=a+=new Array(i+1).join("0");}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(c)return new y(BigInt(r?"-"+e:e));for(var s=[],u=e.length,l=p,f=u-l;0<u;)s.push(+e.slice(f,u)),(f-=l)<0&&(f=0),u-=l;return A(s),new m(s,r)}function J(e){return "number"==typeof e?function(e){if(c)return new y(BigInt(e));if(_(e)){if(e!==E(e))throw new Error(e+" is not an integer.");return new g(e)}return Z(e.toString())}(e):"string"==typeof e?Z(e):"bigint"==typeof e?new y(e):e}m.prototype.toArray=function(e){return z(this,e)},g.prototype.toArray=function(e){return z(this,e)},y.prototype.toArray=function(e){return z(this,e)},m.prototype.toString=function(e,t){if(e===u&&(e=10),10!==e)return V(this,e,t);for(var r,n=this.value,i=n.length,a=String(n[--i]);0<=--i;)r=String(n[i]),a+="0000000".slice(r.length)+r;return (this.sign?"-":"")+a},y.prototype.toString=g.prototype.toString=function(e,t){return e===u&&(e=10),10!=e?V(this,e,t):String(this.value)},y.prototype.toJSON=m.prototype.toJSON=g.prototype.toJSON=function(){return this.toString()},m.prototype.toJSNumber=m.prototype.valueOf=function(){return parseInt(this.toString(),10)},g.prototype.toJSNumber=g.prototype.valueOf=function(){return this.value},y.prototype.valueOf=y.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var e=0;e<1e3;e++)h[e]=J(e),0<e&&(h[-e]=J(-e));return h.one=h[1],h.zero=h[0],h.minusOne=h[-1],h.max=k,h.min=G,h.gcd=H,h.lcm=function(e,t){return e=J(e).abs(),t=J(t).abs(),e.divide(H(e,t)).multiply(t)},h.isInstance=function(e){return e instanceof m||e instanceof g||e instanceof y},h.randBetween=function(e,t){var r=G(e=J(e),t=J(t)),n=k(e,t).subtract(r).add(1);if(n.isSmall)return r.add(Math.floor(Math.random()*n));for(var i=z(n,v).value,a=[],o=!0,s=0;s<i.length;s++){var u=o?i[s]:v,l=E(Math.random()*u);a.push(l),l<u&&(o=!1);}return r.add(h.fromArray(a,v,!1))},h.fromArray=function(e,t,r){return K(e.map(J),J(t||10),r)},h}();void 0!==t&&t.hasOwnProperty("exports")&&(t.exports=W),"function"==typeof define&&define.amd&&define("big-integer",[],function(){return W});},{}],2:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var u,a,n,i,o=(u=void 0,a=[],n={},i={},u={extend:function(e,t,r,n){!n[e]&&t&&(n[e]={instance:t,override:r});},getSingletonInstance:s,setSingletonInstance:function(e,t,r){for(var n in a){var i=a[n];if(i.context===e&&i.name===t)return void(a[n].instance=r)}a.push({name:t,context:e,instance:r});},getSingletonFactory:function(r){var e=l(r.__dashjs_factory_name,n);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return (t=t||s(e,r.__dashjs_factory_name))||(t=p(r,e,arguments),a.push({name:r.__dashjs_factory_name,context:e,instance:t})),t}}},n[r.__dashjs_factory_name]=e),e},getSingletonFactoryByName:function(e){return l(e,n)},updateSingletonFactory:function(e,t){f(e,t,n);},getClassFactory:function(t){var e=l(t.__dashjs_factory_name,i);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return p(t,e,arguments)}}},i[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(e){return l(e,i)},updateClassFactory:function(e,t){f(e,t,i);}});function s(e,t){for(var r in a){var n=a[r];if(n.context===e&&n.name===t)return n.instance}return null}function l(e,t){return t[e]}function f(e,t,r){e in r&&(r[e]=t);}function p(e,t,r){var n=void 0,i=e.__dashjs_factory_name,a=t[i];if(a){var o=a.instance;if(!a.override)return o.apply({context:t,factory:u},r);for(var s in n=e.apply({context:t},r),o=o.apply({context:t,factory:u,parent:n},r))n.hasOwnProperty(s)&&(n[s]=o[s]);}else n=e.apply({context:t},r);return n.getClassName=function(){return i},n}r.default=o,t.exports=r.default;},{}],3:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(a,[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&-1===e[i].indexOf("public_")||(this[i]=e[i]);}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}r.default=i,t.exports=r.default;},{}],4:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(a,[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&-1===e[i].indexOf("public_")||(this[i]=e[i]);}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}r.default=i,t.exports=r.default;},{}],5:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e(17),v=(n=i)&&n.__esModule?n:{default:n};function a(e){var t,l=void 0,f=void 0,p=void 0,d=void 0,a=void 0,o=void 0,s=void 0,c=void 0,h=(e=e||{}).streamProcessor,m=e.baseURLController,r=e.debug;function g(){p&&(l.debug("Stop"),clearTimeout(a),p=!1,s=o=null);}function u(){var e,t,r,n,i,a,o,s,u;p&&(n=(r=(t=(e=h.getRepresentationController().getCurrentRepresentation()).adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index]).SegmentTemplate.SegmentTimeline.S_asArray)[r.length-1],a=e,o=n,s=(i=t).SegmentTemplate.timescale,(u=new v.default).mediaType=d,u.type="FragmentInfoSegment",u.startTime=o.t/s,u.duration=o.d/s,u.timescale=s,u.quality=a.index,u.index=c++,u.mediaInfo=h.getMediaInfo(),u.adaptationIndex=a.adaptation.index,u.representationId=a.id,u.url=m.resolve(a.path).url+i.SegmentTemplate.media,u.url=u.url.replace("$Bandwidth$",a.bandwidth),u.url=u.url.replace("$Time$",o.tManifest?o.tManifest:o.t),u.url=u.url.replace("/Fragments(","/FragmentInfo("),function(e){if(h.getFragmentModel().isFragmentLoadedOrPending(e))return l.debug("End of timeline"),void g();f.executeRequest(e);}.call(this,u));}return t={initialize:function(){d=h.getType(),f=h.getFragmentModel(),p=!1,s=o=null;},controllerType:"MssFragmentInfoController",start:function(){p||(l.debug("Start"),p=!0,o=(new Date).getTime(),c=0,u());},fragmentInfoLoaded:function(e){var t,r,n,i;p&&(t=e.request,e.response?(s=s||t.startTime,n=((new Date).getTime()-o)/1e3,r=t.startTime+t.duration-s,i=Math.max(0,r-n),clearTimeout(a),a=setTimeout(function(){a=null,u();},1e3*i)):l.error("Load error",t.url));},getType:function(){return d},reset:function(){g();}},l=r.getLogger(t),t}a.__dashjs_factory_name="MssFragmentInfoController",r.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=r.default;},{17:17}],6:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var w=n(e(15)),M=n(e(10)),I=n(e(13));function i(e){var t,y=void 0,i=void 0,a=(e=e||{}).dashMetrics,o=e.playbackController,_=e.errHandler,b=e.eventBus,T=e.ISOBoxer,r=e.debug;function A(e,t,r,n){var i=n.getRepresentationController(),a=i.getCurrentRepresentation(),o=a.adaptation.period.mpd.manifest,s=o.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index],u=s.SegmentTemplate.timescale;if(y=n.getType(),"dynamic"===o.type||o.timeShiftBufferDepth)if(t){var l,f,p=s.SegmentTemplate.SegmentTimeline.S,d=t.entry,c=void 0,h=void 0,m=null,g=0,v=null;if(0!==d.length&&(l=d[0],!("static"===o.type&&(c=p[0].tManifest?parseFloat(p[0].tManifest):p[0].t,l.fragment_absolute_time>c+o.timeShiftBufferDepth*u)))){if(c=p[p.length-1].tManifest?parseFloat(p[p.length-1].tManifest):p[p.length-1].t,l.fragment_absolute_time<=c)return h={start:p[0].t/u,end:r.baseMediaDecodeTime/u+e.duration},void S(e.mediaType,h,n.getStreamInfo().manifestInfo);if((m={}).t=l.fragment_absolute_time,m.d=l.fragment_duration,p[0].tManifest&&(m.t-=parseFloat(p[0].tManifest)-p[0].t,m.tManifest=l.fragment_absolute_time),p.push(m),"static"!==o.type){if(o.timeShiftBufferDepth&&0<o.timeShiftBufferDepth){for(g=(m=p[p.length-1]).t,v=Math.round((g-o.timeShiftBufferDepth*u)/u),m=p[0];Math.round(m.t/u)<v;)p.splice(0,1),m=p[0];h={start:p[0].t/u,end:r.baseMediaDecodeTime/u+e.duration},S(y,h,n.getStreamInfo().manifestInfo);}i.updateRepresentation(a,!0);}else "video"!==y||(f=((m=p[p.length-1]).t+m.d)/u)>a.adaptation.period.duration&&b.trigger(I.default.MANIFEST_VALIDITY_CHANGED,{sender:this,newDuration:f});}}else _.error(new w.default(M.default.MSS_NO_TFRF_CODE,M.default.MSS_NO_TFRF_MESSAGE));}function S(e,t,r){var n=a.getCurrentDVRInfo(e);(!n||t.end>n.range.end)&&(i.debug("Update DVR range: ["+t.start+" - "+t.end+"]"),a.addDVRInfo(e,o.getTime(),r,t));}function E(e,t){for(var r=8,n=0,n=0;n<e.boxes.length;n++){if(e.boxes[n].type===t)return r;r+=e.boxes[n].size;}return r}return t={convertFragment:function(e,t){var r=void 0,n=T.parseBuffer(e.response),i=n.fetch("tfhd");i.track_ID=e.request.mediaInfo.index+1;var a=n.fetch("tfdt"),o=n.fetch("traf");null===a&&((a=T.createFullBox("tfdt",o,i)).version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(e.request.startTime*e.request.timescale));var s=n.fetch("trun"),u=n.fetch("tfxd");u&&(u._parent.boxes.splice(u._parent.boxes.indexOf(u),1),u=null);var l=n.fetch("tfrf");A(e.request,l,a,t),l&&(l._parent.boxes.splice(l._parent.boxes.indexOf(l),1),l=null);var f=n.fetch("sepiff");if(null!==f){f.type="senc",f.usertype=void 0;var p=n.fetch("saio");if(null===p){(p=T.createFullBox("saio",o)).version=0,p.flags=0,p.entry_count=1,p.offset=[0];var d=T.createFullBox("saiz",o);if(d.version=0,d.flags=0,d.sample_count=f.sample_count,d.default_sample_info_size=0,d.sample_info_size=[],2&f.flags)for(r=0;r<f.sample_count;r+=1)d.sample_info_size[r]=10+6*f.entry[r].NumberOfEntries;else d.default_sample_info_size=8;}}i.flags&=16777214,i.flags|=131072,s.flags|=1;var c=n.fetch("moof"),h=c.getLength();s.data_offset=h+8;var m,g,v=n.fetch("saio");null!==v&&(m=E(c,"traf"),g=E(o,"senc"),v.offset[0]=m+g+16),e.response=n.write();},updateSegmentList:function(e,t){if(!e.response)throw new Error("e.response parameter is missing");var r=T.parseBuffer(e.response),n=r.fetch("tfhd");n.track_ID=e.request.mediaInfo.index+1;var i=r.fetch("tfdt"),a=r.fetch("traf");null===i&&((i=T.createFullBox("tfdt",a,n)).version=1,i.flags=0,i.baseMediaDecodeTime=Math.floor(e.request.startTime*e.request.timescale));var o=r.fetch("tfrf");A(e.request,o,i,t),o&&(o._parent.boxes.splice(o._parent.boxes.indexOf(o),1),o=null);},getType:function(){return y}},i=r.getLogger(t),y="",t}i.__dashjs_factory_name="MssFragmentMoofProcessor",r.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=r.default;},{10:10,13:13,15:15}],7:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e(10),B=(n=i)&&n.__esModule?n:{default:n};function a(e){var _=7,b=8,T=(e=e||{}).constants,A=e.ISOBoxer,S=e.protectionController,E=void 0,w=void 0,M=void 0,I=void 0,D=void 0,P=void 0;function i(e){var t,r,n=A.createBox("moov",e);t=n,(r=A.createFullBox("mvhd",t)).version=1,r.creation_time=0,r.modification_time=0,r.timescale=D,r.duration=E.duration===1/0?0x10000000000000000:Math.round(E.duration*D),r.rate=1,r.volume=1,r.reserved1=0,r.reserved2=[0,0],r.matrix=[1,0,0,0,1,0,0,0,16384],r.pre_defined=[0,0,0,0,0,0],r.next_track_ID=P+1;var i,a,o=A.createBox("trak",n);i=o,(a=A.createFullBox("tkhd",i)).version=1,a.flags=7,a.creation_time=0,a.modification_time=0,a.track_ID=P,a.reserved1=0,a.duration=E.duration===1/0?0x10000000000000000:Math.round(E.duration*D),a.reserved2=[0,0],a.layer=0,a.alternate_group=0,a.volume=1,a.reserved3=0,a.matrix=[1,0,0,0,1,0,0,0,16384],a.width=M.width,a.height=M.height;var s,u,l=A.createBox("mdia",o);s=l,(u=A.createFullBox("mdhd",s)).version=1,u.creation_time=0,u.modification_time=0,u.timescale=D,u.duration=E.duration===1/0?0x10000000000000000:Math.round(E.duration*D),u.language=w.lang||"und",u.pre_defined=0,function(e){var t=A.createFullBox("hdlr",e);switch(t.pre_defined=0,w.type){case T.VIDEO:t.handler_type="vide";break;case T.AUDIO:t.handler_type="soun";break;default:t.handler_type="meta";}t.name=M.id,t.reserved=[0,0,0];}(l);var f,p,d,c,h=A.createBox("minf",l);switch(w.type){case T.VIDEO:d=h,(c=A.createFullBox("vmhd",d)).flags=1,c.graphicsmode=0,c.opcolor=[0,0,0];break;case T.AUDIO:f=h,(p=A.createFullBox("smhd",f)).flags=1,p.balance=0,p.reserved=0;}!function(e){var t=A.createFullBox("dref",e);t.entry_count=1,t.entries=[];var r=A.createFullBox("url ",t,!1);r.location="",r.flags=1,t.entries.push(r);}(A.createBox("dinf",h));var m=A.createBox("stbl",h);A.createFullBox("stts",m)._data=[0,0,0,0,0,0,0,0],A.createFullBox("stsc",m)._data=[0,0,0,0,0,0,0,0],A.createFullBox("stco",m)._data=[0,0,0,0,0,0,0,0],A.createFullBox("stsz",m)._data=[0,0,0,0,0,0,0,0,0,0,0,0],function(e){var t=A.createFullBox("stsd",e);switch(t.entries=[],w.type){case T.VIDEO:case T.AUDIO:t.entries.push(function(e){var t=M.codecs.substring(0,M.codecs.indexOf("."));switch(t){case"avc1":return function(e,t){var r=void 0;r=I?A.createBox("encv",e,!1):A.createBox("avc1",e,!1);{var n;r.reserved1=[0,0,0,0,0,0],r.data_reference_index=1,r.pre_defined1=0,r.reserved2=0,r.pre_defined2=[0,0,0],r.height=M.height,r.width=M.width,r.horizresolution=72,r.vertresolution=72,r.reserved3=0,r.frame_count=1,r.compressorname=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r.depth=24,r.pre_defined3=65535,r.config=function(){for(var e=null,t=15,r=[],n=[],i=0,a=0,o=0,s=M.codecPrivateData.split("00000001").slice(1),u=void 0,l=0;l<s.length;l++)switch(u=N(s[l]),31&u[0]){case _:r.push(u),t+=u.length+2;break;case b:n.push(u),t+=u.length+2;}0<r.length&&(i=r[0][1],o=r[0][2],a=r[0][3]);e=new Uint8Array(t);var f=0;e[f++]=(4278190080&t)>>24,e[f++]=(16711680&t)>>16,e[f++]=(65280&t)>>8,e[f++]=255&t,e.set([97,118,99,67],f),f+=4,e[f++]=1,e[f++]=i,e[f++]=o,e[f++]=a,e[f++]=255,e[f++]=224|r.length;for(var p=0;p<r.length;p++)e[f++]=(65280&r[p].length)>>8,e[f++]=255&r[p].length,e.set(r[p],f),f+=r[p].length;e[f++]=n.length;for(p=0;p<n.length;p++)e[f++]=(65280&n[p].length)>>8,e[f++]=255&n[p].length,e.set(n[p],f),f+=n[p].length;return e}(),I&&(C(n=A.createBox("sinf",r),t),x(n),O(n));}return r}(e,t);case"mp4a":return function(e,t){var r=void 0;r=I?A.createBox("enca",e,!1):A.createBox("mp4a",e,!1);{var n;r.reserved1=[0,0,0,0,0,0],r.data_reference_index=1,r.reserved2=[0,0],r.channelcount=M.audioChannels,r.samplesize=16,r.pre_defined=0,r.reserved_3=0,r.samplerate=M.audioSamplingRate<<16,r.esds=function(){var e=N(M.codecPrivateData),t=34+e.length,r=new Uint8Array(t),n=0;return r[n++]=(4278190080&t)>>24,r[n++]=(16711680&t)>>16,r[n++]=(65280&t)>>8,r[n++]=255&t,r.set([101,115,100,115],n),n+=4,r.set([0,0,0,0],n),n+=4,r[n++]=3,r[n++]=20+e.length,r[n++]=(65280&P)>>8,r[n++]=255&P,r[n++]=0,r[n++]=4,r[n++]=15+e.length,r[n++]=64,r[n]=20,r[n]|=0,r[n++]|=1,r[n++]=255,r[n++]=255,r[n++]=255,r[n++]=(4278190080&M.bandwidth)>>24,r[n++]=(16711680&M.bandwidth)>>16,r[n++]=(65280&M.bandwidth)>>8,r[n++]=255&M.bandwidth,r[n++]=(4278190080&M.bandwidth)>>24,r[n++]=(16711680&M.bandwidth)>>16,r[n++]=(65280&M.bandwidth)>>8,r[n++]=255&M.bandwidth,r[n++]=5,r[n++]=e.length,r.set(e,n),r}(),I&&(C(n=A.createBox("sinf",r),t),x(n),O(n));}return r}(e,t);default:throw {code:B.default.MSS_UNSUPPORTED_CODEC_CODE,message:B.default.MSS_UNSUPPORTED_CODEC_MESSAGE,data:{codec:t}}}}(t));}t.entry_count=t.entries.length;}(m);var g,v,y=A.createBox("mvex",n);g=y,(v=A.createFullBox("trex",g)).track_ID=P,v.default_sample_description_index=1,v.default_sample_duration=0,v.default_sample_size=0,v.default_sample_flags=0,I&&S&&function(e,t){var r=void 0,n=void 0,i=void 0,a=void 0;for(i=0;i<t.length;i+=1)(r=t[i].initData)&&(a=A.parseBuffer(r),(n=a.fetch("pssh"))&&A.Utils.appendBox(e,n));}(n,S.getSupportedKeySystemsFromContentProtection(I));}function C(e,t){A.createBox("frma",e).data_format=function(e){var t=0,r=void 0;for(r=0;r<e.length;r+=1)t|=e.charCodeAt(r)<<8*(e.length-r-1);return t}(t);}function x(e){var t=A.createFullBox("schm",e);t.flags=0,t.version=0,t.scheme_type=1667591779,t.scheme_version=65536;}function O(e){var t,r,n=A.createBox("schi",e);t=n,(r=A.createFullBox("tenc",t)).flags=0,r.version=0,r.default_IsEncrypted=1,r.default_IV_size=8,r.default_KID=I&&0<I.length&&I[0]["cenc:default_KID"]?I[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];}function N(e){for(var t=new Uint8Array(e.length/2),r=void 0,r=0;r<e.length/2;r+=1)t[r]=parseInt(""+e[2*r]+e[2*r+1],16);return t}return {generateMoov:function(e){if(e&&e.adaptation){var t,r,n=void 0;return w=(M=e).adaptation,E=w.period,P=w.index+1,I=E.mpd.manifest.Period_asArray[E.index].AdaptationSet_asArray[w.index].ContentProtection,D=E.mpd.manifest.Period_asArray[E.index].AdaptationSet_asArray[w.index].SegmentTemplate.timescale,n=A.createFile(),t=n,(r=A.createBox("ftyp",t)).major_brand="iso6",r.minor_version=1,r.compatible_brands=[],r.compatible_brands[0]="isom",r.compatible_brands[1]="iso6",r.compatible_brands[2]="msdh",i(n),n.write()}}}}a.__dashjs_factory_name="MssFragmentMoovProcessor",r.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=r.default;},{10:10}],8:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var p=n(e(6)),d=n(e(7));function i(e,r){return e.length===r.length&&e.every(function(e,t){return e===r[t]})}function c(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32);}function h(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8);}function m(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("IV_size","uint",8),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32);}));});}function g(){i(this.usertype,[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])&&(this._procFullBox(),this._parsing&&(this.type="tfxd"),this._procField("fragment_absolute_time","uint",1===this.version?64:32),this._procField("fragment_duration","uint",1===this.version?64:32)),i(this.usertype,[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])&&(this._procFullBox(),this._parsing&&(this.type="tfrf"),this._procField("fragment_count","uint",8),this._procEntries("entry",this.fragment_count,function(e){this._procEntryField(e,"fragment_absolute_time","uint",1===this.version?64:32),this._procEntryField(e,"fragment_duration","uint",1===this.version?64:32);})),i(this.usertype,[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])&&(this._parsing&&(this.type="sepiff"),m.call(this));}function a(e){e=e||{};var t,r=this.context,n=e.dashMetrics,i=e.playbackController,a=e.eventBus,o=e.protectionController,s=e.ISOBoxer,u=e.debug,l=void 0,f=void 0;return t={generateMoov:function(e){return l.generateMoov(e)},processFragment:function(e,t){if(!e||!e.request||!e.response)throw new Error("e parameter is missing or malformed");"MediaSegment"===e.request.type?f.convertFragment(e,t):"FragmentInfoSegment"===e.request.type&&(f.updateSegmentList(e,t),e.sender=null);}},s.addBoxProcessor("uuid",g),s.addBoxProcessor("saio",c),s.addBoxProcessor("saiz",h),s.addBoxProcessor("senc",m),l=(0, d.default)(r).create({protectionController:o,constants:e.constants,ISOBoxer:s}),f=(0, p.default)(r).create({dashMetrics:n,playbackController:i,ISOBoxer:s,eventBus:a,debug:u,errHandler:e.errHandler}),t}a.__dashjs_factory_name="MssFragmentProcessor",r.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=r.default;},{6:6,7:7}],9:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var A=n(e(16)),S=n(e(17)),E=n(e(5)),w=n(e(8)),M=n(e(12)),i=n(e(10)),I=n(e(15)),D=n(e(14));function a(f){f=f||{};var r=this.context,p=f.eventBus,d=f.events,n=f.constants,c=f.initSegmentType,e=f.dashMetrics,t=f.playbackController,i=f.streamController,a=f.protectionController,h=(0, w.default)(r).create({dashMetrics:e,playbackController:t,protectionController:a,streamController:i,eventBus:p,constants:n,ISOBoxer:f.ISOBoxer,debug:f.debug,errHandler:f.errHandler}),o=void 0,s=void 0,u=void 0;function m(t){return i.getActiveStreamProcessors().filter(function(e){return e.getType()===t})[0]}function l(t){return s.filter(function(e){return e.getType()===t})[0]}function g(){i.getActiveStreamProcessors().forEach(function(e){var t;e.getType()!==n.VIDEO&&e.getType()!==n.AUDIO&&e.getType()!==n.FRAGMENTED_TEXT||((t=l(e.getType()))||((t=(0, E.default)(r).create({streamProcessor:e,baseURLController:f.baseURLController,debug:f.debug})).initialize(),s.push(t)),t.start());});}function v(e){var t=m(e.sender.getType());if(t){var r=t.getRepresentationController().getCurrentRepresentation(),n=t.getMediaInfo(),i=new S.default;i.mediaType=r.adaptation.type,i.type=c,i.range=r.range,i.quality=r.index,i.mediaInfo=n,i.representationId=r.id;var a,o,s,u,l=(a=i,o=n.streamInfo.id,s=e.type!==d.FRAGMENT_LOADING_PROGRESS,(u=new A.default).streamId=o,u.mediaInfo=a.mediaInfo,u.segmentType=a.type,u.start=a.startTime,u.duration=a.duration,u.end=u.start+u.duration,u.index=a.index,u.quality=a.quality,u.representationId=a.representationId,u.endFragment=s,u);try{l.bytes=h.generateMoov(r),p.trigger(d.INIT_FRAGMENT_LOADED,{chunk:l});}catch(e){f.errHandler.error(new I.default(e.code,e.message,e.data));}e.sender=null;}}function y(e){var t,r,n;e.error||(t=m(e.request.mediaType))&&(h.processFragment(e,t),"FragmentInfoSegment"!==e.request.type||(r=l(e.request.mediaType))&&r.fragmentInfoLoaded(e),(n=e.request.mediaInfo.streamInfo.manifestInfo).isDynamic||n.DVRWindowSize===1/0||g());}function _(){t.getIsDynamic()&&0!==t.getTime()&&g();}function b(){t.getIsDynamic()&&0!==t.getTime()&&g();}function T(e){e&&e.data&&(e.data=e.data.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml"));}return u={reset:function(){o&&(o.reset(),o=void 0),p.off(d.INIT_FRAGMENT_NEEDED,v,this),p.off(d.PLAYBACK_PAUSED,_,this),p.off(d.PLAYBACK_SEEK_ASKED,b,this),p.off(d.FRAGMENT_LOADING_COMPLETED,y,this),p.off(d.TTML_TO_PARSE,T,this),s.forEach(function(e){e.reset();}),s=[];},createMssParser:function(){return o=(0, M.default)(r).create(f)},registerEvents:function(){p.on(d.INIT_FRAGMENT_NEEDED,v,u,dashjs.FactoryMaker.getSingletonFactoryByName(p.getClassName()).EVENT_PRIORITY_HIGH),p.on(d.PLAYBACK_PAUSED,_,u,dashjs.FactoryMaker.getSingletonFactoryByName(p.getClassName()).EVENT_PRIORITY_HIGH),p.on(d.PLAYBACK_SEEK_ASKED,b,u,dashjs.FactoryMaker.getSingletonFactoryByName(p.getClassName()).EVENT_PRIORITY_HIGH),p.on(d.FRAGMENT_LOADING_COMPLETED,y,u,dashjs.FactoryMaker.getSingletonFactoryByName(p.getClassName()).EVENT_PRIORITY_HIGH),p.on(d.TTML_TO_PARSE,T,u);}},s=[],(0, D.default)(r).getInstance(),u}a.__dashjs_factory_name="MssHandler";var o=dashjs.FactoryMaker.getClassFactory(a);o.errors=i.default,dashjs.FactoryMaker.updateClassFactory(a.__dashjs_factory_name,o),r.default=o,t.exports=r.default;},{10:10,12:12,14:14,15:15,16:16,17:17,5:5,8:8}],10:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r,n=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0;}};var i,a=e(3);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MSS_NO_TFRF_CODE=200,this.MSS_UNSUPPORTED_CODEC_CODE=201,this.MSS_NO_TFRF_MESSAGE="Missing tfrf in live media segment",this.MSS_UNSUPPORTED_CODEC_MESSAGE="Unsupported codec";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);r.default=s,t.exports=r.default;},{3:3}],11:[function(o,e,s){(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t,r=o(9),n=(t=r)&&t.__esModule?t:{default:t},i="undefined"!=typeof window&&window||e,a=i.dashjs;(a=a||(i.dashjs={})).MssHandler=n.default,s.default=a,s.MssHandler=n.default;}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{9:9}],12:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e(1),b=(n=i)&&n.__esModule?n:{default:n};function a(e){var t,I=(e=e||{}).BASE64,r=e.debug,D=e.constants,P=e.manifestModel,C=e.mediaPlayerModel,x=e.settings,O=1e7,h=["AAC","AACL","AVC1","H264","TTML","DFXP"],m={CAPT:"main",SUBT:"alternate",DESC:"main"},g={DESC:"2"},v={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},y={video:"video/mp4",audio:"audio/mp4",text:"application/mp4"},_=void 0,N=void 0;function B(e,t){var r,n={},i=void 0;n.AdaptationSet_asArray=[],r=e.getElementsByTagName("StreamIndex");for(var a=0;a<r.length;a++)null!==(i=function(e,t){var r,n={},i=[],a=void 0,o=void 0,s=void 0,u=e.getAttribute("Name"),l=e.getAttribute("Type"),f=e.getAttribute("Language"),p=f?l+"_"+f:l;{var d,c;n.id=u||p,n.contentType=l,n.lang=f||"und",n.mimeType=y[l],n.subType=e.getAttribute("Subtype"),n.maxWidth=e.getAttribute("MaxWidth"),n.maxHeight=e.getAttribute("MaxHeight"),n.subType&&(m[n.subType]&&(d={schemeIdUri:"urn:mpeg:dash:role:2011",value:m[n.subType]},n.Role=d,n.Role_asArray=[d]),g[n.subType]&&(c={schemeIdUri:"urn:tva:metadata:cs:AudioPurposeCS:2007",value:g[n.subType]},n.Accessibility=c,n.Accessibility_asArray=[c]));}for(r=function(e,t){var r={},n=void 0,i=void 0,a=void 0;return a=e.getAttribute("Url"),n=(n=a?a.replace("{bitrate}","$Bandwidth$"):null)?n.replace("{start time}","$Time$"):null,i=(i=e.getAttribute("TimeScale"))?parseFloat(i):t,r.media=n,r.timescale=i,r.SegmentTimeline=function(e,t){var r={},n=e.getElementsByTagName("c"),i=[],a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,f=void 0,p=0;for(u=0;u<n.length;u++)if(a={},(s=n[u].getAttribute("t"))&&(0, b.default)(s).greater((0, b.default)(Number.MAX_SAFE_INTEGER))&&(a.tManifest=s),a.t=parseFloat(s),a.d=parseFloat(n[u].getAttribute("d")),0!==u||a.t||(a.t=0),0<u&&((o=i[i.length-1]).d||(o.tManifest?o.d=(0, b.default)(s).subtract((0, b.default)(o.tManifest)).toJSNumber():o.d=a.t-o.t,p+=o.d),a.t||(o.tManifest?(a.tManifest=(0, b.default)(o.tManifest).add((0, b.default)(o.d)).toString(),a.t=parseFloat(a.tManifest)):a.t=o.t+o.d)),a.d&&(p+=a.d),i.push(a),f=parseFloat(n[u].getAttribute("r")))for(l=0;l<f-1;l++)o=i[i.length-1],(a={}).t=o.t+o.d,a.d=o.d,o.tManifest&&(a.tManifest=(0, b.default)(o.tManifest).add((0, b.default)(o.d)).toString()),p+=a.d,i.push(a);return r.S=i,r.S_asArray=i,r.duration=p/t,r}(e,r.timescale),r}(e,t),a=e.getElementsByTagName("QualityLevel"),s=0;s<a.length;s++)a[s].BaseURL=n.BaseURL,a[s].mimeType=n.mimeType,a[s].Id=n.id+"_"+a[s].getAttribute("Index"),null!==(o=function(e,t){var r={},n=t.getAttribute("Type"),i=null;r.id=e.Id,r.bandwidth=parseInt(e.getAttribute("Bitrate"),10),r.mimeType=e.mimeType,r.width=parseInt(e.getAttribute("MaxWidth"),10),r.height=parseInt(e.getAttribute("MaxHeight"),10),null!==(i=e.getAttribute("FourCC"))&&""!==i||(i=t.getAttribute("FourCC"));if(null===i||""===i)if(n===D.AUDIO)i="AAC";else if(n===D.VIDEO)return _.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(-1===h.indexOf(i.toUpperCase()))return _.warn("Codec not supported: "+i),null;"H264"===i||"AVC1"===i?r.codecs=function(e){var t,r=e.getAttribute("CodecPrivateData").toString();return t=/00000001[0-9]7/.exec(r),"avc1."+(t&&t[0]?r.substr(r.indexOf(t[0])+10,6):void 0)}(e):0<=i.indexOf("AAC")?(r.codecs=function(e,t){var r=parseInt(e.getAttribute("SamplingRate"),10),n=e.getAttribute("CodecPrivateData").toString(),i=0,a=void 0,o=void 0,s=void 0;"AACH"===t&&(i=5);void 0===n||""===n?(i=2,o=v[r],n=(n=""+("AACH"===t?(i=5,n=new Uint8Array(4),s=v[2*r],n[0]=i<<3|o>>1,n[1]=o<<7|e.Channels<<3|s>>1,n[2]=s<<7|8,n[3]=0,(a=new Uint16Array(2))[0]=(n[0]<<8)+n[1],a[1]=(n[2]<<8)+n[3],a[0].toString(16),a[0].toString(16)+a[1].toString(16)):((n=new Uint8Array(2))[0]=i<<3|o>>1,n[1]=o<<7|parseInt(e.getAttribute("Channels"),10)<<3,(a=new Uint16Array(1))[0]=(n[0]<<8)+n[1],a[0].toString(16)))).toUpperCase(),e.setAttribute("CodecPrivateData",n)):0===i&&(i=(248&parseInt(n.substr(0,2),16))>>3);return "mp4a.40."+i}(e,i),r.audioSamplingRate=parseInt(e.getAttribute("SamplingRate"),10),r.audioChannels=parseInt(e.getAttribute("Channels"),10)):(i.indexOf("TTML")||i.indexOf("DFXP"))&&(r.codecs=D.STPP);return r.codecPrivateData=""+e.getAttribute("CodecPrivateData"),r.BaseURL=e.BaseURL,r}(a[s],e))&&(o.SegmentTemplate=r,i.push(o));return 0!==i.length?(n.Representation=1<i.length?i:i[0],n.Representation_asArray=i,n.SegmentTemplate=r,r.SegmentTimeline.S_asArray,n):null}(r[a],t))&&n.AdaptationSet_asArray.push(i);return 0<n.AdaptationSet_asArray.length&&(n.AdaptationSet=1<n.AdaptationSet_asArray.length?n.AdaptationSet_asArray:n.AdaptationSet_asArray[0]),n}function F(e){var t,r=void 0,n=void 0;return (r=function(e){var t=void 0,r=void 0,n=void 0,i=0;e[i+3],e[i+2],e[i+1],e[i],e[(i+=4)+1],e[i],i+=2;for(;i<e.length;)if(t=(e[i+1]<<8)+e[i],i+=2,1===t)return r=(e[i+1]<<8)+e[i],i+=2,(n=new Uint8Array(r)).set(e.subarray(i,i+r)),n;return null}(I.decodeArray(e.firstChild.data)))&&(r=new Uint16Array(r.buffer),r=String.fromCharCode.apply(null,r),n=(new DOMParser).parseFromString(r,"application/xml").querySelector("KID").textContent,n=I.decodeArray(n),i(t=n,0,3),i(t,1,2),i(t,4,5),i(t,6,7)),n}function i(e,t,r){var n=e[t];e[t]=e[r],e[r]=n;}function o(e,t){var r,n={},i=[],a=e.getElementsByTagName("SmoothStreamingMedia")[0],o=e.getElementsByTagName("Protection")[0],s=null,u=void 0,l=void 0,f=void 0,p=void 0,d=void 0,c=void 0,h=void 0,m=void 0,g=void 0,v=void 0;n.protocol="MSS",n.profiles="urn:mpeg:dash:profile:isoff-live:2011",n.type="TRUE"===a.getAttribute("IsLive")?"dynamic":"static",r=a.getAttribute("TimeScale"),n.timescale=r?parseFloat(r):O;var y=parseFloat(a.getAttribute("DVRWindowLength"));"dynamic"!==n.type||0!==y&&!isNaN(y)||(y=1/0),0===y&&"TRUE"===a.getAttribute("CanSeek")&&(y=1/0),0<y&&(n.timeShiftBufferDepth=y/n.timescale);var _,b,T,A,S,E,w=parseFloat(a.getAttribute("Duration"));for(n.mediaPresentationDuration=0===w?1/0:w/n.timescale,n.minBufferTime=2,n.ttmlTimeIsRelative=!0,"dynamic"===n.type&&0<w&&(n.type="static",n.timeShiftBufferDepth=w/n.timescale),"dynamic"===n.type&&n.timeShiftBufferDepth<1/0&&(n.refreshManifestOnSwitchTrack=!0,n.doNotUpdateDVRWindowOnBufferUpdated=!0,n.ignorePostponeTimePeriod=!0),n.Period=B(a,n.timescale),n.Period_asArray=[n.Period],void((u=n.Period).start=0)!==o&&((s=e.getElementsByTagName("ProtectionHeader")[0]).firstChild.data=s.firstChild.data.replace(/\n|\r/g,""),p=F(s),(f={schemeIdUri:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",value:"com.microsoft.playready",pro:_={__text:s.firstChild.data,__prefix:"mspr"},pro_asArray:_})["cenc:default_KID"]=p,i.push(f),(f=function(e){var t={schemeIdUri:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",value:"com.widevine.alpha"};if(!e)return t;var r=new Uint8Array(2+e.length);r[0]=18,r[1]=16,r.set(e,2);var n=32+r.length,i=new Uint8Array(n),a=0;return i[a++]=(4278190080&n)>>24,i[a++]=(16711680&n)>>16,i[a++]=(65280&n)>>8,i[a++]=255&n,i.set([112,115,115,104,0,0,0,0],a),a+=8,i.set([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237],a),a+=16,i[a++]=(4278190080&r.length)>>24,i[a++]=(16711680&r.length)>>16,i[a++]=(65280&r.length)>>8,i[a++]=255&r.length,i.set(r,a),i=String.fromCharCode.apply(null,i),i=I.encodeASCII(i),t.pssh={__text:i},t}(p))["cenc:default_KID"]=p,i.push(f),n.ContentProtection=i,n.ContentProtection_asArray=i),l=u.AdaptationSet_asArray,g=0;g<l.length;g+=1){l[g].SegmentTemplate.initialization="$Bandwidth$",void 0!==n.ContentProtection&&(l[g].ContentProtection=n.ContentProtection,l[g].ContentProtection_asArray=n.ContentProtection_asArray),"video"===l[g].contentType&&(m=l[g].SegmentTemplate.SegmentTimeline.S_asArray[0].d/l[g].SegmentTemplate.timescale,n.minBufferTime=m,"dynamic"===n.type&&(b=((h=l[g].SegmentTemplate.SegmentTimeline.S_asArray)[h.length-1].t+h[h.length-1].d)/l[g].SegmentTemplate.timescale*1e3,n.availabilityStartTime=new Date(t.getTime()-b),0<n.timeShiftBufferDepth&&n.timeShiftBufferDepth!==1/0&&n.timeShiftBufferDepth>l[g].SegmentTemplate.SegmentTimeline.duration&&(n.timeShiftBufferDepth=l[g].SegmentTemplate.SegmentTimeline.duration)));}if(n.minBufferTime=Math.min(n.minBufferTime,n.timeShiftBufferDepth?n.timeShiftBufferDepth:1/0),"dynamic"===n.type&&(T=(T=C.getLiveDelay())||m*(null===x.get().streaming.liveDelayFragmentCount||isNaN(x.get().streaming.liveDelayFragmentCount)?4:x.get().streaming.liveDelayFragmentCount),A=Math.max(n.timeShiftBufferDepth-10,n.timeShiftBufferDepth/2),E=(S=Math.min(A,T))-m,N={streaming:{liveDelay:x.get().streaming.liveDelay,stableBufferTime:x.get().streaming.stableBufferTime,bufferTimeAtTopQuality:x.get().streaming.bufferTimeAtTopQuality,bufferTimeAtTopQualityLongForm:x.get().streaming.bufferTimeAtTopQualityLongForm}},x.update({streaming:{liveDelay:S,stableBufferTime:E,bufferTimeAtTopQuality:E,bufferTimeAtTopQualityLongForm:E}})),delete n.ContentProtection,delete n.ContentProtection_asArray,"static"===n.type){var M=P.getValue();if(M&&M.timestampOffset)d=M.timestampOffset;else for(g=0;g<l.length;g++)l[g].contentType!==D.AUDIO&&l[g].contentType!==D.VIDEO||(c=(h=l[g].SegmentTemplate.SegmentTimeline.S_asArray)[0].t/l[g].SegmentTemplate.timescale,void 0===d&&(d=c),d=Math.min(d,c),n.mediaPresentationDuration=Math.min(n.mediaPresentationDuration,l[g].SegmentTemplate.SegmentTimeline.duration));if(0<d){for(n.timestampOffset=d,g=0;g<l.length;g++){for(h=l[g].SegmentTemplate.SegmentTimeline.S_asArray,v=0;v<h.length;v++)h[v].tManifest||(h[v].tManifest=h[v].t),h[v].t-=d*l[g].SegmentTemplate.timescale;l[g].contentType!==D.AUDIO&&l[g].contentType!==D.VIDEO||(u.start=Math.max(h[0].t,u.start),l[g].SegmentTemplate.presentationTimeOffset=u.start);}u.start/=n.timescale;}}return n.mediaPresentationDuration=Math.floor(1e3*n.mediaPresentationDuration)/1e3,u.duration=n.mediaPresentationDuration,n}return t={parse:function(e){var t,r=window.performance.now(),n=function(e){var t=null;if(window.DOMParser&&0<(t=(new window.DOMParser).parseFromString(e,"text/xml")).getElementsByTagName("parsererror").length)throw new Error("parsing the manifest failed");return t}(e),i=window.performance.now();if(null===n)return null;t=o(n,new Date);var a=window.performance.now();return _.info("Parsing complete: (xmlParsing: "+(i-r).toPrecision(3)+"ms, mss2dash: "+(a-i).toPrecision(3)+"ms, total: "+((a-r)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return null},getIron:function(){return null},reset:function(){N&&x.update(N);}},_=r.getLogger(t),t}a.__dashjs_factory_name="MssParser",r.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=r.default;},{1:1}],13:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r,n=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0;}};var i,a=e(4);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);r.default=s,t.exports=r.default;},{4:4}],14:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e(2),a=(n=i)&&n.__esModule?n:{default:n};function o(){var n={};return {save:function(e){var t=e.streamId,r=e.representationId;n[t]=n[t]||{},n[t][r]=e;},extract:function(e,t){return n&&n[e]&&n[e][t]?n[e][t]:null},reset:function(){n={};}}}o.__dashjs_factory_name="InitCache",r.default=a.default.getSingletonFactory(o),t.exports=r.default;},{2:2}],15:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.default=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=r||null,this.data=n||null;},t.exports=r.default;},{}],16:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null;},t.exports=r.default;},{}],17:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}var a=e(18),o=(n(s,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===a.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?a.HTTPRequest.INIT_SEGMENT_TYPE:a.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null;}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.action=s.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null;}o.ACTION_DOWNLOAD="download",o.ACTION_COMPLETE="complete",r.default=o,t.exports=r.default;},{18:18}],18:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});function i(){n(this,i),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null;}i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",r.HTTPRequest=i,r.HTTPRequestTrace=function e(){n(this,e),this.s=null,this.d=null,this.b=[];};},{}]},{},[11]);

window.bradmax.dashjs = dashjs;
if(orgdash) {
    window.dashjs = orgdash;
} else {
    delete window['dashjs'];
}
})(window);!function(t,e){t.bs=t.bs||{},t.bs.player=t.bs.player||{},t.bs.player.plugin=t.bs.player.plugin||{},t.bs.player.plugin.bradmax=t.bs.player.plugin.bradmax||{},t.bs.player.plugin.bradmax.analytics=t.bs.player.plugin.bradmax.analytics||{},Math.__name__="Math";var a=require("haxe.Reflect");class i{static string(t){return y.__string_rec(t,"")}static random(t){return t<=0?0:Math.floor(Math.random()*t)}}i.__name__="Std";var s=require("haxe.StringTools"),r=require("bs.player.core.events.AdEvent"),n=require("bs.player.core.events.ControlEvent"),l=require("bs.player.core.events.DataProviderEvent"),o=require("bs.player.core.events.VideoEvent"),d=require("bs.player.core.model.Live");class c{constructor(){this.pluginName="";let t=y.getClass(this);this.pluginName=t.__name__.split(".").pop();let e=this.pluginName,i=exports.configuration;this.pluginConfig=null!=i&&Object.prototype.hasOwnProperty.call(i,e)?a.field(i,e):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(t){return !0}registerPlugin(t){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(t){return this.player=t}get_variables(){return this.variables}set_variables(t){return this.variables=t}get_eventHub(){return this.eventHub}set_eventHub(t){return this.eventHub=t}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(t){return this.parentDisplay=t}get_display(){return this.display}}c.__name__="bs.player.core.plugin.PluginBase",Object.assign(c.prototype,{__class__:c});class h extends c{constructor(){super(),this.settingsTrackAds=!1,this.settingsTrackAdsProgress=!1,this.settingsTrackEngagementRate=!1,this.settingsTrackRealtimeStats=!1,this.settingsEngagementRatePercResolution=1,this.mediaPlayback=new g,this.adPlayback=new g,this.logger=new u,this.playerErrorLogLastSendAt=null,this.gdprAgreeRequired=!1,this.gdprAgreeForCookie=!1,this.playerRemoteErrorLogEnabed=!1;}activate(){if(this.loadSettings(),null!=this.clientToken&&""!=this.clientToken)if(n.add(this.context,"skinPlay",P(m=this.mediaPlayback,m.onPlayEvent)),n.add(this.context,"skinPause",P(m=this.mediaPlayback,m.onPauseEvent)),o.add(this.context,"currentTimeChange",P(m=this.mediaPlayback,m.onVideoProgress)),o.add(this.context,"durationChange",P(m=this.mediaPlayback,m.onVideoDurationChange)),o.add(this.context,"complete",P(m=this.mediaPlayback,m.onVideoComplete)),o.add(this.context,"playing",P(m=this.mediaPlayback,m.onVideoPlaying)),o.add(this.context,"paused",P(m=this.mediaPlayback,m.onVideoPaused)),o.add(this.context,"drmAuthenticationComplete",P(m=this.mediaPlayback,m.onDrmAuthenticationComplete)),o.add(this.context,"playing",P(this,this.onRealtimeEvent)),o.add(this.context,"paused",P(this,this.onRealtimeEvent)),o.add(this.context,"complete",P(this,this.onRealtimeEvent)),o.add(this.context,"mediaError",P(this,this.onRealtimeEvent)),l.add(this.context,"mediaMetadataData",P(m=this.mediaPlayback,m.onMetadata)),l.add(this.context,"mediaAfterPlaybackStartMetadata",P(m=this.mediaPlayback,m.onAfterPlaybackStartMetadataData)),r.add(this.context,"adPlay",P(m=this.adPlayback,m.onPlayEvent)),r.add(this.context,"adPause",P(m=this.adPlayback,m.onPauseEvent)),r.add(this.context,"adCurrentTimeChange",P(m=this.adPlayback,m.onVideoProgress)),r.add(this.context,"adDurationChange",P(m=this.adPlayback,m.onVideoDurationChange)),r.add(this.context,"adComplete",P(m=this.adPlayback,m.onVideoComplete)),r.add(this.context,"adPlaying",P(m=this.adPlayback,m.onVideoPlaying)),r.add(this.context,"adPaused",P(m=this.adPlayback,m.onVideoPaused)),l.add(this.context,"adMetadataData",P(m=this.adPlayback,m.onMetadata)),o.add(this.context,"mediaError",P(this,this.onVideoMediaError)),o.add(this.context,"mediaErrorFallbackTry",P(this,this.onVideoMediaErrorFallbackTry)),r.add(this.context,"adMediaError",P(this,this.onAdVideoMediaError)),r.add(this.context,"adMediaErrorFallbackTry",P(this,this.onAdVideoMediaErrorFallbackTry)),this.mediaPlayback.firstPlayingEventCallback=P(this,this.onMediaFirstPlayingEvent),this.settingsTrackAds&&(r.add(this.context,"adAdClick",P(this,this.onAdClick)),this.adPlayback.firstPlayingEventCallback=P(this,this.onAdFirstPlayingEvent),this.settingsTrackAdsProgress&&(this.adPlayback.firstQuartilePlaybackCallback=P(this,this.onAdFirstQuartilePlayback),this.adPlayback.midpointPlaybackCallback=P(this,this.onAdMidpointPlayback),this.adPlayback.thirdQuartilePlaybackCallback=P(this,this.onAdThirdQuartilePlayback),this.adPlayback.completePlaybackCallback=P(this,this.onAdCompletePlayback))),this.settingsTrackEngagementRate&&(this.mediaPlayback.statsEngagementRateEnabled=!0,this.mediaPlayback.statsEngagementRatePercResolution=this.settingsEngagementRatePercResolution,this.mediaPlayback.engagementRatePercentProgressCallback=P(this,this.onEngegementRatePercProgress),this.mediaPlayback.engagementRateTimeProgressCallback=P(this,this.onEngegementRateTimeProgress)),!this.gdprAgreeRequired||this.gdprAgreeForCookie){let t=window._ba_enable_cookies;null!=t?t():console.error("Cannot enable BradmaxAnalytics users stats - missing _ba callback.");}else {let t=window._ba_disable_cookies;null!=t?t():console.error("Cannot disable BradmaxAnalytics users stats - missing _ba callback.");}}loadSettings(){Object.prototype.hasOwnProperty.call(this.pluginConfig,"clientToken")&&(this.clientToken=a.field(this.pluginConfig,"clientToken")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"baseUrl")&&(this.logger.baseUrl=a.field(this.pluginConfig,"baseUrl")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"trackAds")&&(this.settingsTrackAds=a.field(this.pluginConfig,"trackAds")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"trackAdsProgress")&&(this.settingsTrackAdsProgress=a.field(this.pluginConfig,"trackAdsProgress")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"trackEngagementRate")&&(this.settingsTrackEngagementRate=a.field(this.pluginConfig,"trackEngagementRate")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"trackRealtimeStats")&&(this.settingsTrackRealtimeStats=a.field(this.pluginConfig,"trackRealtimeStats")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"gdprAgreeRequired")&&(this.gdprAgreeRequired=a.field(this.pluginConfig,"gdprAgreeRequired")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"gdprAgreeForCookie")&&(this.gdprAgreeForCookie=a.field(this.pluginConfig,"gdprAgreeForCookie")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"playerRemoteErrorLogEnabed")&&(this.playerRemoteErrorLogEnabed=a.field(this.pluginConfig,"playerRemoteErrorLogEnabed"));let t=this.get_variables();if(Object.prototype.hasOwnProperty.call(t,"bradmaxAnalytics")){let t=a.field(this.get_variables(),"bradmaxAnalytics");Object.prototype.hasOwnProperty.call(t,"clientToken")&&(this.clientToken=a.field(t,"clientToken")),Object.prototype.hasOwnProperty.call(t,"baseUrl")&&(this.logger.baseUrl=a.field(t,"baseUrl")),Object.prototype.hasOwnProperty.call(t,"trackAds")&&(this.settingsTrackAds=a.field(t,"trackAds")),Object.prototype.hasOwnProperty.call(t,"trackAdsProgress")&&(this.settingsTrackAdsProgress=a.field(t,"trackAdsProgress")),Object.prototype.hasOwnProperty.call(t,"trackEngagementRate")&&(this.settingsTrackEngagementRate=a.field(t,"trackEngagementRate")),Object.prototype.hasOwnProperty.call(t,"trackRealtimeStats")&&(this.settingsTrackRealtimeStats=a.field(t,"trackRealtimeStats")),Object.prototype.hasOwnProperty.call(t,"gdprAgreeRequired")&&(this.gdprAgreeRequired=a.field(t,"gdprAgreeRequired")),Object.prototype.hasOwnProperty.call(t,"gdprAgreeForCookie")&&(this.gdprAgreeForCookie=a.field(t,"gdprAgreeForCookie")),Object.prototype.hasOwnProperty.call(t,"playerRemoteErrorLogEnabed")&&(this.playerRemoteErrorLogEnabed=a.field(t,"playerRemoteErrorLogEnabed"));}}onMediaFirstPlayingEvent(){let t={materialID:this.mediaPlayback.mediaId,title:this.mediaPlayback.title,event:"media.view",currentTime:this.mediaPlayback.currentTime,duration:this.mediaPlayback.duration,isDrmProtected:this.mediaPlayback.isDrmProtected};this.assignContentMetaToData(t),this.sendDataToLogger(t);}assignContentMetaToData(t){if(null!=this.mediaPlayback.media&&null!=this.mediaPlayback.media.contentMeta){let e=this.mediaPlayback.media.contentMeta;Object.prototype.hasOwnProperty.call(e.h,"tags")&&(t.tags=e.h.tags),Object.prototype.hasOwnProperty.call(e.h,"pageTags")&&(t.pageTags=e.h.pageTags);let a=0,s=h.SPECIAL_CONTENT_META_TAGS;for(;a<s.length;){let r=s[a];if(++a,!Object.prototype.hasOwnProperty.call(e.h,r))continue;null==t.tags&&(t.tags=[]);let n=""+i.string(e.h[r]);n=encodeURIComponent(n);let l=r+":"+n;-1==t.tags.indexOf(l)&&t.tags.push(l);}}}makeAdEvent(t){return {materialID:this.adPlayback.mediaId,relatedID:this.mediaPlayback.mediaId,title:this.adPlayback.title,event:t,currentTime:this.adPlayback.currentTime,duration:this.adPlayback.duration,isDrmProtected:this.adPlayback.isDrmProtected}}onAdFirstPlayingEvent(){this.sendDataToLogger(this.makeAdEvent("ad.view"));}onAdFirstQuartilePlayback(){this.sendDataToLogger(this.makeAdEvent("ad.view.25"));}onAdMidpointPlayback(){this.sendDataToLogger(this.makeAdEvent("ad.view.50"));}onAdThirdQuartilePlayback(){this.sendDataToLogger(this.makeAdEvent("ad.view.75"));}onAdCompletePlayback(){this.sendDataToLogger(this.makeAdEvent("ad.view.100"));}onAdClick(t){let e="";null!=t.data&&null!=t.data.url&&(e=t.data.url),this.sendDataToLogger({materialID:this.adPlayback.mediaId,relatedID:this.mediaPlayback.mediaId,title:this.adPlayback.title,event:"ad.click",currentTime:this.adPlayback.currentTime,duration:this.adPlayback.duration,isDrmProtected:this.adPlayback.isDrmProtected,relUrl:e});}onEngegementRatePercProgress(t){let e={materialID:this.mediaPlayback.mediaId,title:this.mediaPlayback.title,event:"er.perc",currentTime:this.mediaPlayback.currentTime,duration:this.mediaPlayback.duration,isDrmProtected:this.mediaPlayback.isDrmProtected,engagementRatePosition:[t]};this.assignContentMetaToData(e),this.sendDataToLogger(e);}onEngegementRateTimeProgress(t){let e={materialID:this.mediaPlayback.mediaId,title:this.mediaPlayback.title,event:"er.time",currentTime:this.mediaPlayback.currentTime,duration:this.mediaPlayback.duration,isDrmProtected:this.mediaPlayback.isDrmProtected,engagementRatePosition:[t]};this.assignContentMetaToData(e),this.sendDataToLogger(e);}sendDataToLogger(t){null!=window._ba_action?window._ba_action(this.clientToken,t):console.error("Cannot send BradmaxAnalytics data. Data logger not found. Key window.bams not exists.");}onRealtimeEvent(t){if(!this.settingsTrackRealtimeStats)return;let e=t.type,a={materialID:this.mediaPlayback.mediaId,title:this.mediaPlayback.title,event:e,currentTime:t.data.currentTime,duration:this.mediaPlayback.duration};switch(null!=this.realtimeMediaId&&this.realtimeMediaId!=this.mediaPlayback.mediaId&&this.realtimeEnd(this.realtimeMediaData),e){case"complete":case"mediaError":case"paused":this.realtimeEnd(a);break;case"playing":this.realtimeStart(a);}this.realtimeMediaId=this.mediaPlayback.mediaId,this.realtimeMediaData=a;}prepareErrorLodData(t,e){let a={m:e,v:"v2.14.364",t:this.clientToken,ct:this.mediaPlayback.currentTime};if(a.l=window.location.href,null!=t&&null!=t.data){null!=t.data.media&&null!=t.data.media.id&&(a["m.id"]=t.data.media.id),null!=t.data.media&&null!=t.data.media.source&&t.data.media.source.length>0&&null!=t.data.media.source[0]&&null!=t.data.media.source[0].url&&(a["m.s.url"]=t.data.media.source[0].url),null!=t.data.source&&""!=t.data.source&&(a["s.url"]=t.data.source);try{null!=t.data.additionalData&&(JSON.stringify(t.data.additionalData),a.d=t.data.additionalData);}catch(t){}}return a}sendPlayerErrorLog(t,e){if(this.playerRemoteErrorLogEnabed&&!(null!=this.playerErrorLogLastSendAt&&(new Date).getTime()-this.playerErrorLogLastSendAt.getTime()<3e3))try{let a=JSON.stringify(this.prepareErrorLodData(t,e));(new Image).src="https://bradmax.com/static/player-error-log/img.gif?d="+encodeURIComponent(a),this.playerErrorLogLastSendAt=new Date;}catch(t){}}onVideoMediaError(t){this.sendPlayerErrorLog(t,"error");}onAdVideoMediaError(t){this.sendPlayerErrorLog(t,"error_ad");}onVideoMediaErrorFallbackTry(t){this.sendPlayerErrorLog(t,"error_fallback");}onAdVideoMediaErrorFallbackTry(t){this.sendPlayerErrorLog(t,"error_ad_fallback");}realtimeStart(t){t.event="media.user.start",this.assignContentMetaToData(t),this.sendDataToLogger(t);}realtimeEnd(t){t.event="media.user.end",this.assignContentMetaToData(t),this.sendDataToLogger(t);}}t.bs.player.plugin.bradmax.analytics.BradmaxAnalytics=h,h.__name__="bs.player.plugin.bradmax.analytics.BradmaxAnalytics",Object.assign(h.prototype,{__class__:h});class u{constructor(){this.s=window.screen,this.w=window,this.d=document,(window.bradmax_analytics={}).action=P(this,this.action),0==this.w.location.href.indexOf("http://")?this.baseUrl="http://":this.baseUrl="https://",this.baseUrl+="stats.bradmax.com/v1";}action(t,e){if(null==t&&(t=""),""==t||null==e||""==e.event)return void console.warn("WRONG REQUEST");let a=[],s=function(t){for(var e=t+"=",a=decodeURIComponent(document.cookie).split(";"),i=0;i<a.length;i++){for(var s=a[i];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return ""}("_baml");""==s&&(s=this.uuid());let r=b.get("_bame");null==r&&(r=this.uuid());!function(t,e,a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var s="expires="+i.toUTCString();document.cookie=t+"="+e+";"+s+";path=/";}("_baml",s,730);!function(t,e,a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var s="expires="+i.toUTCString();document.cookie=t+"="+e+";"+s+";path=/";}("_bame",r,.020833333333333332),a.push(["lc",s]),a.push(["sc",r]),a.push(["pt",""+this.d.title]),a.push(["lo",""+this.d.location.href]),a.push(["la",""+i.string(navigator.language)]),a.push(["cs",""+i.string(document.characterSet)]),a.push(["re",this.s.availWidth+"x"+this.s.availHeight]);let n=Math.max(this.d.documentElement.clientWidth,0|this.w.innerWidth),l=Math.max(this.d.documentElement.clientHeight,0|this.w.innerHeight);a.push(["vp",n+"x"+l]);let o=null;try{o=function(t){for(var e=1,a=1<<24;!t(e)&&e<=a;)e*=2;return e>a?0:function(t,e,a){for(;a-e>1;){var i=a+e>>1;t(i)?a=i:e=i;}return a}(t,e/2,e)}((function(t){return matchMedia("(max-resolution: "+t+"dpi)").matches}));}catch(g){}a.push(["dp",""+(0==o?null:o)]);let d,c,h=""+i.string(screen.orientation||screen.mozOrientation||screen.msOrientation);a.push(["so",-1!=h.indexOf("landscape")?"l":"p"]),a.push(["ev",""+e.event]),a.push(["mi",""+e.materialID]),a.push(["ri",""+e.relatedID]),a.push(["ct",""+e.currentTime]),a.push(["du",""+e.duration]),a.push(["vt",""+e.title]),a.push(["vo",""+e.volume]),a.push(["ms",""+e.currentState]),a.push(["pr",""+e.progress]);try{d=e.videoResolution.width+"x"+e.videoResolution.height;}catch(g){d="";}a.push(["vr",""+d]),a.push(["br",""+e.bitrate]),a.push(["ss",""+e.selectedSubtitle]),a.push(["sa",""+e.selectedAudio]);try{c=e.tags.join(",");}catch(g){c="";}a.push(["tg",""+c]),a.push(["mt",""+e.mimeType]),a.push(["dr",e.isDrmProtected?"1":"0"]),a.push(["ru",""+e.relUrl]),a.push(["pv",""+e.playerVersion]),a.push(["ei",""+e.externalId]);let u=[],g=0;for(;g<a.length;){let t=a[g];++g,""!=t[1]&&"undefined"!=t[1]&&"null"!=t[1]&&u.push(t[0]+"="+encodeURIComponent(t[1]));}u.push("r="+Math.floor(1e9*Math.random()));let m=u.join("&");(new Image).src=this.baseUrl+"/"+t+"/?"+m;}uuid(t){null==t&&(t="xxxxxxxxxx"),t=t.toLowerCase();let e="";for(;e.length<t.length;)if("-"===t.charAt(0))e+="-";else e+="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM".charAt(i.random(62));return e}}u.__name__="bs.player.plugin.bradmax.analytics.BradmaxAnalyticsLogger",Object.assign(u.prototype,{__class__:u});class g{constructor(){this.state=1,this.currentTime=0,this.duration=null,this.mediaId=null,this.title=null,this.isDrmProtected=!1,this.wasFirstPlayingEvent=!1,this.wasFirstQuartilePlayback=!1,this.wasMidpointPlaybackCallback=!1,this.wasThirdQuartilePlaybackCallback=!1,this.statsEngagementRateEnabled=!1,this.statsEngagementRatePercResolution=1,this.statsEngagementRateLastSendValue=-1,this.statsEngagementRateLastSendTs=0;}updateState(t){this.state=t;}onPlayEvent(t){this.updateState(10);}onPauseEvent(t){this.updateState(1);}onVideoProgress(t){if(null==t)return;let e=this.countPlaybackProgress(t);if(null!=this.firstPlayingEventCallback&&10==this.state&&!this.wasFirstPlayingEvent&&t.data.currentTime>0&&(this.wasFirstPlayingEvent=!0,this.firstPlayingEventCallback()),this.isLive||(null!=this.firstQuartilePlaybackCallback&&10==this.state&&!this.wasFirstQuartilePlayback&&e>=.25&&(this.wasFirstQuartilePlayback=!0,this.firstQuartilePlaybackCallback()),null!=this.midpointPlaybackCallback&&10==this.state&&!this.wasMidpointPlaybackCallback&&e>=.5&&(this.wasMidpointPlaybackCallback=!0,this.midpointPlaybackCallback()),null!=this.thirdQuartilePlaybackCallback&&10==this.state&&!this.wasThirdQuartilePlaybackCallback&&e>=.75&&(this.wasThirdQuartilePlaybackCallback=!0,this.thirdQuartilePlaybackCallback())),this.currentTime=t.data.currentTime,this.wasFirstPlayingEvent)if(this.isLive){let t=(new Date).getTime(),a=Math.round(e);t-this.statsEngagementRateLastSendTs>6e4&&a!=this.statsEngagementRateLastSendValue&&(null!=this.engagementRateTimeProgressCallback&&this.engagementRateTimeProgressCallback(a),this.statsEngagementRateLastSendValue=a,this.statsEngagementRateLastSendTs=t);}else if(this.statsEngagementRateEnabled&&this.duration>0){let t=Math.floor(100*e);this.duration<100/this.statsEngagementRatePercResolution&&(t=Math.floor(t/this.statsEngagementRatePercResolution)*this.statsEngagementRatePercResolution);let a=t%this.statsEngagementRatePercResolution==0,i=t==this.statsEngagementRateLastSendValue,s=(new Date).getTime()-this.statsEngagementRateLastSendTs>1e3;!a||i||!s&&100!=t||(null!=this.engagementRatePercentProgressCallback&&this.engagementRatePercentProgressCallback(t),this.statsEngagementRateLastSendValue=t,this.statsEngagementRateLastSendTs=(new Date).getTime());}null!=t.data&&t.data.duration>0&&t.data.duration!=this.duration&&this.onVideoDurationChange(t);}countPlaybackProgress(t){let e=this.duration;if(this.isLive){let e=0;try{e=t.data.media.mediaPlaybackInfo.currentTime;}catch(t){e=(new Date).getTime()/1e3;}return e}return null!=t.data&&t.data.duration>0&&t.data.duration!=this.duration&&(e=t.data.duration),e>0?t.data.currentTime/e:0}onVideoDurationChange(t){this.isLive||null==t||null==t.data||(this.duration=t.data.duration);}onVideoComplete(t){this.wasFirstPlayingEvent=!1,this.wasFirstQuartilePlayback=!1,this.wasMidpointPlaybackCallback=!1,this.wasThirdQuartilePlaybackCallback=!1,null!=this.completePlaybackCallback&&this.completePlaybackCallback(),null!=t&&(null!=t.data&&t.data.duration>0&&t.data.duration!=this.duration&&this.onVideoDurationChange(t),this.currentTime=this.duration);}onVideoPlaying(t){this.updateState(10);}onVideoPaused(t){this.updateState(1);}onAfterPlaybackStartMetadataData(t){this.initIsLive(t.data);}initIsLive(t){this.isLive=t instanceof d,this.isLive&&(this.duration=null);}onMetadata(t){if(this.currentTime=0,this.duration=0,this.isDrmProtected=!1,null!=t){let e=t.data;this.duration=e.duration,this.mediaId=e.id,this.title=e.title,this.media=e,this.initIsLive(e),null!=t.data.adId&&(this.mediaId=t.data.adId),null!=t.data.durationTotal&&(this.duration=t.data.durationTotal);}}onDrmAuthenticationComplete(t){this.isDrmProtected=!0;}}g.__name__="bs.player.plugin.bradmax.analytics.BradmaxAnalyticsPlaybackState",Object.assign(g.prototype,{__class__:g});var m,p=require("haxe.ds.StringMap");class y{static getClass(t){if(null==t)return null;if(t instanceof Array)return Array;{let e=t.__class__;if(null!=e)return e;let a=y.__nativeClassName(t);return null!=a?y.__resolveNativeClass(a):null}}static __string_rec(t,e){if(null==t)return "null";if(e.length>=5)return "<...>";let a=typeof t;switch("function"==a&&(t.__name__||t.__ename__)&&(a="object"),a){case"function":return "<function>";case"object":if(t instanceof Array){let a="[";e+="\t";let i=0,s=t.length;for(;i<s;){let s=i++;a+=(s>0?",":"")+y.__string_rec(t[s],e);}return a+="]",a}let a;try{a=t.toString;}catch(t){return "???"}if(null!=a&&a!=Object.toString&&"function"==typeof a){let e=t.toString();if("[object Object]"!=e)return e}let i="{\n";e+="\t";let s=null!=t.hasOwnProperty,r=null;for(r in t)s&&!t.hasOwnProperty(r)||"prototype"!=r&&"__class__"!=r&&"__super__"!=r&&"__interfaces__"!=r&&"__properties__"!=r&&(2!=i.length&&(i+=", \n"),i+=e+r+" : "+y.__string_rec(t[r],e));return i+="\n"+(e=e.substring(1))+"}",i;case"string":return t;default:return String(t)}}static __nativeClassName(t){let e=y.__toStr.call(t).slice(8,-1);return "Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e}static __resolveNativeClass(t){return e[t]}}y.__name__="js.Boot";class b{static all(){let t=new p,e=window.document.cookie.split(";"),a=0;for(;a<e.length;){let i=e[a];++a,i=s.ltrim(i);let r=i.split("=");if(r.length<2)continue;let n=decodeURIComponent(r[1].split("+").join(" "));t.h[r[0]]=n;}return t}static get(t){return b.all().h[t]}}function P(t,a){return null==a?null:(null==a.__id__&&(a.__id__=e.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[a.__id__],null==i&&(i=a.bind(t),t.hx__closures__[a.__id__]=i),i);var i;}b.__name__="js.Cookie",e.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date",y.__toStr={}.toString,h.CFG_KEY="bradmaxAnalytics",h.ENGAGEMENT_RATE_PERC_MODE_DEFAULT_RESOLUTION=1,h.ERROR_SUPRESS_WINDOW_AFTER_ERROR=3e3,h.SPECIAL_CONTENT_META_TAGS=["imdbId","gracenoteId","contentType","episodeTitle","tvShow","season","saga","genre","vendor","subscriptionCost","contentPrice"],h.__plugfaces__="IPlugin";}(exports,window);
(function(A){function l(){}function q(){this.j=Object.create(null);}function B(b,a){this.item=b;this.next=a;}function C(){this.length=0;}function y(b,a,c){u.call(this,String(b),a,c);this.value=b;}function D(b){var a=this;this.id=setInterval(function(){a.Sa();},b);}function u(b,a,c){this.message=b;this.Ca=null!=c?c:this;}function G(){}function m(){}function p(){}function v(){this.ha=new q;this.Pa=this.Qa=this.Oa=null;this.ca=new q;this.ma=new q;this.Na=null;this.Ka=new C;this.ja=[];this.T=new q;this.N=new q;
this.na=window.screen;this.w=window;this.d=document;this.buffer=[];var b=this;this.g=new E(this);window.bams=r(this,this.action);window.bams();window._ba_action=r(this,this.action);window._ba_action();window._ba_video_event=r(this,this.Vb);window._ba_video_event();window._ba_track=r(this,this.Lb);window._ba_track();window._ba_untrack=r(this,this.Ob);window._ba_untrack();window._ba_enable_cookies=(t=this.g,r(t,t.Ja));window._ba_disable_cookies=(t=this.g,r(t,t.mb));window._ba_use_cookies=(t=this.g,
r(t,t.F));this.g.$(this.w,"unload",function(){b.qa(!0);});this.g.$(this.w,"beforeunload",function(){b.qa(!0);});this.g.$(this.d,"mousedown",function(){b.qa(!1);});setInterval(r(this,this.ub),6E5);this.vb();}function E(b){this.W=new q;this.na=window.screen;this.w=window;this.d=document;this.Ia=!1;this.U="";this.I=!1;this.Aa="";this.O="Um9sYGg=";this.P="Um9sYGE=";this.Z="Um9sYG5pbg==";this.ta="Um9saWx5bFJ+aHU=";this.sa="Um9saWx5bFJsamg=";this.Ua="fnlseX4jb39saWBsdSNuYmAiezw=";this.wa="b39saWBsdSB+eWx5fiBlbg==";
this.Va="ZXl5fX43IiJ+eWx5fiNvf2xpYGx1I25iYCJ7PCJqbiNleWBh";this.ua="T19MSUBMVVJOSU5SX0hbRFtIUg==";this.va="b39saWBsdSB+eWx5fiBuaW4=";this.da="b39saWBsdSB+eWx5fiBuYmJmZGh+IGhjbG9haGk=";this.xa="b39saWBsdSB+eWx5fiB5f2xuZiBlbH5l";this.za="b39saWBsdSB+eWx5fiB5f2xuZiB9bH9sYH4=";this.ya="b39saWBsdSB+eWx5fiB5f2xuZiB9bGpo";this.log=b;this.Ia="file:"==this.d.location.href.substr(0,5);this.Aa=this.Y();this.I=this.F();a:{b=this.i(this.Z)+"=";for(var a=decodeURIComponent(document.cookie).split(";"),c=0;c<a.length;c++){for(var e=
a[c];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b)){b=e.substring(b.length,e.length);break a}}b="";}this.U=b;""==this.U&&this.I&&this.ia();}function z(){}function J(b,a){b=Object.create(b);for(var c in a)b[c]=a[c];a.toString!==Object.prototype.toString&&(b.toString=a.toString);return b}function r(b,a){if(null==a)return null;null==a.ea&&(a.ea=A.ra++);var c;null==b.ka?b.ka={}:c=b.ka[a.ea];null==c&&(c=a.bind(b),b.ka[a.ea]=c);return c}z.l=!0;z.ib=function(b,a){b=b.charCodeAt(a);if(b==b)return b};
z.now=function(){return Date.now()};E.l=!0;E.prototype={Mb:function(){var b=!1;null!=p.u(this.w,this.i(this.ya))&&(b=p.u(this.w,this.i(this.ya)));return b},Nb:function(){var b=!1;null!=p.u(this.w,this.i(this.za))&&(b=p.u(this.w,this.i(this.za)));return b},Kb:function(){var b=!1;null!=p.u(this.w,this.i(this.xa))&&(b=p.u(this.w,this.i(this.xa)));return b},Ub:function(){function b(e){e+="=";for(var d=decodeURIComponent(document.cookie).split(";"),f=0;f<d.length;f++){for(var g=d[f];" "==g.charAt(0);)g=
g.substring(1);if(0==g.indexOf(e))return g.substring(e.length,g.length)}return ""}var a=this.i(this.P),c=b(a);""==c&&(a=this.i(this.P),Object.prototype.hasOwnProperty.call(this.W.j,a)?c=this.W.j[a]:(c=this.Y(),this.W.j[a]=c));a=this.i(this.P);if(0!=this.F()||0!=this.I)b=function(e,d,f){var g=new Date;g.setTime(g.getTime()+864E5*f);document.cookie=e+"="+d+";expires="+g.toUTCString()+";path=/";},b(a,c,730);return c},Tb:function(){function b(e){e+="=";for(var d=decodeURIComponent(document.cookie).split(";"),
f=0;f<d.length;f++){for(var g=d[f];" "==g.charAt(0);)g=g.substring(1);if(0==g.indexOf(e))return g.substring(e.length,g.length)}return ""}var a=this.i(this.O),c=b(a);""==c&&(a=this.i(this.O),Object.prototype.hasOwnProperty.call(this.W.j,a)?c=this.W.j[a]:(c=this.Y(),this.W.j[a]=c));a=this.i(this.O);if(0!=this.F()||0!=this.I)b=function(e,d,f){var g=new Date;g.setTime(g.getTime()+864E5*f);document.cookie=e+"="+d+";expires="+g.toUTCString()+";path=/";},b(a,c,.020833333333333332);return c},rb:function(){return null==
p.u(this.w,this.i(this.wa))?this.i(this.Ua):p.u(this.w,this.i(this.wa))},ia:function(b){null==b&&(b=!1);var a=null==p.u(this.w,this.i(this.va))?this.i(this.Va):p.u(this.w,this.i(this.va));if(this.Ia)this.log.request();else {this.$(this.w,"message",r(this,this.tb));var c=document.createElement("iframe");c.setAttribute("src",a+"?parent="+m.o(this.d.location.href)+"&delete="+(null==b?"null":""+b));c.setAttribute("width",0);c.setAttribute("height",0);c.setAttribute("scrolling","no");c.style.display="none";
c.style.visibility="hidden";document.head.appendChild(c);setTimeout((t=this.log,r(t,t.request)),4E3);}},tb:function(b){if(null!=b&&null!=b.data&&"string"==typeof b.data&&0==b.data.indexOf(this.i(this.ua))){this.U=b.data.split(this.i(this.ua))[1];b=this.i(this.Z);var a=this.U;if(0!=this.F()||0!=this.I){var c=new Date;c.setTime(c.getTime()+63072E6);document.cookie=b+"="+a+";expires="+c.toUTCString()+";path=/";}this.log.request();}},V:function(){return this.F()?this.U:this.Aa},Ga:function(){if(this.F())return !0;
var b=1==p.u(this.w,this.i(this.da));1!=b||this.F()||this.Ja();return b},F:function(){function b(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,h.length)}return ""}var a=this.i(this.Z),c=b(a);a=this.i(this.O);b=function(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,
h.length)}return ""};var e=b(a);a=this.i(this.P);b=function(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,h.length)}return ""};a=b(a);return ""!=c||""!=e||""!=a?!0:!1},Ja:function(){function b(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,
h.length)}return ""}this.I=!0;this.w[this.i(this.da)]=!0;var a=this.i(this.P),c=b(a);""==c&&(c=this.Y());a=this.i(this.O);b=function(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,h.length)}return ""};var e=b(a);""==e&&(e=this.Y());a=this.i(this.P);if(0!=this.F()||0!=this.I)b=function(d,f,g){var h=new Date;h.setTime(h.getTime()+864E5*g);document.cookie=d+"="+f+";expires="+
h.toUTCString()+";path=/";},b(a,c,730);a=this.i(this.O);if(0!=this.F()||0!=this.I)b=function(d,f,g){var h=new Date;h.setTime(h.getTime()+864E5*g);document.cookie=d+"="+f+";expires="+h.toUTCString()+";path=/";},b(a,e,.020833333333333332);this.ia();},mb:function(){function b(c){var e=new Date;e.setTime(e.getTime()+1E3);document.cookie=c+"=;expires="+e.toUTCString()+";path=/";}this.I=!1;p.lb(this.w,this.i(this.da));this.ia(!0);var a=this.i(this.Z);b(a);a=this.i(this.O);b=function(c){var e=new Date;e.setTime(e.getTime()+
1E3);document.cookie=c+"=;expires="+e.toUTCString()+";path=/";};b(a);a=this.i(this.P);b=function(c){var e=new Date;e.setTime(e.getTime()+1E3);document.cookie=c+"=;expires="+e.toUTCString()+";path=/";};b(a);},getTimezoneOffset:function(){return (new Date).getTimezoneOffset()},warn:function(b){console.warn(b);},A:function(b){var a="";try{a=b.join(",");}catch(d){try{var c=""+m.parseInt(""+m.o(b));c==""+m.o(b)&&(a=c);var e=""+parseFloat(""+m.o(b));e==""+m.o(b)&&(a=e);}catch(f){a="";}}return a},Y:function(b){null==
b&&(b="xxxxxxxxxx");b=b.toLowerCase();for(var a="";a.length<b.length;)switch(b.charAt(0)){case "-":a+="-";break;case "x":a+="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM".charAt(m.random(62));break;default:a+="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM".charAt(m.random(62));}return a},now:function(){return (new Date).getTime()},v:function(){return Math.floor(this.now()/1E3)},$:function(b,a,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent&&b.attachEvent("on"+
m.o(a),c);},i:function(b,a){null==a&&(a=13);var c="";b=this.hb(b);for(var e=0,d=b.length;e<d;){var f=e++;c+=String.fromCodePoint(a^z.ib(b,f));}return c},hb:function(b){var a={},c,e=0,d,f=0,g,h="",n=String.fromCharCode,k=b.length;for(c=0;64>c;c++)a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c)]=c;for(d=0;d<k;d++)for(c=a[b.charAt(d)],e=(e<<6)+c,f+=6;8<=f;)((g=e>>>(f-=8)&255)||d<k-2)&&(h+=n(g));return h},Ha:function(b){return JSON.parse(JSON.stringify(b))},H:E};v.l=!0;v.wb=
function(){v.sb();};v.sb=function(){null==v.instance&&(v.instance=new v);};v.prototype={Lb:function(b){null!=b&&""!=b&&(this.ha.j[b]=!0,this.action(b,{event:"page.view"}));},Ob:function(b){var a=this.ha;Object.prototype.hasOwnProperty.call(a.j,b)&&delete a.j[b];},vb:function(){var b=this,a=this.g.d.location.href;(new D(100)).Sa=function(){a!=b.g.d.location.href&&(a=b.g.d.location.href,b.xb(a));};},xb:function(b){var a=this.g.Mb(),c=this.g.Nb(),e=this.g.Kb();var d=b.split("#");var f=d[1];d=d[0].split("?");
b=d[1];d=d[0];a&&this.Pa!=d?this.la():c&&this.Qa!=b?this.la():e&&this.Oa!=f&&this.la();this.Pa=d;this.Qa=b;this.Oa=f;},la:function(){for(var b=Object.keys(this.ha.j),a=b.length,c=0;c<a;){var e=b[c++];null!=e&&""!=e&&this.action(e,{event:"page.view"});}},ub:function(){for(var b=this.T.j,a=Object.keys(b),c=a.length,e=0;e<c;){var d=b[a[e++]],f=new Image,g="&cc="+this.g.V();f.src=""+d.uri+g;}},qa:function(b){var a="sendBeacon"in navigator;b&&this.nb(a);if(a&&b){for(b=[];0<this.buffer.length;)b.push(this.buffer.pop());
for(;0<b.length;){a=b.pop();a=this.aa(a.D,a.data);var c="&cc="+this.g.V();a+=c;navigator.sendBeacon(a,null);}}else this.Hb(b);},nb:function(b){if(b){this.T=new q;var a=this.N.j;b=a;a=Object.keys(a);for(var c=a.length,e=0;e<c;){var d=b[a[e++]];d=d.uri;var f="&cc="+this.g.V();d+=f;navigator.sendBeacon(d,null);}this.N=new q;}else {this.T=new q;b=a=this.N.j;a=Object.keys(a);c=a.length;for(e=0;e<c;){d=b[a[e++]];var g=new Image;f="&cc="+this.g.V();g.src=""+d.uri+f;}this.N=new q;for(b=this.g.now();b+200>this.g.now(););
}},Hb:function(b){try{if(this.X(),this.request(),b)for(var a=this.g.now();a+200>this.g.now(););}catch(c){}},ba:function(b,a){null==b&&(b="");a=this.aa(b,a);this.request(b,a);},h:function(b){return ""+m.o(b)},aa:function(b,a){null==b&&(b="");var c=[],e="";this.g.Ga();c.push([this.h("lc"),this.g.Ub()]);c.push([this.h("sc"),this.g.Tb()]);this.g.F()||c.push([this.h("dc"),"true"]);var d=this.h("ln"),f=this.g;c.push([d,navigator.language||navigator.Ma||navigator.browserLanguage||navigator.systemLanguage||
"unknown"]);d=this.h("zo");f=this.g;c.push([d,""+(new Date).getTimezoneOffset()]);d=this.h("tz");f=this.g;f=function(){var n="unknown";window.Intl&&window.Intl.DateTimeFormat?n=(new window.Intl.DateTimeFormat).resolvedOptions().timeZone:n="unknown";return n}();c.push([d,""+f]);c.push([this.h("pt"),""+m.o(this.g.d.title)]);c.push([this.h("lo"),""+m.o(this.g.d.location.href)]);d=this.h("la");f=this.g;c.push([d,navigator.language||navigator.Ma||navigator.browserLanguage||navigator.systemLanguage||"unknown"]);
d=this.h("cs");f=this.g;c.push([d,document.characterSet]);d=this.g.d.ac;d!=this.Na&&""!=d&&null!=d&&(c.push([this.h("rf"),""+d]),this.Na=d);d=this.h("re");f=this.g;c.push([d,""+m.o(f.na.availWidth)+"x"+m.o(f.na.availHeight)]);d=this.h("vp");f=this.g;c.push([d,""+Math.max(f.d.documentElement.clientWidth,f.w.innerWidth|0)+"x"+Math.max(f.d.documentElement.clientHeight,f.w.innerHeight|0)]);d=this.h("dp");f=this.g;f=null;try{f=function(){return function(n){for(var k=1;!n(k)&&16777216>=k;)k*=2;if(16777216<
k)n=0;else {for(var w=k/2;1<k-w;){var x=k+w>>1;n(x)?k=x:w=x;}n=k;}return n}(function(n){return window.matchMedia("(max-resolution: "+n+"dpi)").matches})}();}catch(n){}c.push([d,""+(0==f?null:f)]);d=this.h("so");f=this.g;c.push([d,-1!=(""+screen.orientation||screen.Ma||screen.Zb).indexOf("landscape")?"l":"p"]);c.push([this.h("ev"),""+a.event]);c.push([this.h("mi"),""+a.s]);c.push([this.h("ri"),""+a.Cb]);c.push([this.h("ct"),""+a.currentTime]);c.push([this.h("du"),""+a.duration]);c.push([this.h("vt"),""+
a.title]);c.push([this.h("vo"),""+a.volume]);c.push([this.h("ms"),""+a.kb]);c.push([this.h("pr"),""+a.progress]);d=this.h("vr");try{var g=""+a.Ta.width+"x"+a.Ta.height;}catch(n){g="";}c.push([d,g]);c.push([this.h("br"),""+a.bitrate]);c.push([this.h("ss"),""+a.Gb]);c.push([this.h("sa"),""+a.Fb]);c.push([this.h("tg"),""+this.g.A(a.oa)]);c.push([this.h("pg"),""+this.g.A(a.yb)]);c.push([this.h("mt"),""+a.mimeType]);c.push([this.h("pv"),""+a.Ab]);c.push([this.h("ei"),""+a.pb]);this.Fa(c,a.jb);this.gb(c,
a.fb);f=this.g;null!=p.u(f.w,f.i(f.sa))&&(d=this.h("ag"),f=this.g,c.push([d,""+p.u(f.w,f.i(f.sa))]));f=this.g;null!=p.u(f.w,f.i(f.ta))&&(d=this.h("sx"),f=this.g,c.push([d,""+p.u(f.w,f.i(f.ta))]));if(null!=a.M){g=this.g.v();d=0;for(var h=a.M.length;d<h;)f=d++,a.M[f]=g-a.M[f];"er.time"==a.event&&null!=a.ob&&c.push([this.h("er"),""+a.ob]);c.push([this.h("eo"),""+this.g.A(a.M)]);c.push([this.h("ep"),""+this.g.A(a.G)]);}if(null!=a.m&&null!=a.J){g=this.g.v();d=0;f=a.m.length;0<a.m.length&&(d=this.g.v()-
a.m[f-1]);1==a.J.length<a.m.length&&(a.J=[d],d=this.g.Ha(a),d.m=[a.m.pop()+g],d.S=[a.S.pop()],d.J=null,d.C=[a.C.pop()],this.buffer.push({D:b,data:d}));d=0;for(h=a.m.length;d<h;)f=d++,a.m[f]=g-a.m[f];for(;;){g=a.J.indexOf(0);if(-1==g)break;a.J.splice(g,1);a.m.splice(g,1);a.S.splice(g,1);a.C.splice(g,1);}c.push([this.h("qo"),""+this.g.A(a.m)]);c.push([this.h("qp"),""+this.g.A(a.S)]);c.push([this.h("ql"),""+this.g.A(a.J)]);c.push([this.h("qb"),""+this.g.A(a.C)]);}if(null!=a.B){g=this.g.v();"buffer.start"==
a.event&&(a.event="buffer.end",d=g-a.B[a.B.length-1],null==a.L?a.L=[d]:a.L.push(d));d=0;for(h=a.B.length;d<h;)f=d++,a.B[f]=g-a.B[f];c.push([this.h("bo"),""+this.g.A(a.B)]);c.push([this.h("bp"),""+this.g.A(a.R)]);c.push([this.h("bl"),""+this.g.A(a.L)]);}for(d=a=0;d<c.length;)f=c[d],++d,""!=f[1]&&"undefined"!=f[1]&&"null"!=f[1]&&"NaN"!=f[1]&&(e+=(0<a?"&":"")+f[0]+"="+encodeURIComponent(f[1])),++a;return ("http:"==this.g.d.location.href.substr(0,5)?"http://":"https://")+(""+this.g.rb()+"/"+b+"/?"+e+"&r="+
Math.random())},Fa:function(b,a,c){null==c&&(c=0);if(null!=a){var e="_"+c;b.push([this.h("cy")+e,""+(null==a.type?"null":m.o(H.pa(a.type)))]);b.push([this.h("ci")+e,""+a.Xb]);b.push([this.h("cr")+e,""+a.Db]);b.push([this.h("ce")+e,""+a.title]);b.push([this.h("cg")+e,this.g.A(a.oa)]);b.push([this.h("pp")+e,""+(null==a.Bb?"null":m.o(H.pa(a.Bb)))]);null!=a.zb&&this.Fa(b,a.zb,c+1);}},gb:function(b,a){if(null!=a)for(var c=0,e="_"+c,d=0;d<a.length;){var f=a[d];++d;b.push([this.h("ay")+e,""+(null==f.type?
"null":m.o(H.pa(f.type)))]);b.push([this.h("ai")+e,""+f.Wb]);b.push([this.h("ar")+e,""+f.Db]);b.push([this.h("at")+e,""+f.title]);b.push([this.h("ta")+e,this.g.A(f.oa)]);++c;e="_"+c;}},request:function(b,a){null==b&&null==a&&this.La();if(this.g&&""==this.g.U)null!=b&&null!=a&&this.ja.push({D:b,uri:a}),setTimeout(r(this,this.La),5E3);else if(null!=b&&null!=a){b=new Image;var c="&cc="+this.g.V();b.src=""+a+c;}},La:function(){for(;0<this.ja.length;){var b=this.ja.shift(),a=new Image,c="&cc="+this.g.V();a.src=
""+b.uri+c;}},X:function(){for(var b=[];0<this.buffer.length;)b.push(this.buffer.pop());for(;0<b.length;){var a=b.pop();this.ba(a.D,a.data);}},Qb:function(b,a,c){null==b&&(b="");var e=0==a.event.indexOf("er.time");if((0==a.event.indexOf("er.perc")||e)&&null!=a.G){e=!1;for(var d=0,f=this.buffer;d<f.length;){var g=f[d];++d;if(g.data.s==a.s&&g.D==b&&("er.perc"==g.data.event||"er.time"==g.data.event)){e=!0;c=g.data;g.data.event=a.event;c.G.push(a.G[0]);c.M.push(this.g.v());break}}e||(c=a,this.buffer.push({D:b,
data:c}));return {K:!0,data:c}}return {K:!1,data:c}},Ra:function(b,a,c){null==a.C?a.C=[c]:a.C.push(c);null==a.m?a.m=[this.g.v()]:a.m.push(this.g.v());null==a.S?a.S=[b.currentTime]:a.S.push(b.currentTime);return a},Ea:function(b,a){if(null==a.m)return a;b=this.g.v()-a.m[a.m.length-1];null==a.J?a.J=[b]:a.J.push(b);return a},Eb:function(b,a,c){var e=this.g.Ha(b);a=this.Ea(b,a,c);return a=this.Ra(e,a,c)},Sb:function(b,a,c){null==b&&(b="");var e="quality.change"==a.event,d="buffer.end"==a.event,f="play"==
a.event,g="pause"==a.event,h="complete"==a.event;g="buffer.start"==a.event||g||h;var n=d||f,k=0;Object.prototype.hasOwnProperty.call(this.ma.j,a.s)&&(k=this.ma.j[a.s]);e&&null!=a.C&&(k=this.ma.j[a.s]=a.C);var w=!1,x=f;Object.prototype.hasOwnProperty.call(this.ca.j,a.s)&&(w=this.ca.j[a.s]);w&&e&&(x=!0);f&&(this.ca.j[a.s]=!0);g&&(this.ca.j[a.s]=!1);for(var K=!1,I=0,L=this.buffer;I<L.length;){var F=L[I];++I;if(F.data.s==a.s&&F.D==b&&"quality.change"==F.data.event){c=F.data;c.event="quality.change";1==
e&&1==x?c=this.Eb(a,c,k):0==w&&1==x?c=this.Ra(a,c,k):1==w&&0==x&&(c=this.Ea(a,c,k));1==h&&this.X();K=!0;break}}!K&&f&&(c=a,c.event="quality.change",c.C=[k],c.m=[this.g.v()],c.S=[a.currentTime],this.buffer.push({D:b,data:c}));return n||g||e||d?{K:!0,data:c}:{K:!1,data:c}},Pb:function(b,a,c){null==b&&(b="");var e="buffer.start"==a.event,d="buffer.end"==a.event;if(e||d){for(var f=a.currentTime,g=!1,h=0,n=this.buffer;h<n.length;){var k=n[h];++h;if(k.data.s==a.s&&k.D==b&&("buffer.end"==k.data.event||"buffer.start"==
k.data.event)){g=!0;c=k.data;if(a.event==k.data.event)break;k.data.event=a.event;if(d&&null==c.R)break;e&&(null==c.R?c.R=[f]:c.R.push(f),null==c.B?c.B=[this.g.v()]:c.B.push(this.g.v()));d&&null!=c.R&&0<c.R.length&&(k=c.B.length,k=this.g.v()-c.B[k-1],null==c.L?c.L=[k]:c.L.push(k));break}}g||"buffer.start"!=a.event||(c=a,c.R=[f],c.B=[this.g.v()],this.buffer.push({D:b,data:c}));return {K:!0,data:c}}return e||d?{K:!0,data:c}:{K:!1,data:c}},Rb:function(b,a){null==b&&(b="");var c=a.s,e={event:null};if("media.view"==
a.event)return this.X(),this.Ka.add(a.s),!1;null!=a.G&&"number"==typeof a.G&&(a.G=[l.Wa(a.G,M)]);null!=a.G&&null==a.M&&(a.M=[this.g.v()]);var d=this.Qb(b,a,e),f=d.K;e=d.data;e=this.Sb(b,a,e);d=e.K;e=e.data;a=this.Pb(b,a,e);b=a.K;e=a.data;return f||d||b?(this.Ka.remove(c),null!=e.G&&10<=e.G.length?this.X():null!=e.C&&10<=e.C.length?this.X():null!=e.L&&10<=e.L.length&&this.X(),!0):!1},Vb:function(){},action:function(b,a){null==b&&(b="");if(""!=b||null!=a)a.event=a.event,a.s=a.materialID,a.Cb=a.relatedID,
a.pb=a.externalId,a.currentTime=a.currentTime,a.duration=a.duration,a.title=a.title,a.volume=a.volume,a.kb=a.currentState,a.progress=a.progress,a.Ta=a.videoResolution,a.bitrate=a.bitrate,a.Gb=a.selectedSubtitle,a.Fb=a.selectedAudio,a.oa=a.tags,a.yb=a.pageTags,a.mimeType=a.mimeType,a.Ab=a.playerVersion,a.M=a.engagementRateTimeOffset,a.G=a.engagementRatePosition,a.fb=a.artist,a.jb=a.collection,a.$b=a.positionInCollection,this.g.Ga(),""==b||null==a||""==a.event?(b="WRONG REQUEST:\nCID: "+b+"\nDATA: "+
m.o(a),console.warn(b)):"media.user.start"==a.event||"media.user.end"==a.event?this.Ib(b,a):0==this.Rb(b,a)&&this.ba(b,a);},Ib:function(b,a){null==b&&(b="");var c=""+b+"|"+m.o(a.s);switch(a.event){case "media.user.end":if(Object.prototype.hasOwnProperty.call(this.T.j,c)){var e=this.T;Object.prototype.hasOwnProperty.call(e.j,c)&&delete e.j[c];}Object.prototype.hasOwnProperty.call(this.N.j,c)&&(e=this.N,Object.prototype.hasOwnProperty.call(e.j,c)&&delete e.j[c],this.ba(b,a));break;case "media.user.start":Object.prototype.hasOwnProperty.call(this.T.j,
c)||(e=this.aa(b,a),this.T.j[c]={uri:e,D:b}),Object.prototype.hasOwnProperty.call(this.N.j,c)||(this.ba(b,a),a.event="media.user.end",e=this.aa(b,a),this.N.j[c]={uri:e,D:b});}},H:v};Math.l=!0;p.l=!0;p.u=function(b,a){try{return b[a]}catch(c){return null}};p.lb=function(b,a){Object.prototype.hasOwnProperty.call(b,a)&&delete b[a];};m.l=!0;m.o=function(b){return l.ga(b,"")};m.parseInt=function(b){b=parseInt(b);return isNaN(b)?null:b};m.random=function(b){return 0>=b?0:Math.floor(Math.random()*b)};var H=
{pa:function(b){return 0>b?4294967296+b:b+0}};G.l=!0;G.ab=!0;u.l=!0;u.Jb=function(b){return b instanceof u?b.Ca:b instanceof Error?b:new y(b)};u.Da=Error;u.prototype=J(Error.prototype,{Yb:function(){return this.Ca},H:u});D.l=!0;D.prototype={Sa:function(){},H:D};y.l=!0;y.Da=u;y.prototype=J(u.prototype,{H:y});C.l=!0;C.prototype={add:function(b){b=new B(b,null);null==this.j?this.j=b:this.q.next=b;this.q=b;this.length++;},remove:function(b){for(var a=null,c=this.j;null!=c;){if(c.item==b)return null==a?
this.j=c.next:a.next=c.next,this.q==c&&(this.q=a),this.length--,!0;a=c;c=c.next;}return !1},H:C};B.l=!0;B.prototype={H:B};q.l=!0;q.$a=[G];q.prototype={H:q};l.l=!0;l.qb=function(b){if(null==b)return null;if(b instanceof Array)return Array;var a=b.H;if(null!=a)return a;b=l.Ba(b);return null!=b?l.cb(b):null};l.ga=function(b,a){if(null==b)return "null";if(5<=a.length)return "<...>";var c=typeof b;"function"==c&&(b.l||b.Ya)&&(c="object");switch(c){case "function":return "<function>";case "object":if(b instanceof
Array){c="[";a+="\t";for(var e=0,d=b.length;e<d;){var f=e++;c+=(0<f?",":"")+l.ga(b[f],a);}return c+"]"}try{e=b.toString;}catch(g){return "???"}if(null!=e&&e!=Object.toString&&"function"==typeof e&&(c=b.toString(),"[object Object]"!=c))return c;c="{\n";a+="\t";e=null!=b.hasOwnProperty;d=null;for(d in b)e&&!b.hasOwnProperty(d)||"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=c.length&&(c+=", \n"),c+=a+d+" : "+l.ga(b[d],a));a=a.substring(1);return c+("\n"+a+
"}");case "string":return b;default:return String(b)}};l.fa=function(b,a){if(null==b)return !1;if(b==a)return !0;var c=b.$a;if(null!=c)for(var e=0,d=c.length;e<d;){var f=e++;f=c[f];if(f==a||l.fa(f,a))return !0}return l.fa(b.Da,a)};l.Za=function(b,a){if(null==a)return !1;switch(a){case Array:return b instanceof Array;case N:return "boolean"==typeof b;case O:return null!=b;case M:return "number"==typeof b;case P:return "number"==typeof b?(b|0)===b:!1;case String:return "string"==typeof b;default:if(null!=b)if("function"==
typeof a){if(l.Xa(b,a))return !0}else {if("object"==typeof a&&l.bb(a)&&b instanceof a)return !0}else return !1;return a==Q&&null!=b.l||a==R&&null!=b.Ya?!0:!1}};l.Xa=function(b,a){return b instanceof a?!0:a.ab?l.fa(l.qb(b),a):!1};l.Wa=function(b,a){if(null==b||l.Za(b,a))return b;throw u.Jb("Cannot cast "+m.o(b)+" to "+m.o(a));};l.Ba=function(b){b=l.eb.call(b).slice(8,-1);return "Object"==b||"Function"==b||"Math"==b||"JSON"==b?null:b};l.bb=function(b){return null!=l.Ba(b)};l.cb=function(b){return A[b]};
var t;A.ra|=0;"undefined"!=typeof performance&&"function"==typeof performance.now&&(z.now=performance.now.bind(performance));null==String.fromCodePoint&&(String.fromCodePoint=function(b){return 65536>b?String.fromCharCode(b):String.fromCharCode((b>>10)+55232)+String.fromCharCode((b&1023)+56320)});Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0});String.l=!0;Array.l=!0;Date.prototype.H=Date;Date.l="Date";var P={},O={},M=Number,N=Boolean,Q={},R={};l.eb={}.toString;
v.wb();})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:exports);!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.pip=e.bs.player.plugin.pip||{},Math.__name__="Math";var i,n=require("haxe.Reflect"),s=require("bs.player.core.events.ControlEvent"),r=require("bs.player.core.events.VideoEvent");class a{constructor(){a._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=o.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,i=exports.configuration;this.pluginConfig=null!=i&&Object.prototype.hasOwnProperty.call(i,t)?n.field(i,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}a.__name__="bs.player.core.plugin.PluginBase",Object.assign(a.prototype,{__class__:a});class l extends a{constructor(){a._hx_skip_constructor=!0,super(),a._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.availableDispatched=!1,super._hx_constructor();}create(){super.create(),r.add(this.context,"videoMediaElementInit",c(this,this.onVideoMediaElementInit)),r.add(this.context,"playing",c(this,this.onPlaying)),s.add(this.context,"pipToggle",c(this,this.onPipToggle)),s.add(this.context,"pipEnter",c(this,this.onPipEnter)),s.add(this.context,"pipLeave",c(this,this.onPipLeave));}destroy(){r.remove(this.context,"videoMediaElementInit",c(this,this.onVideoMediaElementInit)),r.remove(this.context,"playing",c(this,this.onPlaying)),s.remove(this.context,"pipToggle",c(this,this.onPipToggle)),s.remove(this.context,"pipEnter",c(this,this.onPipEnter)),s.remove(this.context,"pipLeave",c(this,this.onPipLeave)),super.destroy();}dispatchActive(){if(this.availableDispatched)return;let e=new s("pipAvailable");e.data=l.isAvailable()&&this.canBeEnabled(),e.dispatch(this.context),this.availableDispatched=e.data;}onVideoMediaElementInit(e){null!=e&&null!=e.data&&(this.videoElement=e.data,this.dispatchActive());}onPlaying(e){r.addOnce(this.context,"currentTimeChange",c(this,this.onVideoMetadataLoaded)),this.dispatchActive();}onVideoMetadataLoaded(e){this.dispatchActive();}onPipToggle(e){this.isVideoOpenedInPip()?new s("pipLeave").dispatch(this.context):new s("pipEnter").dispatch(this.context);}onPipEnter(e){let t=this;l.isAvailable()&&this.canBeEnabled()&&(this.videoElement.addEventListener("enterpictureinpicture",c(this,this.onVideoEnterPip)),n.isFunction(c(i=this.videoElement,i.webkitSupportsPresentationMode))&&n.isFunction(c(i=this.videoElement,i.webkitSetPresentationMode))?(this.videoElement.webkitSetPresentationMode("picture-in-picture"==this.videoElement.webkitPresentationMode?"inline":"picture-in-picture"),this.onPipEntered(e)):this.videoElement.requestPictureInPicture().then((function(i){t.onPipEntered(e);})).catch((function(e){console.error(e);})));}onPipEntered(e){navigator&&navigator.mediaSession&&(navigator.mediaSession.setActionHandler("play",c(this,this.onPlayClickInPipView)),navigator.mediaSession.setActionHandler("pause",c(this,this.onPauseClickInPipView)));}onPipLeave(e){if(l.isAvailable()){let e=window.document;null!=e.exitPictureInPicture&&null!=e.pictureInPictureElement&&e.exitPictureInPicture().catch((function(e){console.error(e);}));}}onVideoEnterPip(e){this.videoElement.addEventListener("leavepictureinpicture",c(this,this.onVideoLeavePip)),new s("pipEntered").dispatch(this.context);}onVideoLeavePip(e){this.videoElement.removeEventListener("leavepictureinpicture",c(this,this.onVideoLeavePip)),new s("pipLeaved").dispatch(this.context);}onPlayClickInPipView(){new s("skinPlay").dispatch(this.context);}onPauseClickInPipView(){new s("skinPause").dispatch(this.context);}canBeEnabled(){if(null==this.videoElement)return !1;let e=null!=this.videoElement.requestPictureInPicture;n.isFunction(c(i=this.videoElement,i.webkitSupportsPresentationMode))&&n.isFunction(c(i=this.videoElement,i.webkitSetPresentationMode))&&(e=1==this.videoElement.webkitSupportsPresentationMode("picture-in-picture"));let t=this.videoElement.readyState>1,s=null!=this.videoElement.seekable&&this.videoElement.seekable.length>0;return !!e&&(!!t||s)}isVideoOpenedInPip(){return null!=this.videoElement&&(document.pictureInPictureElement&&this.videoElement===document.pictureInPictureElement)}static isAvailable(){return "pictureInPictureEnabled"in document}}e.bs.player.plugin.pip.PictureInPicture=l,l.__name__="bs.player.plugin.pip.PictureInPicture",Object.assign(l.prototype,{__class__:l});class o{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=o.__nativeClassName(e);return null!=i?o.__resolveNativeClass(i):null}}static __nativeClassName(e){let t=o.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __resolveNativeClass(e){return t[e]}}function c(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[i.__id__],null==n&&(n=i.bind(e),e.hx__closures__[i.__id__]=n),n);var n;}o.__name__="js.Boot",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",o.__toStr={}.toString,a._hx_skip_constructor=!1,l.__plugfaces__="IPlugin";}(exports,window);!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.casting=e.bs.player.plugin.casting||{},Math.__name__="Math";var i=require("haxe.Reflect"),a=require("bs.player.core.events.ControlEvent"),s=require("bs.player.core.events.VideoEvent");class l{constructor(){l._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=o.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,a=exports.configuration;this.pluginConfig=null!=a&&Object.prototype.hasOwnProperty.call(a,t)?i.field(a,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}l.__name__="bs.player.core.plugin.PluginBase",Object.assign(l.prototype,{__class__:l});class n extends l{constructor(){l._hx_skip_constructor=!0,super(),l._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.availableDispatched=!1,this.isAvailable=!1,super._hx_constructor();}create(){super.create(),s.add(this.context,"videoMediaElementInit",h(this,this.onVideoMediaElementInit)),s.add(this.context,"playing",h(this,this.onPlaying)),s.add(this.context,"paused",h(this,this.onPaused)),a.add(this.context,"airplay",h(this,this.onAirplayOpen)),a.add(this.context,"chromecastAvailable",h(this,this.onChromecastAvailable));}destroy(){s.remove(this.context,"videoMediaElementInit",h(this,this.onVideoMediaElementInit)),s.remove(this.context,"playing",h(this,this.onPlaying)),s.remove(this.context,"paused",h(this,this.onPaused)),a.remove(this.context,"airplay",h(this,this.onAirplayOpen)),a.remove(this.context,"chromecastAvailable",h(this,this.onChromecastAvailable)),super.destroy();}onChromecastAvailable(e){null!=e&&0!=e.data&&1!=this.availableDispatched&&this.destroy();}dispatchActive(){if(this.availableDispatched)return;let e=new a("airplayAvailable");e.data=this.isAvailable,e.dispatch(this.context),this.availableDispatched=e.data;}onAirplayOpen(e){this.openAirplayMenu();}onVideoMediaElementInit(e){null!=e&&null!=e.data&&(this.videoElement=e.data,null!=this.videoElement&&this.isCastingSupportedByDevice()&&(this.videoElement.addEventListener("webkitplaybacktargetavailabilitychanged",h(this,this.onAirplayAvailabilityChange)),this.videoElement.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",h(this,this.onAirplayPlaybackUpdate))));}onAirplayAvailabilityChange(e){return null!=e&&(this.isAvailable="available"==e.availability,this.dispatchActive()),null}onAirplayPlaybackUpdate(e){return this.shouldResumePlayback=this.videoElement.webkitCurrentPlaybackTargetIsWireless,this.stopTokenTimer(),this.shouldResumePlaybackTimer=r.delay(h(this,this.onTokenTimeout),1500),this.shouldResumePlayback?new s("videoCastingStart").dispatch(this.context):new s("videoCastingEnd").dispatch(this.context),null}stopTokenTimer(){null!=this.shouldResumePlaybackTimer&&(this.shouldResumePlaybackTimer.stop(),this.shouldResumePlaybackTimer=null);}onTokenTimeout(){this.stopTokenTimer(),this.shouldResumePlayback=!1;}onPlaying(e){this.dispatchActive(),s.addOnce(this.context,"currentTimeChange",h(this,this.onVideoMetadataLoaded));}onVideoMetadataLoaded(e){this.dispatchActive();}onPaused(e){this.shouldResumePlayback&&(this.stopTokenTimer(),this.shouldResumePlayback=!1,new a("skinPlay").dispatch(this.context));}isCastingSupportedByDevice(){return "WebKitPlaybackTargetAvailabilityEvent"in window}openAirplayMenu(){this.isCastingSupportedByDevice()&&this.isAvailable&&this.videoElement.webkitShowPlaybackTargetPicker();}}e.bs.player.plugin.casting.AirPlay=n,n.__name__="bs.player.plugin.casting.AirPlay",Object.assign(n.prototype,{__class__:n});var r=require("haxe.Timer");class o{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=o.__nativeClassName(e);return null!=i?o.__resolveNativeClass(i):null}}static __nativeClassName(e){let t=o.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __resolveNativeClass(e){return t[e]}}function h(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:a=e.hx__closures__[i.__id__],null==a&&(a=i.bind(e),e.hx__closures__[i.__id__]=a),a);var a;}o.__name__="js.Boot",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",o.__toStr={}.toString,l._hx_skip_constructor=!1,n.RESUME_PLAYBACK_TIMEWINDOW=1500,n.__plugfaces__="IPlugin";}(exports,window);!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.casting=e.bs.player.plugin.casting||{},Math.__name__="Math";var s=require("haxe.Reflect"),r=require("bs.player.core.events.ControlEvent");class a{constructor(){a._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=_.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,r=exports.configuration;this.pluginConfig=null!=r&&Object.prototype.hasOwnProperty.call(r,t)?s.field(r,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}a.__name__="bs.player.core.plugin.PluginBase",Object.assign(a.prototype,{__class__:a});var i=require("bs.player.core.plugin.chromecast.ChromecastSender");class l extends a{constructor(){a._hx_skip_constructor=!0,super(),a._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.availableDispatched=!1,super._hx_constructor();}create(){if(super.create(),!this.isCastingSupportedByDevice())return;let e=null;Object.prototype.hasOwnProperty.call(this.pluginConfig,"castAppId")&&(e=s.field(this.pluginConfig,"castAppId")),this.sender=new i(this.context,o(this,this.onChromecastApiLoad),e),r.add(this.context,"airplayAvailable",o(this,this.onAirplayAvailable));}destroy(){null!=this.sender&&(this.sender.destroy(),this.sender=null),r.remove(this.context,"airplayAvailable",o(this,this.onAirplayAvailable)),super.destroy();}onAirplayAvailable(e){null!=e&&0!=e.data&&1!=this.availableDispatched&&this.destroy();}dispatchActive(){if(this.availableDispatched)return;let e=new r("chromecastAvailable");e.data=this.isAvailable,e.dispatch(this.context),this.availableDispatched=e.data;}isCastingSupportedByDevice(){return "Firefox"!=n.browserName}onChromecastApiLoad(){null!=this.sender&&(this.isAvailable=this.sender.get_isAvailable(),this.dispatchActive());}}e.bs.player.plugin.casting.Chromecast=l,l.__name__="bs.player.plugin.casting.Chromecast",Object.assign(l.prototype,{__class__:l});var n=require("bs.util.BrowserTools");class _{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let s=_.__nativeClassName(e);return null!=s?_.__resolveNativeClass(s):null}}static __nativeClassName(e){let t=_.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __resolveNativeClass(e){return t[e]}}function o(e,s){return null==s?null:(null==s.__id__&&(s.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:r=e.hx__closures__[s.__id__],null==r&&(r=s.bind(e),e.hx__closures__[s.__id__]=r),r);var r;}_.__name__="js.Boot",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",_.__toStr={}.toString,a._hx_skip_constructor=!1,l.CUSTOM_CAST_APP_ID_KEY="castAppId",l.__plugfaces__="IPlugin";}(exports,window);!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.javascriptapi=e.bs.player.plugin.javascriptapi||{};var s={},i=require("haxe.HxOverrides");Math.__name__="Math";var a=require("haxe.Reflect");class n{static createInstance(e,t){return new(Function.prototype.bind.apply(e,[null].concat(t)))}}s.Type=n,n.__name__="Type";var r=require("bs.player.core.events.AdEvent"),o=require("bs.player.core.events.ControlEvent"),l=require("bs.player.core.events.DataProviderEvent"),c=require("bs.player.core.events.DisplayEvent"),h=require("bs.player.core.events.ResizeEvent"),u=require("bs.player.core.events.VideoEvent"),p=require("bs.player.core.manager.EventHub"),d=require("bs.player.core.model.Media"),_=require("bs.player.core.model.Live"),g=require("bs.player.core.model.Catchup"),v=require("bs.player.core.model.LiveStream"),m=require("bs.player.core.model.LiveChannel"),y=require("bs.player.core.model.LiveProgramStream"),x=require("bs.player.core.model.SubtitlesSet"),b=require("bs.player.core.model.AudioSet"),C=require("bs.player.core.model.Episode");class E{constructor(){E._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=S.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,t)?a.field(s,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}s["bs.player.core.plugin.PluginBase"]=E,E.__name__="bs.player.core.plugin.PluginBase",Object.assign(E.prototype,{__class__:E});class w{}s["bs.player.plugin.javascriptapi.IEventsFilter"]=w,w.__name__="bs.player.plugin.javascriptapi.IEventsFilter",Object.assign(w.prototype,{__class__:w});class f extends E{constructor(){E._hx_skip_constructor=!0,super(),E._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.message=null,super._hx_constructor(),this.videoEventsFilterByContext=new k,null!=this.pluginConfig&&Object.prototype.hasOwnProperty.call(this.pluginConfig,"customVideoEventsFilterClass")&&(this.customVideoEventsFilterClass=a.field(this.pluginConfig,"customVideoEventsFilterClass"));}create(){super.create(),o.add(this.context,"close",I(this,this.onClose)),u.add(this.context,"durationChange",I(this,this.onDurationChange)),u.add(this.context,"currentTimeChange",I(this,this.onCurrentTimeChange)),l.add(this.context,"mediaMetadataData",I(this,this.onMetadataData)),l.add(this.context,"adMetadataData",I(this,this.onAdMetadataData)),c.add(this.context,"showMessage",I(this,this.onShowMessage)),c.add(this.context,"closeMessage",I(this,this.onCloseMessage)),this.pictureInPicture=new T(this.context);}destroy(){this.getOrCreateEventsFilterByContext(this.context).onPlayerDestroy(),null!=this.pictureInPicture&&this.pictureInPicture.destroy(),o.remove(this.context,"close",I(this,this.onClose)),u.remove(this.context,"durationChange",I(this,this.onDurationChange)),u.remove(this.context,"currentTimeChange",I(this,this.onCurrentTimeChange)),l.remove(this.context,"mediaMetadataData",I(this,this.onMetadataData)),c.remove(this.context,"showMessage",I(this,this.onShowMessage)),c.remove(this.context,"closeMessage",I(this,this.onCloseMessage)),super.destroy();}getVersion(){return "v2.14.364"}onClose(e){null!=this.onCloseBind&&this.onCloseBind(e);}play(){if(null!=this.adMedia){let e=new r("adAdClick");e.data={url:null},e.dispatch(this.context);}else new o("skinPlay").dispatch(this.context);}pause(){new o("skinPause").dispatch(this.context);}playPause(){new o("skinPlayPause").dispatch(this.context);}seek(e){e>this.durationTime&&(e=this.durationTime-.5),e<0&&(e=0),this.currentTime=e;let t=new o("skinSeek");t.data=e,t.dispatch(this.context);}seekRelative(e){let t=this;if(null!=this.currentTime)this.seek(this.currentTime+e);else if(this.media instanceof _){let s=!1;u.addOnce(this.context,"currentTimeChange",(function(i){s||(s=!0,t.pause(),null!=t.currentTime&&t.seekRelative(e));})),this.play();}else this.seek(e);}setVolume(e){let t=new o("skinVolume");t.data=e,t.dispatch(this.context);}setMute(e){new o(e?"skinMute":"skinUnmute").dispatch(this.context);}setSubtitlesById(e){let t=new o("selectSubtitles");null!=e&&(t.data=new x,t.data.id=e),t.dispatch(this.context);}setAudioById(e){let t=new o("selectAudio");null!=e&&(t.data=new b,t.data.id=e),t.dispatch(this.context);}toggleFullscreen(){new o("fullscreenToggleRequest").dispatch(this.context);}repaint(){new h("repaint").dispatch(this.context);}on(e,t){"close"==e&&(this.onCloseBind=t);}add(e,t){try{let s,i,a=e.split(".");a.length>2?(i=a.pop(),s=a.join(".")):(i=a.pop(),s="bs.player.core.events."+a.join("")),null!=this.customVideoEventsFilterClass&&s==u.__name__||M.mobile&&s==u.__name__?this.getOrCreateEventsFilterByContext(this.context).add(i,t):p.getInstance().add(this.context,s,i,t);}catch(e){let t=O.caught(e).unwrap();console.error(t);}}addOnce(e,t){try{let s,i,a=e.split(".");a.length>2?(i=a.pop(),s=a.join(".")):(i=a.pop(),s="bs.player.core.events."+a.join("")),null!=this.customVideoEventsFilterClass&&s==u.__name__||M.mobile&&s==u.__name__?this.getOrCreateEventsFilterByContext(this.context).addOnce(i,t):p.getInstance().addOnce(this.context,s,i,t);}catch(e){let t=O.caught(e).unwrap();console.error(t);}}remove(e,t){try{let s,i,a=e.split(".");a.length>2?(i=a.pop(),s=a.join(".")):(i=a.pop(),s="bs.player.core.events."+a.join("")),null!=this.customVideoEventsFilterClass&&s==u.__name__||M.mobile&&s==u.__name__?this.getOrCreateEventsFilterByContext(this.context).remove(i,t):p.getInstance().remove(this.context,s,i,t);}catch(e){let t=O.caught(e).unwrap();console.error(t);}}getVideoMetrics(){let e={};return u.addOnce(this.context,"setMetrics",(function(t){e=t.data;})),new u("getMetrics").dispatch(this.context),e}getOrCreateEventsFilterByContext(e){if(!Object.prototype.hasOwnProperty.call(this.videoEventsFilterByContext.h,this.context)){let e=null;if(null!=this.customVideoEventsFilterClass){let t=this.customVideoEventsFilterClass;e=n.createInstance(s[t],[this.context]);}else e=new P(this.context);this.videoEventsFilterByContext.h[this.context]=e;}return this.videoEventsFilterByContext.h[this.context]}onDurationChange(e){this.durationTime=e.data.duration;}onCurrentTimeChange(e){let t=this.currentTime!=e.data.currentTime;this.currentTime=e.data.currentTime,this.durationTime=e.data.duration,t&&(this.lastCurrentTimeChangeTs=(new Date).getTime()/1e3),this.media=e.data.media,this.adMedia=null,1==e.data.duration&&this.media instanceof _&&(e.data.duration=1/0);}onMetadataData(e){if(null!=e){let t=e.data;this.media=t,this.durationTime=t.duration;}}onAdMetadataData(e){null!=e&&(this.adMedia=e.data);}onShowMessage(e){null!=e&&(this.message=e.data);}onCloseMessage(e){this.message=null;}appGoingBackground(){new o("appGoingBackground").dispatch(this.context);}appGoingForeground(){new o("appGoingForeground").dispatch(this.context);}requestVideoQualityChange(e){let t=new o("requestVideoQualityChange");t.data=e,t.dispatch(this.context);}playerInfoShow(){new o("playerInfoShow").dispatch(this.context);}playerInfoHide(){new o("playerInfoHide").dispatch(this.context);}searchForThumbByTime(e,t){null!=this.get_player().modules.BradmaxThumbnailsService?this.get_player().modules.BradmaxThumbnailsService.searchForThumbByTime(e,t):t(null);}restartSkinHide(){new c("animateShow").dispatch(this.context);}mediaType(e){let t=null;return e instanceof d&&(e instanceof _?(t="Live",e instanceof v?t="LiveStream":e instanceof m?t="LiveChannel":e instanceof y&&(t="LiveProgramStream")):e instanceof g?t="Catchup":e instanceof C&&(t="Episode")),t}}s["bs.player.plugin.javascriptapi.JavascriptApi"]=e.bs.player.plugin.javascriptapi.JavascriptApi=f,f.__name__="bs.player.plugin.javascriptapi.JavascriptApi",Object.assign(f.prototype,{__class__:f});class T{constructor(e){this.context=e;}destroy(){this.leave();}leave(){new o("pipLeave").dispatch(this.context);}}s["bs.player.plugin.javascriptapi.JavascriptApiPictureInPicture"]=T,T.__name__="bs.player.plugin.javascriptapi.JavascriptApiPictureInPicture",Object.assign(T.prototype,{__class__:T});class P{constructor(e){this.context=e,this.holdedVideoPlayingEvent=null,this.listenersMap=new k,this.trackedVideoEvents=[],this.trackedVideoEvents.push("playing"),this.trackedVideoEvents.push("paused"),this.trackedVideoEvents.push("stopped"),this.trackedVideoEvents.push("complete"),this.attachInternalListeners();}attachInternalListeners(){let e=0,t=this.trackedVideoEvents;for(;e<t.length;){let s=t[e++];p.getInstance().add(this.context,u.__name__,s,I(this,this.onVideoEvent));}}dispatchEvent(e){if(Object.prototype.hasOwnProperty.call(this.listenersMap.h,e.type)){let t=0,s=this.listenersMap.h[e.type];for(;t<s.length;)s[t++](e);}}onVideoEvent(e){null==this.holdedVideoPlayingEvent?"playing"==e.type?(this.holdedVideoPlayingEvent=e,this.waitingPauseTimeoutTimer=j.delay(I(this,this.onWaitingPauseTimeout),50)):this.dispatchEvent(e):("paused"!=e.type&&(this.dispatchEvent(this.holdedVideoPlayingEvent),this.dispatchEvent(e)),this.waitingPauseTimeoutTimer.stop(),this.waitingPauseTimeoutTimer=null,this.holdedVideoPlayingEvent=null);}onWaitingPauseTimeout(){null!=this.holdedVideoPlayingEvent&&this.dispatchEvent(this.holdedVideoPlayingEvent),null!=this.waitingPauseTimeoutTimer&&this.waitingPauseTimeoutTimer.stop(),this.waitingPauseTimeoutTimer=null,this.holdedVideoPlayingEvent=null;}add(e,t){if(-1!=this.trackedVideoEvents.indexOf(e)){if(!Object.prototype.hasOwnProperty.call(this.listenersMap.h,e)){let t=[];this.listenersMap.h[e]=t;}this.listenersMap.h[e].push(t);}else p.getInstance().add(this.context,u.__name__,e,t);}addOnce(e,t){let s=this;if(-1!=this.trackedVideoEvents.indexOf(e)){let i=function(i){t(i),s.remove(e,t);};this.add(e,i);}else p.getInstance().add(this.context,u.__name__,e,t);}remove(e,t){if(-1!=this.trackedVideoEvents.indexOf(e)){if(!Object.prototype.hasOwnProperty.call(this.listenersMap.h,e))return;i.remove(this.listenersMap.h[e],t);}else p.getInstance().remove(this.context,u.__name__,e,t);}onPlayerDestroy(){}}s["bs.player.plugin.javascriptapi.VideoEventsFilterForMobile"]=P,P.__name__="bs.player.plugin.javascriptapi.VideoEventsFilterForMobile",Object.assign(P.prototype,{__class__:P});var M=require("bs.util.BrowserTools");class V{}s["haxe.IMap"]=V,V.__name__="haxe.IMap";class O extends Error{constructor(e,t,s){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=s?s:this;}unwrap(){return this.__nativeException}static caught(e){return e instanceof O?e:e instanceof Error?new O(e.message,null,e):new F(e,null,e)}}s["haxe.Exception"]=O,O.__name__="haxe.Exception",Object.assign(O.prototype,{__class__:O});var j=require("haxe.Timer");class F extends O{constructor(e,t,s){super(String(e),t,s),this.value=e;}unwrap(){return this.value}}s["haxe.ValueException"]=F,F.__name__="haxe.ValueException",Object.assign(F.prototype,{__class__:F});var k=require("haxe.ds.StringMap");class S{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let s=S.__nativeClassName(e);return null!=s?S.__resolveNativeClass(s):null}}static __nativeClassName(e){let t=S.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __resolveNativeClass(e){return t[e]}}function I(e,s){return null==s?null:(null==s.__id__&&(s.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[s.__id__],null==i&&(i=s.bind(e),e.hx__closures__[s.__id__]=i),i);var i;}s["js.Boot"]=S,S.__name__="js.Boot",t.$haxeUID|=0,s.Math=Math,Object.defineProperty(String.prototype,"__class__",{value:s.String=String,enumerable:!1,writable:!0}),String.__name__="String",s.Array=Array,Array.__name__="Array",Date.prototype.__class__=s.Date=Date,Date.__name__="Date",S.__toStr={}.toString,E._hx_skip_constructor=!1,f.__plugfaces__="IPlugin";}(exports,window);!function(t,e){t.bs=t.bs||{},t.bs.player=t.bs.player||{},t.bs.player.plugin=t.bs.player.plugin||{},t.bs.player.plugin.keyboard=t.bs.player.plugin.keyboard||{},Math.__name__="Math";var i=require("haxe.Reflect"),s=require("bs.player.core.events.ControlEvent"),n=require("bs.player.core.events.DisplayEvent"),r=require("bs.player.core.events.VideoEvent");class a{constructor(){a._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let t=o.getClass(this);this.pluginName=t.__name__.split(".").pop();let e=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,e)?i.field(s,e):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(t){return !0}registerPlugin(t){}getPluginVersion(){return "v2.14.364"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(t){return this.player=t}get_variables(){return this.variables}set_variables(t){return this.variables=t}get_eventHub(){return this.eventHub}set_eventHub(t){return this.eventHub=t}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(t){return this.parentDisplay=t}get_display(){return this.display}}a.__name__="bs.player.core.plugin.PluginBase",Object.assign(a.prototype,{__class__:a});class l extends a{constructor(){a._hx_skip_constructor=!0,super(),a._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.hasFocus=!1,super._hx_constructor(),this.videoCurrentTime=null,this.videoDurration=null;}create(){super.create(),u.mobile||(window.document.addEventListener("keydown",_(this,this.onKeyDown),!1),this.get_parentDisplay().addEventListener("mouseup",_(this,this.onMouseUp),!1),1==this.get_variables().autoplay&&this.buildInput(),r.add(this.context,"currentTimeChange",_(this,this.onVideoTimeChange)));}onVideoTimeChange(t){null!=t&&null!=t.data&&(this.videoCurrentTime=t.data.currentTime,this.videoDurration=t.data.duration);}destroy(){r.remove(this.context,"currentTimeChange",_(this,this.onVideoTimeChange)),window.document.removeEventListener("keydown",_(this,this.onKeyDown)),this.get_parentDisplay().removeEventListener("mouseup",_(this,this.onMouseUp)),super.destroy();}onMouseUp(t){this.buildInput();}buildInput(){null==this.input&&(this.input=window.document.createElement("input"),this.input.style.zIndex="-1",this.input.style.opacity="0",this.input.style.position="absolute",this.input.style.top="-20px",this.input.style.left="-100px",this.input.style.height="20px",this.input.style.width="100px",this.input.addEventListener("blur",_(this,this.destroyInput),!1),this.get_parentDisplay().insertBefore(this.input,this.get_parentDisplay().firstChild)),this.hasFocus=!0,this.input.focus();}destroyInput(t){this.hasFocus=!1,null!=this.input&&(this.input.removeEventListener("blur",_(this,this.destroyInput),!1),this.get_parentDisplay().removeChild(this.input)),this.input=null;}onKeyDown(t){32==t.keyCode&&this.dispatchPlayPause(),39==t.keyCode&&this.seekForward(),37==t.keyCode&&this.seekBackward();}seekForward(){if(null==this.videoCurrentTime||null==this.videoDurration)return;let t=this.videoCurrentTime+10;t>this.videoDurration&&(t=this.videoDurration);let e=new s("skinSeek");e.data=t,e.dispatch(this.context),new n("animateShow").dispatch(this.context);}seekBackward(){if(null==this.videoCurrentTime||null==this.videoDurration)return;let t=this.videoCurrentTime-10;t<0&&(t=0);let e=new s("skinSeek");e.data=t,e.dispatch(this.context),new n("animateShow").dispatch(this.context);}dispatchPlayPause(){this.hasFocus&&(new s("skinPlayPause").dispatch(this.context),new n("animateShow").dispatch(this.context));}}t.bs.player.plugin.keyboard.KeyboardSupport=l,l.__name__="bs.player.plugin.keyboard.KeyboardSupport",Object.assign(l.prototype,{__class__:l});var u=require("bs.util.BrowserTools");class o{static getClass(t){if(null==t)return null;if(t instanceof Array)return Array;{let e=t.__class__;if(null!=e)return e;let i=o.__nativeClassName(t);return null!=i?o.__resolveNativeClass(i):null}}static __nativeClassName(t){let e=o.__toStr.call(t).slice(8,-1);return "Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e}static __resolveNativeClass(t){return e[t]}}function _(t,i){return null==i?null:(null==i.__id__&&(i.__id__=e.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:s=t.hx__closures__[i.__id__],null==s&&(s=i.bind(t),t.hx__closures__[i.__id__]=s),s);var s;}o.__name__="js.Boot",e.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",o.__toStr={}.toString,a._hx_skip_constructor=!1,l.SEEK_STEP=10,l.__plugfaces__="IPlugin";}(exports,window);const e={default:{season:"Season",episode:"Episode",language:"Language",subtitles:"Subtitles",channels:"Channels",live_tv:"Live TV",error:"Error",warning:"Warning",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Advertising",video_quality:"Video quality",advertisement_title_on_progressbar:"The program starts right after the ad-break:",advertisement_skip_label:"Skip ad"},en:{season:"Season",episode:"Episode",language:"Language",subtitles:"Subtitles",channels:"Channels",live_tv:"Live TV",error:"Error",warning:"Warning",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Advertising",video_quality:"Video quality",advertisement_title_on_progressbar:"The program starts right after the ad-break:",advertisement_skip_label:"Skip ad"},no:{season:"Sesong",episode:"Episode",language:"Språk",subtitles:"Undertekst",channels:"Kanaler",live_tv:"Direkte-TV",error:"Error",warning:"Advarsel",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Reklame",video_quality:"Video kvalitet",advertisement_title_on_progressbar:"Programmet starter rett etter annonse-pausen:",advertisement_skip_label:"Hoppe over annonsend"},da:{season:"Sæson",episode:"Episode",language:"Sprog",subtitles:"Undertekster",channels:"Kanaler",live_tv:"Kanaler",error:"Error",warning:"Advarsel",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Reklame",video_quality:"Videokvalitet",advertisement_title_on_progressbar:"Programmet starter lige efter annoncepausen:",advertisement_skip_label:"Spring annoncen over"},fi:{season:"Kausi",episode:"Jakso",language:"Kieli",subtitles:"Tekstitykset",channels:"Kanavat",live_tv:"Live-TV",error:"Error",warning:"Varoitus",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Mainonta",video_quality:"Videon laatu",advertisement_title_on_progressbar:"Ohjelma käynnistyy heti mainoskatkon jälkeen:",advertisement_skip_label:"Ohita mainos"},sv:{season:"Säsong",episode:"Avsnitt",language:"Språk",subtitles:"Textning",channels:"Kanaler",live_tv:"Kanaler",error:"Error",warning:"Varning",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Reklam",video_quality:"Videokvalitét",advertisement_title_on_progressbar:"Programmet startar direkt efter annons pausen:",advertisement_skip_label:"Hoppa över annonsen"},pl:{season:"Sezon",episode:"Epizod",language:"Język",subtitles:"Napisy",channels:"Programy",live_tv:"Na żywo",error:"Błąd",warning:"Uwaga",details:"Szczegóły",cannot_load_media:"Odtwarzacz nie mógł zdekodować dostarczonego wideo. Wideo może być uszkodzone lub twoja przeglądarka nie wspiera dostarczonego formatu wideo.",connection_error:"Utracono połączenie z serwerem. Sprawdź połączenie internetowe i kliknik przycisk 'Połącz'.",connection_error_permanent:"Brak połączenia z serwerem. Link do strumienia jest uszkodzony lub coś blokuje komunikację między przeglądarką a serwerem.",try_again:"Połącz",embed_code:"Embed code",embed_code_copy:"kopiuj do schowka",embed_code_info:"naciśnij Ctrl+C, aby skopiować",advertisement_bar_title:"Reklama",video_quality:"Jakość",advertisement_title_on_progressbar:"Program rozpocznie się zaraz po reklamach:",advertisement_skip_label:"Pomiń reklamę"}};var mp4="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw";
exports.dashjs=bradmax.dashjs;delete bradmax.dashjs;exports.i18n=e;exports.mp4=mp4;

exports.configuration={"Chromecast":{},"KeyboardSupport":{},"BradmaxAnalytics":{},"Video":{},"JavascriptApi":{},"VideoHlsJs":{},"PictureInPicture":{},"AirPlay":{},"VideoDashJs":{},"AdvertisementDataProvider":{},"HtmlSkin":{"name":"techno","color":"rgb(255, 255, 255)","layout":"https://bradm.ax/player/VERSION/theme/techno/layout.html","styles":["https://bradm.ax/player/VERSION/theme/techno/style.css"],"font":{"id":"inter_google_font","name":"Inter","src":"https://fonts.googleapis.com/css2?family=Inter&display=swap","fetch":true,"size":"14px","family":["Inter","sans-serif"]},"icon":{"font":{"id":"material_symbols_sharp","name":"Material Symbols Sharp","src":"https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=block&text=%EE%81%95%EE%A0%AA%EE%81%88%EE%A2%AA%EE%8C%87%EE%85%8D%EE%81%84%EE%A2%94%EE%97%90%EE%97%91%EE%A6%BD%EE%81%A3%EE%80%B4%EE%80%B7%EE%81%82%EE%A2%B8%EE%9A%B8%EE%81%8E%EE%81%8D%EE%81%90%EE%81%8F%EE%97%8D%EE%97%8B%EE%97%8C%EE%8C%96%EE%8C%93%EE%8E%9E%EE%A7%BE%EE%87%81%EE%A3%BF%EE%A4%80%EE%A2%B6%EF%98%A2","fetch":true,"family":["Material Symbols Sharp"],"size":"24px","variation":{"FILL":0,"wght":400,"GRAD":0,"opsz":48},"code":{"airplay":"e055","alert":"e82a","subtitles":"e048","pip":"e8aa","chromecast":"e307","copy":"e14d","play-next":"e044","language":"e894","maximize":"e5d0","minimize":"e5d1","menu":"e9bd","audio":"e063","pause":"e034","play":"e037","replay":"e042","quality":"e8b8","share":"e6b8","volume":"e04e","volume-1":"e04d","volume-2":"e050","volume-x":"e04f","close":"e5cd","left":"e5cb","right":"e5cc","up":"e316","down":"e313","center":"e39e","vr":"e9fe","gyroscope":"e1c1","zoom-plus":"e8ff","zoom-minus":"e900","zoom-reset":"e8b6","playback-rate":"f622"}}},"share":{"font":{"id":"bradmax_share_font","name":"bradmax share font","src":"https://bradm.ax/player/VERSION/theme/font/share.icons.css","fetch":true,"family":["bradmax-theme-share-icons"],"size":"24px","code":{"facebook":"e900","linkedin":"e901","twitter":"e902","code":"e903","mail":"e904"}}},"prefix":"bmp","css":{"adPlaying":"iab-playing","vpaidPlaying":"vpaid-playing"}},"BradmaxDataProvider":{},"FreeWheel":{}};exports.variables={"skin":{"icon":{"font":{"id":"bootstrap_1103","name":"Bootstrap Icons 1.11.1","src":"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css","family":["bootstrap-icons"],"code":{"airplay":"f248","alert":"f333","subtitles":"f165","pip":"f4ef","chromecast":"f248","copy":"f290","play-next":"f7f4","language":"f658","maximize":"f3df","minimize":"f3de","menu":"f5d3","audio":"f49f","pause":"f4c4","play":"f4f5","replay":"f117","quality":"f3e5","share":"f52e","volume":"f60f","volume-1":"f60b","volume-2":"f611","volume-x":"f60d","close":"f62a","error":"f1dc","left":"f12c","right":"f135","up":"f148","down":"f128","center":"f518","vr":"f645","gyroscope":"f77c","zoom-plus":"f62c","zoom-minus":"f62d","zoom-reset":"f52a","playback-rate":"f292"}}}},"logoLink":"https://github.com/MIFNtechnology/siaranMy/blob/369f851aadb52fc9b0a048e54f2153c81536a2d6/logo/Tv1.png","logoLinkTarget":"_self","logoXPosition":"right","bradmaxAnalytics":{"clientToken":"GYFUF_m~QsQuIUy_z~jInQsQeSA5G_T~iIcQPQ"}};exports.bs.player.composer.Embeder.main();})();