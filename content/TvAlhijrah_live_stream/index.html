<!DOCTYPE html>
	<html>
		<head>
			<script src="//cdn.jsdelivr.net/npm/eruda">
			</script>
			<script>eruda.init();</script>
			<meta charset="UTF-8">
				<title>TV ALHIJRAH</title>
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<link rel="stylesheet" href="https://ejunds.github.io/mifn-iptv/style.css">
			<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.1.1/shaka-player.ui.min.js">
			</script>
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.1.1/controls.min.css">
			</script>
		</head>
		<body>
			<center>
				<div data-shaka-player-container="" style="width: 100%; height: 100%; cursor: none;" class="shaka-mobile shaka-video-container" shaka-controls="true">
					<video autoplay="" data-shaka-player="" id="video" style="width:100%;height:100%;" class="shaka-video" src="">
					</video>
				</div>
				<script>
	async function init() {
      const video = document.getElementById('video');
      const ui = video['ui'];
      const controls = ui.getControls();
      const player = controls.getPlayer();

      player.configure({
        drm: {
          clearKeys: {
            '41a42fb5af457501c11bb9b158d5a110': '57a8d6f9e3832887db18ea6071118736'
          }
        }
      });

      player.setTextTrackVisibility(true); // Auto ON caption

      window.player = player;
      window.ui = ui;

      player.addEventListener('error', onPlayerErrorEvent);
      controls.addEventListener('error', onUIErrorEvent);

      try {
        await player.load('https://linearjitp-playback.astro.com.my/dash-wv/linear/1113/default_ott.mpd');
        console.log('✅ Stream loaded!');
      } catch (error) {
        onPlayerError(error);
      }
    }

    function onPlayerErrorEvent(errorEvent) { onPlayerError(event.detail); }
    function onPlayerError(error) { console.error('Error code', error.code, 'object', error); }
    function onUIErrorEvent(errorEvent) { onPlayerError(event.detail); }
    function initFailed(errorEvent) { console.error('❌ UI load failed!'); }

    document.addEventListener('shaka-ui-loaded', init);
    document.addEventListener('shaka-ui-load-failed', initFailed);
				</script>
			</center>
		</body>
	</html>
